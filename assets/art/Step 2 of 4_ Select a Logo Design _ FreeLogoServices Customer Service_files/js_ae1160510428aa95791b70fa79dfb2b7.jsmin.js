// Minified using Javascript Aggregator - see /sites/default/files/js/js_ae1160510428aa95791b70fa79dfb2b7.js for original source including licensing information.

(function(window,undefined){var
rootjQuery,readyList,document=window.document,location=window.location,navigator=window.navigator,_jQuery=window.jQuery,_$=window.$,core_push=Array.prototype.push,core_slice=Array.prototype.slice,core_indexOf=Array.prototype.indexOf,core_toString=Object.prototype.toString,core_hasOwn=Object.prototype.hasOwnProperty,core_trim=String.prototype.trim,jQuery=function(selector,context){return new jQuery.fn.init(selector,context,rootjQuery);},core_pnum=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,core_rnotwhite=/\S/,core_rspace=/\s+/,rtrim=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,rquickExpr=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,rsingleTag=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,rvalidchars=/^[\],:{}\s]*$/,rvalidbraces=/(?:^|:|,)(?:\s*\[)+/g,rvalidescape=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,rvalidtokens=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,rmsPrefix=/^-ms-/,rdashAlpha=/-([\da-z])/gi,fcamelCase=function(all,letter){return(letter+"").toUpperCase();},DOMContentLoaded=function(){if(document.addEventListener){document.removeEventListener("DOMContentLoaded",DOMContentLoaded,false);jQuery.ready();}else if(document.readyState==="complete"){document.detachEvent("onreadystatechange",DOMContentLoaded);jQuery.ready();}},class2type={};jQuery.fn=jQuery.prototype={constructor:jQuery,init:function(selector,context,rootjQuery){var match,elem,ret,doc;if(!selector){return this;}
if(selector.nodeType){this.context=this[0]=selector;this.length=1;return this;}
if(typeof selector==="string"){if(selector.charAt(0)==="<"&&selector.charAt(selector.length-1)===">"&&selector.length>=3){match=[null,selector,null];}else{match=rquickExpr.exec(selector);}
if(match&&(match[1]||!context)){if(match[1]){context=context instanceof jQuery?context[0]:context;doc=(context&&context.nodeType?context.ownerDocument||context:document);selector=jQuery.parseHTML(match[1],doc,true);if(rsingleTag.test(match[1])&&jQuery.isPlainObject(context)){this.attr.call(selector,context,true);}
return jQuery.merge(this,selector);}else{elem=document.getElementById(match[2]);if(elem&&elem.parentNode){if(elem.id!==match[2]){return rootjQuery.find(selector);}
this.length=1;this[0]=elem;}
this.context=document;this.selector=selector;return this;}}else if(!context||context.jquery){return(context||rootjQuery).find(selector);}else{return this.constructor(context).find(selector);}}else if(jQuery.isFunction(selector)){return rootjQuery.ready(selector);}
if(selector.selector!==undefined){this.selector=selector.selector;this.context=selector.context;}
return jQuery.makeArray(selector,this);},selector:"",jquery:"1.8.3",length:0,size:function(){return this.length;},toArray:function(){return core_slice.call(this);},get:function(num){return num==null?this.toArray():(num<0?this[this.length+num]:this[num]);},pushStack:function(elems,name,selector){var ret=jQuery.merge(this.constructor(),elems);ret.prevObject=this;ret.context=this.context;if(name==="find"){ret.selector=this.selector+(this.selector?" ":"")+selector;}else if(name){ret.selector=this.selector+"."+name+"("+selector+")";}
return ret;},each:function(callback,args){return jQuery.each(this,callback,args);},ready:function(fn){jQuery.ready.promise().done(fn);return this;},eq:function(i){i=+i;return i===-1?this.slice(i):this.slice(i,i+1);},first:function(){return this.eq(0);},last:function(){return this.eq(-1);},slice:function(){return this.pushStack(core_slice.apply(this,arguments),"slice",core_slice.call(arguments).join(","));},map:function(callback){return this.pushStack(jQuery.map(this,function(elem,i){return callback.call(elem,i,elem);}));},end:function(){return this.prevObject||this.constructor(null);},push:core_push,sort:[].sort,splice:[].splice};jQuery.fn.init.prototype=jQuery.fn;jQuery.extend=jQuery.fn.extend=function(){var options,name,src,copy,copyIsArray,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=false;if(typeof target==="boolean"){deep=target;target=arguments[1]||{};i=2;}
if(typeof target!=="object"&&!jQuery.isFunction(target)){target={};}
if(length===i){target=this;--i;}
for(;i<length;i++){if((options=arguments[i])!=null){for(name in options){src=target[name];copy=options[name];if(target===copy){continue;}
if(deep&&copy&&(jQuery.isPlainObject(copy)||(copyIsArray=jQuery.isArray(copy)))){if(copyIsArray){copyIsArray=false;clone=src&&jQuery.isArray(src)?src:[];}else{clone=src&&jQuery.isPlainObject(src)?src:{};}
target[name]=jQuery.extend(deep,clone,copy);}else if(copy!==undefined){target[name]=copy;}}}}
return target;};jQuery.extend({noConflict:function(deep){if(window.$===jQuery){window.$=_$;}
if(deep&&window.jQuery===jQuery){window.jQuery=_jQuery;}
return jQuery;},isReady:false,readyWait:1,holdReady:function(hold){if(hold){jQuery.readyWait++;}else{jQuery.ready(true);}},ready:function(wait){if(wait===true?--jQuery.readyWait:jQuery.isReady){return;}
if(!document.body){return setTimeout(jQuery.ready,1);}
jQuery.isReady=true;if(wait!==true&&--jQuery.readyWait>0){return;}
readyList.resolveWith(document,[jQuery]);if(jQuery.fn.trigger){jQuery(document).trigger("ready").off("ready");}},isFunction:function(obj){return jQuery.type(obj)==="function";},isArray:Array.isArray||function(obj){return jQuery.type(obj)==="array";},isWindow:function(obj){return obj!=null&&obj==obj.window;},isNumeric:function(obj){return!isNaN(parseFloat(obj))&&isFinite(obj);},type:function(obj){return obj==null?String(obj):class2type[core_toString.call(obj)]||"object";},isPlainObject:function(obj){if(!obj||jQuery.type(obj)!=="object"||obj.nodeType||jQuery.isWindow(obj)){return false;}
try{if(obj.constructor&&!core_hasOwn.call(obj,"constructor")&&!core_hasOwn.call(obj.constructor.prototype,"isPrototypeOf")){return false;}}catch(e){return false;}
var key;for(key in obj){}
return key===undefined||core_hasOwn.call(obj,key);},isEmptyObject:function(obj){var name;for(name in obj){return false;}
return true;},error:function(msg){throw new Error(msg);},parseHTML:function(data,context,scripts){var parsed;if(!data||typeof data!=="string"){return null;}
if(typeof context==="boolean"){scripts=context;context=0;}
context=context||document;if((parsed=rsingleTag.exec(data))){return[context.createElement(parsed[1])];}
parsed=jQuery.buildFragment([data],context,scripts?null:[]);return jQuery.merge([],(parsed.cacheable?jQuery.clone(parsed.fragment):parsed.fragment).childNodes);},parseJSON:function(data){if(!data||typeof data!=="string"){return null;}
data=jQuery.trim(data);if(window.JSON&&window.JSON.parse){return window.JSON.parse(data);}
if(rvalidchars.test(data.replace(rvalidescape,"@").replace(rvalidtokens,"]").replace(rvalidbraces,""))){return(new Function("return "+data))();}
jQuery.error("Invalid JSON: "+data);},parseXML:function(data){var xml,tmp;if(!data||typeof data!=="string"){return null;}
try{if(window.DOMParser){tmp=new DOMParser();xml=tmp.parseFromString(data,"text/xml");}else{xml=new ActiveXObject("Microsoft.XMLDOM");xml.async="false";xml.loadXML(data);}}catch(e){xml=undefined;}
if(!xml||!xml.documentElement||xml.getElementsByTagName("parsererror").length){jQuery.error("Invalid XML: "+data);}
return xml;},noop:function(){},globalEval:function(data){if(data&&core_rnotwhite.test(data)){(window.execScript||function(data){window["eval"].call(window,data);})(data);}},camelCase:function(string){return string.replace(rmsPrefix,"ms-").replace(rdashAlpha,fcamelCase);},nodeName:function(elem,name){return elem.nodeName&&elem.nodeName.toLowerCase()===name.toLowerCase();},each:function(obj,callback,args){var name,i=0,length=obj.length,isObj=length===undefined||jQuery.isFunction(obj);if(args){if(isObj){for(name in obj){if(callback.apply(obj[name],args)===false){break;}}}else{for(;i<length;){if(callback.apply(obj[i++],args)===false){break;}}}}else{if(isObj){for(name in obj){if(callback.call(obj[name],name,obj[name])===false){break;}}}else{for(;i<length;){if(callback.call(obj[i],i,obj[i++])===false){break;}}}}
return obj;},trim:core_trim&&!core_trim.call("\uFEFF\xA0")?function(text){return text==null?"":core_trim.call(text);}:function(text){return text==null?"":(text+"").replace(rtrim,"");},makeArray:function(arr,results){var type,ret=results||[];if(arr!=null){type=jQuery.type(arr);if(arr.length==null||type==="string"||type==="function"||type==="regexp"||jQuery.isWindow(arr)){core_push.call(ret,arr);}else{jQuery.merge(ret,arr);}}
return ret;},inArray:function(elem,arr,i){var len;if(arr){if(core_indexOf){return core_indexOf.call(arr,elem,i);}
len=arr.length;i=i?i<0?Math.max(0,len+i):i:0;for(;i<len;i++){if(i in arr&&arr[i]===elem){return i;}}}
return-1;},merge:function(first,second){var l=second.length,i=first.length,j=0;if(typeof l==="number"){for(;j<l;j++){first[i++]=second[j];}}else{while(second[j]!==undefined){first[i++]=second[j++];}}
first.length=i;return first;},grep:function(elems,callback,inv){var retVal,ret=[],i=0,length=elems.length;inv=!!inv;for(;i<length;i++){retVal=!!callback(elems[i],i);if(inv!==retVal){ret.push(elems[i]);}}
return ret;},map:function(elems,callback,arg){var value,key,ret=[],i=0,length=elems.length,isArray=elems instanceof jQuery||length!==undefined&&typeof length==="number"&&((length>0&&elems[0]&&elems[length-1])||length===0||jQuery.isArray(elems));if(isArray){for(;i<length;i++){value=callback(elems[i],i,arg);if(value!=null){ret[ret.length]=value;}}}else{for(key in elems){value=callback(elems[key],key,arg);if(value!=null){ret[ret.length]=value;}}}
return ret.concat.apply([],ret);},guid:1,proxy:function(fn,context){var tmp,args,proxy;if(typeof context==="string"){tmp=fn[context];context=fn;fn=tmp;}
if(!jQuery.isFunction(fn)){return undefined;}
args=core_slice.call(arguments,2);proxy=function(){return fn.apply(context,args.concat(core_slice.call(arguments)));};proxy.guid=fn.guid=fn.guid||jQuery.guid++;return proxy;},access:function(elems,fn,key,value,chainable,emptyGet,pass){var exec,bulk=key==null,i=0,length=elems.length;if(key&&typeof key==="object"){for(i in key){jQuery.access(elems,fn,i,key[i],1,emptyGet,value);}
chainable=1;}else if(value!==undefined){exec=pass===undefined&&jQuery.isFunction(value);if(bulk){if(exec){exec=fn;fn=function(elem,key,value){return exec.call(jQuery(elem),value);};}else{fn.call(elems,value);fn=null;}}
if(fn){for(;i<length;i++){fn(elems[i],key,exec?value.call(elems[i],i,fn(elems[i],key)):value,pass);}}
chainable=1;}
return chainable?elems:bulk?fn.call(elems):length?fn(elems[0],key):emptyGet;},now:function(){return(new Date()).getTime();}});jQuery.ready.promise=function(obj){if(!readyList){readyList=jQuery.Deferred();if(document.readyState==="complete"){setTimeout(jQuery.ready,1);}else if(document.addEventListener){document.addEventListener("DOMContentLoaded",DOMContentLoaded,false);window.addEventListener("load",jQuery.ready,false);}else{document.attachEvent("onreadystatechange",DOMContentLoaded);window.attachEvent("onload",jQuery.ready);var top=false;try{top=window.frameElement==null&&document.documentElement;}catch(e){}
if(top&&top.doScroll){(function doScrollCheck(){if(!jQuery.isReady){try{top.doScroll("left");}catch(e){return setTimeout(doScrollCheck,50);}
jQuery.ready();}})();}}}
return readyList.promise(obj);};jQuery.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(i,name){class2type["[object "+name+"]"]=name.toLowerCase();});rootjQuery=jQuery(document);var optionsCache={};function createOptions(options){var object=optionsCache[options]={};jQuery.each(options.split(core_rspace),function(_,flag){object[flag]=true;});return object;}
jQuery.Callbacks=function(options){options=typeof options==="string"?(optionsCache[options]||createOptions(options)):jQuery.extend({},options);var
memory,fired,firing,firingStart,firingLength,firingIndex,list=[],stack=!options.once&&[],fire=function(data){memory=options.memory&&data;fired=true;firingIndex=firingStart||0;firingStart=0;firingLength=list.length;firing=true;for(;list&&firingIndex<firingLength;firingIndex++){if(list[firingIndex].apply(data[0],data[1])===false&&options.stopOnFalse){memory=false;break;}}
firing=false;if(list){if(stack){if(stack.length){fire(stack.shift());}}else if(memory){list=[];}else{self.disable();}}},self={add:function(){if(list){var start=list.length;(function add(args){jQuery.each(args,function(_,arg){var type=jQuery.type(arg);if(type==="function"){if(!options.unique||!self.has(arg)){list.push(arg);}}else if(arg&&arg.length&&type!=="string"){add(arg);}});})(arguments);if(firing){firingLength=list.length;}else if(memory){firingStart=start;fire(memory);}}
return this;},remove:function(){if(list){jQuery.each(arguments,function(_,arg){var index;while((index=jQuery.inArray(arg,list,index))>-1){list.splice(index,1);if(firing){if(index<=firingLength){firingLength--;}
if(index<=firingIndex){firingIndex--;}}}});}
return this;},has:function(fn){return jQuery.inArray(fn,list)>-1;},empty:function(){list=[];return this;},disable:function(){list=stack=memory=undefined;return this;},disabled:function(){return!list;},lock:function(){stack=undefined;if(!memory){self.disable();}
return this;},locked:function(){return!stack;},fireWith:function(context,args){args=args||[];args=[context,args.slice?args.slice():args];if(list&&(!fired||stack)){if(firing){stack.push(args);}else{fire(args);}}
return this;},fire:function(){self.fireWith(this,arguments);return this;},fired:function(){return!!fired;}};return self;};jQuery.extend({Deferred:function(func){var tuples=[["resolve","done",jQuery.Callbacks("once memory"),"resolved"],["reject","fail",jQuery.Callbacks("once memory"),"rejected"],["notify","progress",jQuery.Callbacks("memory")]],state="pending",promise={state:function(){return state;},always:function(){deferred.done(arguments).fail(arguments);return this;},then:function(){var fns=arguments;return jQuery.Deferred(function(newDefer){jQuery.each(tuples,function(i,tuple){var action=tuple[0],fn=fns[i];deferred[tuple[1]](jQuery.isFunction(fn)?function(){var returned=fn.apply(this,arguments);if(returned&&jQuery.isFunction(returned.promise)){returned.promise().done(newDefer.resolve).fail(newDefer.reject).progress(newDefer.notify);}else{newDefer[action+"With"](this===deferred?newDefer:this,[returned]);}}:newDefer[action]);});fns=null;}).promise();},promise:function(obj){return obj!=null?jQuery.extend(obj,promise):promise;}},deferred={};promise.pipe=promise.then;jQuery.each(tuples,function(i,tuple){var list=tuple[2],stateString=tuple[3];promise[tuple[1]]=list.add;if(stateString){list.add(function(){state=stateString;},tuples[i^1][2].disable,tuples[2][2].lock);}
deferred[tuple[0]]=list.fire;deferred[tuple[0]+"With"]=list.fireWith;});promise.promise(deferred);if(func){func.call(deferred,deferred);}
return deferred;},when:function(subordinate){var i=0,resolveValues=core_slice.call(arguments),length=resolveValues.length,remaining=length!==1||(subordinate&&jQuery.isFunction(subordinate.promise))?length:0,deferred=remaining===1?subordinate:jQuery.Deferred(),updateFunc=function(i,contexts,values){return function(value){contexts[i]=this;values[i]=arguments.length>1?core_slice.call(arguments):value;if(values===progressValues){deferred.notifyWith(contexts,values);}else if(!(--remaining)){deferred.resolveWith(contexts,values);}};},progressValues,progressContexts,resolveContexts;if(length>1){progressValues=new Array(length);progressContexts=new Array(length);resolveContexts=new Array(length);for(;i<length;i++){if(resolveValues[i]&&jQuery.isFunction(resolveValues[i].promise)){resolveValues[i].promise().done(updateFunc(i,resolveContexts,resolveValues)).fail(deferred.reject).progress(updateFunc(i,progressContexts,progressValues));}else{--remaining;}}}
if(!remaining){deferred.resolveWith(resolveContexts,resolveValues);}
return deferred.promise();}});jQuery.support=(function(){var support,all,a,select,opt,input,fragment,eventName,i,isSupported,clickFn,div=document.createElement("div");div.setAttribute("className","t");div.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";all=div.getElementsByTagName("*");a=div.getElementsByTagName("a")[0];if(!all||!a||!all.length){return{};}
select=document.createElement("select");opt=select.appendChild(document.createElement("option"));input=div.getElementsByTagName("input")[0];a.style.cssText="top:1px;float:left;opacity:.5";support={leadingWhitespace:(div.firstChild.nodeType===3),tbody:!div.getElementsByTagName("tbody").length,htmlSerialize:!!div.getElementsByTagName("link").length,style:/top/.test(a.getAttribute("style")),hrefNormalized:(a.getAttribute("href")==="/a"),opacity:/^0.5/.test(a.style.opacity),cssFloat:!!a.style.cssFloat,checkOn:(input.value==="on"),optSelected:opt.selected,getSetAttribute:div.className!=="t",enctype:!!document.createElement("form").enctype,html5Clone:document.createElement("nav").cloneNode(true).outerHTML!=="<:nav></:nav>",boxModel:(document.compatMode==="CSS1Compat"),submitBubbles:true,changeBubbles:true,focusinBubbles:false,deleteExpando:true,noCloneEvent:true,inlineBlockNeedsLayout:false,shrinkWrapBlocks:false,reliableMarginRight:true,boxSizingReliable:true,pixelPosition:false};input.checked=true;support.noCloneChecked=input.cloneNode(true).checked;select.disabled=true;support.optDisabled=!opt.disabled;try{delete div.test;}catch(e){support.deleteExpando=false;}
if(!div.addEventListener&&div.attachEvent&&div.fireEvent){div.attachEvent("onclick",clickFn=function(){support.noCloneEvent=false;});div.cloneNode(true).fireEvent("onclick");div.detachEvent("onclick",clickFn);}
input=document.createElement("input");input.value="t";input.setAttribute("type","radio");support.radioValue=input.value==="t";input.setAttribute("checked","checked");input.setAttribute("name","t");div.appendChild(input);fragment=document.createDocumentFragment();fragment.appendChild(div.lastChild);support.checkClone=fragment.cloneNode(true).cloneNode(true).lastChild.checked;support.appendChecked=input.checked;fragment.removeChild(input);fragment.appendChild(div);if(div.attachEvent){for(i in{submit:true,change:true,focusin:true}){eventName="on"+i;isSupported=(eventName in div);if(!isSupported){div.setAttribute(eventName,"return;");isSupported=(typeof div[eventName]==="function");}
support[i+"Bubbles"]=isSupported;}}
jQuery(function(){var container,div,tds,marginDiv,divReset="padding:0;margin:0;border:0;display:block;overflow:hidden;",body=document.getElementsByTagName("body")[0];if(!body){return;}
container=document.createElement("div");container.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px";body.insertBefore(container,body.firstChild);div=document.createElement("div");container.appendChild(div);div.innerHTML="<table><tr><td></td><td>t</td></tr></table>";tds=div.getElementsByTagName("td");tds[0].style.cssText="padding:0;margin:0;border:0;display:none";isSupported=(tds[0].offsetHeight===0);tds[0].style.display="";tds[1].style.display="none";support.reliableHiddenOffsets=isSupported&&(tds[0].offsetHeight===0);div.innerHTML="";div.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;";support.boxSizing=(div.offsetWidth===4);support.doesNotIncludeMarginInBodyOffset=(body.offsetTop!==1);if(window.getComputedStyle){support.pixelPosition=(window.getComputedStyle(div,null)||{}).top!=="1%";support.boxSizingReliable=(window.getComputedStyle(div,null)||{width:"4px"}).width==="4px";marginDiv=document.createElement("div");marginDiv.style.cssText=div.style.cssText=divReset;marginDiv.style.marginRight=marginDiv.style.width="0";div.style.width="1px";div.appendChild(marginDiv);support.reliableMarginRight=!parseFloat((window.getComputedStyle(marginDiv,null)||{}).marginRight);}
if(typeof div.style.zoom!=="undefined"){div.innerHTML="";div.style.cssText=divReset+"width:1px;padding:1px;display:inline;zoom:1";support.inlineBlockNeedsLayout=(div.offsetWidth===3);div.style.display="block";div.style.overflow="visible";div.innerHTML="<div></div>";div.firstChild.style.width="5px";support.shrinkWrapBlocks=(div.offsetWidth!==3);container.style.zoom=1;}
body.removeChild(container);container=div=tds=marginDiv=null;});fragment.removeChild(div);all=a=select=opt=input=fragment=div=null;return support;})();var rbrace=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,rmultiDash=/([A-Z])/g;jQuery.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(jQuery.fn.jquery+Math.random()).replace(/\D/g,""),noData:{"embed":true,"object":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000","applet":true},hasData:function(elem){elem=elem.nodeType?jQuery.cache[elem[jQuery.expando]]:elem[jQuery.expando];return!!elem&&!isEmptyDataObject(elem);},data:function(elem,name,data,pvt){if(!jQuery.acceptData(elem)){return;}
var thisCache,ret,internalKey=jQuery.expando,getByName=typeof name==="string",isNode=elem.nodeType,cache=isNode?jQuery.cache:elem,id=isNode?elem[internalKey]:elem[internalKey]&&internalKey;if((!id||!cache[id]||(!pvt&&!cache[id].data))&&getByName&&data===undefined){return;}
if(!id){if(isNode){elem[internalKey]=id=jQuery.deletedIds.pop()||jQuery.guid++;}else{id=internalKey;}}
if(!cache[id]){cache[id]={};if(!isNode){cache[id].toJSON=jQuery.noop;}}
if(typeof name==="object"||typeof name==="function"){if(pvt){cache[id]=jQuery.extend(cache[id],name);}else{cache[id].data=jQuery.extend(cache[id].data,name);}}
thisCache=cache[id];if(!pvt){if(!thisCache.data){thisCache.data={};}
thisCache=thisCache.data;}
if(data!==undefined){thisCache[jQuery.camelCase(name)]=data;}
if(getByName){ret=thisCache[name];if(ret==null){ret=thisCache[jQuery.camelCase(name)];}}else{ret=thisCache;}
return ret;},removeData:function(elem,name,pvt){if(!jQuery.acceptData(elem)){return;}
var thisCache,i,l,isNode=elem.nodeType,cache=isNode?jQuery.cache:elem,id=isNode?elem[jQuery.expando]:jQuery.expando;if(!cache[id]){return;}
if(name){thisCache=pvt?cache[id]:cache[id].data;if(thisCache){if(!jQuery.isArray(name)){if(name in thisCache){name=[name];}else{name=jQuery.camelCase(name);if(name in thisCache){name=[name];}else{name=name.split(" ");}}}
for(i=0,l=name.length;i<l;i++){delete thisCache[name[i]];}
if(!(pvt?isEmptyDataObject:jQuery.isEmptyObject)(thisCache)){return;}}}
if(!pvt){delete cache[id].data;if(!isEmptyDataObject(cache[id])){return;}}
if(isNode){jQuery.cleanData([elem],true);}else if(jQuery.support.deleteExpando||cache!=cache.window){delete cache[id];}else{cache[id]=null;}},_data:function(elem,name,data){return jQuery.data(elem,name,data,true);},acceptData:function(elem){var noData=elem.nodeName&&jQuery.noData[elem.nodeName.toLowerCase()];return!noData||noData!==true&&elem.getAttribute("classid")===noData;}});jQuery.fn.extend({data:function(key,value){var parts,part,attr,name,l,elem=this[0],i=0,data=null;if(key===undefined){if(this.length){data=jQuery.data(elem);if(elem.nodeType===1&&!jQuery._data(elem,"parsedAttrs")){attr=elem.attributes;for(l=attr.length;i<l;i++){name=attr[i].name;if(!name.indexOf("data-")){name=jQuery.camelCase(name.substring(5));dataAttr(elem,name,data[name]);}}
jQuery._data(elem,"parsedAttrs",true);}}
return data;}
if(typeof key==="object"){return this.each(function(){jQuery.data(this,key);});}
parts=key.split(".",2);parts[1]=parts[1]?"."+parts[1]:"";part=parts[1]+"!";return jQuery.access(this,function(value){if(value===undefined){data=this.triggerHandler("getData"+part,[parts[0]]);if(data===undefined&&elem){data=jQuery.data(elem,key);data=dataAttr(elem,key,data);}
return data===undefined&&parts[1]?this.data(parts[0]):data;}
parts[1]=value;this.each(function(){var self=jQuery(this);self.triggerHandler("setData"+part,parts);jQuery.data(this,key,value);self.triggerHandler("changeData"+part,parts);});},null,value,arguments.length>1,null,false);},removeData:function(key){return this.each(function(){jQuery.removeData(this,key);});}});function dataAttr(elem,key,data){if(data===undefined&&elem.nodeType===1){var name="data-"+key.replace(rmultiDash,"-$1").toLowerCase();data=elem.getAttribute(name);if(typeof data==="string"){try{data=data==="true"?true:data==="false"?false:data==="null"?null:+data+""===data?+data:rbrace.test(data)?jQuery.parseJSON(data):data;}catch(e){}
jQuery.data(elem,key,data);}else{data=undefined;}}
return data;}
function isEmptyDataObject(obj){var name;for(name in obj){if(name==="data"&&jQuery.isEmptyObject(obj[name])){continue;}
if(name!=="toJSON"){return false;}}
return true;}
jQuery.extend({queue:function(elem,type,data){var queue;if(elem){type=(type||"fx")+"queue";queue=jQuery._data(elem,type);if(data){if(!queue||jQuery.isArray(data)){queue=jQuery._data(elem,type,jQuery.makeArray(data));}else{queue.push(data);}}
return queue||[];}},dequeue:function(elem,type){type=type||"fx";var queue=jQuery.queue(elem,type),startLength=queue.length,fn=queue.shift(),hooks=jQuery._queueHooks(elem,type),next=function(){jQuery.dequeue(elem,type);};if(fn==="inprogress"){fn=queue.shift();startLength--;}
if(fn){if(type==="fx"){queue.unshift("inprogress");}
delete hooks.stop;fn.call(elem,next,hooks);}
if(!startLength&&hooks){hooks.empty.fire();}},_queueHooks:function(elem,type){var key=type+"queueHooks";return jQuery._data(elem,key)||jQuery._data(elem,key,{empty:jQuery.Callbacks("once memory").add(function(){jQuery.removeData(elem,type+"queue",true);jQuery.removeData(elem,key,true);})});}});jQuery.fn.extend({queue:function(type,data){var setter=2;if(typeof type!=="string"){data=type;type="fx";setter--;}
if(arguments.length<setter){return jQuery.queue(this[0],type);}
return data===undefined?this:this.each(function(){var queue=jQuery.queue(this,type,data);jQuery._queueHooks(this,type);if(type==="fx"&&queue[0]!=="inprogress"){jQuery.dequeue(this,type);}});},dequeue:function(type){return this.each(function(){jQuery.dequeue(this,type);});},delay:function(time,type){time=jQuery.fx?jQuery.fx.speeds[time]||time:time;type=type||"fx";return this.queue(type,function(next,hooks){var timeout=setTimeout(next,time);hooks.stop=function(){clearTimeout(timeout);};});},clearQueue:function(type){return this.queue(type||"fx",[]);},promise:function(type,obj){var tmp,count=1,defer=jQuery.Deferred(),elements=this,i=this.length,resolve=function(){if(!(--count)){defer.resolveWith(elements,[elements]);}};if(typeof type!=="string"){obj=type;type=undefined;}
type=type||"fx";while(i--){tmp=jQuery._data(elements[i],type+"queueHooks");if(tmp&&tmp.empty){count++;tmp.empty.add(resolve);}}
resolve();return defer.promise(obj);}});var nodeHook,boolHook,fixSpecified,rclass=/[\t\r\n]/g,rreturn=/\r/g,rtype=/^(?:button|input)$/i,rfocusable=/^(?:button|input|object|select|textarea)$/i,rclickable=/^a(?:rea|)$/i,rboolean=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,getSetAttribute=jQuery.support.getSetAttribute;jQuery.fn.extend({attr:function(name,value){return jQuery.access(this,jQuery.attr,name,value,arguments.length>1);},removeAttr:function(name){return this.each(function(){jQuery.removeAttr(this,name);});},prop:function(name,value){return jQuery.access(this,jQuery.prop,name,value,arguments.length>1);},removeProp:function(name){name=jQuery.propFix[name]||name;return this.each(function(){try{this[name]=undefined;delete this[name];}catch(e){}});},addClass:function(value){var classNames,i,l,elem,setClass,c,cl;if(jQuery.isFunction(value)){return this.each(function(j){jQuery(this).addClass(value.call(this,j,this.className));});}
if(value&&typeof value==="string"){classNames=value.split(core_rspace);for(i=0,l=this.length;i<l;i++){elem=this[i];if(elem.nodeType===1){if(!elem.className&&classNames.length===1){elem.className=value;}else{setClass=" "+elem.className+" ";for(c=0,cl=classNames.length;c<cl;c++){if(setClass.indexOf(" "+classNames[c]+" ")<0){setClass+=classNames[c]+" ";}}
elem.className=jQuery.trim(setClass);}}}}
return this;},removeClass:function(value){var removes,className,elem,c,cl,i,l;if(jQuery.isFunction(value)){return this.each(function(j){jQuery(this).removeClass(value.call(this,j,this.className));});}
if((value&&typeof value==="string")||value===undefined){removes=(value||"").split(core_rspace);for(i=0,l=this.length;i<l;i++){elem=this[i];if(elem.nodeType===1&&elem.className){className=(" "+elem.className+" ").replace(rclass," ");for(c=0,cl=removes.length;c<cl;c++){while(className.indexOf(" "+removes[c]+" ")>=0){className=className.replace(" "+removes[c]+" "," ");}}
elem.className=value?jQuery.trim(className):"";}}}
return this;},toggleClass:function(value,stateVal){var type=typeof value,isBool=typeof stateVal==="boolean";if(jQuery.isFunction(value)){return this.each(function(i){jQuery(this).toggleClass(value.call(this,i,this.className,stateVal),stateVal);});}
return this.each(function(){if(type==="string"){var className,i=0,self=jQuery(this),state=stateVal,classNames=value.split(core_rspace);while((className=classNames[i++])){state=isBool?state:!self.hasClass(className);self[state?"addClass":"removeClass"](className);}}else if(type==="undefined"||type==="boolean"){if(this.className){jQuery._data(this,"__className__",this.className);}
this.className=this.className||value===false?"":jQuery._data(this,"__className__")||"";}});},hasClass:function(selector){var className=" "+selector+" ",i=0,l=this.length;for(;i<l;i++){if(this[i].nodeType===1&&(" "+this[i].className+" ").replace(rclass," ").indexOf(className)>=0){return true;}}
return false;},val:function(value){var hooks,ret,isFunction,elem=this[0];if(!arguments.length){if(elem){hooks=jQuery.valHooks[elem.type]||jQuery.valHooks[elem.nodeName.toLowerCase()];if(hooks&&"get"in hooks&&(ret=hooks.get(elem,"value"))!==undefined){return ret;}
ret=elem.value;return typeof ret==="string"?ret.replace(rreturn,""):ret==null?"":ret;}
return;}
isFunction=jQuery.isFunction(value);return this.each(function(i){var val,self=jQuery(this);if(this.nodeType!==1){return;}
if(isFunction){val=value.call(this,i,self.val());}else{val=value;}
if(val==null){val="";}else if(typeof val==="number"){val+="";}else if(jQuery.isArray(val)){val=jQuery.map(val,function(value){return value==null?"":value+"";});}
hooks=jQuery.valHooks[this.type]||jQuery.valHooks[this.nodeName.toLowerCase()];if(!hooks||!("set"in hooks)||hooks.set(this,val,"value")===undefined){this.value=val;}});}});jQuery.extend({valHooks:{option:{get:function(elem){var val=elem.attributes.value;return!val||val.specified?elem.value:elem.text;}},select:{get:function(elem){var value,option,options=elem.options,index=elem.selectedIndex,one=elem.type==="select-one"||index<0,values=one?null:[],max=one?index+1:options.length,i=index<0?max:one?index:0;for(;i<max;i++){option=options[i];if((option.selected||i===index)&&(jQuery.support.optDisabled?!option.disabled:option.getAttribute("disabled")===null)&&(!option.parentNode.disabled||!jQuery.nodeName(option.parentNode,"optgroup"))){value=jQuery(option).val();if(one){return value;}
values.push(value);}}
return values;},set:function(elem,value){var values=jQuery.makeArray(value);jQuery(elem).find("option").each(function(){this.selected=jQuery.inArray(jQuery(this).val(),values)>=0;});if(!values.length){elem.selectedIndex=-1;}
return values;}}},attrFn:{},attr:function(elem,name,value,pass){var ret,hooks,notxml,nType=elem.nodeType;if(!elem||nType===3||nType===8||nType===2){return;}
if(pass&&jQuery.isFunction(jQuery.fn[name])){return jQuery(elem)[name](value);}
if(typeof elem.getAttribute==="undefined"){return jQuery.prop(elem,name,value);}
notxml=nType!==1||!jQuery.isXMLDoc(elem);if(notxml){name=name.toLowerCase();hooks=jQuery.attrHooks[name]||(rboolean.test(name)?boolHook:nodeHook);}
if(value!==undefined){if(value===null){jQuery.removeAttr(elem,name);return;}else if(hooks&&"set"in hooks&&notxml&&(ret=hooks.set(elem,value,name))!==undefined){return ret;}else{elem.setAttribute(name,value+"");return value;}}else if(hooks&&"get"in hooks&&notxml&&(ret=hooks.get(elem,name))!==null){return ret;}else{ret=elem.getAttribute(name);return ret===null?undefined:ret;}},removeAttr:function(elem,value){var propName,attrNames,name,isBool,i=0;if(value&&elem.nodeType===1){attrNames=value.split(core_rspace);for(;i<attrNames.length;i++){name=attrNames[i];if(name){propName=jQuery.propFix[name]||name;isBool=rboolean.test(name);if(!isBool){jQuery.attr(elem,name,"");}
elem.removeAttribute(getSetAttribute?name:propName);if(isBool&&propName in elem){elem[propName]=false;}}}}},attrHooks:{type:{set:function(elem,value){if(rtype.test(elem.nodeName)&&elem.parentNode){jQuery.error("type property can't be changed");}else if(!jQuery.support.radioValue&&value==="radio"&&jQuery.nodeName(elem,"input")){var val=elem.value;elem.setAttribute("type",value);if(val){elem.value=val;}
return value;}}},value:{get:function(elem,name){if(nodeHook&&jQuery.nodeName(elem,"button")){return nodeHook.get(elem,name);}
return name in elem?elem.value:null;},set:function(elem,value,name){if(nodeHook&&jQuery.nodeName(elem,"button")){return nodeHook.set(elem,value,name);}
elem.value=value;}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(elem,name,value){var ret,hooks,notxml,nType=elem.nodeType;if(!elem||nType===3||nType===8||nType===2){return;}
notxml=nType!==1||!jQuery.isXMLDoc(elem);if(notxml){name=jQuery.propFix[name]||name;hooks=jQuery.propHooks[name];}
if(value!==undefined){if(hooks&&"set"in hooks&&(ret=hooks.set(elem,value,name))!==undefined){return ret;}else{return(elem[name]=value);}}else{if(hooks&&"get"in hooks&&(ret=hooks.get(elem,name))!==null){return ret;}else{return elem[name];}}},propHooks:{tabIndex:{get:function(elem){var attributeNode=elem.getAttributeNode("tabindex");return attributeNode&&attributeNode.specified?parseInt(attributeNode.value,10):rfocusable.test(elem.nodeName)||rclickable.test(elem.nodeName)&&elem.href?0:undefined;}}}});boolHook={get:function(elem,name){var attrNode,property=jQuery.prop(elem,name);return property===true||typeof property!=="boolean"&&(attrNode=elem.getAttributeNode(name))&&attrNode.nodeValue!==false?name.toLowerCase():undefined;},set:function(elem,value,name){var propName;if(value===false){jQuery.removeAttr(elem,name);}else{propName=jQuery.propFix[name]||name;if(propName in elem){elem[propName]=true;}
elem.setAttribute(name,name.toLowerCase());}
return name;}};if(!getSetAttribute){fixSpecified={name:true,id:true,coords:true};nodeHook=jQuery.valHooks.button={get:function(elem,name){var ret;ret=elem.getAttributeNode(name);return ret&&(fixSpecified[name]?ret.value!=="":ret.specified)?ret.value:undefined;},set:function(elem,value,name){var ret=elem.getAttributeNode(name);if(!ret){ret=document.createAttribute(name);elem.setAttributeNode(ret);}
return(ret.value=value+"");}};jQuery.each(["width","height"],function(i,name){jQuery.attrHooks[name]=jQuery.extend(jQuery.attrHooks[name],{set:function(elem,value){if(value===""){elem.setAttribute(name,"auto");return value;}}});});jQuery.attrHooks.contenteditable={get:nodeHook.get,set:function(elem,value,name){if(value===""){value="false";}
nodeHook.set(elem,value,name);}};}
if(!jQuery.support.hrefNormalized){jQuery.each(["href","src","width","height"],function(i,name){jQuery.attrHooks[name]=jQuery.extend(jQuery.attrHooks[name],{get:function(elem){var ret=elem.getAttribute(name,2);return ret===null?undefined:ret;}});});}
if(!jQuery.support.style){jQuery.attrHooks.style={get:function(elem){return elem.style.cssText.toLowerCase()||undefined;},set:function(elem,value){return(elem.style.cssText=value+"");}};}
if(!jQuery.support.optSelected){jQuery.propHooks.selected=jQuery.extend(jQuery.propHooks.selected,{get:function(elem){var parent=elem.parentNode;if(parent){parent.selectedIndex;if(parent.parentNode){parent.parentNode.selectedIndex;}}
return null;}});}
if(!jQuery.support.enctype){jQuery.propFix.enctype="encoding";}
if(!jQuery.support.checkOn){jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]={get:function(elem){return elem.getAttribute("value")===null?"on":elem.value;}};});}
jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]=jQuery.extend(jQuery.valHooks[this],{set:function(elem,value){if(jQuery.isArray(value)){return(elem.checked=jQuery.inArray(jQuery(elem).val(),value)>=0);}}});});var rformElems=/^(?:textarea|input|select)$/i,rtypenamespace=/^([^\.]*|)(?:\.(.+)|)$/,rhoverHack=/(?:^|\s)hover(\.\S+|)\b/,rkeyEvent=/^key/,rmouseEvent=/^(?:mouse|contextmenu)|click/,rfocusMorph=/^(?:focusinfocus|focusoutblur)$/,hoverHack=function(events){return jQuery.event.special.hover?events:events.replace(rhoverHack,"mouseenter$1 mouseleave$1");};jQuery.event={add:function(elem,types,handler,data,selector){var elemData,eventHandle,events,t,tns,type,namespaces,handleObj,handleObjIn,handlers,special;if(elem.nodeType===3||elem.nodeType===8||!types||!handler||!(elemData=jQuery._data(elem))){return;}
if(handler.handler){handleObjIn=handler;handler=handleObjIn.handler;selector=handleObjIn.selector;}
if(!handler.guid){handler.guid=jQuery.guid++;}
events=elemData.events;if(!events){elemData.events=events={};}
eventHandle=elemData.handle;if(!eventHandle){elemData.handle=eventHandle=function(e){return typeof jQuery!=="undefined"&&(!e||jQuery.event.triggered!==e.type)?jQuery.event.dispatch.apply(eventHandle.elem,arguments):undefined;};eventHandle.elem=elem;}
types=jQuery.trim(hoverHack(types)).split(" ");for(t=0;t<types.length;t++){tns=rtypenamespace.exec(types[t])||[];type=tns[1];namespaces=(tns[2]||"").split(".").sort();special=jQuery.event.special[type]||{};type=(selector?special.delegateType:special.bindType)||type;special=jQuery.event.special[type]||{};handleObj=jQuery.extend({type:type,origType:tns[1],data:data,handler:handler,guid:handler.guid,selector:selector,needsContext:selector&&jQuery.expr.match.needsContext.test(selector),namespace:namespaces.join(".")},handleObjIn);handlers=events[type];if(!handlers){handlers=events[type]=[];handlers.delegateCount=0;if(!special.setup||special.setup.call(elem,data,namespaces,eventHandle)===false){if(elem.addEventListener){elem.addEventListener(type,eventHandle,false);}else if(elem.attachEvent){elem.attachEvent("on"+type,eventHandle);}}}
if(special.add){special.add.call(elem,handleObj);if(!handleObj.handler.guid){handleObj.handler.guid=handler.guid;}}
if(selector){handlers.splice(handlers.delegateCount++,0,handleObj);}else{handlers.push(handleObj);}
jQuery.event.global[type]=true;}
elem=null;},global:{},remove:function(elem,types,handler,selector,mappedTypes){var t,tns,type,origType,namespaces,origCount,j,events,special,eventType,handleObj,elemData=jQuery.hasData(elem)&&jQuery._data(elem);if(!elemData||!(events=elemData.events)){return;}
types=jQuery.trim(hoverHack(types||"")).split(" ");for(t=0;t<types.length;t++){tns=rtypenamespace.exec(types[t])||[];type=origType=tns[1];namespaces=tns[2];if(!type){for(type in events){jQuery.event.remove(elem,type+types[t],handler,selector,true);}
continue;}
special=jQuery.event.special[type]||{};type=(selector?special.delegateType:special.bindType)||type;eventType=events[type]||[];origCount=eventType.length;namespaces=namespaces?new RegExp("(^|\\.)"+namespaces.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null;for(j=0;j<eventType.length;j++){handleObj=eventType[j];if((mappedTypes||origType===handleObj.origType)&&(!handler||handler.guid===handleObj.guid)&&(!namespaces||namespaces.test(handleObj.namespace))&&(!selector||selector===handleObj.selector||selector==="**"&&handleObj.selector)){eventType.splice(j--,1);if(handleObj.selector){eventType.delegateCount--;}
if(special.remove){special.remove.call(elem,handleObj);}}}
if(eventType.length===0&&origCount!==eventType.length){if(!special.teardown||special.teardown.call(elem,namespaces,elemData.handle)===false){jQuery.removeEvent(elem,type,elemData.handle);}
delete events[type];}}
if(jQuery.isEmptyObject(events)){delete elemData.handle;jQuery.removeData(elem,"events",true);}},customEvent:{"getData":true,"setData":true,"changeData":true},trigger:function(event,data,elem,onlyHandlers){if(elem&&(elem.nodeType===3||elem.nodeType===8)){return;}
var cache,exclusive,i,cur,old,ontype,special,handle,eventPath,bubbleType,type=event.type||event,namespaces=[];if(rfocusMorph.test(type+jQuery.event.triggered)){return;}
if(type.indexOf("!")>=0){type=type.slice(0,-1);exclusive=true;}
if(type.indexOf(".")>=0){namespaces=type.split(".");type=namespaces.shift();namespaces.sort();}
if((!elem||jQuery.event.customEvent[type])&&!jQuery.event.global[type]){return;}
event=typeof event==="object"?event[jQuery.expando]?event:new jQuery.Event(type,event):new jQuery.Event(type);event.type=type;event.isTrigger=true;event.exclusive=exclusive;event.namespace=namespaces.join(".");event.namespace_re=event.namespace?new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)"):null;ontype=type.indexOf(":")<0?"on"+type:"";if(!elem){cache=jQuery.cache;for(i in cache){if(cache[i].events&&cache[i].events[type]){jQuery.event.trigger(event,data,cache[i].handle.elem,true);}}
return;}
event.result=undefined;if(!event.target){event.target=elem;}
data=data!=null?jQuery.makeArray(data):[];data.unshift(event);special=jQuery.event.special[type]||{};if(special.trigger&&special.trigger.apply(elem,data)===false){return;}
eventPath=[[elem,special.bindType||type]];if(!onlyHandlers&&!special.noBubble&&!jQuery.isWindow(elem)){bubbleType=special.delegateType||type;cur=rfocusMorph.test(bubbleType+type)?elem:elem.parentNode;for(old=elem;cur;cur=cur.parentNode){eventPath.push([cur,bubbleType]);old=cur;}
if(old===(elem.ownerDocument||document)){eventPath.push([old.defaultView||old.parentWindow||window,bubbleType]);}}
for(i=0;i<eventPath.length&&!event.isPropagationStopped();i++){cur=eventPath[i][0];event.type=eventPath[i][1];handle=(jQuery._data(cur,"events")||{})[event.type]&&jQuery._data(cur,"handle");if(handle){handle.apply(cur,data);}
handle=ontype&&cur[ontype];if(handle&&jQuery.acceptData(cur)&&handle.apply&&handle.apply(cur,data)===false){event.preventDefault();}}
event.type=type;if(!onlyHandlers&&!event.isDefaultPrevented()){if((!special._default||special._default.apply(elem.ownerDocument,data)===false)&&!(type==="click"&&jQuery.nodeName(elem,"a"))&&jQuery.acceptData(elem)){if(ontype&&elem[type]&&((type!=="focus"&&type!=="blur")||event.target.offsetWidth!==0)&&!jQuery.isWindow(elem)){old=elem[ontype];if(old){elem[ontype]=null;}
jQuery.event.triggered=type;elem[type]();jQuery.event.triggered=undefined;if(old){elem[ontype]=old;}}}}
return event.result;},dispatch:function(event){event=jQuery.event.fix(event||window.event);var i,j,cur,ret,selMatch,matched,matches,handleObj,sel,related,handlers=((jQuery._data(this,"events")||{})[event.type]||[]),delegateCount=handlers.delegateCount,args=core_slice.call(arguments),run_all=!event.exclusive&&!event.namespace,special=jQuery.event.special[event.type]||{},handlerQueue=[];args[0]=event;event.delegateTarget=this;if(special.preDispatch&&special.preDispatch.call(this,event)===false){return;}
if(delegateCount&&!(event.button&&event.type==="click")){for(cur=event.target;cur!=this;cur=cur.parentNode||this){if(cur.disabled!==true||event.type!=="click"){selMatch={};matches=[];for(i=0;i<delegateCount;i++){handleObj=handlers[i];sel=handleObj.selector;if(selMatch[sel]===undefined){selMatch[sel]=handleObj.needsContext?jQuery(sel,this).index(cur)>=0:jQuery.find(sel,this,null,[cur]).length;}
if(selMatch[sel]){matches.push(handleObj);}}
if(matches.length){handlerQueue.push({elem:cur,matches:matches});}}}}
if(handlers.length>delegateCount){handlerQueue.push({elem:this,matches:handlers.slice(delegateCount)});}
for(i=0;i<handlerQueue.length&&!event.isPropagationStopped();i++){matched=handlerQueue[i];event.currentTarget=matched.elem;for(j=0;j<matched.matches.length&&!event.isImmediatePropagationStopped();j++){handleObj=matched.matches[j];if(run_all||(!event.namespace&&!handleObj.namespace)||event.namespace_re&&event.namespace_re.test(handleObj.namespace)){event.data=handleObj.data;event.handleObj=handleObj;ret=((jQuery.event.special[handleObj.origType]||{}).handle||handleObj.handler).apply(matched.elem,args);if(ret!==undefined){event.result=ret;if(ret===false){event.preventDefault();event.stopPropagation();}}}}}
if(special.postDispatch){special.postDispatch.call(this,event);}
return event.result;},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(event,original){if(event.which==null){event.which=original.charCode!=null?original.charCode:original.keyCode;}
return event;}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(event,original){var eventDoc,doc,body,button=original.button,fromElement=original.fromElement;if(event.pageX==null&&original.clientX!=null){eventDoc=event.target.ownerDocument||document;doc=eventDoc.documentElement;body=eventDoc.body;event.pageX=original.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0);event.pageY=original.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0);}
if(!event.relatedTarget&&fromElement){event.relatedTarget=fromElement===event.target?original.toElement:fromElement;}
if(!event.which&&button!==undefined){event.which=(button&1?1:(button&2?3:(button&4?2:0)));}
return event;}},fix:function(event){if(event[jQuery.expando]){return event;}
var i,prop,originalEvent=event,fixHook=jQuery.event.fixHooks[event.type]||{},copy=fixHook.props?this.props.concat(fixHook.props):this.props;event=jQuery.Event(originalEvent);for(i=copy.length;i;){prop=copy[--i];event[prop]=originalEvent[prop];}
if(!event.target){event.target=originalEvent.srcElement||document;}
if(event.target.nodeType===3){event.target=event.target.parentNode;}
event.metaKey=!!event.metaKey;return fixHook.filter?fixHook.filter(event,originalEvent):event;},special:{load:{noBubble:true},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(data,namespaces,eventHandle){if(jQuery.isWindow(this)){this.onbeforeunload=eventHandle;}},teardown:function(namespaces,eventHandle){if(this.onbeforeunload===eventHandle){this.onbeforeunload=null;}}}},simulate:function(type,elem,event,bubble){var e=jQuery.extend(new jQuery.Event(),event,{type:type,isSimulated:true,originalEvent:{}});if(bubble){jQuery.event.trigger(e,null,elem);}else{jQuery.event.dispatch.call(elem,e);}
if(e.isDefaultPrevented()){event.preventDefault();}}};jQuery.event.handle=jQuery.event.dispatch;jQuery.removeEvent=document.removeEventListener?function(elem,type,handle){if(elem.removeEventListener){elem.removeEventListener(type,handle,false);}}:function(elem,type,handle){var name="on"+type;if(elem.detachEvent){if(typeof elem[name]==="undefined"){elem[name]=null;}
elem.detachEvent(name,handle);}};jQuery.Event=function(src,props){if(!(this instanceof jQuery.Event)){return new jQuery.Event(src,props);}
if(src&&src.type){this.originalEvent=src;this.type=src.type;this.isDefaultPrevented=(src.defaultPrevented||src.returnValue===false||src.getPreventDefault&&src.getPreventDefault())?returnTrue:returnFalse;}else{this.type=src;}
if(props){jQuery.extend(this,props);}
this.timeStamp=src&&src.timeStamp||jQuery.now();this[jQuery.expando]=true;};function returnFalse(){return false;}
function returnTrue(){return true;}
jQuery.Event.prototype={preventDefault:function(){this.isDefaultPrevented=returnTrue;var e=this.originalEvent;if(!e){return;}
if(e.preventDefault){e.preventDefault();}else{e.returnValue=false;}},stopPropagation:function(){this.isPropagationStopped=returnTrue;var e=this.originalEvent;if(!e){return;}
if(e.stopPropagation){e.stopPropagation();}
e.cancelBubble=true;},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=returnTrue;this.stopPropagation();},isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse};jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(orig,fix){jQuery.event.special[orig]={delegateType:fix,bindType:fix,handle:function(event){var ret,target=this,related=event.relatedTarget,handleObj=event.handleObj,selector=handleObj.selector;if(!related||(related!==target&&!jQuery.contains(target,related))){event.type=handleObj.origType;ret=handleObj.handler.apply(this,arguments);event.type=fix;}
return ret;}};});if(!jQuery.support.submitBubbles){jQuery.event.special.submit={setup:function(){if(jQuery.nodeName(this,"form")){return false;}
jQuery.event.add(this,"click._submit keypress._submit",function(e){var elem=e.target,form=jQuery.nodeName(elem,"input")||jQuery.nodeName(elem,"button")?elem.form:undefined;if(form&&!jQuery._data(form,"_submit_attached")){jQuery.event.add(form,"submit._submit",function(event){event._submit_bubble=true;});jQuery._data(form,"_submit_attached",true);}});},postDispatch:function(event){if(event._submit_bubble){delete event._submit_bubble;if(this.parentNode&&!event.isTrigger){jQuery.event.simulate("submit",this.parentNode,event,true);}}},teardown:function(){if(jQuery.nodeName(this,"form")){return false;}
jQuery.event.remove(this,"._submit");}};}
if(!jQuery.support.changeBubbles){jQuery.event.special.change={setup:function(){if(rformElems.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio"){jQuery.event.add(this,"propertychange._change",function(event){if(event.originalEvent.propertyName==="checked"){this._just_changed=true;}});jQuery.event.add(this,"click._change",function(event){if(this._just_changed&&!event.isTrigger){this._just_changed=false;}
jQuery.event.simulate("change",this,event,true);});}
return false;}
jQuery.event.add(this,"beforeactivate._change",function(e){var elem=e.target;if(rformElems.test(elem.nodeName)&&!jQuery._data(elem,"_change_attached")){jQuery.event.add(elem,"change._change",function(event){if(this.parentNode&&!event.isSimulated&&!event.isTrigger){jQuery.event.simulate("change",this.parentNode,event,true);}});jQuery._data(elem,"_change_attached",true);}});},handle:function(event){var elem=event.target;if(this!==elem||event.isSimulated||event.isTrigger||(elem.type!=="radio"&&elem.type!=="checkbox")){return event.handleObj.handler.apply(this,arguments);}},teardown:function(){jQuery.event.remove(this,"._change");return!rformElems.test(this.nodeName);}};}
if(!jQuery.support.focusinBubbles){jQuery.each({focus:"focusin",blur:"focusout"},function(orig,fix){var attaches=0,handler=function(event){jQuery.event.simulate(fix,event.target,jQuery.event.fix(event),true);};jQuery.event.special[fix]={setup:function(){if(attaches++===0){document.addEventListener(orig,handler,true);}},teardown:function(){if(--attaches===0){document.removeEventListener(orig,handler,true);}}};});}
jQuery.fn.extend({on:function(types,selector,data,fn,one){var origFn,type;if(typeof types==="object"){if(typeof selector!=="string"){data=data||selector;selector=undefined;}
for(type in types){this.on(type,selector,data,types[type],one);}
return this;}
if(data==null&&fn==null){fn=selector;data=selector=undefined;}else if(fn==null){if(typeof selector==="string"){fn=data;data=undefined;}else{fn=data;data=selector;selector=undefined;}}
if(fn===false){fn=returnFalse;}else if(!fn){return this;}
if(one===1){origFn=fn;fn=function(event){jQuery().off(event);return origFn.apply(this,arguments);};fn.guid=origFn.guid||(origFn.guid=jQuery.guid++);}
return this.each(function(){jQuery.event.add(this,types,fn,data,selector);});},one:function(types,selector,data,fn){return this.on(types,selector,data,fn,1);},off:function(types,selector,fn){var handleObj,type;if(types&&types.preventDefault&&types.handleObj){handleObj=types.handleObj;jQuery(types.delegateTarget).off(handleObj.namespace?handleObj.origType+"."+handleObj.namespace:handleObj.origType,handleObj.selector,handleObj.handler);return this;}
if(typeof types==="object"){for(type in types){this.off(type,selector,types[type]);}
return this;}
if(selector===false||typeof selector==="function"){fn=selector;selector=undefined;}
if(fn===false){fn=returnFalse;}
return this.each(function(){jQuery.event.remove(this,types,fn,selector);});},bind:function(types,data,fn){return this.on(types,null,data,fn);},unbind:function(types,fn){return this.off(types,null,fn);},live:function(types,data,fn){jQuery(this.context).on(types,this.selector,data,fn);return this;},die:function(types,fn){jQuery(this.context).off(types,this.selector||"**",fn);return this;},delegate:function(selector,types,data,fn){return this.on(types,selector,data,fn);},undelegate:function(selector,types,fn){return arguments.length===1?this.off(selector,"**"):this.off(types,selector||"**",fn);},trigger:function(type,data){return this.each(function(){jQuery.event.trigger(type,data,this);});},triggerHandler:function(type,data){if(this[0]){return jQuery.event.trigger(type,data,this[0],true);}},toggle:function(fn){var args=arguments,guid=fn.guid||jQuery.guid++,i=0,toggler=function(event){var lastToggle=(jQuery._data(this,"lastToggle"+fn.guid)||0)%i;jQuery._data(this,"lastToggle"+fn.guid,lastToggle+1);event.preventDefault();return args[lastToggle].apply(this,arguments)||false;};toggler.guid=guid;while(i<args.length){args[i++].guid=guid;}
return this.click(toggler);},hover:function(fnOver,fnOut){return this.mouseenter(fnOver).mouseleave(fnOut||fnOver);}});jQuery.each(("blur focus focusin focusout load resize scroll unload click dblclick "+"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave "+"change select submit keydown keypress keyup error contextmenu").split(" "),function(i,name){jQuery.fn[name]=function(data,fn){if(fn==null){fn=data;data=null;}
return arguments.length>0?this.on(name,null,data,fn):this.trigger(name);};if(rkeyEvent.test(name)){jQuery.event.fixHooks[name]=jQuery.event.keyHooks;}
if(rmouseEvent.test(name)){jQuery.event.fixHooks[name]=jQuery.event.mouseHooks;}});(function(window,undefined){var cachedruns,assertGetIdNotName,Expr,getText,isXML,contains,compile,sortOrder,hasDuplicate,outermostContext,baseHasDuplicate=true,strundefined="undefined",expando=("sizcache"+Math.random()).replace(".",""),Token=String,document=window.document,docElem=document.documentElement,dirruns=0,done=0,pop=[].pop,push=[].push,slice=[].slice,indexOf=[].indexOf||function(elem){var i=0,len=this.length;for(;i<len;i++){if(this[i]===elem){return i;}}
return-1;},markFunction=function(fn,value){fn[expando]=value==null||value;return fn;},createCache=function(){var cache={},keys=[];return markFunction(function(key,value){if(keys.push(key)>Expr.cacheLength){delete cache[keys.shift()];}
return(cache[key+" "]=value);},cache);},classCache=createCache(),tokenCache=createCache(),compilerCache=createCache(),whitespace="[\\x20\\t\\r\\n\\f]",characterEncoding="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",identifier=characterEncoding.replace("w","w#"),operators="([*^$|!~]?=)",attributes="\\["+whitespace+"*("+characterEncoding+")"+whitespace+"*(?:"+operators+whitespace+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+identifier+")|)|)"+whitespace+"*\\]",pseudos=":("+characterEncoding+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+attributes+")|[^:]|\\\\.)*|.*))\\)|)",pos=":(even|odd|eq|gt|lt|nth|first|last)(?:\\("+whitespace+"*((?:-\\d)?\\d*)"+whitespace+"*\\)|)(?=[^-]|$)",rtrim=new RegExp("^"+whitespace+"+|((?:^|[^\\\\])(?:\\\\.)*)"+whitespace+"+$","g"),rcomma=new RegExp("^"+whitespace+"*,"+whitespace+"*"),rcombinators=new RegExp("^"+whitespace+"*([\\x20\\t\\r\\n\\f>+~])"+whitespace+"*"),rpseudo=new RegExp(pseudos),rquickExpr=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,rnot=/^:not/,rsibling=/[\x20\t\r\n\f]*[+~]/,rendsWithNot=/:not\($/,rheader=/h\d/i,rinputs=/input|select|textarea|button/i,rbackslash=/\\(?!\\)/g,matchExpr={"ID":new RegExp("^#("+characterEncoding+")"),"CLASS":new RegExp("^\\.("+characterEncoding+")"),"NAME":new RegExp("^\\[name=['\"]?("+characterEncoding+")['\"]?\\]"),"TAG":new RegExp("^("+characterEncoding.replace("w","w*")+")"),"ATTR":new RegExp("^"+attributes),"PSEUDO":new RegExp("^"+pseudos),"POS":new RegExp(pos,"i"),"CHILD":new RegExp("^:(only|nth|first|last)-child(?:\\("+whitespace+"*(even|odd|(([+-]|)(\\d*)n|)"+whitespace+"*(?:([+-]|)"+whitespace+"*(\\d+)|))"+whitespace+"*\\)|)","i"),"needsContext":new RegExp("^"+whitespace+"*[>+~]|"+pos,"i")},assert=function(fn){var div=document.createElement("div");try{return fn(div);}catch(e){return false;}finally{div=null;}},assertTagNameNoComments=assert(function(div){div.appendChild(document.createComment(""));return!div.getElementsByTagName("*").length;}),assertHrefNotNormalized=assert(function(div){div.innerHTML="<a href='#'></a>";return div.firstChild&&typeof div.firstChild.getAttribute!==strundefined&&div.firstChild.getAttribute("href")==="#";}),assertAttributes=assert(function(div){div.innerHTML="<select></select>";var type=typeof div.lastChild.getAttribute("multiple");return type!=="boolean"&&type!=="string";}),assertUsableClassName=assert(function(div){div.innerHTML="<div class='hidden e'></div><div class='hidden'></div>";if(!div.getElementsByClassName||!div.getElementsByClassName("e").length){return false;}
div.lastChild.className="e";return div.getElementsByClassName("e").length===2;}),assertUsableName=assert(function(div){div.id=expando+0;div.innerHTML="<a name='"+expando+"'></a><div name='"+expando+"'></div>";docElem.insertBefore(div,docElem.firstChild);var pass=document.getElementsByName&&document.getElementsByName(expando).length===2+
document.getElementsByName(expando+0).length;assertGetIdNotName=!document.getElementById(expando);docElem.removeChild(div);return pass;});try{slice.call(docElem.childNodes,0)[0].nodeType;}catch(e){slice=function(i){var elem,results=[];for(;(elem=this[i]);i++){results.push(elem);}
return results;};}
function Sizzle(selector,context,results,seed){results=results||[];context=context||document;var match,elem,xml,m,nodeType=context.nodeType;if(!selector||typeof selector!=="string"){return results;}
if(nodeType!==1&&nodeType!==9){return[];}
xml=isXML(context);if(!xml&&!seed){if((match=rquickExpr.exec(selector))){if((m=match[1])){if(nodeType===9){elem=context.getElementById(m);if(elem&&elem.parentNode){if(elem.id===m){results.push(elem);return results;}}else{return results;}}else{if(context.ownerDocument&&(elem=context.ownerDocument.getElementById(m))&&contains(context,elem)&&elem.id===m){results.push(elem);return results;}}}else if(match[2]){push.apply(results,slice.call(context.getElementsByTagName(selector),0));return results;}else if((m=match[3])&&assertUsableClassName&&context.getElementsByClassName){push.apply(results,slice.call(context.getElementsByClassName(m),0));return results;}}}
return select(selector.replace(rtrim,"$1"),context,results,seed,xml);}
Sizzle.matches=function(expr,elements){return Sizzle(expr,null,null,elements);};Sizzle.matchesSelector=function(elem,expr){return Sizzle(expr,null,null,[elem]).length>0;};function createInputPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return name==="input"&&elem.type===type;};}
function createButtonPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return(name==="input"||name==="button")&&elem.type===type;};}
function createPositionalPseudo(fn){return markFunction(function(argument){argument=+argument;return markFunction(function(seed,matches){var j,matchIndexes=fn([],seed.length,argument),i=matchIndexes.length;while(i--){if(seed[(j=matchIndexes[i])]){seed[j]=!(matches[j]=seed[j]);}}});});}
getText=Sizzle.getText=function(elem){var node,ret="",i=0,nodeType=elem.nodeType;if(nodeType){if(nodeType===1||nodeType===9||nodeType===11){if(typeof elem.textContent==="string"){return elem.textContent;}else{for(elem=elem.firstChild;elem;elem=elem.nextSibling){ret+=getText(elem);}}}else if(nodeType===3||nodeType===4){return elem.nodeValue;}}else{for(;(node=elem[i]);i++){ret+=getText(node);}}
return ret;};isXML=Sizzle.isXML=function(elem){var documentElement=elem&&(elem.ownerDocument||elem).documentElement;return documentElement?documentElement.nodeName!=="HTML":false;};contains=Sizzle.contains=docElem.contains?function(a,b){var adown=a.nodeType===9?a.documentElement:a,bup=b&&b.parentNode;return a===bup||!!(bup&&bup.nodeType===1&&adown.contains&&adown.contains(bup));}:docElem.compareDocumentPosition?function(a,b){return b&&!!(a.compareDocumentPosition(b)&16);}:function(a,b){while((b=b.parentNode)){if(b===a){return true;}}
return false;};Sizzle.attr=function(elem,name){var val,xml=isXML(elem);if(!xml){name=name.toLowerCase();}
if((val=Expr.attrHandle[name])){return val(elem);}
if(xml||assertAttributes){return elem.getAttribute(name);}
val=elem.getAttributeNode(name);return val?typeof elem[name]==="boolean"?elem[name]?name:null:val.specified?val.value:null:null;};Expr=Sizzle.selectors={cacheLength:50,createPseudo:markFunction,match:matchExpr,attrHandle:assertHrefNotNormalized?{}:{"href":function(elem){return elem.getAttribute("href",2);},"type":function(elem){return elem.getAttribute("type");}},find:{"ID":assertGetIdNotName?function(id,context,xml){if(typeof context.getElementById!==strundefined&&!xml){var m=context.getElementById(id);return m&&m.parentNode?[m]:[];}}:function(id,context,xml){if(typeof context.getElementById!==strundefined&&!xml){var m=context.getElementById(id);return m?m.id===id||typeof m.getAttributeNode!==strundefined&&m.getAttributeNode("id").value===id?[m]:undefined:[];}},"TAG":assertTagNameNoComments?function(tag,context){if(typeof context.getElementsByTagName!==strundefined){return context.getElementsByTagName(tag);}}:function(tag,context){var results=context.getElementsByTagName(tag);if(tag==="*"){var elem,tmp=[],i=0;for(;(elem=results[i]);i++){if(elem.nodeType===1){tmp.push(elem);}}
return tmp;}
return results;},"NAME":assertUsableName&&function(tag,context){if(typeof context.getElementsByName!==strundefined){return context.getElementsByName(name);}},"CLASS":assertUsableClassName&&function(className,context,xml){if(typeof context.getElementsByClassName!==strundefined&&!xml){return context.getElementsByClassName(className);}}},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{"ATTR":function(match){match[1]=match[1].replace(rbackslash,"");match[3]=(match[4]||match[5]||"").replace(rbackslash,"");if(match[2]==="~="){match[3]=" "+match[3]+" ";}
return match.slice(0,4);},"CHILD":function(match){match[1]=match[1].toLowerCase();if(match[1]==="nth"){if(!match[2]){Sizzle.error(match[0]);}
match[3]=+(match[3]?match[4]+(match[5]||1):2*(match[2]==="even"||match[2]==="odd"));match[4]=+((match[6]+match[7])||match[2]==="odd");}else if(match[2]){Sizzle.error(match[0]);}
return match;},"PSEUDO":function(match){var unquoted,excess;if(matchExpr["CHILD"].test(match[0])){return null;}
if(match[3]){match[2]=match[3];}else if((unquoted=match[4])){if(rpseudo.test(unquoted)&&(excess=tokenize(unquoted,true))&&(excess=unquoted.indexOf(")",unquoted.length-excess)-unquoted.length)){unquoted=unquoted.slice(0,excess);match[0]=match[0].slice(0,excess);}
match[2]=unquoted;}
return match.slice(0,3);}},filter:{"ID":assertGetIdNotName?function(id){id=id.replace(rbackslash,"");return function(elem){return elem.getAttribute("id")===id;};}:function(id){id=id.replace(rbackslash,"");return function(elem){var node=typeof elem.getAttributeNode!==strundefined&&elem.getAttributeNode("id");return node&&node.value===id;};},"TAG":function(nodeName){if(nodeName==="*"){return function(){return true;};}
nodeName=nodeName.replace(rbackslash,"").toLowerCase();return function(elem){return elem.nodeName&&elem.nodeName.toLowerCase()===nodeName;};},"CLASS":function(className){var pattern=classCache[expando][className+" "];return pattern||(pattern=new RegExp("(^|"+whitespace+")"+className+"("+whitespace+"|$)"))&&classCache(className,function(elem){return pattern.test(elem.className||(typeof elem.getAttribute!==strundefined&&elem.getAttribute("class"))||"");});},"ATTR":function(name,operator,check){return function(elem,context){var result=Sizzle.attr(elem,name);if(result==null){return operator==="!=";}
if(!operator){return true;}
result+="";return operator==="="?result===check:operator==="!="?result!==check:operator==="^="?check&&result.indexOf(check)===0:operator==="*="?check&&result.indexOf(check)>-1:operator==="$="?check&&result.substr(result.length-check.length)===check:operator==="~="?(" "+result+" ").indexOf(check)>-1:operator==="|="?result===check||result.substr(0,check.length+1)===check+"-":false;};},"CHILD":function(type,argument,first,last){if(type==="nth"){return function(elem){var node,diff,parent=elem.parentNode;if(first===1&&last===0){return true;}
if(parent){diff=0;for(node=parent.firstChild;node;node=node.nextSibling){if(node.nodeType===1){diff++;if(elem===node){break;}}}}
diff-=last;return diff===first||(diff%first===0&&diff/first>=0);};}
return function(elem){var node=elem;switch(type){case"only":case"first":while((node=node.previousSibling)){if(node.nodeType===1){return false;}}
if(type==="first"){return true;}
node=elem;case"last":while((node=node.nextSibling)){if(node.nodeType===1){return false;}}
return true;}};},"PSEUDO":function(pseudo,argument){var args,fn=Expr.pseudos[pseudo]||Expr.setFilters[pseudo.toLowerCase()]||Sizzle.error("unsupported pseudo: "+pseudo);if(fn[expando]){return fn(argument);}
if(fn.length>1){args=[pseudo,pseudo,"",argument];return Expr.setFilters.hasOwnProperty(pseudo.toLowerCase())?markFunction(function(seed,matches){var idx,matched=fn(seed,argument),i=matched.length;while(i--){idx=indexOf.call(seed,matched[i]);seed[idx]=!(matches[idx]=matched[i]);}}):function(elem){return fn(elem,0,args);};}
return fn;}},pseudos:{"not":markFunction(function(selector){var input=[],results=[],matcher=compile(selector.replace(rtrim,"$1"));return matcher[expando]?markFunction(function(seed,matches,context,xml){var elem,unmatched=matcher(seed,null,xml,[]),i=seed.length;while(i--){if((elem=unmatched[i])){seed[i]=!(matches[i]=elem);}}}):function(elem,context,xml){input[0]=elem;matcher(input,null,xml,results);return!results.pop();};}),"has":markFunction(function(selector){return function(elem){return Sizzle(selector,elem).length>0;};}),"contains":markFunction(function(text){return function(elem){return(elem.textContent||elem.innerText||getText(elem)).indexOf(text)>-1;};}),"enabled":function(elem){return elem.disabled===false;},"disabled":function(elem){return elem.disabled===true;},"checked":function(elem){var nodeName=elem.nodeName.toLowerCase();return(nodeName==="input"&&!!elem.checked)||(nodeName==="option"&&!!elem.selected);},"selected":function(elem){if(elem.parentNode){elem.parentNode.selectedIndex;}
return elem.selected===true;},"parent":function(elem){return!Expr.pseudos["empty"](elem);},"empty":function(elem){var nodeType;elem=elem.firstChild;while(elem){if(elem.nodeName>"@"||(nodeType=elem.nodeType)===3||nodeType===4){return false;}
elem=elem.nextSibling;}
return true;},"header":function(elem){return rheader.test(elem.nodeName);},"text":function(elem){var type,attr;return elem.nodeName.toLowerCase()==="input"&&(type=elem.type)==="text"&&((attr=elem.getAttribute("type"))==null||attr.toLowerCase()===type);},"radio":createInputPseudo("radio"),"checkbox":createInputPseudo("checkbox"),"file":createInputPseudo("file"),"password":createInputPseudo("password"),"image":createInputPseudo("image"),"submit":createButtonPseudo("submit"),"reset":createButtonPseudo("reset"),"button":function(elem){var name=elem.nodeName.toLowerCase();return name==="input"&&elem.type==="button"||name==="button";},"input":function(elem){return rinputs.test(elem.nodeName);},"focus":function(elem){var doc=elem.ownerDocument;return elem===doc.activeElement&&(!doc.hasFocus||doc.hasFocus())&&!!(elem.type||elem.href||~elem.tabIndex);},"active":function(elem){return elem===elem.ownerDocument.activeElement;},"first":createPositionalPseudo(function(){return[0];}),"last":createPositionalPseudo(function(matchIndexes,length){return[length-1];}),"eq":createPositionalPseudo(function(matchIndexes,length,argument){return[argument<0?argument+length:argument];}),"even":createPositionalPseudo(function(matchIndexes,length){for(var i=0;i<length;i+=2){matchIndexes.push(i);}
return matchIndexes;}),"odd":createPositionalPseudo(function(matchIndexes,length){for(var i=1;i<length;i+=2){matchIndexes.push(i);}
return matchIndexes;}),"lt":createPositionalPseudo(function(matchIndexes,length,argument){for(var i=argument<0?argument+length:argument;--i>=0;){matchIndexes.push(i);}
return matchIndexes;}),"gt":createPositionalPseudo(function(matchIndexes,length,argument){for(var i=argument<0?argument+length:argument;++i<length;){matchIndexes.push(i);}
return matchIndexes;})}};function siblingCheck(a,b,ret){if(a===b){return ret;}
var cur=a.nextSibling;while(cur){if(cur===b){return-1;}
cur=cur.nextSibling;}
return 1;}
sortOrder=docElem.compareDocumentPosition?function(a,b){if(a===b){hasDuplicate=true;return 0;}
return(!a.compareDocumentPosition||!b.compareDocumentPosition?a.compareDocumentPosition:a.compareDocumentPosition(b)&4)?-1:1;}:function(a,b){if(a===b){hasDuplicate=true;return 0;}else if(a.sourceIndex&&b.sourceIndex){return a.sourceIndex-b.sourceIndex;}
var al,bl,ap=[],bp=[],aup=a.parentNode,bup=b.parentNode,cur=aup;if(aup===bup){return siblingCheck(a,b);}else if(!aup){return-1;}else if(!bup){return 1;}
while(cur){ap.unshift(cur);cur=cur.parentNode;}
cur=bup;while(cur){bp.unshift(cur);cur=cur.parentNode;}
al=ap.length;bl=bp.length;for(var i=0;i<al&&i<bl;i++){if(ap[i]!==bp[i]){return siblingCheck(ap[i],bp[i]);}}
return i===al?siblingCheck(a,bp[i],-1):siblingCheck(ap[i],b,1);};[0,0].sort(sortOrder);baseHasDuplicate=!hasDuplicate;Sizzle.uniqueSort=function(results){var elem,duplicates=[],i=1,j=0;hasDuplicate=baseHasDuplicate;results.sort(sortOrder);if(hasDuplicate){for(;(elem=results[i]);i++){if(elem===results[i-1]){j=duplicates.push(i);}}
while(j--){results.splice(duplicates[j],1);}}
return results;};Sizzle.error=function(msg){throw new Error("Syntax error, unrecognized expression: "+msg);};function tokenize(selector,parseOnly){var matched,match,tokens,type,soFar,groups,preFilters,cached=tokenCache[expando][selector+" "];if(cached){return parseOnly?0:cached.slice(0);}
soFar=selector;groups=[];preFilters=Expr.preFilter;while(soFar){if(!matched||(match=rcomma.exec(soFar))){if(match){soFar=soFar.slice(match[0].length)||soFar;}
groups.push(tokens=[]);}
matched=false;if((match=rcombinators.exec(soFar))){tokens.push(matched=new Token(match.shift()));soFar=soFar.slice(matched.length);matched.type=match[0].replace(rtrim," ");}
for(type in Expr.filter){if((match=matchExpr[type].exec(soFar))&&(!preFilters[type]||(match=preFilters[type](match)))){tokens.push(matched=new Token(match.shift()));soFar=soFar.slice(matched.length);matched.type=type;matched.matches=match;}}
if(!matched){break;}}
return parseOnly?soFar.length:soFar?Sizzle.error(selector):tokenCache(selector,groups).slice(0);}
function addCombinator(matcher,combinator,base){var dir=combinator.dir,checkNonElements=base&&combinator.dir==="parentNode",doneName=done++;return combinator.first?function(elem,context,xml){while((elem=elem[dir])){if(checkNonElements||elem.nodeType===1){return matcher(elem,context,xml);}}}:function(elem,context,xml){if(!xml){var cache,dirkey=dirruns+" "+doneName+" ",cachedkey=dirkey+cachedruns;while((elem=elem[dir])){if(checkNonElements||elem.nodeType===1){if((cache=elem[expando])===cachedkey){return elem.sizset;}else if(typeof cache==="string"&&cache.indexOf(dirkey)===0){if(elem.sizset){return elem;}}else{elem[expando]=cachedkey;if(matcher(elem,context,xml)){elem.sizset=true;return elem;}
elem.sizset=false;}}}}else{while((elem=elem[dir])){if(checkNonElements||elem.nodeType===1){if(matcher(elem,context,xml)){return elem;}}}}};}
function elementMatcher(matchers){return matchers.length>1?function(elem,context,xml){var i=matchers.length;while(i--){if(!matchers[i](elem,context,xml)){return false;}}
return true;}:matchers[0];}
function condense(unmatched,map,filter,context,xml){var elem,newUnmatched=[],i=0,len=unmatched.length,mapped=map!=null;for(;i<len;i++){if((elem=unmatched[i])){if(!filter||filter(elem,context,xml)){newUnmatched.push(elem);if(mapped){map.push(i);}}}}
return newUnmatched;}
function setMatcher(preFilter,selector,matcher,postFilter,postFinder,postSelector){if(postFilter&&!postFilter[expando]){postFilter=setMatcher(postFilter);}
if(postFinder&&!postFinder[expando]){postFinder=setMatcher(postFinder,postSelector);}
return markFunction(function(seed,results,context,xml){var temp,i,elem,preMap=[],postMap=[],preexisting=results.length,elems=seed||multipleContexts(selector||"*",context.nodeType?[context]:context,[]),matcherIn=preFilter&&(seed||!selector)?condense(elems,preMap,preFilter,context,xml):elems,matcherOut=matcher?postFinder||(seed?preFilter:preexisting||postFilter)?[]:results:matcherIn;if(matcher){matcher(matcherIn,matcherOut,context,xml);}
if(postFilter){temp=condense(matcherOut,postMap);postFilter(temp,[],context,xml);i=temp.length;while(i--){if((elem=temp[i])){matcherOut[postMap[i]]=!(matcherIn[postMap[i]]=elem);}}}
if(seed){if(postFinder||preFilter){if(postFinder){temp=[];i=matcherOut.length;while(i--){if((elem=matcherOut[i])){temp.push((matcherIn[i]=elem));}}
postFinder(null,(matcherOut=[]),temp,xml);}
i=matcherOut.length;while(i--){if((elem=matcherOut[i])&&(temp=postFinder?indexOf.call(seed,elem):preMap[i])>-1){seed[temp]=!(results[temp]=elem);}}}}else{matcherOut=condense(matcherOut===results?matcherOut.splice(preexisting,matcherOut.length):matcherOut);if(postFinder){postFinder(null,results,matcherOut,xml);}else{push.apply(results,matcherOut);}}});}
function matcherFromTokens(tokens){var checkContext,matcher,j,len=tokens.length,leadingRelative=Expr.relative[tokens[0].type],implicitRelative=leadingRelative||Expr.relative[" "],i=leadingRelative?1:0,matchContext=addCombinator(function(elem){return elem===checkContext;},implicitRelative,true),matchAnyContext=addCombinator(function(elem){return indexOf.call(checkContext,elem)>-1;},implicitRelative,true),matchers=[function(elem,context,xml){return(!leadingRelative&&(xml||context!==outermostContext))||((checkContext=context).nodeType?matchContext(elem,context,xml):matchAnyContext(elem,context,xml));}];for(;i<len;i++){if((matcher=Expr.relative[tokens[i].type])){matchers=[addCombinator(elementMatcher(matchers),matcher)];}else{matcher=Expr.filter[tokens[i].type].apply(null,tokens[i].matches);if(matcher[expando]){j=++i;for(;j<len;j++){if(Expr.relative[tokens[j].type]){break;}}
return setMatcher(i>1&&elementMatcher(matchers),i>1&&tokens.slice(0,i-1).join("").replace(rtrim,"$1"),matcher,i<j&&matcherFromTokens(tokens.slice(i,j)),j<len&&matcherFromTokens((tokens=tokens.slice(j))),j<len&&tokens.join(""));}
matchers.push(matcher);}}
return elementMatcher(matchers);}
function matcherFromGroupMatchers(elementMatchers,setMatchers){var bySet=setMatchers.length>0,byElement=elementMatchers.length>0,superMatcher=function(seed,context,xml,results,expandContext){var elem,j,matcher,setMatched=[],matchedCount=0,i="0",unmatched=seed&&[],outermost=expandContext!=null,contextBackup=outermostContext,elems=seed||byElement&&Expr.find["TAG"]("*",expandContext&&context.parentNode||context),dirrunsUnique=(dirruns+=contextBackup==null?1:Math.E);if(outermost){outermostContext=context!==document&&context;cachedruns=superMatcher.el;}
for(;(elem=elems[i])!=null;i++){if(byElement&&elem){for(j=0;(matcher=elementMatchers[j]);j++){if(matcher(elem,context,xml)){results.push(elem);break;}}
if(outermost){dirruns=dirrunsUnique;cachedruns=++superMatcher.el;}}
if(bySet){if((elem=!matcher&&elem)){matchedCount--;}
if(seed){unmatched.push(elem);}}}
matchedCount+=i;if(bySet&&i!==matchedCount){for(j=0;(matcher=setMatchers[j]);j++){matcher(unmatched,setMatched,context,xml);}
if(seed){if(matchedCount>0){while(i--){if(!(unmatched[i]||setMatched[i])){setMatched[i]=pop.call(results);}}}
setMatched=condense(setMatched);}
push.apply(results,setMatched);if(outermost&&!seed&&setMatched.length>0&&(matchedCount+setMatchers.length)>1){Sizzle.uniqueSort(results);}}
if(outermost){dirruns=dirrunsUnique;outermostContext=contextBackup;}
return unmatched;};superMatcher.el=0;return bySet?markFunction(superMatcher):superMatcher;}
compile=Sizzle.compile=function(selector,group){var i,setMatchers=[],elementMatchers=[],cached=compilerCache[expando][selector+" "];if(!cached){if(!group){group=tokenize(selector);}
i=group.length;while(i--){cached=matcherFromTokens(group[i]);if(cached[expando]){setMatchers.push(cached);}else{elementMatchers.push(cached);}}
cached=compilerCache(selector,matcherFromGroupMatchers(elementMatchers,setMatchers));}
return cached;};function multipleContexts(selector,contexts,results){var i=0,len=contexts.length;for(;i<len;i++){Sizzle(selector,contexts[i],results);}
return results;}
function select(selector,context,results,seed,xml){var i,tokens,token,type,find,match=tokenize(selector),j=match.length;if(!seed){if(match.length===1){tokens=match[0]=match[0].slice(0);if(tokens.length>2&&(token=tokens[0]).type==="ID"&&context.nodeType===9&&!xml&&Expr.relative[tokens[1].type]){context=Expr.find["ID"](token.matches[0].replace(rbackslash,""),context,xml)[0];if(!context){return results;}
selector=selector.slice(tokens.shift().length);}
for(i=matchExpr["POS"].test(selector)?-1:tokens.length-1;i>=0;i--){token=tokens[i];if(Expr.relative[(type=token.type)]){break;}
if((find=Expr.find[type])){if((seed=find(token.matches[0].replace(rbackslash,""),rsibling.test(tokens[0].type)&&context.parentNode||context,xml))){tokens.splice(i,1);selector=seed.length&&tokens.join("");if(!selector){push.apply(results,slice.call(seed,0));return results;}
break;}}}}}
compile(selector,match)(seed,context,xml,results,rsibling.test(selector));return results;}
if(document.querySelectorAll){(function(){var disconnectedMatch,oldSelect=select,rescape=/'|\\/g,rattributeQuotes=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,rbuggyQSA=[":focus"],rbuggyMatches=[":active"],matches=docElem.matchesSelector||docElem.mozMatchesSelector||docElem.webkitMatchesSelector||docElem.oMatchesSelector||docElem.msMatchesSelector;assert(function(div){div.innerHTML="<select><option selected=''></option></select>";if(!div.querySelectorAll("[selected]").length){rbuggyQSA.push("\\["+whitespace+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)");}
if(!div.querySelectorAll(":checked").length){rbuggyQSA.push(":checked");}});assert(function(div){div.innerHTML="<p test=''></p>";if(div.querySelectorAll("[test^='']").length){rbuggyQSA.push("[*^$]="+whitespace+"*(?:\"\"|'')");}
div.innerHTML="<input type='hidden'/>";if(!div.querySelectorAll(":enabled").length){rbuggyQSA.push(":enabled",":disabled");}});rbuggyQSA=new RegExp(rbuggyQSA.join("|"));select=function(selector,context,results,seed,xml){if(!seed&&!xml&&!rbuggyQSA.test(selector)){var groups,i,old=true,nid=expando,newContext=context,newSelector=context.nodeType===9&&selector;if(context.nodeType===1&&context.nodeName.toLowerCase()!=="object"){groups=tokenize(selector);if((old=context.getAttribute("id"))){nid=old.replace(rescape,"\\$&");}else{context.setAttribute("id",nid);}
nid="[id='"+nid+"'] ";i=groups.length;while(i--){groups[i]=nid+groups[i].join("");}
newContext=rsibling.test(selector)&&context.parentNode||context;newSelector=groups.join(",");}
if(newSelector){try{push.apply(results,slice.call(newContext.querySelectorAll(newSelector),0));return results;}catch(qsaError){}finally{if(!old){context.removeAttribute("id");}}}}
return oldSelect(selector,context,results,seed,xml);};if(matches){assert(function(div){disconnectedMatch=matches.call(div,"div");try{matches.call(div,"[test!='']:sizzle");rbuggyMatches.push("!=",pseudos);}catch(e){}});rbuggyMatches=new RegExp(rbuggyMatches.join("|"));Sizzle.matchesSelector=function(elem,expr){expr=expr.replace(rattributeQuotes,"='$1']");if(!isXML(elem)&&!rbuggyMatches.test(expr)&&!rbuggyQSA.test(expr)){try{var ret=matches.call(elem,expr);if(ret||disconnectedMatch||elem.document&&elem.document.nodeType!==11){return ret;}}catch(e){}}
return Sizzle(expr,null,null,[elem]).length>0;};}})();}
Expr.pseudos["nth"]=Expr.pseudos["eq"];function setFilters(){}
Expr.filters=setFilters.prototype=Expr.pseudos;Expr.setFilters=new setFilters();Sizzle.attr=jQuery.attr;jQuery.find=Sizzle;jQuery.expr=Sizzle.selectors;jQuery.expr[":"]=jQuery.expr.pseudos;jQuery.unique=Sizzle.uniqueSort;jQuery.text=Sizzle.getText;jQuery.isXMLDoc=Sizzle.isXML;jQuery.contains=Sizzle.contains;})(window);var runtil=/Until$/,rparentsprev=/^(?:parents|prev(?:Until|All))/,isSimple=/^.[^:#\[\.,]*$/,rneedsContext=jQuery.expr.match.needsContext,guaranteedUnique={children:true,contents:true,next:true,prev:true};jQuery.fn.extend({find:function(selector){var i,l,length,n,r,ret,self=this;if(typeof selector!=="string"){return jQuery(selector).filter(function(){for(i=0,l=self.length;i<l;i++){if(jQuery.contains(self[i],this)){return true;}}});}
ret=this.pushStack("","find",selector);for(i=0,l=this.length;i<l;i++){length=ret.length;jQuery.find(selector,this[i],ret);if(i>0){for(n=length;n<ret.length;n++){for(r=0;r<length;r++){if(ret[r]===ret[n]){ret.splice(n--,1);break;}}}}}
return ret;},has:function(target){var i,targets=jQuery(target,this),len=targets.length;return this.filter(function(){for(i=0;i<len;i++){if(jQuery.contains(this,targets[i])){return true;}}});},not:function(selector){return this.pushStack(winnow(this,selector,false),"not",selector);},filter:function(selector){return this.pushStack(winnow(this,selector,true),"filter",selector);},is:function(selector){return!!selector&&(typeof selector==="string"?rneedsContext.test(selector)?jQuery(selector,this.context).index(this[0])>=0:jQuery.filter(selector,this).length>0:this.filter(selector).length>0);},closest:function(selectors,context){var cur,i=0,l=this.length,ret=[],pos=rneedsContext.test(selectors)||typeof selectors!=="string"?jQuery(selectors,context||this.context):0;for(;i<l;i++){cur=this[i];while(cur&&cur.ownerDocument&&cur!==context&&cur.nodeType!==11){if(pos?pos.index(cur)>-1:jQuery.find.matchesSelector(cur,selectors)){ret.push(cur);break;}
cur=cur.parentNode;}}
ret=ret.length>1?jQuery.unique(ret):ret;return this.pushStack(ret,"closest",selectors);},index:function(elem){if(!elem){return(this[0]&&this[0].parentNode)?this.prevAll().length:-1;}
if(typeof elem==="string"){return jQuery.inArray(this[0],jQuery(elem));}
return jQuery.inArray(elem.jquery?elem[0]:elem,this);},add:function(selector,context){var set=typeof selector==="string"?jQuery(selector,context):jQuery.makeArray(selector&&selector.nodeType?[selector]:selector),all=jQuery.merge(this.get(),set);return this.pushStack(isDisconnected(set[0])||isDisconnected(all[0])?all:jQuery.unique(all));},addBack:function(selector){return this.add(selector==null?this.prevObject:this.prevObject.filter(selector));}});jQuery.fn.andSelf=jQuery.fn.addBack;function isDisconnected(node){return!node||!node.parentNode||node.parentNode.nodeType===11;}
function sibling(cur,dir){do{cur=cur[dir];}while(cur&&cur.nodeType!==1);return cur;}
jQuery.each({parent:function(elem){var parent=elem.parentNode;return parent&&parent.nodeType!==11?parent:null;},parents:function(elem){return jQuery.dir(elem,"parentNode");},parentsUntil:function(elem,i,until){return jQuery.dir(elem,"parentNode",until);},next:function(elem){return sibling(elem,"nextSibling");},prev:function(elem){return sibling(elem,"previousSibling");},nextAll:function(elem){return jQuery.dir(elem,"nextSibling");},prevAll:function(elem){return jQuery.dir(elem,"previousSibling");},nextUntil:function(elem,i,until){return jQuery.dir(elem,"nextSibling",until);},prevUntil:function(elem,i,until){return jQuery.dir(elem,"previousSibling",until);},siblings:function(elem){return jQuery.sibling((elem.parentNode||{}).firstChild,elem);},children:function(elem){return jQuery.sibling(elem.firstChild);},contents:function(elem){return jQuery.nodeName(elem,"iframe")?elem.contentDocument||elem.contentWindow.document:jQuery.merge([],elem.childNodes);}},function(name,fn){jQuery.fn[name]=function(until,selector){var ret=jQuery.map(this,fn,until);if(!runtil.test(name)){selector=until;}
if(selector&&typeof selector==="string"){ret=jQuery.filter(selector,ret);}
ret=this.length>1&&!guaranteedUnique[name]?jQuery.unique(ret):ret;if(this.length>1&&rparentsprev.test(name)){ret=ret.reverse();}
return this.pushStack(ret,name,core_slice.call(arguments).join(","));};});jQuery.extend({filter:function(expr,elems,not){if(not){expr=":not("+expr+")";}
return elems.length===1?jQuery.find.matchesSelector(elems[0],expr)?[elems[0]]:[]:jQuery.find.matches(expr,elems);},dir:function(elem,dir,until){var matched=[],cur=elem[dir];while(cur&&cur.nodeType!==9&&(until===undefined||cur.nodeType!==1||!jQuery(cur).is(until))){if(cur.nodeType===1){matched.push(cur);}
cur=cur[dir];}
return matched;},sibling:function(n,elem){var r=[];for(;n;n=n.nextSibling){if(n.nodeType===1&&n!==elem){r.push(n);}}
return r;}});function winnow(elements,qualifier,keep){qualifier=qualifier||0;if(jQuery.isFunction(qualifier)){return jQuery.grep(elements,function(elem,i){var retVal=!!qualifier.call(elem,i,elem);return retVal===keep;});}else if(qualifier.nodeType){return jQuery.grep(elements,function(elem,i){return(elem===qualifier)===keep;});}else if(typeof qualifier==="string"){var filtered=jQuery.grep(elements,function(elem){return elem.nodeType===1;});if(isSimple.test(qualifier)){return jQuery.filter(qualifier,filtered,!keep);}else{qualifier=jQuery.filter(qualifier,filtered);}}
return jQuery.grep(elements,function(elem,i){return(jQuery.inArray(elem,qualifier)>=0)===keep;});}
function createSafeFragment(document){var list=nodeNames.split("|"),safeFrag=document.createDocumentFragment();if(safeFrag.createElement){while(list.length){safeFrag.createElement(list.pop());}}
return safeFrag;}
var nodeNames="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|"+"header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",rinlinejQuery=/ jQuery\d+="(?:null|\d+)"/g,rleadingWhitespace=/^\s+/,rxhtmlTag=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,rtagName=/<([\w:]+)/,rtbody=/<tbody/i,rhtml=/<|&#?\w+;/,rnoInnerhtml=/<(?:script|style|link)/i,rnocache=/<(?:script|object|embed|option|style)/i,rnoshimcache=new RegExp("<(?:"+nodeNames+")[\\s/>]","i"),rcheckableType=/^(?:checkbox|radio)$/,rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,rscriptType=/\/(java|ecma)script/i,rcleanScript=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,wrapMap={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},safeFragment=createSafeFragment(document),fragmentDiv=safeFragment.appendChild(document.createElement("div"));wrapMap.optgroup=wrapMap.option;wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead;wrapMap.th=wrapMap.td;if(!jQuery.support.htmlSerialize){wrapMap._default=[1,"X<div>","</div>"];}
jQuery.fn.extend({text:function(value){return jQuery.access(this,function(value){return value===undefined?jQuery.text(this):this.empty().append((this[0]&&this[0].ownerDocument||document).createTextNode(value));},null,value,arguments.length);},wrapAll:function(html){if(jQuery.isFunction(html)){return this.each(function(i){jQuery(this).wrapAll(html.call(this,i));});}
if(this[0]){var wrap=jQuery(html,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){wrap.insertBefore(this[0]);}
wrap.map(function(){var elem=this;while(elem.firstChild&&elem.firstChild.nodeType===1){elem=elem.firstChild;}
return elem;}).append(this);}
return this;},wrapInner:function(html){if(jQuery.isFunction(html)){return this.each(function(i){jQuery(this).wrapInner(html.call(this,i));});}
return this.each(function(){var self=jQuery(this),contents=self.contents();if(contents.length){contents.wrapAll(html);}else{self.append(html);}});},wrap:function(html){var isFunction=jQuery.isFunction(html);return this.each(function(i){jQuery(this).wrapAll(isFunction?html.call(this,i):html);});},unwrap:function(){return this.parent().each(function(){if(!jQuery.nodeName(this,"body")){jQuery(this).replaceWith(this.childNodes);}}).end();},append:function(){return this.domManip(arguments,true,function(elem){if(this.nodeType===1||this.nodeType===11){this.appendChild(elem);}});},prepend:function(){return this.domManip(arguments,true,function(elem){if(this.nodeType===1||this.nodeType===11){this.insertBefore(elem,this.firstChild);}});},before:function(){if(!isDisconnected(this[0])){return this.domManip(arguments,false,function(elem){this.parentNode.insertBefore(elem,this);});}
if(arguments.length){var set=jQuery.clean(arguments);return this.pushStack(jQuery.merge(set,this),"before",this.selector);}},after:function(){if(!isDisconnected(this[0])){return this.domManip(arguments,false,function(elem){this.parentNode.insertBefore(elem,this.nextSibling);});}
if(arguments.length){var set=jQuery.clean(arguments);return this.pushStack(jQuery.merge(this,set),"after",this.selector);}},remove:function(selector,keepData){var elem,i=0;for(;(elem=this[i])!=null;i++){if(!selector||jQuery.filter(selector,[elem]).length){if(!keepData&&elem.nodeType===1){jQuery.cleanData(elem.getElementsByTagName("*"));jQuery.cleanData([elem]);}
if(elem.parentNode){elem.parentNode.removeChild(elem);}}}
return this;},empty:function(){var elem,i=0;for(;(elem=this[i])!=null;i++){if(elem.nodeType===1){jQuery.cleanData(elem.getElementsByTagName("*"));}
while(elem.firstChild){elem.removeChild(elem.firstChild);}}
return this;},clone:function(dataAndEvents,deepDataAndEvents){dataAndEvents=dataAndEvents==null?false:dataAndEvents;deepDataAndEvents=deepDataAndEvents==null?dataAndEvents:deepDataAndEvents;return this.map(function(){return jQuery.clone(this,dataAndEvents,deepDataAndEvents);});},html:function(value){return jQuery.access(this,function(value){var elem=this[0]||{},i=0,l=this.length;if(value===undefined){return elem.nodeType===1?elem.innerHTML.replace(rinlinejQuery,""):undefined;}
if(typeof value==="string"&&!rnoInnerhtml.test(value)&&(jQuery.support.htmlSerialize||!rnoshimcache.test(value))&&(jQuery.support.leadingWhitespace||!rleadingWhitespace.test(value))&&!wrapMap[(rtagName.exec(value)||["",""])[1].toLowerCase()]){value=value.replace(rxhtmlTag,"<$1></$2>");try{for(;i<l;i++){elem=this[i]||{};if(elem.nodeType===1){jQuery.cleanData(elem.getElementsByTagName("*"));elem.innerHTML=value;}}
elem=0;}catch(e){}}
if(elem){this.empty().append(value);}},null,value,arguments.length);},replaceWith:function(value){if(!isDisconnected(this[0])){if(jQuery.isFunction(value)){return this.each(function(i){var self=jQuery(this),old=self.html();self.replaceWith(value.call(this,i,old));});}
if(typeof value!=="string"){value=jQuery(value).detach();}
return this.each(function(){var next=this.nextSibling,parent=this.parentNode;jQuery(this).remove();if(next){jQuery(next).before(value);}else{jQuery(parent).append(value);}});}
return this.length?this.pushStack(jQuery(jQuery.isFunction(value)?value():value),"replaceWith",value):this;},detach:function(selector){return this.remove(selector,true);},domManip:function(args,table,callback){args=[].concat.apply([],args);var results,first,fragment,iNoClone,i=0,value=args[0],scripts=[],l=this.length;if(!jQuery.support.checkClone&&l>1&&typeof value==="string"&&rchecked.test(value)){return this.each(function(){jQuery(this).domManip(args,table,callback);});}
if(jQuery.isFunction(value)){return this.each(function(i){var self=jQuery(this);args[0]=value.call(this,i,table?self.html():undefined);self.domManip(args,table,callback);});}
if(this[0]){results=jQuery.buildFragment(args,this,scripts);fragment=results.fragment;first=fragment.firstChild;if(fragment.childNodes.length===1){fragment=first;}
if(first){table=table&&jQuery.nodeName(first,"tr");for(iNoClone=results.cacheable||l-1;i<l;i++){callback.call(table&&jQuery.nodeName(this[i],"table")?findOrAppend(this[i],"tbody"):this[i],i===iNoClone?fragment:jQuery.clone(fragment,true,true));}}
fragment=first=null;if(scripts.length){jQuery.each(scripts,function(i,elem){if(elem.src){if(jQuery.ajax){jQuery.ajax({url:elem.src,type:"GET",dataType:"script",async:false,global:false,"throws":true});}else{jQuery.error("no ajax");}}else{jQuery.globalEval((elem.text||elem.textContent||elem.innerHTML||"").replace(rcleanScript,""));}
if(elem.parentNode){elem.parentNode.removeChild(elem);}});}}
return this;}});function findOrAppend(elem,tag){return elem.getElementsByTagName(tag)[0]||elem.appendChild(elem.ownerDocument.createElement(tag));}
function cloneCopyEvent(src,dest){if(dest.nodeType!==1||!jQuery.hasData(src)){return;}
var type,i,l,oldData=jQuery._data(src),curData=jQuery._data(dest,oldData),events=oldData.events;if(events){delete curData.handle;curData.events={};for(type in events){for(i=0,l=events[type].length;i<l;i++){jQuery.event.add(dest,type,events[type][i]);}}}
if(curData.data){curData.data=jQuery.extend({},curData.data);}}
function cloneFixAttributes(src,dest){var nodeName;if(dest.nodeType!==1){return;}
if(dest.clearAttributes){dest.clearAttributes();}
if(dest.mergeAttributes){dest.mergeAttributes(src);}
nodeName=dest.nodeName.toLowerCase();if(nodeName==="object"){if(dest.parentNode){dest.outerHTML=src.outerHTML;}
if(jQuery.support.html5Clone&&(src.innerHTML&&!jQuery.trim(dest.innerHTML))){dest.innerHTML=src.innerHTML;}}else if(nodeName==="input"&&rcheckableType.test(src.type)){dest.defaultChecked=dest.checked=src.checked;if(dest.value!==src.value){dest.value=src.value;}}else if(nodeName==="option"){dest.selected=src.defaultSelected;}else if(nodeName==="input"||nodeName==="textarea"){dest.defaultValue=src.defaultValue;}else if(nodeName==="script"&&dest.text!==src.text){dest.text=src.text;}
dest.removeAttribute(jQuery.expando);}
jQuery.buildFragment=function(args,context,scripts){var fragment,cacheable,cachehit,first=args[0];context=context||document;context=!context.nodeType&&context[0]||context;context=context.ownerDocument||context;if(args.length===1&&typeof first==="string"&&first.length<512&&context===document&&first.charAt(0)==="<"&&!rnocache.test(first)&&(jQuery.support.checkClone||!rchecked.test(first))&&(jQuery.support.html5Clone||!rnoshimcache.test(first))){cacheable=true;fragment=jQuery.fragments[first];cachehit=fragment!==undefined;}
if(!fragment){fragment=context.createDocumentFragment();jQuery.clean(args,context,fragment,scripts);if(cacheable){jQuery.fragments[first]=cachehit&&fragment;}}
return{fragment:fragment,cacheable:cacheable};};jQuery.fragments={};jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(name,original){jQuery.fn[name]=function(selector){var elems,i=0,ret=[],insert=jQuery(selector),l=insert.length,parent=this.length===1&&this[0].parentNode;if((parent==null||parent&&parent.nodeType===11&&parent.childNodes.length===1)&&l===1){insert[original](this[0]);return this;}else{for(;i<l;i++){elems=(i>0?this.clone(true):this).get();jQuery(insert[i])[original](elems);ret=ret.concat(elems);}
return this.pushStack(ret,name,insert.selector);}};});function getAll(elem){if(typeof elem.getElementsByTagName!=="undefined"){return elem.getElementsByTagName("*");}else if(typeof elem.querySelectorAll!=="undefined"){return elem.querySelectorAll("*");}else{return[];}}
function fixDefaultChecked(elem){if(rcheckableType.test(elem.type)){elem.defaultChecked=elem.checked;}}
jQuery.extend({clone:function(elem,dataAndEvents,deepDataAndEvents){var srcElements,destElements,i,clone;if(jQuery.support.html5Clone||jQuery.isXMLDoc(elem)||!rnoshimcache.test("<"+elem.nodeName+">")){clone=elem.cloneNode(true);}else{fragmentDiv.innerHTML=elem.outerHTML;fragmentDiv.removeChild(clone=fragmentDiv.firstChild);}
if((!jQuery.support.noCloneEvent||!jQuery.support.noCloneChecked)&&(elem.nodeType===1||elem.nodeType===11)&&!jQuery.isXMLDoc(elem)){cloneFixAttributes(elem,clone);srcElements=getAll(elem);destElements=getAll(clone);for(i=0;srcElements[i];++i){if(destElements[i]){cloneFixAttributes(srcElements[i],destElements[i]);}}}
if(dataAndEvents){cloneCopyEvent(elem,clone);if(deepDataAndEvents){srcElements=getAll(elem);destElements=getAll(clone);for(i=0;srcElements[i];++i){cloneCopyEvent(srcElements[i],destElements[i]);}}}
srcElements=destElements=null;return clone;},clean:function(elems,context,fragment,scripts){var i,j,elem,tag,wrap,depth,div,hasBody,tbody,len,handleScript,jsTags,safe=context===document&&safeFragment,ret=[];if(!context||typeof context.createDocumentFragment==="undefined"){context=document;}
for(i=0;(elem=elems[i])!=null;i++){if(typeof elem==="number"){elem+="";}
if(!elem){continue;}
if(typeof elem==="string"){if(!rhtml.test(elem)){elem=context.createTextNode(elem);}else{safe=safe||createSafeFragment(context);div=context.createElement("div");safe.appendChild(div);elem=elem.replace(rxhtmlTag,"<$1></$2>");tag=(rtagName.exec(elem)||["",""])[1].toLowerCase();wrap=wrapMap[tag]||wrapMap._default;depth=wrap[0];div.innerHTML=wrap[1]+elem+wrap[2];while(depth--){div=div.lastChild;}
if(!jQuery.support.tbody){hasBody=rtbody.test(elem);tbody=tag==="table"&&!hasBody?div.firstChild&&div.firstChild.childNodes:wrap[1]==="<table>"&&!hasBody?div.childNodes:[];for(j=tbody.length-1;j>=0;--j){if(jQuery.nodeName(tbody[j],"tbody")&&!tbody[j].childNodes.length){tbody[j].parentNode.removeChild(tbody[j]);}}}
if(!jQuery.support.leadingWhitespace&&rleadingWhitespace.test(elem)){div.insertBefore(context.createTextNode(rleadingWhitespace.exec(elem)[0]),div.firstChild);}
elem=div.childNodes;div.parentNode.removeChild(div);}}
if(elem.nodeType){ret.push(elem);}else{jQuery.merge(ret,elem);}}
if(div){elem=div=safe=null;}
if(!jQuery.support.appendChecked){for(i=0;(elem=ret[i])!=null;i++){if(jQuery.nodeName(elem,"input")){fixDefaultChecked(elem);}else if(typeof elem.getElementsByTagName!=="undefined"){jQuery.grep(elem.getElementsByTagName("input"),fixDefaultChecked);}}}
if(fragment){handleScript=function(elem){if(!elem.type||rscriptType.test(elem.type)){return scripts?scripts.push(elem.parentNode?elem.parentNode.removeChild(elem):elem):fragment.appendChild(elem);}};for(i=0;(elem=ret[i])!=null;i++){if(!(jQuery.nodeName(elem,"script")&&handleScript(elem))){fragment.appendChild(elem);if(typeof elem.getElementsByTagName!=="undefined"){jsTags=jQuery.grep(jQuery.merge([],elem.getElementsByTagName("script")),handleScript);ret.splice.apply(ret,[i+1,0].concat(jsTags));i+=jsTags.length;}}}}
return ret;},cleanData:function(elems,acceptData){var data,id,elem,type,i=0,internalKey=jQuery.expando,cache=jQuery.cache,deleteExpando=jQuery.support.deleteExpando,special=jQuery.event.special;for(;(elem=elems[i])!=null;i++){if(acceptData||jQuery.acceptData(elem)){id=elem[internalKey];data=id&&cache[id];if(data){if(data.events){for(type in data.events){if(special[type]){jQuery.event.remove(elem,type);}else{jQuery.removeEvent(elem,type,data.handle);}}}
if(cache[id]){delete cache[id];if(deleteExpando){delete elem[internalKey];}else if(elem.removeAttribute){elem.removeAttribute(internalKey);}else{elem[internalKey]=null;}
jQuery.deletedIds.push(id);}}}}}});(function(){var matched,browser;jQuery.uaMatch=function(ua){ua=ua.toLowerCase();var match=/(chrome)[ \/]([\w.]+)/.exec(ua)||/(webkit)[ \/]([\w.]+)/.exec(ua)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(ua)||/(msie) ([\w.]+)/.exec(ua)||ua.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(ua)||[];return{browser:match[1]||"",version:match[2]||"0"};};matched=jQuery.uaMatch(navigator.userAgent);browser={};if(matched.browser){browser[matched.browser]=true;browser.version=matched.version;}
if(browser.chrome){browser.webkit=true;}else if(browser.webkit){browser.safari=true;}
jQuery.browser=browser;jQuery.sub=function(){function jQuerySub(selector,context){return new jQuerySub.fn.init(selector,context);}
jQuery.extend(true,jQuerySub,this);jQuerySub.superclass=this;jQuerySub.fn=jQuerySub.prototype=this();jQuerySub.fn.constructor=jQuerySub;jQuerySub.sub=this.sub;jQuerySub.fn.init=function init(selector,context){if(context&&context instanceof jQuery&&!(context instanceof jQuerySub)){context=jQuerySub(context);}
return jQuery.fn.init.call(this,selector,context,rootjQuerySub);};jQuerySub.fn.init.prototype=jQuerySub.fn;var rootjQuerySub=jQuerySub(document);return jQuerySub;};})();var curCSS,iframe,iframeDoc,ralpha=/alpha\([^)]*\)/i,ropacity=/opacity=([^)]*)/,rposition=/^(top|right|bottom|left)$/,rdisplayswap=/^(none|table(?!-c[ea]).+)/,rmargin=/^margin/,rnumsplit=new RegExp("^("+core_pnum+")(.*)$","i"),rnumnonpx=new RegExp("^("+core_pnum+")(?!px)[a-z%]+$","i"),rrelNum=new RegExp("^([-+])=("+core_pnum+")","i"),elemdisplay={BODY:"block"},cssShow={position:"absolute",visibility:"hidden",display:"block"},cssNormalTransform={letterSpacing:0,fontWeight:400},cssExpand=["Top","Right","Bottom","Left"],cssPrefixes=["Webkit","O","Moz","ms"],eventsToggle=jQuery.fn.toggle;function vendorPropName(style,name){if(name in style){return name;}
var capName=name.charAt(0).toUpperCase()+name.slice(1),origName=name,i=cssPrefixes.length;while(i--){name=cssPrefixes[i]+capName;if(name in style){return name;}}
return origName;}
function isHidden(elem,el){elem=el||elem;return jQuery.css(elem,"display")==="none"||!jQuery.contains(elem.ownerDocument,elem);}
function showHide(elements,show){var elem,display,values=[],index=0,length=elements.length;for(;index<length;index++){elem=elements[index];if(!elem.style){continue;}
values[index]=jQuery._data(elem,"olddisplay");if(show){if(!values[index]&&elem.style.display==="none"){elem.style.display="";}
if(elem.style.display===""&&isHidden(elem)){values[index]=jQuery._data(elem,"olddisplay",css_defaultDisplay(elem.nodeName));}}else{display=curCSS(elem,"display");if(!values[index]&&display!=="none"){jQuery._data(elem,"olddisplay",display);}}}
for(index=0;index<length;index++){elem=elements[index];if(!elem.style){continue;}
if(!show||elem.style.display==="none"||elem.style.display===""){elem.style.display=show?values[index]||"":"none";}}
return elements;}
jQuery.fn.extend({css:function(name,value){return jQuery.access(this,function(elem,name,value){return value!==undefined?jQuery.style(elem,name,value):jQuery.css(elem,name);},name,value,arguments.length>1);},show:function(){return showHide(this,true);},hide:function(){return showHide(this);},toggle:function(state,fn2){var bool=typeof state==="boolean";if(jQuery.isFunction(state)&&jQuery.isFunction(fn2)){return eventsToggle.apply(this,arguments);}
return this.each(function(){if(bool?state:isHidden(this)){jQuery(this).show();}else{jQuery(this).hide();}});}});jQuery.extend({cssHooks:{opacity:{get:function(elem,computed){if(computed){var ret=curCSS(elem,"opacity");return ret===""?"1":ret;}}}},cssNumber:{"fillOpacity":true,"fontWeight":true,"lineHeight":true,"opacity":true,"orphans":true,"widows":true,"zIndex":true,"zoom":true},cssProps:{"float":jQuery.support.cssFloat?"cssFloat":"styleFloat"},style:function(elem,name,value,extra){if(!elem||elem.nodeType===3||elem.nodeType===8||!elem.style){return;}
var ret,type,hooks,origName=jQuery.camelCase(name),style=elem.style;name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(style,origName));hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName];if(value!==undefined){type=typeof value;if(type==="string"&&(ret=rrelNum.exec(value))){value=(ret[1]+1)*ret[2]+parseFloat(jQuery.css(elem,name));type="number";}
if(value==null||type==="number"&&isNaN(value)){return;}
if(type==="number"&&!jQuery.cssNumber[origName]){value+="px";}
if(!hooks||!("set"in hooks)||(value=hooks.set(elem,value,extra))!==undefined){try{style[name]=value;}catch(e){}}}else{if(hooks&&"get"in hooks&&(ret=hooks.get(elem,false,extra))!==undefined){return ret;}
return style[name];}},css:function(elem,name,numeric,extra){var val,num,hooks,origName=jQuery.camelCase(name);name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(elem.style,origName));hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName];if(hooks&&"get"in hooks){val=hooks.get(elem,true,extra);}
if(val===undefined){val=curCSS(elem,name);}
if(val==="normal"&&name in cssNormalTransform){val=cssNormalTransform[name];}
if(numeric||extra!==undefined){num=parseFloat(val);return numeric||jQuery.isNumeric(num)?num||0:val;}
return val;},swap:function(elem,options,callback){var ret,name,old={};for(name in options){old[name]=elem.style[name];elem.style[name]=options[name];}
ret=callback.call(elem);for(name in options){elem.style[name]=old[name];}
return ret;}});if(window.getComputedStyle){curCSS=function(elem,name){var ret,width,minWidth,maxWidth,computed=window.getComputedStyle(elem,null),style=elem.style;if(computed){ret=computed.getPropertyValue(name)||computed[name];if(ret===""&&!jQuery.contains(elem.ownerDocument,elem)){ret=jQuery.style(elem,name);}
if(rnumnonpx.test(ret)&&rmargin.test(name)){width=style.width;minWidth=style.minWidth;maxWidth=style.maxWidth;style.minWidth=style.maxWidth=style.width=ret;ret=computed.width;style.width=width;style.minWidth=minWidth;style.maxWidth=maxWidth;}}
return ret;};}else if(document.documentElement.currentStyle){curCSS=function(elem,name){var left,rsLeft,ret=elem.currentStyle&&elem.currentStyle[name],style=elem.style;if(ret==null&&style&&style[name]){ret=style[name];}
if(rnumnonpx.test(ret)&&!rposition.test(name)){left=style.left;rsLeft=elem.runtimeStyle&&elem.runtimeStyle.left;if(rsLeft){elem.runtimeStyle.left=elem.currentStyle.left;}
style.left=name==="fontSize"?"1em":ret;ret=style.pixelLeft+"px";style.left=left;if(rsLeft){elem.runtimeStyle.left=rsLeft;}}
return ret===""?"auto":ret;};}
function setPositiveNumber(elem,value,subtract){var matches=rnumsplit.exec(value);return matches?Math.max(0,matches[1]-(subtract||0))+(matches[2]||"px"):value;}
function augmentWidthOrHeight(elem,name,extra,isBorderBox){var i=extra===(isBorderBox?"border":"content")?4:name==="width"?1:0,val=0;for(;i<4;i+=2){if(extra==="margin"){val+=jQuery.css(elem,extra+cssExpand[i],true);}
if(isBorderBox){if(extra==="content"){val-=parseFloat(curCSS(elem,"padding"+cssExpand[i]))||0;}
if(extra!=="margin"){val-=parseFloat(curCSS(elem,"border"+cssExpand[i]+"Width"))||0;}}else{val+=parseFloat(curCSS(elem,"padding"+cssExpand[i]))||0;if(extra!=="padding"){val+=parseFloat(curCSS(elem,"border"+cssExpand[i]+"Width"))||0;}}}
return val;}
function getWidthOrHeight(elem,name,extra){var val=name==="width"?elem.offsetWidth:elem.offsetHeight,valueIsBorderBox=true,isBorderBox=jQuery.support.boxSizing&&jQuery.css(elem,"boxSizing")==="border-box";if(val<=0||val==null){val=curCSS(elem,name);if(val<0||val==null){val=elem.style[name];}
if(rnumnonpx.test(val)){return val;}
valueIsBorderBox=isBorderBox&&(jQuery.support.boxSizingReliable||val===elem.style[name]);val=parseFloat(val)||0;}
return(val+
augmentWidthOrHeight(elem,name,extra||(isBorderBox?"border":"content"),valueIsBorderBox))+"px";}
function css_defaultDisplay(nodeName){if(elemdisplay[nodeName]){return elemdisplay[nodeName];}
var elem=jQuery("<"+nodeName+">").appendTo(document.body),display=elem.css("display");elem.remove();if(display==="none"||display===""){iframe=document.body.appendChild(iframe||jQuery.extend(document.createElement("iframe"),{frameBorder:0,width:0,height:0}));if(!iframeDoc||!iframe.createElement){iframeDoc=(iframe.contentWindow||iframe.contentDocument).document;iframeDoc.write("<!doctype html><html><body>");iframeDoc.close();}
elem=iframeDoc.body.appendChild(iframeDoc.createElement(nodeName));display=curCSS(elem,"display");document.body.removeChild(iframe);}
elemdisplay[nodeName]=display;return display;}
jQuery.each(["height","width"],function(i,name){jQuery.cssHooks[name]={get:function(elem,computed,extra){if(computed){if(elem.offsetWidth===0&&rdisplayswap.test(curCSS(elem,"display"))){return jQuery.swap(elem,cssShow,function(){return getWidthOrHeight(elem,name,extra);});}else{return getWidthOrHeight(elem,name,extra);}}},set:function(elem,value,extra){return setPositiveNumber(elem,value,extra?augmentWidthOrHeight(elem,name,extra,jQuery.support.boxSizing&&jQuery.css(elem,"boxSizing")==="border-box"):0);}};});if(!jQuery.support.opacity){jQuery.cssHooks.opacity={get:function(elem,computed){return ropacity.test((computed&&elem.currentStyle?elem.currentStyle.filter:elem.style.filter)||"")?(0.01*parseFloat(RegExp.$1))+"":computed?"1":"";},set:function(elem,value){var style=elem.style,currentStyle=elem.currentStyle,opacity=jQuery.isNumeric(value)?"alpha(opacity="+value*100+")":"",filter=currentStyle&&currentStyle.filter||style.filter||"";style.zoom=1;if(value>=1&&jQuery.trim(filter.replace(ralpha,""))===""&&style.removeAttribute){style.removeAttribute("filter");if(currentStyle&&!currentStyle.filter){return;}}
style.filter=ralpha.test(filter)?filter.replace(ralpha,opacity):filter+" "+opacity;}};}
jQuery(function(){if(!jQuery.support.reliableMarginRight){jQuery.cssHooks.marginRight={get:function(elem,computed){return jQuery.swap(elem,{"display":"inline-block"},function(){if(computed){return curCSS(elem,"marginRight");}});}};}
if(!jQuery.support.pixelPosition&&jQuery.fn.position){jQuery.each(["top","left"],function(i,prop){jQuery.cssHooks[prop]={get:function(elem,computed){if(computed){var ret=curCSS(elem,prop);return rnumnonpx.test(ret)?jQuery(elem).position()[prop]+"px":ret;}}};});}});if(jQuery.expr&&jQuery.expr.filters){jQuery.expr.filters.hidden=function(elem){return(elem.offsetWidth===0&&elem.offsetHeight===0)||(!jQuery.support.reliableHiddenOffsets&&((elem.style&&elem.style.display)||curCSS(elem,"display"))==="none");};jQuery.expr.filters.visible=function(elem){return!jQuery.expr.filters.hidden(elem);};}
jQuery.each({margin:"",padding:"",border:"Width"},function(prefix,suffix){jQuery.cssHooks[prefix+suffix]={expand:function(value){var i,parts=typeof value==="string"?value.split(" "):[value],expanded={};for(i=0;i<4;i++){expanded[prefix+cssExpand[i]+suffix]=parts[i]||parts[i-2]||parts[0];}
return expanded;}};if(!rmargin.test(prefix)){jQuery.cssHooks[prefix+suffix].set=setPositiveNumber;}});var r20=/%20/g,rbracket=/\[\]$/,rCRLF=/\r?\n/g,rinput=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,rselectTextarea=/^(?:select|textarea)/i;jQuery.fn.extend({serialize:function(){return jQuery.param(this.serializeArray());},serializeArray:function(){return this.map(function(){return this.elements?jQuery.makeArray(this.elements):this;}).filter(function(){return this.name&&!this.disabled&&(this.checked||rselectTextarea.test(this.nodeName)||rinput.test(this.type));}).map(function(i,elem){var val=jQuery(this).val();return val==null?null:jQuery.isArray(val)?jQuery.map(val,function(val,i){return{name:elem.name,value:val.replace(rCRLF,"\r\n")};}):{name:elem.name,value:val.replace(rCRLF,"\r\n")};}).get();}});jQuery.param=function(a,traditional){var prefix,s=[],add=function(key,value){value=jQuery.isFunction(value)?value():(value==null?"":value);s[s.length]=encodeURIComponent(key)+"="+encodeURIComponent(value);};if(traditional===undefined){traditional=jQuery.ajaxSettings&&jQuery.ajaxSettings.traditional;}
if(jQuery.isArray(a)||(a.jquery&&!jQuery.isPlainObject(a))){jQuery.each(a,function(){add(this.name,this.value);});}else{for(prefix in a){buildParams(prefix,a[prefix],traditional,add);}}
return s.join("&").replace(r20,"+");};function buildParams(prefix,obj,traditional,add){var name;if(jQuery.isArray(obj)){jQuery.each(obj,function(i,v){if(traditional||rbracket.test(prefix)){add(prefix,v);}else{buildParams(prefix+"["+(typeof v==="object"?i:"")+"]",v,traditional,add);}});}else if(!traditional&&jQuery.type(obj)==="object"){for(name in obj){buildParams(prefix+"["+name+"]",obj[name],traditional,add);}}else{add(prefix,obj);}}
var
ajaxLocParts,ajaxLocation,rhash=/#.*$/,rheaders=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,rlocalProtocol=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,rnoContent=/^(?:GET|HEAD)$/,rprotocol=/^\/\//,rquery=/\?/,rscript=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,rts=/([?&])_=[^&]*/,rurl=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,_load=jQuery.fn.load,prefilters={},transports={},allTypes=["*/"]+["*"];try{ajaxLocation=location.href;}catch(e){ajaxLocation=document.createElement("a");ajaxLocation.href="";ajaxLocation=ajaxLocation.href;}
ajaxLocParts=rurl.exec(ajaxLocation.toLowerCase())||[];function addToPrefiltersOrTransports(structure){return function(dataTypeExpression,func){if(typeof dataTypeExpression!=="string"){func=dataTypeExpression;dataTypeExpression="*";}
var dataType,list,placeBefore,dataTypes=dataTypeExpression.toLowerCase().split(core_rspace),i=0,length=dataTypes.length;if(jQuery.isFunction(func)){for(;i<length;i++){dataType=dataTypes[i];placeBefore=/^\+/.test(dataType);if(placeBefore){dataType=dataType.substr(1)||"*";}
list=structure[dataType]=structure[dataType]||[];list[placeBefore?"unshift":"push"](func);}}};}
function inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR,dataType,inspected){dataType=dataType||options.dataTypes[0];inspected=inspected||{};inspected[dataType]=true;var selection,list=structure[dataType],i=0,length=list?list.length:0,executeOnly=(structure===prefilters);for(;i<length&&(executeOnly||!selection);i++){selection=list[i](options,originalOptions,jqXHR);if(typeof selection==="string"){if(!executeOnly||inspected[selection]){selection=undefined;}else{options.dataTypes.unshift(selection);selection=inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR,selection,inspected);}}}
if((executeOnly||!selection)&&!inspected["*"]){selection=inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR,"*",inspected);}
return selection;}
function ajaxExtend(target,src){var key,deep,flatOptions=jQuery.ajaxSettings.flatOptions||{};for(key in src){if(src[key]!==undefined){(flatOptions[key]?target:(deep||(deep={})))[key]=src[key];}}
if(deep){jQuery.extend(true,target,deep);}}
jQuery.fn.load=function(url,params,callback){if(typeof url!=="string"&&_load){return _load.apply(this,arguments);}
if(!this.length){return this;}
var selector,type,response,self=this,off=url.indexOf(" ");if(off>=0){selector=url.slice(off,url.length);url=url.slice(0,off);}
if(jQuery.isFunction(params)){callback=params;params=undefined;}else if(params&&typeof params==="object"){type="POST";}
jQuery.ajax({url:url,type:type,dataType:"html",data:params,complete:function(jqXHR,status){if(callback){self.each(callback,response||[jqXHR.responseText,status,jqXHR]);}}}).done(function(responseText){response=arguments;self.html(selector?jQuery("<div>").append(responseText.replace(rscript,"")).find(selector):responseText);});return this;};jQuery.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(i,o){jQuery.fn[o]=function(f){return this.on(o,f);};});jQuery.each(["get","post"],function(i,method){jQuery[method]=function(url,data,callback,type){if(jQuery.isFunction(data)){type=type||callback;callback=data;data=undefined;}
return jQuery.ajax({type:method,url:url,data:data,success:callback,dataType:type});};});jQuery.extend({getScript:function(url,callback){return jQuery.get(url,undefined,callback,"script");},getJSON:function(url,data,callback){return jQuery.get(url,data,callback,"json");},ajaxSetup:function(target,settings){if(settings){ajaxExtend(target,jQuery.ajaxSettings);}else{settings=target;target=jQuery.ajaxSettings;}
ajaxExtend(target,settings);return target;},ajaxSettings:{url:ajaxLocation,isLocal:rlocalProtocol.test(ajaxLocParts[1]),global:true,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:true,async:true,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":allTypes},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":window.String,"text html":true,"text json":jQuery.parseJSON,"text xml":jQuery.parseXML},flatOptions:{context:true,url:true}},ajaxPrefilter:addToPrefiltersOrTransports(prefilters),ajaxTransport:addToPrefiltersOrTransports(transports),ajax:function(url,options){if(typeof url==="object"){options=url;url=undefined;}
options=options||{};var
ifModifiedKey,responseHeadersString,responseHeaders,transport,timeoutTimer,parts,fireGlobals,i,s=jQuery.ajaxSetup({},options),callbackContext=s.context||s,globalEventContext=callbackContext!==s&&(callbackContext.nodeType||callbackContext instanceof jQuery)?jQuery(callbackContext):jQuery.event,deferred=jQuery.Deferred(),completeDeferred=jQuery.Callbacks("once memory"),statusCode=s.statusCode||{},requestHeaders={},requestHeadersNames={},state=0,strAbort="canceled",jqXHR={readyState:0,setRequestHeader:function(name,value){if(!state){var lname=name.toLowerCase();name=requestHeadersNames[lname]=requestHeadersNames[lname]||name;requestHeaders[name]=value;}
return this;},getAllResponseHeaders:function(){return state===2?responseHeadersString:null;},getResponseHeader:function(key){var match;if(state===2){if(!responseHeaders){responseHeaders={};while((match=rheaders.exec(responseHeadersString))){responseHeaders[match[1].toLowerCase()]=match[2];}}
match=responseHeaders[key.toLowerCase()];}
return match===undefined?null:match;},overrideMimeType:function(type){if(!state){s.mimeType=type;}
return this;},abort:function(statusText){statusText=statusText||strAbort;if(transport){transport.abort(statusText);}
done(0,statusText);return this;}};function done(status,nativeStatusText,responses,headers){var isSuccess,success,error,response,modified,statusText=nativeStatusText;if(state===2){return;}
state=2;if(timeoutTimer){clearTimeout(timeoutTimer);}
transport=undefined;responseHeadersString=headers||"";jqXHR.readyState=status>0?4:0;if(responses){response=ajaxHandleResponses(s,jqXHR,responses);}
if(status>=200&&status<300||status===304){if(s.ifModified){modified=jqXHR.getResponseHeader("Last-Modified");if(modified){jQuery.lastModified[ifModifiedKey]=modified;}
modified=jqXHR.getResponseHeader("Etag");if(modified){jQuery.etag[ifModifiedKey]=modified;}}
if(status===304){statusText="notmodified";isSuccess=true;}else{isSuccess=ajaxConvert(s,response);statusText=isSuccess.state;success=isSuccess.data;error=isSuccess.error;isSuccess=!error;}}else{error=statusText;if(!statusText||status){statusText="error";if(status<0){status=0;}}}
jqXHR.status=status;jqXHR.statusText=(nativeStatusText||statusText)+"";if(isSuccess){deferred.resolveWith(callbackContext,[success,statusText,jqXHR]);}else{deferred.rejectWith(callbackContext,[jqXHR,statusText,error]);}
jqXHR.statusCode(statusCode);statusCode=undefined;if(fireGlobals){globalEventContext.trigger("ajax"+(isSuccess?"Success":"Error"),[jqXHR,s,isSuccess?success:error]);}
completeDeferred.fireWith(callbackContext,[jqXHR,statusText]);if(fireGlobals){globalEventContext.trigger("ajaxComplete",[jqXHR,s]);if(!(--jQuery.active)){jQuery.event.trigger("ajaxStop");}}}
deferred.promise(jqXHR);jqXHR.success=jqXHR.done;jqXHR.error=jqXHR.fail;jqXHR.complete=completeDeferred.add;jqXHR.statusCode=function(map){if(map){var tmp;if(state<2){for(tmp in map){statusCode[tmp]=[statusCode[tmp],map[tmp]];}}else{tmp=map[jqXHR.status];jqXHR.always(tmp);}}
return this;};s.url=((url||s.url)+"").replace(rhash,"").replace(rprotocol,ajaxLocParts[1]+"//");s.dataTypes=jQuery.trim(s.dataType||"*").toLowerCase().split(core_rspace);if(s.crossDomain==null){parts=rurl.exec(s.url.toLowerCase());s.crossDomain=!!(parts&&(parts[1]!==ajaxLocParts[1]||parts[2]!==ajaxLocParts[2]||(parts[3]||(parts[1]==="http:"?80:443))!=(ajaxLocParts[3]||(ajaxLocParts[1]==="http:"?80:443))));}
if(s.data&&s.processData&&typeof s.data!=="string"){s.data=jQuery.param(s.data,s.traditional);}
inspectPrefiltersOrTransports(prefilters,s,options,jqXHR);if(state===2){return jqXHR;}
fireGlobals=s.global;s.type=s.type.toUpperCase();s.hasContent=!rnoContent.test(s.type);if(fireGlobals&&jQuery.active++===0){jQuery.event.trigger("ajaxStart");}
if(!s.hasContent){if(s.data){s.url+=(rquery.test(s.url)?"&":"?")+s.data;delete s.data;}
ifModifiedKey=s.url;if(s.cache===false){var ts=jQuery.now(),ret=s.url.replace(rts,"$1_="+ts);s.url=ret+((ret===s.url)?(rquery.test(s.url)?"&":"?")+"_="+ts:"");}}
if(s.data&&s.hasContent&&s.contentType!==false||options.contentType){jqXHR.setRequestHeader("Content-Type",s.contentType);}
if(s.ifModified){ifModifiedKey=ifModifiedKey||s.url;if(jQuery.lastModified[ifModifiedKey]){jqXHR.setRequestHeader("If-Modified-Since",jQuery.lastModified[ifModifiedKey]);}
if(jQuery.etag[ifModifiedKey]){jqXHR.setRequestHeader("If-None-Match",jQuery.etag[ifModifiedKey]);}}
jqXHR.setRequestHeader("Accept",s.dataTypes[0]&&s.accepts[s.dataTypes[0]]?s.accepts[s.dataTypes[0]]+(s.dataTypes[0]!=="*"?", "+allTypes+"; q=0.01":""):s.accepts["*"]);for(i in s.headers){jqXHR.setRequestHeader(i,s.headers[i]);}
if(s.beforeSend&&(s.beforeSend.call(callbackContext,jqXHR,s)===false||state===2)){return jqXHR.abort();}
strAbort="abort";for(i in{success:1,error:1,complete:1}){jqXHR[i](s[i]);}
transport=inspectPrefiltersOrTransports(transports,s,options,jqXHR);if(!transport){done(-1,"No Transport");}else{jqXHR.readyState=1;if(fireGlobals){globalEventContext.trigger("ajaxSend",[jqXHR,s]);}
if(s.async&&s.timeout>0){timeoutTimer=setTimeout(function(){jqXHR.abort("timeout");},s.timeout);}
try{state=1;transport.send(requestHeaders,done);}catch(e){if(state<2){done(-1,e);}else{throw e;}}}
return jqXHR;},active:0,lastModified:{},etag:{}});function ajaxHandleResponses(s,jqXHR,responses){var ct,type,finalDataType,firstDataType,contents=s.contents,dataTypes=s.dataTypes,responseFields=s.responseFields;for(type in responseFields){if(type in responses){jqXHR[responseFields[type]]=responses[type];}}
while(dataTypes[0]==="*"){dataTypes.shift();if(ct===undefined){ct=s.mimeType||jqXHR.getResponseHeader("content-type");}}
if(ct){for(type in contents){if(contents[type]&&contents[type].test(ct)){dataTypes.unshift(type);break;}}}
if(dataTypes[0]in responses){finalDataType=dataTypes[0];}else{for(type in responses){if(!dataTypes[0]||s.converters[type+" "+dataTypes[0]]){finalDataType=type;break;}
if(!firstDataType){firstDataType=type;}}
finalDataType=finalDataType||firstDataType;}
if(finalDataType){if(finalDataType!==dataTypes[0]){dataTypes.unshift(finalDataType);}
return responses[finalDataType];}}
function ajaxConvert(s,response){var conv,conv2,current,tmp,dataTypes=s.dataTypes.slice(),prev=dataTypes[0],converters={},i=0;if(s.dataFilter){response=s.dataFilter(response,s.dataType);}
if(dataTypes[1]){for(conv in s.converters){converters[conv.toLowerCase()]=s.converters[conv];}}
for(;(current=dataTypes[++i]);){if(current!=="*"){if(prev!=="*"&&prev!==current){conv=converters[prev+" "+current]||converters["* "+current];if(!conv){for(conv2 in converters){tmp=conv2.split(" ");if(tmp[1]===current){conv=converters[prev+" "+tmp[0]]||converters["* "+tmp[0]];if(conv){if(conv===true){conv=converters[conv2];}else if(converters[conv2]!==true){current=tmp[0];dataTypes.splice(i--,0,current);}
break;}}}}
if(conv!==true){if(conv&&s["throws"]){response=conv(response);}else{try{response=conv(response);}catch(e){return{state:"parsererror",error:conv?e:"No conversion from "+prev+" to "+current};}}}}
prev=current;}}
return{state:"success",data:response};}
var oldCallbacks=[],rquestion=/\?/,rjsonp=/(=)\?(?=&|$)|\?\?/,nonce=jQuery.now();jQuery.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var callback=oldCallbacks.pop()||(jQuery.expando+"_"+(nonce++));this[callback]=true;return callback;}});jQuery.ajaxPrefilter("json jsonp",function(s,originalSettings,jqXHR){var callbackName,overwritten,responseContainer,data=s.data,url=s.url,hasCallback=s.jsonp!==false,replaceInUrl=hasCallback&&rjsonp.test(url),replaceInData=hasCallback&&!replaceInUrl&&typeof data==="string"&&!(s.contentType||"").indexOf("application/x-www-form-urlencoded")&&rjsonp.test(data);if(s.dataTypes[0]==="jsonp"||replaceInUrl||replaceInData){callbackName=s.jsonpCallback=jQuery.isFunction(s.jsonpCallback)?s.jsonpCallback():s.jsonpCallback;overwritten=window[callbackName];if(replaceInUrl){s.url=url.replace(rjsonp,"$1"+callbackName);}else if(replaceInData){s.data=data.replace(rjsonp,"$1"+callbackName);}else if(hasCallback){s.url+=(rquestion.test(url)?"&":"?")+s.jsonp+"="+callbackName;}
s.converters["script json"]=function(){if(!responseContainer){jQuery.error(callbackName+" was not called");}
return responseContainer[0];};s.dataTypes[0]="json";window[callbackName]=function(){responseContainer=arguments;};jqXHR.always(function(){window[callbackName]=overwritten;if(s[callbackName]){s.jsonpCallback=originalSettings.jsonpCallback;oldCallbacks.push(callbackName);}
if(responseContainer&&jQuery.isFunction(overwritten)){overwritten(responseContainer[0]);}
responseContainer=overwritten=undefined;});return"script";}});jQuery.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(text){jQuery.globalEval(text);return text;}}});jQuery.ajaxPrefilter("script",function(s){if(s.cache===undefined){s.cache=false;}
if(s.crossDomain){s.type="GET";s.global=false;}});jQuery.ajaxTransport("script",function(s){if(s.crossDomain){var script,head=document.head||document.getElementsByTagName("head")[0]||document.documentElement;return{send:function(_,callback){script=document.createElement("script");script.async="async";if(s.scriptCharset){script.charset=s.scriptCharset;}
script.src=s.url;script.onload=script.onreadystatechange=function(_,isAbort){if(isAbort||!script.readyState||/loaded|complete/.test(script.readyState)){script.onload=script.onreadystatechange=null;if(head&&script.parentNode){head.removeChild(script);}
script=undefined;if(!isAbort){callback(200,"success");}}};head.insertBefore(script,head.firstChild);},abort:function(){if(script){script.onload(0,1);}}};}});var xhrCallbacks,xhrOnUnloadAbort=window.ActiveXObject?function(){for(var key in xhrCallbacks){xhrCallbacks[key](0,1);}}:false,xhrId=0;function createStandardXHR(){try{return new window.XMLHttpRequest();}catch(e){}}
function createActiveXHR(){try{return new window.ActiveXObject("Microsoft.XMLHTTP");}catch(e){}}
jQuery.ajaxSettings.xhr=window.ActiveXObject?function(){return!this.isLocal&&createStandardXHR()||createActiveXHR();}:createStandardXHR;(function(xhr){jQuery.extend(jQuery.support,{ajax:!!xhr,cors:!!xhr&&("withCredentials"in xhr)});})(jQuery.ajaxSettings.xhr());if(jQuery.support.ajax){jQuery.ajaxTransport(function(s){if(!s.crossDomain||jQuery.support.cors){var callback;return{send:function(headers,complete){var handle,i,xhr=s.xhr();if(s.username){xhr.open(s.type,s.url,s.async,s.username,s.password);}else{xhr.open(s.type,s.url,s.async);}
if(s.xhrFields){for(i in s.xhrFields){xhr[i]=s.xhrFields[i];}}
if(s.mimeType&&xhr.overrideMimeType){xhr.overrideMimeType(s.mimeType);}
if(!s.crossDomain&&!headers["X-Requested-With"]){headers["X-Requested-With"]="XMLHttpRequest";}
try{for(i in headers){xhr.setRequestHeader(i,headers[i]);}}catch(_){}
xhr.send((s.hasContent&&s.data)||null);callback=function(_,isAbort){var status,statusText,responseHeaders,responses,xml;try{if(callback&&(isAbort||xhr.readyState===4)){callback=undefined;if(handle){xhr.onreadystatechange=jQuery.noop;if(xhrOnUnloadAbort){delete xhrCallbacks[handle];}}
if(isAbort){if(xhr.readyState!==4){xhr.abort();}}else{status=xhr.status;responseHeaders=xhr.getAllResponseHeaders();responses={};xml=xhr.responseXML;if(xml&&xml.documentElement){responses.xml=xml;}
try{responses.text=xhr.responseText;}catch(e){}
try{statusText=xhr.statusText;}catch(e){statusText="";}
if(!status&&s.isLocal&&!s.crossDomain){status=responses.text?200:404;}else if(status===1223){status=204;}}}}catch(firefoxAccessException){if(!isAbort){complete(-1,firefoxAccessException);}}
if(responses){complete(status,statusText,responses,responseHeaders);}};if(!s.async){callback();}else if(xhr.readyState===4){setTimeout(callback,0);}else{handle=++xhrId;if(xhrOnUnloadAbort){if(!xhrCallbacks){xhrCallbacks={};jQuery(window).unload(xhrOnUnloadAbort);}
xhrCallbacks[handle]=callback;}
xhr.onreadystatechange=callback;}},abort:function(){if(callback){callback(0,1);}}};}});}
var fxNow,timerId,rfxtypes=/^(?:toggle|show|hide)$/,rfxnum=new RegExp("^(?:([-+])=|)("+core_pnum+")([a-z%]*)$","i"),rrun=/queueHooks$/,animationPrefilters=[defaultPrefilter],tweeners={"*":[function(prop,value){var end,unit,tween=this.createTween(prop,value),parts=rfxnum.exec(value),target=tween.cur(),start=+target||0,scale=1,maxIterations=20;if(parts){end=+parts[2];unit=parts[3]||(jQuery.cssNumber[prop]?"":"px");if(unit!=="px"&&start){start=jQuery.css(tween.elem,prop,true)||end||1;do{scale=scale||".5";start=start/scale;jQuery.style(tween.elem,prop,start+unit);}while(scale!==(scale=tween.cur()/target)&&scale!==1&&--maxIterations);}
tween.unit=unit;tween.start=start;tween.end=parts[1]?start+(parts[1]+1)*end:end;}
return tween;}]};function createFxNow(){setTimeout(function(){fxNow=undefined;},0);return(fxNow=jQuery.now());}
function createTweens(animation,props){jQuery.each(props,function(prop,value){var collection=(tweeners[prop]||[]).concat(tweeners["*"]),index=0,length=collection.length;for(;index<length;index++){if(collection[index].call(animation,prop,value)){return;}}});}
function Animation(elem,properties,options){var result,index=0,tweenerIndex=0,length=animationPrefilters.length,deferred=jQuery.Deferred().always(function(){delete tick.elem;}),tick=function(){var currentTime=fxNow||createFxNow(),remaining=Math.max(0,animation.startTime+animation.duration-currentTime),temp=remaining/animation.duration||0,percent=1-temp,index=0,length=animation.tweens.length;for(;index<length;index++){animation.tweens[index].run(percent);}
deferred.notifyWith(elem,[animation,percent,remaining]);if(percent<1&&length){return remaining;}else{deferred.resolveWith(elem,[animation]);return false;}},animation=deferred.promise({elem:elem,props:jQuery.extend({},properties),opts:jQuery.extend(true,{specialEasing:{}},options),originalProperties:properties,originalOptions:options,startTime:fxNow||createFxNow(),duration:options.duration,tweens:[],createTween:function(prop,end,easing){var tween=jQuery.Tween(elem,animation.opts,prop,end,animation.opts.specialEasing[prop]||animation.opts.easing);animation.tweens.push(tween);return tween;},stop:function(gotoEnd){var index=0,length=gotoEnd?animation.tweens.length:0;for(;index<length;index++){animation.tweens[index].run(1);}
if(gotoEnd){deferred.resolveWith(elem,[animation,gotoEnd]);}else{deferred.rejectWith(elem,[animation,gotoEnd]);}
return this;}}),props=animation.props;propFilter(props,animation.opts.specialEasing);for(;index<length;index++){result=animationPrefilters[index].call(animation,elem,props,animation.opts);if(result){return result;}}
createTweens(animation,props);if(jQuery.isFunction(animation.opts.start)){animation.opts.start.call(elem,animation);}
jQuery.fx.timer(jQuery.extend(tick,{anim:animation,queue:animation.opts.queue,elem:elem}));return animation.progress(animation.opts.progress).done(animation.opts.done,animation.opts.complete).fail(animation.opts.fail).always(animation.opts.always);}
function propFilter(props,specialEasing){var index,name,easing,value,hooks;for(index in props){name=jQuery.camelCase(index);easing=specialEasing[name];value=props[index];if(jQuery.isArray(value)){easing=value[1];value=props[index]=value[0];}
if(index!==name){props[name]=value;delete props[index];}
hooks=jQuery.cssHooks[name];if(hooks&&"expand"in hooks){value=hooks.expand(value);delete props[name];for(index in value){if(!(index in props)){props[index]=value[index];specialEasing[index]=easing;}}}else{specialEasing[name]=easing;}}}
jQuery.Animation=jQuery.extend(Animation,{tweener:function(props,callback){if(jQuery.isFunction(props)){callback=props;props=["*"];}else{props=props.split(" ");}
var prop,index=0,length=props.length;for(;index<length;index++){prop=props[index];tweeners[prop]=tweeners[prop]||[];tweeners[prop].unshift(callback);}},prefilter:function(callback,prepend){if(prepend){animationPrefilters.unshift(callback);}else{animationPrefilters.push(callback);}}});function defaultPrefilter(elem,props,opts){var index,prop,value,length,dataShow,toggle,tween,hooks,oldfire,anim=this,style=elem.style,orig={},handled=[],hidden=elem.nodeType&&isHidden(elem);if(!opts.queue){hooks=jQuery._queueHooks(elem,"fx");if(hooks.unqueued==null){hooks.unqueued=0;oldfire=hooks.empty.fire;hooks.empty.fire=function(){if(!hooks.unqueued){oldfire();}};}
hooks.unqueued++;anim.always(function(){anim.always(function(){hooks.unqueued--;if(!jQuery.queue(elem,"fx").length){hooks.empty.fire();}});});}
if(elem.nodeType===1&&("height"in props||"width"in props)){opts.overflow=[style.overflow,style.overflowX,style.overflowY];if(jQuery.css(elem,"display")==="inline"&&jQuery.css(elem,"float")==="none"){if(!jQuery.support.inlineBlockNeedsLayout||css_defaultDisplay(elem.nodeName)==="inline"){style.display="inline-block";}else{style.zoom=1;}}}
if(opts.overflow){style.overflow="hidden";if(!jQuery.support.shrinkWrapBlocks){anim.done(function(){style.overflow=opts.overflow[0];style.overflowX=opts.overflow[1];style.overflowY=opts.overflow[2];});}}
for(index in props){value=props[index];if(rfxtypes.exec(value)){delete props[index];toggle=toggle||value==="toggle";if(value===(hidden?"hide":"show")){continue;}
handled.push(index);}}
length=handled.length;if(length){dataShow=jQuery._data(elem,"fxshow")||jQuery._data(elem,"fxshow",{});if("hidden"in dataShow){hidden=dataShow.hidden;}
if(toggle){dataShow.hidden=!hidden;}
if(hidden){jQuery(elem).show();}else{anim.done(function(){jQuery(elem).hide();});}
anim.done(function(){var prop;jQuery.removeData(elem,"fxshow",true);for(prop in orig){jQuery.style(elem,prop,orig[prop]);}});for(index=0;index<length;index++){prop=handled[index];tween=anim.createTween(prop,hidden?dataShow[prop]:0);orig[prop]=dataShow[prop]||jQuery.style(elem,prop);if(!(prop in dataShow)){dataShow[prop]=tween.start;if(hidden){tween.end=tween.start;tween.start=prop==="width"||prop==="height"?1:0;}}}}}
function Tween(elem,options,prop,end,easing){return new Tween.prototype.init(elem,options,prop,end,easing);}
jQuery.Tween=Tween;Tween.prototype={constructor:Tween,init:function(elem,options,prop,end,easing,unit){this.elem=elem;this.prop=prop;this.easing=easing||"swing";this.options=options;this.start=this.now=this.cur();this.end=end;this.unit=unit||(jQuery.cssNumber[prop]?"":"px");},cur:function(){var hooks=Tween.propHooks[this.prop];return hooks&&hooks.get?hooks.get(this):Tween.propHooks._default.get(this);},run:function(percent){var eased,hooks=Tween.propHooks[this.prop];if(this.options.duration){this.pos=eased=jQuery.easing[this.easing](percent,this.options.duration*percent,0,1,this.options.duration);}else{this.pos=eased=percent;}
this.now=(this.end-this.start)*eased+this.start;if(this.options.step){this.options.step.call(this.elem,this.now,this);}
if(hooks&&hooks.set){hooks.set(this);}else{Tween.propHooks._default.set(this);}
return this;}};Tween.prototype.init.prototype=Tween.prototype;Tween.propHooks={_default:{get:function(tween){var result;if(tween.elem[tween.prop]!=null&&(!tween.elem.style||tween.elem.style[tween.prop]==null)){return tween.elem[tween.prop];}
result=jQuery.css(tween.elem,tween.prop,false,"");return!result||result==="auto"?0:result;},set:function(tween){if(jQuery.fx.step[tween.prop]){jQuery.fx.step[tween.prop](tween);}else if(tween.elem.style&&(tween.elem.style[jQuery.cssProps[tween.prop]]!=null||jQuery.cssHooks[tween.prop])){jQuery.style(tween.elem,tween.prop,tween.now+tween.unit);}else{tween.elem[tween.prop]=tween.now;}}}};Tween.propHooks.scrollTop=Tween.propHooks.scrollLeft={set:function(tween){if(tween.elem.nodeType&&tween.elem.parentNode){tween.elem[tween.prop]=tween.now;}}};jQuery.each(["toggle","show","hide"],function(i,name){var cssFn=jQuery.fn[name];jQuery.fn[name]=function(speed,easing,callback){return speed==null||typeof speed==="boolean"||(!i&&jQuery.isFunction(speed)&&jQuery.isFunction(easing))?cssFn.apply(this,arguments):this.animate(genFx(name,true),speed,easing,callback);};});jQuery.fn.extend({fadeTo:function(speed,to,easing,callback){return this.filter(isHidden).css("opacity",0).show().end().animate({opacity:to},speed,easing,callback);},animate:function(prop,speed,easing,callback){var empty=jQuery.isEmptyObject(prop),optall=jQuery.speed(speed,easing,callback),doAnimation=function(){var anim=Animation(this,jQuery.extend({},prop),optall);if(empty){anim.stop(true);}};return empty||optall.queue===false?this.each(doAnimation):this.queue(optall.queue,doAnimation);},stop:function(type,clearQueue,gotoEnd){var stopQueue=function(hooks){var stop=hooks.stop;delete hooks.stop;stop(gotoEnd);};if(typeof type!=="string"){gotoEnd=clearQueue;clearQueue=type;type=undefined;}
if(clearQueue&&type!==false){this.queue(type||"fx",[]);}
return this.each(function(){var dequeue=true,index=type!=null&&type+"queueHooks",timers=jQuery.timers,data=jQuery._data(this);if(index){if(data[index]&&data[index].stop){stopQueue(data[index]);}}else{for(index in data){if(data[index]&&data[index].stop&&rrun.test(index)){stopQueue(data[index]);}}}
for(index=timers.length;index--;){if(timers[index].elem===this&&(type==null||timers[index].queue===type)){timers[index].anim.stop(gotoEnd);dequeue=false;timers.splice(index,1);}}
if(dequeue||!gotoEnd){jQuery.dequeue(this,type);}});}});function genFx(type,includeWidth){var which,attrs={height:type},i=0;includeWidth=includeWidth?1:0;for(;i<4;i+=2-includeWidth){which=cssExpand[i];attrs["margin"+which]=attrs["padding"+which]=type;}
if(includeWidth){attrs.opacity=attrs.width=type;}
return attrs;}
jQuery.each({slideDown:genFx("show"),slideUp:genFx("hide"),slideToggle:genFx("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(name,props){jQuery.fn[name]=function(speed,easing,callback){return this.animate(props,speed,easing,callback);};});jQuery.speed=function(speed,easing,fn){var opt=speed&&typeof speed==="object"?jQuery.extend({},speed):{complete:fn||!fn&&easing||jQuery.isFunction(speed)&&speed,duration:speed,easing:fn&&easing||easing&&!jQuery.isFunction(easing)&&easing};opt.duration=jQuery.fx.off?0:typeof opt.duration==="number"?opt.duration:opt.duration in jQuery.fx.speeds?jQuery.fx.speeds[opt.duration]:jQuery.fx.speeds._default;if(opt.queue==null||opt.queue===true){opt.queue="fx";}
opt.old=opt.complete;opt.complete=function(){if(jQuery.isFunction(opt.old)){opt.old.call(this);}
if(opt.queue){jQuery.dequeue(this,opt.queue);}};return opt;};jQuery.easing={linear:function(p){return p;},swing:function(p){return 0.5-Math.cos(p*Math.PI)/2;}};jQuery.timers=[];jQuery.fx=Tween.prototype.init;jQuery.fx.tick=function(){var timer,timers=jQuery.timers,i=0;fxNow=jQuery.now();for(;i<timers.length;i++){timer=timers[i];if(!timer()&&timers[i]===timer){timers.splice(i--,1);}}
if(!timers.length){jQuery.fx.stop();}
fxNow=undefined;};jQuery.fx.timer=function(timer){if(timer()&&jQuery.timers.push(timer)&&!timerId){timerId=setInterval(jQuery.fx.tick,jQuery.fx.interval);}};jQuery.fx.interval=13;jQuery.fx.stop=function(){clearInterval(timerId);timerId=null;};jQuery.fx.speeds={slow:600,fast:200,_default:400};jQuery.fx.step={};if(jQuery.expr&&jQuery.expr.filters){jQuery.expr.filters.animated=function(elem){return jQuery.grep(jQuery.timers,function(fn){return elem===fn.elem;}).length;};}
var rroot=/^(?:body|html)$/i;jQuery.fn.offset=function(options){if(arguments.length){return options===undefined?this:this.each(function(i){jQuery.offset.setOffset(this,options,i);});}
var docElem,body,win,clientTop,clientLeft,scrollTop,scrollLeft,box={top:0,left:0},elem=this[0],doc=elem&&elem.ownerDocument;if(!doc){return;}
if((body=doc.body)===elem){return jQuery.offset.bodyOffset(elem);}
docElem=doc.documentElement;if(!jQuery.contains(docElem,elem)){return box;}
if(typeof elem.getBoundingClientRect!=="undefined"){box=elem.getBoundingClientRect();}
win=getWindow(doc);clientTop=docElem.clientTop||body.clientTop||0;clientLeft=docElem.clientLeft||body.clientLeft||0;scrollTop=win.pageYOffset||docElem.scrollTop;scrollLeft=win.pageXOffset||docElem.scrollLeft;return{top:box.top+scrollTop-clientTop,left:box.left+scrollLeft-clientLeft};};jQuery.offset={bodyOffset:function(body){var top=body.offsetTop,left=body.offsetLeft;if(jQuery.support.doesNotIncludeMarginInBodyOffset){top+=parseFloat(jQuery.css(body,"marginTop"))||0;left+=parseFloat(jQuery.css(body,"marginLeft"))||0;}
return{top:top,left:left};},setOffset:function(elem,options,i){var position=jQuery.css(elem,"position");if(position==="static"){elem.style.position="relative";}
var curElem=jQuery(elem),curOffset=curElem.offset(),curCSSTop=jQuery.css(elem,"top"),curCSSLeft=jQuery.css(elem,"left"),calculatePosition=(position==="absolute"||position==="fixed")&&jQuery.inArray("auto",[curCSSTop,curCSSLeft])>-1,props={},curPosition={},curTop,curLeft;if(calculatePosition){curPosition=curElem.position();curTop=curPosition.top;curLeft=curPosition.left;}else{curTop=parseFloat(curCSSTop)||0;curLeft=parseFloat(curCSSLeft)||0;}
if(jQuery.isFunction(options)){options=options.call(elem,i,curOffset);}
if(options.top!=null){props.top=(options.top-curOffset.top)+curTop;}
if(options.left!=null){props.left=(options.left-curOffset.left)+curLeft;}
if("using"in options){options.using.call(elem,props);}else{curElem.css(props);}}};jQuery.fn.extend({position:function(){if(!this[0]){return;}
var elem=this[0],offsetParent=this.offsetParent(),offset=this.offset(),parentOffset=rroot.test(offsetParent[0].nodeName)?{top:0,left:0}:offsetParent.offset();offset.top-=parseFloat(jQuery.css(elem,"marginTop"))||0;offset.left-=parseFloat(jQuery.css(elem,"marginLeft"))||0;parentOffset.top+=parseFloat(jQuery.css(offsetParent[0],"borderTopWidth"))||0;parentOffset.left+=parseFloat(jQuery.css(offsetParent[0],"borderLeftWidth"))||0;return{top:offset.top-parentOffset.top,left:offset.left-parentOffset.left};},offsetParent:function(){return this.map(function(){var offsetParent=this.offsetParent||document.body;while(offsetParent&&(!rroot.test(offsetParent.nodeName)&&jQuery.css(offsetParent,"position")==="static")){offsetParent=offsetParent.offsetParent;}
return offsetParent||document.body;});}});jQuery.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(method,prop){var top=/Y/.test(prop);jQuery.fn[method]=function(val){return jQuery.access(this,function(elem,method,val){var win=getWindow(elem);if(val===undefined){return win?(prop in win)?win[prop]:win.document.documentElement[method]:elem[method];}
if(win){win.scrollTo(!top?val:jQuery(win).scrollLeft(),top?val:jQuery(win).scrollTop());}else{elem[method]=val;}},method,val,arguments.length,null);};});function getWindow(elem){return jQuery.isWindow(elem)?elem:elem.nodeType===9?elem.defaultView||elem.parentWindow:false;}
jQuery.each({Height:"height",Width:"width"},function(name,type){jQuery.each({padding:"inner"+name,content:type,"":"outer"+name},function(defaultExtra,funcName){jQuery.fn[funcName]=function(margin,value){var chainable=arguments.length&&(defaultExtra||typeof margin!=="boolean"),extra=defaultExtra||(margin===true||value===true?"margin":"border");return jQuery.access(this,function(elem,type,value){var doc;if(jQuery.isWindow(elem)){return elem.document.documentElement["client"+name];}
if(elem.nodeType===9){doc=elem.documentElement;return Math.max(elem.body["scroll"+name],doc["scroll"+name],elem.body["offset"+name],doc["offset"+name],doc["client"+name]);}
return value===undefined?jQuery.css(elem,type,value,extra):jQuery.style(elem,type,value,extra);},type,chainable?margin:undefined,chainable,null);};});});window.jQuery=window.$=jQuery;if(typeof define==="function"&&define.amd&&define.amd.jQuery){define("jquery",[],function(){return jQuery;});}})(window);;var Drupal=Drupal||{'settings':{},'behaviors':{},'themes':{},'locale':{}};Drupal.jsEnabled=document.getElementsByTagName&&document.createElement&&document.createTextNode&&document.documentElement&&document.getElementById;Drupal.attachBehaviors=function(context){context=context||document;if(Drupal.jsEnabled){jQuery.each(Drupal.behaviors,function(){this(context);});}};Drupal.checkPlain=function(str){str=String(str);var replace={'&':'&amp;','"':'&quot;','<':'&lt;','>':'&gt;'};for(var character in replace){var regex=new RegExp(character,'g');str=str.replace(regex,replace[character]);}
return str;};Drupal.t=function(str,args){if(Drupal.locale.strings&&Drupal.locale.strings[str]){str=Drupal.locale.strings[str];}
if(args){for(var key in args){switch(key.charAt(0)){case'@':args[key]=Drupal.checkPlain(args[key]);break;case'!':break;case'%':default:args[key]=Drupal.theme('placeholder',args[key]);break;}
str=str.replace(key,args[key]);}}
return str;};Drupal.formatPlural=function(count,singular,plural,args){var args=args||{};args['@count']=count;var index=Drupal.locale.pluralFormula?Drupal.locale.pluralFormula(args['@count']):((args['@count']==1)?0:1);if(index==0){return Drupal.t(singular,args);}
else if(index==1){return Drupal.t(plural,args);}
else{args['@count['+index+']']=args['@count'];delete args['@count'];return Drupal.t(plural.replace('@count','@count['+index+']'));}};Drupal.theme=function(func){for(var i=1,args=[];i<arguments.length;i++){args.push(arguments[i]);}
return(Drupal.theme[func]||Drupal.theme.prototype[func]).apply(this,args);};Drupal.parseJson=function(data){if((data.substring(0,1)!='{')&&(data.substring(0,1)!='[')){return{status:0,data:data.length?data:Drupal.t('Unspecified error')};}
return eval('('+data+');');};Drupal.freezeHeight=function(){Drupal.unfreezeHeight();var div=document.createElement('div');$(div).css({position:'absolute',top:'0px',left:'0px',width:'1px',height:$('body').css('height')}).attr('id','freeze-height');$('body').append(div);};Drupal.unfreezeHeight=function(){$('#freeze-height').remove();};Drupal.encodeURIComponent=function(item,uri){uri=uri||location.href;item=encodeURIComponent(item).replace(/%2F/g,'/');return(uri.indexOf('?q=')!=-1)?item:item.replace(/%26/g,'%2526').replace(/%23/g,'%2523').replace(/\/\//g,'/%252F');};Drupal.getSelection=function(element){if(typeof(element.selectionStart)!='number'&&document.selection){var range1=document.selection.createRange();var range2=range1.duplicate();range2.moveToElementText(element);range2.setEndPoint('EndToEnd',range1);var start=range2.text.length-range1.text.length;var end=start+range1.text.length;return{'start':start,'end':end};}
return{'start':element.selectionStart,'end':element.selectionEnd};};Drupal.ahahError=function(xmlhttp,uri){if(xmlhttp.status==200){if(jQuery.trim($(xmlhttp.responseText).text())){var message=Drupal.t("An error occurred. \n@uri\n@text",{'@uri':uri,'@text':xmlhttp.responseText});}
else{var message=Drupal.t("An error occurred. \n@uri\n(no information available).",{'@uri':uri,'@text':xmlhttp.responseText});}}
else{var message=Drupal.t("An HTTP error @status occurred. \n@uri",{'@uri':uri,'@status':xmlhttp.status});}
return message;}
if(Drupal.jsEnabled){$(document.documentElement).addClass('js');document.cookie='has_js=1; path=/';$(document).ready(function(){Drupal.attachBehaviors(this);});}
Drupal.theme.prototype={placeholder:function(str){return'<em>'+Drupal.checkPlain(str)+'</em>';}};;Drupal.behaviors.block_edit=function(context){if(Drupal.settings.block_edit.hover_links){$('.node-edit-link, .block-edit-link').hide();$('div.block, div.node').mouseover(function(){$(this).find('.node-edit-link, .block-edit-link').css('display','block');});$('div.block, div.node').mouseout(function(){$(this).find('.node-edit-link, .block-edit-link').css('display','none');});};};;Drupal.behaviors.initThickbox=function(context){$('a,area,input',context).filter('.thickbox:not(.initThickbox-processed)').addClass('initThickbox-processed').click(function(){var t=this.title||this.name||null;var a=this.href||this.alt;var g=this.rel||false;tb_show(t,a,g);this.blur();return false;});};function tb_show(caption,url,imageGroup){var settings=Drupal.settings.thickbox;tb_setBrowserExtra();try{if(typeof document.body.style.maxHeight==='undefined'){$('body','html').css({height:'100%',width:'100%'});$('html').css('overflow','hidden');if(document.getElementById('TB_HideSelect')===null){$('body').append('<iframe id="TB_HideSelect"></iframe><div id="TB_overlay"></div><div id="TB_window"></div>');$('#TB_overlay').click(tb_remove);}}
else{if(document.getElementById('TB_overlay')===null){$('body').append('<div id="TB_overlay"></div><div id="TB_window"></div>');$('#TB_overlay').click(tb_remove);}}
if($.browserextra.macfirefox){$('#TB_overlay').addClass('TB_overlayMacFFBGHack');}
else{$('#TB_overlay').addClass('TB_overlayBG');}
if(caption===null){caption='';}
$('body').append('<div id="TB_load"></div>');$('#TB_load').show();var baseURL;if(url.indexOf('?')!==-1){baseURL=url.substr(0,url.indexOf('?'));}
else{baseURL=url;}
var urlString=/\.jpg$|\.jpeg$|\.png$|\.gif$|\.bmp$/;var urlType=baseURL.toLowerCase().match(urlString);if(urlType=='.jpg'||urlType=='.jpeg'||urlType=='.png'||urlType=='.gif'||urlType=='.bmp'){TB_PrevCaption='';TB_PrevURL='';TB_PrevHTML='';TB_NextCaption='';TB_NextURL='';TB_NextHTML='';TB_imageCount='';TB_FoundURL=false;if(imageGroup){TB_TempArray=$('a[rel='+imageGroup+']').get();for(TB_Counter=0;((TB_Counter<TB_TempArray.length)&&(TB_NextHTML===''));TB_Counter++){var urlTypeTemp=TB_TempArray[TB_Counter].href.toLowerCase().match(urlString);if(!(TB_TempArray[TB_Counter].href==url)){if(TB_FoundURL){TB_NextCaption=TB_TempArray[TB_Counter].title;TB_NextURL=TB_TempArray[TB_Counter].href;TB_NextHTML='<span id="TB_next">&nbsp;&nbsp;<a href="#">'+settings.next+'</a></span>';}
else{TB_PrevCaption=TB_TempArray[TB_Counter].title;TB_PrevURL=TB_TempArray[TB_Counter].href;TB_PrevHTML='<span id="TB_prev">&nbsp;&nbsp;<a href="#">'+settings.prev+'</a></span>';}}
else{TB_FoundURL=true;if(TB_TempArray.length>1){TB_imageCount=settings.image_count.replace(/\!current/,(TB_Counter+1)).replace(/\!total/,TB_TempArray.length);}}}}
imgPreloader=new Image();prevImg=new Image();nextImg=new Image();imgPreloader.onload=function(){imgPreloader.onload=null;var TB_Links=$('a[class*="thickbox"]');var i=-1;TB_Links.each(function(n){if(this.href==imgPreloader.src){i=n;}});if(i!=-1){if(i>0){prevImg.src=TB_Links[i-1].href;}
if(i+1<TB_Links.length){nextImg.src=TB_Links[i+1].href;}}
var pagesize=tb_getPageSize();var x=pagesize[0]-100;var y=pagesize[1]-100;var imageWidth=imgPreloader.width;var imageHeight=imgPreloader.height;if(imageWidth>x){imageHeight=imageHeight*(x/imageWidth);imageWidth=x;if(imageHeight>y){imageWidth=imageWidth*(y/imageHeight);imageHeight=y;}}
else if(imageHeight>y){imageWidth=imageWidth*(y/imageHeight);imageHeight=y;if(imageWidth>x){imageHeight=imageHeight*(x/imageWidth);imageWidth=x;}}
TB_WIDTH=imageWidth<320?350:imageWidth+30;TB_HEIGHT=imageHeight+60;$('#TB_window').append('<a href="" id="TB_ImageOff" title="'+settings.next_close+'"><img id="TB_Image" src="'+url+'" width="'+imageWidth+'" height="'+imageHeight+'" alt="'+caption+'" /></a><div id="TB_caption">'+caption+'<div id="TB_secondLine">'+TB_imageCount+TB_PrevHTML+TB_NextHTML+'</div></div><div id="TB_closeWindow"><a href="#" id="TB_closeWindowButton" title="'+settings.close+'">'+settings.close+'</a> </div>');$('#TB_closeWindowButton').click(tb_remove);if(!(TB_PrevHTML==='')){function goPrev(){if($(document).unbind('click',goPrev)){$(document).unbind('click',goPrev);}
$('#TB_window').remove();$('body').append('<div id="TB_window"></div>');tb_show(TB_PrevCaption,TB_PrevURL,imageGroup);return false;}
$('#TB_prev').click(goPrev);}
if(!(TB_NextHTML==='')){function goNext(){$('#TB_window').remove();$('body').append('<div id="TB_window"></div>');tb_show(TB_NextCaption,TB_NextURL,imageGroup);return false;}
$('#TB_next').click(goNext);$('#TB_ImageOff').click(goNext);}
else{$('#TB_ImageOff').click(tb_remove);}
document.onkeydown=function(e){if(e==null){keycode=event.keyCode;escapeKey=27;}
else if($.browser.safari||$.browser.opera){keycode=e.which;escapeKey=27;}
else{keycode=e.keyCode;escapeKey=e.DOM_VK_ESCAPE;}
key=String.fromCharCode(keycode).toLowerCase();if(key=='x'||key=='c'||keycode==escapeKey){tb_remove();}
else if(key=='n'||keycode==39){if(!(TB_NextHTML=='')){document.onkeydown='';goNext();}}
else if(key=='p'||keycode==37){if(!(TB_PrevHTML=='')){document.onkeydown='';goPrev();}}};tb_position();$('#TB_load').remove();$('#TB_window').css({display:'block',opacity:0}).animate({opacity:1},400);};imgPreloader.src=url;}
else{var queryString=url.replace(/^[^\?]+\??/,'');var params=tb_parseQuery(queryString);TB_WIDTH=(params['width']*1)+30||630;TB_HEIGHT=(params['height']*1)+40||440;ajaxContentW=TB_WIDTH-30;ajaxContentH=TB_HEIGHT-45;if(url.indexOf('TB_iframe')!=-1){urlNoQuery=url.split('TB_');$('#TB_iframeContent').remove();if(params['modal']!='true'){$('#TB_window').append('<div id="TB_title"><div id="TB_ajaxWindowTitle">'+caption+'</div><div id="TB_closeAjaxWindow"><a href="#" id="TB_closeWindowButton" title="'+settings.close+'">'+settings.close+'</a> </div></div><iframe frameborder="0" hspace="0" src="'+urlNoQuery[0]+'" id="TB_iframeContent" name="TB_iframeContent'+Math.round(Math.random()*1000)+'" onload="tb_showIframe()" style="width:'+(ajaxContentW+29)+'px;height:'+(ajaxContentH+17)+'px;"></iframe>');}
else{$('#TB_overlay').unbind();$('#TB_window').append('<iframe frameborder="0" hspace="0" src="'+urlNoQuery[0]+'" id="TB_iframeContent" name="TB_iframeContent'+Math.round(Math.random()*1000)+'" onload="tb_showIframe()" style="width:'+(ajaxContentW+29)+'px;height:'+(ajaxContentH+17)+'px;"></iframe>');}}
else{if($('#TB_window').css('display')!='block'){if(params['modal']!='true'){$('#TB_window').append('<div id="TB_title"><div id="TB_ajaxWindowTitle">'+caption+'</div><div id="TB_closeAjaxWindow"><a href="#" id="TB_closeWindowButton" title="'+settings.close+'">'+settings.close+'</a> </div></div><div id="TB_ajaxContent" style="width:'+ajaxContentW+'px;height:'+ajaxContentH+'px"></div>');window.setTimeout("tb_focusFirstFormElement()",1000);}
else{$('#TB_overlay').unbind();$('#TB_window').append('<div id="TB_ajaxContent" class="TB_modal" style="width:'+ajaxContentW+'px;height:'+ajaxContentH+'px;"></div>');}}
else{$('#TB_ajaxContent')[0].style.width=ajaxContentW+'px';$('#TB_ajaxContent')[0].style.height=ajaxContentH+'px';$('#TB_ajaxContent')[0].scrollTop=0;$('#TB_ajaxWindowTitle').html(caption);}}
$('#TB_closeWindowButton').click(tb_remove);if(url.indexOf('TB_inline')!=-1){$('#TB_ajaxContent').append($('#'+params['inlineId']).children());$('#TB_window').unload(function(){$('#'+params['inlineId']).append($('#TB_ajaxContent').children());});tb_position();$('#TB_load').remove();$('#TB_window').css({display:'block',opacity:0}).animate({opacity:1},400);}
else if(url.indexOf('TB_iframe')!=-1){tb_position();if($.browserextra.iphone){$('#TB_load').remove();$('#TB_window').css({display:'block',opacity:0}).animate({opacity:1},400);}}
else{$('#TB_ajaxContent').load(url+='&random='+(new Date().getTime()),function(){tb_position();$('#TB_load').remove();Drupal.attachBehaviors('#TB_ajaxContent');$('#TB_window').css({display:'block',opacity:0}).animate({opacity:1},400);});}}
if(!params['modal']){document.onkeyup=function(e){if(e==null){keycode=event.keyCode;escapeKey=27;}
else if($.browser.safari||$.browser.opera){keycode=e.which;escapeKey=27;}
else{keycode=e.keyCode;escapeKey=e.DOM_VK_ESCAPE;}
key=String.fromCharCode(keycode).toLowerCase();if(keycode==escapeKey){tb_remove();}};}}
catch(e){}}
function tb_showIframe(){$('#TB_load').remove();$('#TB_window').css({display:'block',opacity:0}).animate({opacity:1},400);}
function tb_remove(){$('#TB_imageOff').unbind('click');$('#TB_overlay').unbind('click');$('#TB_closeWindowButton').unbind('click');$('#TB_window').fadeOut(400,function(){$('#TB_window,#TB_overlay,#TB_HideSelect').trigger('unload').unbind().remove();});$('#TB_load').remove();if(typeof document.body.style.maxHeight=='undefined'){$('body','html').css({height:'auto',width:'auto'});$('html').css('overflow','');}
document.onkeydown='';document.onkeyup='';return false;}
function tb_position(){$('#TB_window').css({marginLeft:'-'+parseInt((TB_WIDTH/2),10)+'px',width:TB_WIDTH+'px'});if(!($.browserextra.msie6)){$('#TB_window').css({marginTop:'-'+parseInt((TB_HEIGHT/2),10)+'px'});}}
function tb_parseQuery(query){var Params={};if(!query){return Params;}
var Pairs=query.split(/[;&]/);for(var i=0;i<Pairs.length;i++){var KeyVal=Pairs[i].split('=');if(!KeyVal||KeyVal.length!=2){continue;}
var key=unescape(KeyVal[0]);var val=unescape(KeyVal[1]);val=val.replace(/\+/g,' ');Params[key]=val;}
return Params;}
function tb_getPageSize(){var de=document.documentElement;var w=window.innerWidth||self.innerWidth||(de&&de.clientWidth)||document.body.clientWidth;var h=window.innerHeight||self.innerHeight||(de&&de.clientHeight)||document.body.clientHeight;arrayPageSize=[w,h];return arrayPageSize;}
function tb_setBrowserExtra(){if($.browserextra){return;}
var userAgent=navigator.userAgent.toLowerCase();$.browserextra={iphone:/iphone/.test(userAgent),msie6:/msie/.test(userAgent)&&!/opera/.test(userAgent)&&/msie 6\.0/.test(userAgent)&&!/msie 7\.0/.test(userAgent)&&!/msie 8\.0/.test(userAgent),macfirefox:/mac/.test(userAgent)&&/firefox/.test(userAgent)};}
function tb_focusFirstFormElement(){$('#TB_window form input[type=text]:first').focus();};$(document).ready(function(){$('.thumbs_list1 ul.business_cards_list li#bc_upload_card a').click(function(event){if(typeof Drupal.settings.is_flstheme!='undefined'){if(Drupal.settings.is_flstheme){if(!(fls_browser.msie||navigator.userAgent.indexOf("Trident")>=0))
return false;}}
event.preventDefault();if(Drupal.settings.bc_multicard){return false;}
if(typeof BCUP_POPUP!='undefined')
BCUP_POPUP.init();else
PO_UC.init();fls_events_add('clicks_bc_step2_upload');return false;});$('.thumbs_list1 ul.business_cards_list li a').click(function(){if($(this).closest('#bc_upload_card').length)
return false;var card_id=$(this).attr('href');card_id=card_id.split('/');card_id=card_id[card_id.length-1];if(Drupal.settings.bc_multicard){url=Drupal.settings.bc_multicard+card_id;if(parseInt(Drupal.settings.bc_clid)>0)
url+='/'+Drupal.settings.bc_clid;window.location=url;return false;}
if((Drupal.settings.bcworkflow_popup&&Drupal.settings.bcworkflow2_split)&&(typeof(Drupal.settings.templateBackground)==="undefined"||Drupal.settings.templateBackground=="")){PO_bcstep2.init();$('#bcworkflow_card_id').val(card_id);return false;}
return true;});$('.thumbs_list1 ul.business_cards_list li').bind('mouseover',function(){if(typeof Drupal.settings.is_flstheme!='undefined'){if(Drupal.settings.is_flstheme){if($(this).attr('id')=='bc_upload_card'){return;}}}
var offset=$(this).offset();$('body').append('<div class="logo_notice1">'+Drupal.settings.step2_texttojs.text1+'</div>');$('.logo_notice1').css('position','absolute').css('top',offset.top-35+'px').css('left',offset.left+55+'px').css('display','');}).bind('mouseout',function(){$('.logo_notice1').remove();});$('#edit-logo-type').change(function(){$('#bcstep2-categories-form').submit();});$('#business_cards_search_field input').focus(function(){if($('#business_cards_search_field input').val()==Drupal.settings.sphinxDefaultSearch){$('#business_cards_search_field input').val('');}});$('#business_cards_search_field input').blur(function(){if($('#business_cards_search_field input').val().length<1)
$('#business_cards_search_field input').val(Drupal.settings.sphinxDefaultSearch);});$('#business_cards_search_submit').click(function(){console.log('click on submit');console.log($(this).parents('form'));$(this).parents('form').submit();});});$(window).load(function(){if(Drupal.settings.feedback_lightbox){BCFEEDBACK.init();}else{PO_bcstep2_2.init();}});var PO_bcstep2={init:function(){if($('.bcworkflow_lightbox').length>0&&$('.overlay').length>0){PO_bcstep2.placePopUp();if(Drupal.settings.step2_infinite_scroll){$('.bcworkflow_lightbox').css('margin-top',$(window).scrollTop());$('body').css('overflow','hidden');}else{$('html, body').animate({scrollTop:0},'fast');}
$('.bcworkflow_lightbox .close, .bcworkflow_lightbox .noThankYou').click(PO_bcstep2.hidePopUp)}},placePopUp:function(){var overlay=$('.overlay:first');var thankYouBox=$('.bcworkflow_lightbox');$('.overlay, .bcworkflow_lightbox').remove();var docH=$(document).height();var docW=$(document).width();overlay.css({"width":docW+"px","height":docH+"px"});thankYouBox.prependTo('body');overlay.prependTo('body');$('#bcworkflow_CardNewLogo').click(function(){$('#bcworkflow_card_type').val('CardNewLogo');$('#business-cards-step2-popup-form').submit();return false;});$('#bcworkflow_CardOwnLogo').click(function(){$('#bcworkflow_card_type').val('CardOwnLogo');$('#business-cards-step2-popup-form').submit();return false;});$('#bcworkflow_CardNoLogo,#bcworkflow_online,#bcworkflow_graphic').click(function(){$('#bcworkflow_card_type').val('CardNoLogo');$('#business-cards-step2-popup-form').submit();return false;});$('#bcworkflow_CardNoLogo2').click(function(){$('.bcworkflow_lightbox h4').hide();$('.bcworkflow_step').hide();$('.bcworkflow_lightbox h4.h4_godaddybc').show();$('.bcworkflow_step_godaddybc').show();});if(Drupal.settings.select_logo){$('#bcworkflow_CardNewLogo').trigger('click');return;}
thankYouBox.show();var bW=$('.bcworkflow_lightbox').width();var bH=$('.bcworkflow_lightbox').height();var wW=$(window).width();var wH=$(window).height();bW=wW/2-bW/2;bH=wH/2-bH/2;$('.bcworkflow_lightbox').css({left:bW,top:bH>40?bH:40});$('.overlay:first').show();if($.browser.msie&&$.browser.version=='8.0'){$('.overlay').css('filter','alpha(opacity=30)');}},hidePopUp:function(){$('.bcworkflow_lightbox').fadeOut();$('.overlay').fadeOut();$('.bcworkflow_lightbox').hide();$('.overlay').hide();if(Drupal.settings.step2_infinite_scroll){$('body').css('overflow','');}
return false;}}
var PO_bcstep2_2={init:function(){if($('.bcworkflow2_lightbox').length>0&&$('.overlay').length>0&&$('.overlay:visible').length==0){PO_bcstep2_2.placePopUp();$('html, body').animate({scrollTop:0},'fast');$('.bcworkflow2_lightbox .close, .bcworkflow_lightbox .noThankYou').click(PO_bcstep2_2.hidePopUp)}},placePopUp:function(){var overlay=$('.overlay:first');var thankYouBox=$('.bcworkflow2_lightbox');$('.overlay, .bcworkflow2_lightbox').remove();var docH=$(document).height();var docW=$(document).width();overlay.css({"width":docW+"px","height":docH+"px"});thankYouBox.prependTo('body');overlay.prependTo('body');thankYouBox.show();var bW=$('.bcworkflow2_lightbox').width();var bH=$('.bcworkflow2_lightbox').height();var wW=$(window).width();var wH=$(window).height();bW=wW/2-bW/2;bH=wH/2-bH/2;$('.bcworkflow2_lightbox').css({left:bW,top:bH>40?bH:40});$('.overlay:first').show();$('.bchomepopup_category').click(function(){var category_id=$(this).attr('id');category_id=category_id.split('_');category_id=category_id[category_id.length-1];$('#bcworkflow_category').val(category_id);$('#business-cards-step2-popup-home-form').submit();return false;});$('#business-cards-step2-popup-category-form #bcworkflow_category').change(function(){$('#business-cards-step2-popup-category-form').submit();return false;});$('#business-cards-step2-popup-category-form .view_all').click(function(){var category_id=0;$('#bcworkflow_category').val(category_id);$('#business-cards-step2-popup-category-form').submit();return false;});},hidePopUp:function(){$('#bcworkflow_category').val(0);if(Drupal.settings.bc_step2_lightbox_set!==undefined&&Drupal.settings.bc_step2_lightbox_set!='step2'&&Drupal.settings.bc_step2_lightbox_set!='step2-infinite-scroll'){$('#business-cards-step2-popup-category-form').submit();}
else
$('#business-cards-step2-popup-home-form').submit();return false;}}
var PO_UC={init:function(){if($('.pouc_lightbox').length>0&&$('.overlay').length>0){PO_UC.placePopUp();$('html, body').animate({scrollTop:0},'fast');$('.pouc_lightbox .close, .pouc_lightbox .noThankYou').click(PO_UC.hidePopUp);$('.pouc_lightbox a.bc-free-blue-btn').click(PO_UC.hidePopUp);$('.pouc_lightbox a.bc-free-orange-btn').click(PO_UC.uploadBc);}},placePopUp:function(){var overlay=$('.overlay:first');var thankYouBox=$('.pouc_lightbox');$('.overlay, .pouc_lightbox').remove();var docH=$(document).height();var docW=$(document).width();overlay.css({"width":docW+"px","height":docH+"px"});thankYouBox.prependTo('body');overlay.prependTo('body');thankYouBox.show();var bW=$('.pouc_lightbox').width();var bH=$('.pouc_lightbox').height();var wW=$(window).width();var wH=$(window).height();bW=wW/2-bW/2;bH=wH/2-bH/2;$('.pouc_lightbox').css({left:bW,top:bH>40?bH:40});$('.overlay:first').show();if($.browser.msie&&$.browser.version=='8.0'){$('.overlay').css('filter','alpha(opacity=30)');}},hidePopUp:function(){$('.pouc_lightbox').fadeOut();$('.overlay').fadeOut();$('.pouc_lightbox').hide();$('.overlay').hide();return false;},uploadBc:function(){if($('#bc_upload_card a').length){var url=$('#bc_upload_card a').attr('href');if(url){PO_UC.hidePopUp();window.location=url;}}}}
function validate_feedback(){var response=true;$('#bc_feedback').css('border','1px solid #929292');$('#bc_email').css('border','1px solid #929292');if(!$('#bc_feedback').val()||$('#bc_feedback').val().length>90){$('#bc_feedback').css('border','1px solid red');response=false;}
if($('#bc_email').val()){if(!isValidEmail($('#bc_email').val())){$('#bc_email').css('border','1px solid red');response=false;}}
return response;}
var BCFEEDBACK={init:function(){if($('.bc_feedback_lightbox').length>0&&$('.overlay').length>0){BCFEEDBACK.placePopUp();$('.bc_feedback_lightbox .close').click(function(){BCFEEDBACK.hidePopUp();});$('#close_continue_button').click(function(){BCFEEDBACK.hidePopUp();});$('#submit-feedback').click(function(){if(validate_feedback()){$.ajax({type:"POST",url:Drupal.settings.baseUrl+'/feedback-js',dataType:"json",data:$("#business-cards-step2-feedback-form").serialize(),success:function(Response){$('#content1').hide();$('#content2').show();}});}});}},placePopUp:function(){var overlay=$('.overlay:first');var thankYouBox=$('.thankYouBox.bc_feedback_lightbox');$('.overlay, .thankYouBox.bc_feedback_lightbox').remove();var docH=$(document).height();var docW=$(document).width();overlay.css({"width":docW+"px","height":docH+"px"});thankYouBox.prependTo('body');overlay.prependTo('body');overlay.show();thankYouBox.show();var bW=$('.thankYouBox.bc_feedback_lightbox').width();var bH=$('.thankYouBox.bc_feedback_lightbox').height();var wW=$(window).width();var wH=$(window).height();bW=wW/2-bW/2;bH=wH/2-bH/2;$('.thankYouBox.bc_feedback_lightbox').css({left:bW,top:bH>40?bH:40});},hidePopUp:function(){$('.bc_feedback_lightbox').hide();$('.overlay').hide();return false;}};function setFlashHeight(newHeight){$('#'+attributes.id).attr('height',newHeight);$('#flash_container').css({width:'auto',height:'auto','text-align':'left'});}
function editor_event_dispatched(){ga('send','event','button','click','Clicked Safe Line Help Button');};;$(document).ready(function(){var timerId;function hideSubmenu(){$('.myaccount_topnav .menu.my_account').removeClass('active');$('.flstheme_usermenu').hide();}
$('.myaccount_topnav .menu.my_account').mouseover(function(){if(timerId!='undefined')clearTimeout(timerId);$(this).addClass('active');$(".myaccount_topnav .menu.my_account .submenu").remove();$('.flstheme_usermenu').show();});$('.myaccount_topnav .menu.my_account, .flstheme_usermenu').mouseout(function(){timerId=setTimeout(hideSubmenu,200);});$('.flstheme_usermenu').mouseover(function(){if(timerId!='undefined')clearTimeout(timerId);$('.myaccount_topnav .menu.my_account').addClass('active');$(this).show();});$(".flstheme_topmenu.websites .usermenu_edit_website").click(function(){show_loading_overlay(Drupal.settings.lightbox_loading_text);var site_id;site_id=$(this).attr("id");var lang="";if(Drupal.settings.lang!=''){lang=Drupal.settings.lang+"/";}
$.ajax({url:Drupal.settings.baseUrl+"/"+lang+"websites/edit/"+site_id+"?check=1",type:'post',dataType:'json',success:function(result){if(result["success"]==2){$('#TB_overlay').remove();$('#TB_window').remove();ACTIVATEDOMAIN.init();return false;}else{if(lang!=''){window.location=Drupal.settings.baseUrl+"/"+lang+"websites/edit/"+site_id;}else{window.location=Drupal.settings.baseUrl+"/"+lang+"website/industry-selection/"+site_id;}}}});return false;});});;;(function($){var helper={},current,title,tID,IE=$.browser.msie&&/MSIE\s(5\.5|6\.)/.test(navigator.userAgent),track=false;$.tooltip={blocked:false,defaults:{delay:200,fade:false,showURL:true,extraClass:"",top:15,left:15,id:"tooltip"},block:function(){$.tooltip.blocked=!$.tooltip.blocked;}};$.fn.extend({tooltip:function(settings){settings=$.extend({},$.tooltip.defaults,settings);createHelper(settings);return this.each(function(){$.data(this,"tooltip",settings);this.tOpacity=helper.parent.css("opacity");this.tooltipText=this.title;$(this).removeAttr("title");this.alt="";}).mouseover(save).mouseout(hide).click(hide);},fixPNG:IE?function(){return this.each(function(){var image=$(this).css('backgroundImage');if(image.match(/^url\(["']?(.*\.png)["']?\)$/i)){image=RegExp.$1;$(this).css({'backgroundImage':'none','filter':"progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=crop, src='"+image+"')"}).each(function(){var position=$(this).css('position');if(position!='absolute'&&position!='relative')$(this).css('position','relative');});}});}:function(){return this;},unfixPNG:IE?function(){return this.each(function(){$(this).css({'filter':'',backgroundImage:''});});}:function(){return this;},hideWhenEmpty:function(){return this.each(function(){$(this)[$(this).html()?"show":"hide"]();});},url:function(){return this.attr('href')||this.attr('src');}});function createHelper(settings){if(helper.parent)return;helper.parent=$('<div id="'+settings.id+'"><h3></h3><div class="body"></div><div class="url"></div></div>').appendTo(document.body).hide();if($.fn.bgiframe)helper.parent.bgiframe();helper.title=$('h3',helper.parent);helper.body=$('div.body',helper.parent);helper.url=$('div.url',helper.parent);}function settings(element){return $.data(element,"tooltip");}function handle(event){if(settings(this).delay)tID=setTimeout(show,settings(this).delay);else
show();track=!!settings(this).track;$(document.body).bind('mousemove',update);update(event);}function save(){if($.tooltip.blocked||this==current||(!this.tooltipText&&!settings(this).bodyHandler))return;current=this;title=this.tooltipText;if(settings(this).bodyHandler){helper.title.hide();var bodyContent=settings(this).bodyHandler.call(this);if(bodyContent.nodeType||bodyContent.jquery){helper.body.empty().append(bodyContent)}else{helper.body.html(bodyContent);}helper.body.show();}else if(settings(this).showBody){var parts=title.split(settings(this).showBody);helper.title.html(parts.shift()).show();helper.body.empty();for(var i=0,part;(part=parts[i]);i++){if(i>0)helper.body.append("<br/>");helper.body.append(part);}helper.body.hideWhenEmpty();}else{helper.title.html(title).show();helper.body.hide();}if(settings(this).showURL&&$(this).url())helper.url.html($(this).url().replace('http://','')).show();else
helper.url.hide();helper.parent.addClass(settings(this).extraClass);if(settings(this).fixPNG)helper.parent.fixPNG();handle.apply(this,arguments);}function show(){tID=null;if((!IE||!$.fn.bgiframe)&&settings(current).fade){if(helper.parent.is(":animated"))helper.parent.stop().show().fadeTo(settings(current).fade,current.tOpacity);else
helper.parent.is(':visible')?helper.parent.fadeTo(settings(current).fade,current.tOpacity):helper.parent.fadeIn(settings(current).fade);}else{helper.parent.show();}update();}function update(event){if($.tooltip.blocked)return;if(event&&event.target.tagName=="OPTION"){return;}if(!track&&helper.parent.is(":visible")){$(document.body).unbind('mousemove',update)}if(current==null){$(document.body).unbind('mousemove',update);return;}helper.parent.removeClass("viewport-right").removeClass("viewport-bottom");var left=helper.parent[0].offsetLeft;var top=helper.parent[0].offsetTop;if(event){left=event.pageX+settings(current).left;top=event.pageY+settings(current).top;var right='auto';if(settings(current).positionLeft){right=$(window).width()-left;left='auto';}helper.parent.css({left:left,right:right,top:top});}var v=viewport(),h=helper.parent[0];if(v.x+v.cx<h.offsetLeft+h.offsetWidth){left-=h.offsetWidth+20+settings(current).left;helper.parent.css({left:left+'px'}).addClass("viewport-right");}if(v.y+v.cy<h.offsetTop+h.offsetHeight){top-=h.offsetHeight+20+settings(current).top;helper.parent.css({top:top+'px'}).addClass("viewport-bottom");}}function viewport(){return{x:$(window).scrollLeft(),y:$(window).scrollTop(),cx:$(window).width(),cy:$(window).height()};}function hide(event){if($.tooltip.blocked)return;if(tID)clearTimeout(tID);current=null;var tsettings=settings(this);function complete(){helper.parent.removeClass(tsettings.extraClass).hide().css("opacity","");}if((!IE||!$.fn.bgiframe)&&tsettings.fade){if(helper.parent.is(':animated'))helper.parent.stop().fadeTo(tsettings.fade,0,complete);else
helper.parent.stop().fadeOut(tsettings.fade,complete);}else
complete();if(settings(this).fixPNG)helper.parent.unfixPNG();}})(jQuery);;(function($){$.fn.jqm=function(o){var p={overlay:50,overlayClass:'jqmOverlay',closeClass:'jqmClose',trigger:'.jqModal',ajax:F,ajaxText:'',target:F,modal:F,toTop:F,onShow:F,onHide:F,onLoad:F};return this.each(function(){if(this._jqm)return H[this._jqm].c=$.extend({},H[this._jqm].c,o);s++;this._jqm=s;H[s]={c:$.extend(p,$.jqm.params,o),a:F,w:$(this).addClass('jqmID'+s),s:s};if(p.trigger)$(this).jqmAddTrigger(p.trigger);});};$.fn.jqmAddClose=function(e){return hs(this,e,'jqmHide');};$.fn.jqmAddTrigger=function(e){return hs(this,e,'jqmShow');};$.fn.jqmShow=function(t){return this.each(function(){t=t||window.event;$.jqm.open(this._jqm,t);});};$.fn.jqmHide=function(t){return this.each(function(){t=t||window.event;$.jqm.close(this._jqm,t)});};$.jqm={hash:{},open:function(s,t){var h=H[s],c=h.c,cc='.'+c.closeClass,z=(parseInt(h.w.css('z-index'))),z=(z>0)?z:3000,o=$('<div></div>').css({height:'100%',width:'100%',position:'fixed',left:0,top:0,'z-index':z-1,opacity:c.overlay/100});if(h.a)return F;h.t=t;h.a=true;h.w.css('z-index',z);if(c.modal){if(!A[0])L('bind');A.push(s);}
else if(c.overlay>0)h.w.jqmAddClose(o);else o=F;h.o=(o)?o.addClass(c.overlayClass).prependTo('body'):F;if(ie6){$('html,body').css({height:'100%',width:'100%'});if(o){o=o.css({position:'absolute'})[0];for(var y in{Top:1,Left:1})o.style.setExpression(y.toLowerCase(),"(_=(document.documentElement.scroll"+y+" || document.body.scroll"+y+"))+'px'");}}
if(c.ajax){var r=c.target||h.w,u=c.ajax,r=(typeof r=='string')?$(r,h.w):$(r),u=(u.substr(0,1)=='@')?$(t).attr(u.substring(1)):u;r.html(c.ajaxText).load(u,function(){if(c.onLoad)c.onLoad.call(this,h);if(cc)h.w.jqmAddClose($(cc,h.w));e(h);});}
else if(cc)h.w.jqmAddClose($(cc,h.w));if(c.toTop&&h.o)h.w.before('<span id="jqmP'+h.w[0]._jqm+'"></span>').insertAfter(h.o);(c.onShow)?c.onShow(h):h.w.show();e(h);return F;},close:function(s){var h=H[s];if(!h.a)return F;h.a=F;if(A[0]){A.pop();if(!A[0])L('unbind');}
if(h.c.toTop&&h.o)$('#jqmP'+h.w[0]._jqm).after(h.w).remove();if(h.c.onHide)h.c.onHide(h);else{h.w.hide();if(h.o)h.o.remove();}return F;},params:{}};var s=0,H=$.jqm.hash,A=[],ie6=$.browser.msie&&($.browser.version=="6.0"),F=false,i=$('<iframe src="javascript:false;document.write(\'\');" class="jqm"></iframe>').css({opacity:0}),e=function(h){if(ie6)if(h.o)h.o.html('<p style="width:100%;height:100%"/>').prepend(i);else if(!$('iframe.jqm',h.w)[0])h.w.prepend(i);f(h);},f=function(h){try{$(':input:visible',h.w)[0].focus();}catch(_){}},L=function(t){$()[t]("keypress",m)[t]("keydown",m)[t]("mousedown",m);},m=function(e){var h=H[A[A.length-1]],r=(!$(e.target).parents('.jqmID'+h.s)[0]);if(r)f(h);return!r;},hs=function(w,t,c){return w.each(function(){var s=this._jqm;$(t).each(function(){if(!this[c]){this[c]=[];$(this).click(function(){for(var i in{jqmShow:1,jqmHide:1})for(var s in this[i])if(H[this[i][s]])H[this[i][s]].w[i](this);return F;});}this[c].push(s);});});};})(jQuery);;(function($){var options={};var returnHash=[];$.fn.RSV=function(params){options=$.extend({},$.fn.RSV.defaults,params);return this.each(function(){$(this).bind('submit',{currForm:this,options:options},$(this).RSV.validate);});};$.fn.RSV.defaults={rules:[],displayType:"alert-all",errorFieldClass:null,errorTextIntro:"Please fix the following error(s) and resubmit:",errorJSItemBullet:"* ",errorHTMLItemBullet:"&bull; ",errorTargetElementId:"rsvErrors",customErrorHandler:null,onCompleteHandler:null};$.fn.RSV.validate=function(event)
{options=event.data.options;var form=event.data.currForm;var rules=options.rules;returnHash=[];for(var i=0;i<rules.length;i++)
{var row=rules[i].replace(/\\,/ig,"%%C%%");row=row.split(",");var satisfiesIfConditions=true;while(row[0].match("^if:"))
{var cond=row[0];cond=cond.replace("if:","");var comparison="equal";var parts=[];if(cond.search("!=")!=-1)
{parts=cond.split("!=");comparison="not_equal";}
else
parts=cond.split("=");var fieldToCheck=parts[0];var valueToCheck=parts[1];var fieldnameValue="";if(form[fieldToCheck].type==undefined)
{for(var j=0;j<form[fieldToCheck].length;j++)
{if(form[fieldToCheck][j].checked)
fieldnameValue=form[fieldToCheck][j].value;}}
else if(form[fieldToCheck].type=="checkbox")
{if(form[fieldToCheck].checked)
fieldnameValue=form[parts[0]].value;}
else
fieldnameValue=form[parts[0]].value;if(comparison=="equal"&&fieldnameValue!=valueToCheck)
{satisfiesIfConditions=false;break;}
else if(comparison=="not_equal"&&fieldnameValue==valueToCheck)
{satisfiesIfConditions=false;break;}
else
row.shift();}
if(!satisfiesIfConditions)
continue;var requirement=row[0];var fieldName=row[1];var fieldName2,fieldName3,errorMessage,lengthRequirements,date_flag;if(requirement!="function"&&form[fieldName]==undefined)
{alert("RSV Error: the field \""+fieldName+"\" doesn't exist! Please check your form and settings.");return false;}
if(requirement!="function"&&options.errorFieldClass)
{if(form[fieldName].type==undefined)
{for(var j=0;j<form[fieldName].length;j++)
{if($(form[fieldName][j]).hasClass(options.errorFieldClass))
$(form[fieldName][j]).removeClass(options.errorFieldClass);}}
else
{if($(form[fieldName]).hasClass(options.errorFieldClass))
$(form[fieldName]).removeClass(options.errorFieldClass);}}
if(row.length==6)
{fieldName2=row[2];fieldName3=row[3];date_flag=row[4];errorMessage=row[5];}
else if(row.length==5)
{fieldName2=row[2];fieldName3=row[3];errorMessage=row[4];}
else if(row.length==4)
{fieldName2=row[2];errorMessage=row[3];}
else
errorMessage=row[2];if(requirement.match("^length"))
{lengthRequirements=requirement;requirement="length";}
if(requirement.match("^range"))
{rangeRequirements=requirement;requirement="range";}
switch(requirement)
{case"required":if(form[fieldName].type==undefined)
{var oneIsChecked=false;for(var j=0;j<form[fieldName].length;j++)
{if(form[fieldName][j].checked)
oneIsChecked=true;}
if(!oneIsChecked)
{if(!processError(form[fieldName],errorMessage))
return false;}}
else if(form[fieldName].type=="select-multiple")
{var oneIsSelected=false;for(var k=0;k<form[fieldName].length;k++)
{if(form[fieldName][k].selected)
oneIsSelected=true;}
if(!oneIsSelected||form[fieldName].length==0)
{if(!processError(form[fieldName],errorMessage))
return false;}}
else if(form[fieldName].type=="checkbox")
{if(!form[fieldName].checked)
{if(!processError(form[fieldName],errorMessage))
return false;}}
else if(!form[fieldName].value)
{if(!processError(form[fieldName],errorMessage))
return false;}
break;case"digits_only":if(form[fieldName].value&&form[fieldName].value.match(/\D/))
{if(!processError(form[fieldName],errorMessage))
return false;}
break;case"letters_only":if(form[fieldName].value&&form[fieldName].value.match(/[^a-zA-Z]/))
{if(!processError(form[fieldName],errorMessage))
return false;}
break;case"is_alpha":if(form[fieldName].value&&form[fieldName].value.match(/\W/))
{if(!processError(form[fieldName],errorMessage))
return false;}
break;case"custom_alpha":var conversion={"L":"[A-Z]","V":"[AEIOU]","l":"[a-z]","v":"[aeiou]","D":"[a-zA-Z]","F":"[aeiouAEIOU]","C":"[BCDFGHJKLMNPQRSTVWXYZ]","x":"[0-9]","c":"[bcdfghjklmnpqrstvwxyz]","X":"[1-9]","E":"[bcdfghjklmnpqrstvwxyzBCDFGHJKLMNPQRSTVWXYZ]"};var reg_exp_str="";for(var j=0;j<fieldName2.length;j++)
{if(conversion[fieldName2.charAt(j)])
reg_exp_str+=conversion[fieldName2.charAt(j)];else
reg_exp_str+=fieldName2.charAt(j);}
var reg_exp=new RegExp(reg_exp_str);if(form[fieldName].value&&reg_exp.exec(form[fieldName].value)==null)
{if(!processError(form[fieldName],errorMessage))
return false;}
break;case"reg_exp":var reg_exp_str=fieldName2.replace(/%%C%%/ig,",");if(row.length==5)
var reg_exp=new RegExp(reg_exp_str,fieldName3);else
var reg_exp=new RegExp(reg_exp_str);if(form[fieldName].value&&reg_exp.exec(form[fieldName].value)==null)
{if(!processError(form[fieldName],errorMessage))
return false;}
break;case"length":comparison_rule="";rule_string="";if(lengthRequirements.match(/length=/))
{comparison_rule="equal";rule_string=lengthRequirements.replace("length=","");}
else if(lengthRequirements.match(/length>=/))
{comparison_rule="greater_than_or_equal";rule_string=lengthRequirements.replace("length>=","");}
else if(lengthRequirements.match(/length>/))
{comparison_rule="greater_than";rule_string=lengthRequirements.replace("length>","");}
else if(lengthRequirements.match(/length<=/))
{comparison_rule="less_than_or_equal";rule_string=lengthRequirements.replace("length<=","");}
else if(lengthRequirements.match(/length</))
{comparison_rule="less_than";rule_string=lengthRequirements.replace("length<","");}
switch(comparison_rule)
{case"greater_than_or_equal":if(!(form[fieldName].value.length>=parseInt(rule_string)))
{if(!processError(form[fieldName],errorMessage))
return false;}
break;case"greater_than":if(!(form[fieldName].value.length>parseInt(rule_string)))
{if(!processError(form[fieldName],errorMessage))
return false;}
break;case"less_than_or_equal":if(!(form[fieldName].value.length<=parseInt(rule_string)))
{if(!processError(form[fieldName],errorMessage))
return false;}
break;case"less_than":if(!(form[fieldName].value.length<parseInt(rule_string)))
{if(!processError(form[fieldName],errorMessage))
return false;}
break;case"equal":var range_or_exact_number=rule_string.match(/[^_]+/);var fieldCount=range_or_exact_number[0].split("-");if(fieldCount.length==2)
{if(form[fieldName].value.length<fieldCount[0]||form[fieldName].value.length>fieldCount[1])
{if(!processError(form[fieldName],errorMessage))
return false;}}
else
{if(form[fieldName].value.length!=fieldCount[0])
{if(!processError(form[fieldName],errorMessage))
return false;}}
break;}
break;case"valid_email":if(form[fieldName].value&&!isValidEmail(form[fieldName].value))
{if(!processError(form[fieldName],errorMessage))
return false;}
break;case"valid_date":var isLaterDate=false;if(date_flag=="later_date")
isLaterDate=true;else if(date_flag=="any_date")
isLaterDate=false;if(!isValidDate(form[fieldName].value,form[fieldName2].value,form[fieldName3].value,isLaterDate))
{if(!processError(form[fieldName],errorMessage))
return false;}
break;case"same_as":if(form[fieldName].value!=form[fieldName2].value)
{if(!processError(form[fieldName],errorMessage))
return false;}
break;case"range":comparison_rule="";rule_string="";if(rangeRequirements.match(/range=/))
{comparison_rule="equal";rule_string=rangeRequirements.replace("range=","");}
else if(rangeRequirements.match(/range>=/))
{comparison_rule="greater_than_or_equal";rule_string=rangeRequirements.replace("range>=","");}
else if(rangeRequirements.match(/range>/))
{comparison_rule="greater_than";rule_string=rangeRequirements.replace("range>","");}
else if(rangeRequirements.match(/range<=/))
{comparison_rule="less_than_or_equal";rule_string=rangeRequirements.replace("range<=","");}
else if(rangeRequirements.match(/range</))
{comparison_rule="less_than";rule_string=rangeRequirements.replace("range<","");}
switch(comparison_rule)
{case"greater_than_or_equal":if(!(form[fieldName].value>=Number(rule_string)))
{if(!processError(form[fieldName],errorMessage))
return false;}
break;case"greater_than":if(!(form[fieldName].value>Number(rule_string)))
{if(!processError(form[fieldName],errorMessage))
return false;}
break;case"less_than_or_equal":if(!(form[fieldName].value<=Number(rule_string)))
{if(!processError(form[fieldName],errorMessage))
return false;}
break;case"less_than":if(!(form[fieldName].value<Number(rule_string)))
{if(!processError(form[fieldName],errorMessage))
return false;}
break;case"equal":var rangeValues=rule_string.split("-");if((form[fieldName].value<Number(rangeValues[0]))||(form[fieldName].value>Number(rangeValues[1])))
{if(!processError(form[fieldName],errorMessage))
return false;}
break;}
break;case"function":custom_function=fieldName;eval("var result = "+custom_function+"()");if(result.constructor.toString().indexOf("Array")!=-1)
{for(var j=0;j<result.length;j++)
{if(!processError(result[j][0],result[j][1]))
return false;}}
break;default:alert("Unknown requirement flag in validateFields(): "+requirement);return false;}}
if(typeof options.customErrorHandler=='function')
return options.customErrorHandler(form,returnHash);else if(options.displayType=="alert-all")
{var errorStr=options.errorTextIntro+"\n\n";for(var i=0;i<returnHash.length;i++)
{errorStr+=options.errorJSItemBullet+returnHash[i][1]+"\n";styleField(returnHash[i][0],i==0);}
if(returnHash.length>0)
{alert(errorStr);return false;}}
else if(options.displayType=="display-html")
{var success=displayHTMLErrors(form,returnHash);if(!success)
return false;}
if(typeof options.onCompleteHandler=='function')
return options.onCompleteHandler();else
return true;}
function processError(obj,message)
{message=message.replace(/%%C%%/ig,",");var continueProcessing=true;switch(options.displayType)
{case"alert-one":alert(message);styleField(obj,true);continueProcessing=false;break;case"alert-all":case"display-html":returnHash.push([obj,message]);break;}
return continueProcessing;}
function displayHTMLErrors(f,errorInfo)
{var errorHTML=options.errorTextIntro+"<br /><br />";for(var i=0;i<errorInfo.length;i++)
{errorHTML+=options.errorHTMLItemBullet+errorInfo[i][1]+"<br />";styleField(errorInfo[i][0],i==0);}
if(errorInfo.length>0)
{$("#"+options.errorTargetElementId).css("display","block");$("#"+options.errorTargetElementId).html(errorHTML);return false;}
return true;}
function styleField(field,focus)
{if(field.type==undefined)
{if(focus)
field[0].focus();for(var i=0;i<field.length;i++)
{if(!$(field[i]).hasClass(options.errorFieldClass))
$(field[i]).addClass(options.errorFieldClass);}}
else
{if(options.errorFieldClass)
$(field).addClass(options.errorFieldClass);if(focus)
field.focus();}}
function isValidEmail(str)
{var s=$.trim(str);var at="@";var dot=".";var lat=s.indexOf(at);var lstr=s.length;var ldot=s.indexOf(dot);if(s.indexOf(at)==-1||(s.indexOf(at)==-1||s.indexOf(at)==0||s.indexOf(at)==lstr)||(s.indexOf(dot)==-1||s.indexOf(dot)==0||s.indexOf(dot)==lstr)||(s.indexOf(at,(lat+1))!=-1)||(s.substring(lat-1,lat)==dot||s.substring(lat+1,lat+2)==dot)||(s.indexOf(dot,(lat+2))==-1)||(s.indexOf(" ")!=-1))
{return false;}
return true;}
function isValidDate(month,day,year,isLaterDate)
{var daysInMonth;if((year%4==0)&&((year%100!=0)||(year%400==0)))
daysInMonth=[31,29,31,30,31,30,31,31,30,31,30,31];else
daysInMonth=[31,28,31,30,31,30,31,31,30,31,30,31];if(!month||!day||!year)return false;if(1>month||month>12)return false;if(year<0)return false;if(1>day||day>daysInMonth[month-1])return false;if(isLaterDate)
{var today=new Date();var currMonth=today.getMonth()+1;var currDay=today.getDate();var currYear=today.getFullYear();if(String(currMonth).length==1)currMonth="0"+currMonth;if(String(currDay).length==1)currDay="0"+currDay;var currDate=String(currYear)+String(currMonth)+String(currDay);if(String(month).length==1)month="0"+month;if(String(day).length==1)day="0"+day;incomingDate=String(year)+String(month)+String(day);if(Number(currDate)>Number(incomingDate))
return false;}
return true;}})(jQuery);;function createCookie(name,value,days){if(days){var date=new Date();date.setTime(date.getTime()+(days*24*60*60*1000));var expires="; expires="+date.toGMTString();}
else var expires="";document.cookie=name+"="+value+expires+"; path=/";}
function msieversion(){var rv=-1;if(navigator.appName=='Microsoft Internet Explorer')
{var ua=navigator.userAgent;var re=new RegExp("MSIE ([0-9]{1,}[\.0-9]{0,})");if(re.exec(ua)!=null)
rv=parseFloat(RegExp.$1);}
else if(navigator.appName=='Netscape')
{var ua=navigator.userAgent;var re=new RegExp("Trident/.*rv:([0-9]{1,}[\.0-9]{0,})");if(re.exec(ua)!=null)
rv=parseFloat(RegExp.$1);}
return(rv!=-1);}
function readCookie(name){var nameEQ=name+"=";var ca=document.cookie.split(';');for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==' ')c=c.substring(1,c.length);if(c.indexOf(nameEQ)==0)return c.substring(nameEQ.length,c.length);}
return null;}
var document_referrer=readCookie('document.referrer');var document_referrer_base_url='http://www.freelogoservices.com/';if(!document_referrer){if(document.referrer.indexOf(document_referrer_base_url)==-1){createCookie('document.referrer',document.referrer,1);}}
var showZoomImage=0;var showZoomImageInterval='';function openFancyZoom(elemID){clickFancyZoom($('#'+elemID));}
function clickFancyZoom(obj){var href=$(obj).attr('href');$('#zoomImageBigContainer .tdContent img').attr('src',href);$('body,html').scrollTo({top:0,left:0}).css('overflow','hidden');if(showZoomImage){openZoomImageFct();return false;}else{showZoomImageInterval=setInterval('openZoomImageFct()',100);return false;}}
function openZoomImageFct(){if(showZoomImage){showZoomImageFct();}}
function showZoomImageFct(){var width=$(window).width();var height=$(window).height();var widthImg=$('#zoomImageBigContainer').width();var heightImg=$('#zoomImageBigContainer').height();if(width<widthImg||height<heightImg){var ratioHeight=height/heightImg;var ratioWidth=width/widthImg;if(ratioHeight>ratioWidth){$('#zoomImageBigContainer img').width((width-40)+'px');}else{$('#zoomImageBigContainer img').height((height-40)+'px');}
widthImg=$('#zoomImageBigContainer').width();heightImg=$('#zoomImageBigContainer').height();width=$(window).width();height=$(window).height();}
$('#zoomImageBigContainer').css('top',(height-heightImg)/2);$('#zoomImageBigContainer').css('left',(width-widthImg)/2);$('#zoomImageBigContainer').css('display','none').removeClass('zoomImageHide');$('#zoomImageBigContainer').slideDown('slow');showZoomImage=0;clearInterval(showZoomImageInterval);return false;}
function allowOnlyNumbers(evt){evt=(evt)?evt:window.event;var charCode=(evt.which)?evt.which:evt.keyCode;var allowed=[35,36,37,39,46];if(charCode>31&&(charCode<48||charCode>57)){if($.inArray(charCode,allowed)!=-1){return true;}
if(charCode>=96&&charCode<=105){return true;}
return false;}
return true;}
function validateOnlyNumbers(obj,evt){var value=parseInt(obj.val());if(isNaN(value)){obj.val('');}
else
obj.val(value);}
function weeblyapp_js_init(){$('body').addClass('body_weebly_app');if($('body #logo_index a').length){$('body #logo_index a').attr('href','#');}
if($('body #logo a').length){$('body #logo a').attr('href','#');}}
function submit_1and1_page_height(){var height=$('body').height();if(height<50){if($('.logos_background_page').length){height=$('.logos_background_page').height();}}
window.parent.postMessage(height,'*');}
function onElementHeightChange(elm,callback){var lastHeight=elm.clientHeight,newHeight;(function run(){newHeight=elm.clientHeight;if(lastHeight!=newHeight)
callback();lastHeight=newHeight;if(elm.onElementHeightChangeTimer)
clearTimeout(elm.onElementHeightChangeTimer);elm.onElementHeightChangeTimer=setTimeout(run,200);})();}
function fls_init_body_classes(){if(typeof Drupal.settings.body_classes=='object'){$.each(Drupal.settings.body_classes,function(k,v){if(typeof v=='string'){$('body').addClass(v);}});}
else if(typeof Drupal.settings.body_classes=='string'){$('body').addClass(Drupal.settings.body_classes);}}
$(document).ready(function(){fls_init_body_classes();$('.fls-auto-resize-text').autoTextSizeFls();if(Drupal.settings.STOREID==7&&self!=top){setTimeout(function(){submit_1and1_page_height();onElementHeightChange(document.body,submit_1and1_page_height);},500);}
if(typeof Drupal.settings.weeblyapp_flow!='undefined'){if(Drupal.settings.weeblyapp_flow){weeblyapp_js_init();}}
$('.radio_mic').mousedown(function(){ga('send','event','Podcast','Click','Podcast microphone');});$('.sizeIsNumber').keydown(function(evt){return allowOnlyNumbers(evt);});$('.sizeIsNumber').change(function(evt){return validateOnlyNumbers($(this),evt);});Drupal.settings.jqm_url='';var language='';if(Drupal.settings.lang!='en'){language='/'+Drupal.settings.lang;}
if(Drupal.settings.baseUrl.indexOf('https')>=0){Drupal.settings.jqm_url=language+'/jqm/secure/';}
else Drupal.settings.jqm_url=language+'/jqm/ajax/';$('#edit-submit').css('display','inline-block');if($("#step4_special_offer3").length==0)
$('#edit-submit').click(function(){if($('#user-pass').length>0)$('#user-pass').submit();if($('#user-login').length>0)$('#user-login').submit();})
if($('a.highslide').length>0){$.ajax({url:'jqm/template',success:function(Response){$('body').append('<div class="zoomImageHide" id="zoomImageBigContainer">'+Response+'</div>');$('#zoomImageBigContainer .tdContent').css('width','auto').css('height','auto').append('<img src="#" />');$('#zoomImageBigContainer .tdContent img').click(function(){$('#zoomImageBigContainer').slideUp('slow',function(){$(this).addClass('zoomImageHide').css('display','');$('body,html').css('overflow','');$('#zoomImageBigContainer img').width('auto');$('#zoomImageBigContainer img').height('auto');});}).bind('load',function(){$('#zoomImageBigContainer').css('display','none').removeClass('zoomImageHide');showZoomImage=1;});}});}
$('a.highslide').click(function(){clickFancyZoom(this);return false;});try{if($('#spam_free_policy_terms_and_cond').length){var positionTAC1=$('#spam_free_policy_terms_and_cond').offset();var leftTAC1=positionTAC1.left;var topTAC1=positionTAC1.top;$('#terms_and_conditions_container').css('top',topTAC1-5-$('#terms_and_conditions_container').height());$('#terms_and_conditions_container').css('left',leftTAC1-($('#terms_and_conditions_container').width()/2));}
if($('.protect_privacy').length){var positionTAC4=$('.logo_creator_protect_privacy').offset();var leftTAC4=positionTAC4.left;var topTAC4=positionTAC4.top;$('#privacy_policy_container').css('top',topTAC4-100);$('#privacy_policy_container').css('left',leftTAC4-($('#privacy_policy_container').width()/2));var privacyObj=$('#privacy_policy_container');$('#privacy_policy_container').remove();$('body').append(privacyObj);}
if($('#terms_and_conditions_general_container').length){var positionTAC2=$('#terms_and_cond').offset();var leftTAC2=positionTAC2.left;var topTAC2=positionTAC2.top;$('#terms_and_conditions_general_container').css('top',topTAC2-5-$('#terms_and_conditions_general_container').height());$('#terms_and_conditions_general_container').css('left',leftTAC2-($('#terms_and_conditions_general_container').width()/2));}
if($('#privacy_policy_general_container').length){var positionTAC3=$('#privacy_modal').offset();var leftTAC3=positionTAC3.left;var topTAC3=positionTAC3.top;$('#privacy_policy_general_container').css('top',topTAC3-5-$('#privacy_policy_general_container').height());$('#privacy_policy_general_container').css('left',leftTAC3-($('#privacy_policy_general_container').width()/2));}}catch(err){}
$('#edit-logo-type').click(function(){$('#edit-logo-type').addClass('highlight_field');}).bind('mouseout',function(){$('#edit-logo-type').removeClass('highlight_field');});$('#edit-logo-type option').bind('mouseover',function(){$('#edit-logo-type').addClass('highlight_field');});$('#edit-country').click(function(){$('#edit-country').addClass('highlight_field');}).bind('mouseout',function(){$('#edit-country').removeClass('highlight_field');});$('#edit-country option').bind('mouseover',function(){$('#edit-country').addClass('highlight_field');});$('.tooltipspan').tooltip({track:true,delay:0,showURL:false,showBody:" - ",fade:250});$('#spam_free_policy, .index5v2_why a:first').each(function(){var text=$(this).attr('title');if(text==undefined||!text){var classname=$(this).attr('class');if(!classname)classname=$(this).parent().attr('class');var text=$('.'+classname+'_hover').html();text=text.replace('<a href="#">','');}
if(text!=undefined&&text){$(this).attr('textattr',text);$(this).attr('title','');}}).click(function(){$('#tooltip').remove();var text=$(this).attr('textattr');if(text==undefined||!text)return false;var pos=$(this).offset();var width=$(this).width();pos.left+=width+5;$('body').append('<div style="max-width:300px;top:'+pos.top+'px;left:'+pos.left+'px;" id="tooltip" class="viewport-right"><a href="#" style="position:absolute;right:5px;top:1px;text-decoration:none;" class="tooltip-closex">&#10006;</a><p style="padding:5px;" class="tooltip-text">'+text+'</p></div>');$('#tooltip a.tooltip-closex').click(function(){$('#tooltip').remove();return false;});return false;});$('#spam_free_policy_why_phone').tooltip({track:true,delay:0,showURL:false,showBody:" - ",fade:250});$('#spam_free_policy_terms_and_cond,#terms_and_cond').click(function(){var language='';if(Drupal.settings.lang){language='/'+Drupal.settings.lang;}
window.open(language+'/terms');return false;});$('#privacy_modal,.protect_privacy').click(function(){var language='';if(Drupal.settings.lang){language='/'+Drupal.settings.lang;}
window.open(language+'/privacy');return false;});if($("#step4_special_offer3").length==0)
$('#step-1-form #edit-submit').click(function(){additionalErrorHTML="";$("#rsvErrors").html("").css('display','none');var errorHTML=Drupal.settings.step_1_form.form_header_error;if($('input[name="logo_first_line"]').val()==""){additionalErrorHTML+=Drupal.settings.step_1_form.logo_first_line.required;$('input[name="logo_first_line"]').addClass('errorFieldDemo5');$('#logo_first_line_label').addClass('signup_error_label');$('#logo_first_line_error_icon').show();}else{$('input[name="logo_first_line"]').removeClass('errorFieldDemo5');$('#logo_first_line_label').removeClass('signup_error_label');$('#logo_first_line_error_icon').hide();}
if(Drupal.settings.logocategory_split_set==2){if($('#edit-logo-type').val()=="-1"){additionalErrorHTML+=Drupal.settings.step_1_form.logo_type.invalid;$('#edit-logo-type').addClass('errorFieldDemo5');fls_events_add('error_msg_not_selecting_logo_category',1);}
else{$('#edit-logo-type').removeClass('errorFieldDemo5');}}
if($('input[name="first_name"]').val()==""){additionalErrorHTML+=Drupal.settings.step_1_form.first_name.required;$('input[name="first_name"]').addClass('errorFieldDemo5');$('#logo_first_name_label').addClass('signup_error_label');$('#logo_first_name_error_icon').show();}else{$('input[name="first_name"]').removeClass('errorFieldDemo5');$('#logo_first_name_label').removeClass('signup_error_label');$('#logo_first_name_error_icon').hide();}
if($('input[name="last_name"]').val()==""){additionalErrorHTML+=Drupal.settings.step_1_form.last_name.required;"&#8226;&nbsp;<strong>Last Name:</strong> Required information<br />";$('input[name="last_name"]').addClass('errorFieldDemo5');$('#logo_last_name_label').addClass('signup_error_label');$('#logo_last_name_error_icon').show();}else{$('input[name="last_name"]').removeClass('errorFieldDemo5');$('#logo_last_name_label').removeClass('signup_error_label');$('#logo_last_name_error_icon').hide();}
if($('input[name="phone"]').val()==""){additionalErrorHTML+=Drupal.settings.step_1_form.phone.required;$('input[name="phone"]').addClass('errorFieldDemo5');$('#phone_label').addClass('signup_error_label');$('#phone_error_icon').show();}else{if(!validate_phone_function($('input[name="phone"]').val())){additionalErrorHTML+=Drupal.settings.step_1_form.phone.invalid;$('input[name="phone"]').addClass('errorFieldDemo5');$('#phone_label').addClass('signup_error_label');$('#phone_error_icon').show();}else{$('input[name="phone"]').removeClass('errorFieldDemo5');$('#phone_label').removeClass('signup_error_label');$('#phone_error_icon').hide();}}
if(!$('input[name="agree_terms"]').is(':checked')&&!Drupal.settings.terms_acceptance_set){additionalErrorHTML+=Drupal.settings.step_1_form.agree_terms.required;$('input[name="agree_terms"]').addClass('errorFieldDemo5');$('#edit-agree-terms-wrapper label').addClass('signup_error_label');$('#termd_and_conditions_error_icon').show();}else{$('input[name="agree_terms"]').removeClass('errorFieldDemo5');$('#edit-agree-terms-wrapper label').removeClass('signup_error_label');$('#termd_and_conditions_error_icon').hide();}
var emailValid=1;$('input[name="email"]').removeClass('errorFieldDemo5');$('#email_label').removeClass('signup_error_label');$('#email_error_icon').hide();if($('input[name="email"]').length){if($('input[name="email"]').val()==""){emailValid=0;additionalErrorHTML+=Drupal.settings.step_1_form.email.required;$('input[name="email"]').addClass('errorFieldDemo5');$('#email_label').addClass('signup_error_label');$('#email_error_icon').show();}else{if(!isValidEmail($('input[name="email"]').val())){emailValid=0;additionalErrorHTML+=Drupal.settings.step_1_form.email.invalid;$('input[name="email"]').addClass('errorFieldDemo5');$('#email_label').addClass('signup_error_label');$('#email_error_icon').show();}}}
if(additionalErrorHTML){errorHTML+=additionalErrorHTML;$("#rsvErrors").css("display","block");$("#rsvErrors").html(errorHTML);return false;}
var user_country=$('#edit-country option:selected').val();$('#step-1-form').submit();});$('#step-1-form').bind('submit',function(){if(typeof stop_duplicate_form_submit!=='undefined')return false;else stop_duplicate_form_submit=true;});$('.product_buynow').click(function(){var id=$(this).attr('id');if(id){id=id.split('_');if(!(id[1]>0))
return true;}
if($(this).hasClass('similar_tpl')){fls_store_promo_product_similar_tpl_click_direct_save(this);}
else
fls_store_promo_product_click_direct_save(this);if(id)return false;});if(typeof(Drupal.settings.ismobile)!='undefined'){if(Drupal.settings.ismobile){$('.menu_element .menu_item a').click(function(){return false;})}}
extra_class="";if(Drupal.settings.term_update_message)extra_class="term_notify_msg";if(Drupal.settings.hurricane_message_show)extra_class="hurricane_msg";if(typeof(Drupal.settings.coupon_message)!='undefined'&&window===window.parent){if(Drupal.settings.show_coupon_banner&&Drupal.settings.term_update_message){$('body').append('<div class="banner_container"><div class="coupon-message"><span class="msg">'+Drupal.settings.coupon_message+'</span><span class="close"></span></div><div class="coupon-message '+extra_class+'"><span class="msg">'+Drupal.settings.term_notification_message+'</span><span class="close"></span></div></div>');$('body').removeClass('body-coupon-message');$('body').addClass('body-term-message');}else if(Drupal.settings.show_coupon_banner&&Drupal.settings.hurricane_message_show){$('body').append('<div class="banner_container"><div class="coupon-message"><span class="msg">'+Drupal.settings.coupon_message+'</span><span class="close"></span></div><div class="coupon-message '+extra_class+'"><span class="msg">'+Drupal.settings.hurricane_message+'</span><span class="close"></span></div></div>');$('body').removeClass('body-coupon-message');$('body').addClass('body-term-message');}else{$('body').append('<div class="coupon-message '+extra_class+'"><span class="msg">'+Drupal.settings.coupon_message+'</span><span class="close"></span></div>');$('body').removeClass('body-term-message');$('body').addClass('body-coupon-message');}}
$('.coupon-message .hurricane_info').click(function(e){e.preventDefault();alert(Drupal.settings.hurricane_message_info);return false;});$('.coupon-message span.close').click(function(){if($(this).parent().hasClass('domain')){$('.coupon-message.domain').remove();$.cookie('coupon_message',null,{path:'/'});}else if($(this).parent().hasClass('term_notify_msg')){$('.coupon-message.term_notify_msg').remove();$.cookie('close_notification_bar',1,{expires:10,path:'/'});}else if($(this).parent().hasClass('hurricane_msg')){$('.coupon-message.hurricane_msg').remove();$.cookie('hurricane_message',1,{expires:10,path:'/'});}else{$('.coupon-message:not(.term_notify_msg, .hurricane_msg, .domain)').remove();$.cookie('coupon_message',null,{path:'/'});}
if(Drupal.settings.term_update_message){if($('body').hasClass('body-term-message')){$('body').removeClass('body-term-message');$('body').addClass('body-coupon-message');}else $('body').removeClass('body-coupon-message');}else $('body').removeClass('body-coupon-message');});fls_logo_global_leavebehind_init();$('.popup_css_container a.close').click(function(e){e.preventDefault();$('.popup_css_overlay').hide();$('.popup_css').hide();return false;});$('.popup_css_showonready').show();});function fls_store_promo_product_similar_tpl_click_direct_save(obj){var id=$(obj).attr('id');if(id){id=id.split('_');fls_store_promo_product_similar_tpl_direct_save(id[1],id[2],id[3],id[4]);return false;}}
function fls_store_promo_product_click_direct_save(obj){var id=$(obj).attr('id');if(id){id=id.split('_');fls_store_promo_product_direct_save(id[1],id[2],id[3]);return false;}}
var additionalErrorHTML;function fls_track_title_page(){var v=$.cookie('track_title_page');var vg=Drupal.settings.track_title_page;var path=Drupal.settings.fls_path;path=path.split('/');var p=$.cookie('fls_check_plugin');var flash='';var java='';var referrer='';if(p=='1'){flash=PluginDetect.getVersion('flash');java='';}
if(p){var title=$('head title').text();var head_title=$.cookie('head_title');if(head_title=='1'){$.cookie('head_title',title);}
$.ajax({url:Drupal.settings.baseUrl+'/track-title-page',type:"POST",data:({title:title,flash:flash,java:java,referrer:referrer}),dataType:"json",success:function(msg){$('#edit-country').val(msg['country_data']['country_id']);$('#edit-country').trigger('change');}});}}
function isValidEmail(str)
{var re=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return str.match(re);}
function validate_phone_function(){if(!$('#edit-phone').length)return true;var phone=document.getElementById("edit-phone").value;var country_id=$('#edit-country').val();if(country_id=='1'||country_id=='2'||country_id=='01'||country_id=='02'){var regexpn1=/^[-+.()_xX0-9 ]+$/;}else{var regexpn1=/^[-+.()_xX0-9 \/]+$/;}
var regexpn3=/([0]{7}|[1]{7}|[2]{7}|[3]{7}|[4]{7}|[5]{7}|[6]{7}|[7]{7}|[8]{7}|[9]{7})/;var valid=false;if(phone.match(regexpn1)){valid=true;}else{valid=false;}
if(valid){var count=0;for(var i=0;i<phone.length;i++){var c=parseInt(phone.charAt(i));if(c>=0&&c<=9){count++;}}
if(country_id=='1'||country_id=='2'||country_id=='01'||country_id=='02'){if(count<10||count>11){valid=false;}}else if(country_id=='50'){if(count<7||count>15){valid=false;}}else{if(count<8||count>15){valid=false;}}
if(phone=='555-1212'||phone.indexOf('555-1212')>=0)valid=false;if(phone.match(regexpn3))valid=false;}
return valid;}
function validate_phone(phone){if(!phone)return true;var country_id=$('#edit-country').val();if(country_id=='1'||country_id=='2'||country_id=='01'||country_id=='02'){var regexpn1=/^[-+.()_xX0-9 ]+$/;}else{var regexpn1=/^[-+.()_xX0-9 \/]+$/;}
var regexpn3=/([0]{7}|[1]{7}|[2]{7}|[3]{7}|[4]{7}|[5]{7}|[6]{7}|[7]{7}|[8]{7}|[9]{7})/;var valid=false;if(phone.match(regexpn1)){valid=true;}else{valid=false;}
if(valid){var count=0;for(var i=0;i<phone.length;i++){var c=parseInt(phone.charAt(i));if(c>=0&&c<=9){count++;}}
if(country_id=='1'||country_id=='2'||country_id=='01'||country_id=='02'){if(count<10||count>11){valid=false;}}else if(country_id=='50'){if(count<7||count>15){valid=false;}}else{if(count<8||count>15){valid=false;}}
if(phone=='555-1212'||phone.indexOf('555-1212')>=0)valid=false;if(phone.match(regexpn3))valid=false;}
return valid;}
function fls_validate_domain(domain){if(!domain)
return false;var re=new RegExp(/^(([a-zA-Z]{1})|([a-zA-Z]{1}[a-zA-Z]{1})|([a-zA-Z]{1}[0-9]{1})|([0-9]{1}[a-zA-Z]{1})|([a-zA-Z0-9][a-zA-Z0-9-_]{1,61}[a-zA-Z0-9]))\.([a-zA-Z]{2,6}|[a-zA-Z0-9-]{2,30}\.[a-zA-Z]{2,3})$/);return domain.match(re);}
function loadPageAfterLogin(){window.location='mylogos';}
function clickPopupsListen(){$('#popups .popups_login_forgot a').click(function(){var element=$('.popups_login_forgot a');var options={'href':element.attr('href'),'onComplete':'clickPopupsListen'};options.noUpdate=1;switch(element.attr('class')){case'forgot_password_modal':options.forceReturn='user/notice/reset';options.hideResult=0;break;case'login_modal':options.forceReturn='mylogos';options.afterSubmit='loadPageAfterLogin';break;default:break;}
Drupal.popups.close();Drupal.popups.openPath(element,options);return false;});}
function jqm_calculate_position(link,container){var offset=$(link).offset();var top=offset.top-5-320;var left=offset.left-(360/2);if(top<0)top=0;if(left<0)left=0;$(container).css('top',top);$(container).css('left',left);}
function printPT(){$('#printPage').click(function(){var className=$(this).attr('class');var content=$('.WordSection1').html();window.open(Drupal.settings.baseUrl+'/jqm/print/'+className,'','width=600, height=400,scrollbars=1');return false;});}
function fls_email_exist_redirect(){var language='';var destination='';if(Drupal.settings.lang!='en')language='/'+Drupal.settings.lang;if(Drupal.settings.destination!=undefined){destination='?destination='+Drupal.settings.destination;}
window.location=Drupal.settings.baseUrl+language+'/user/login'+destination;}
function store_format_price(price,country_id,currency){var price_as_text='';var price_as_text=price.toFixed(2);if(currency){switch(country_id){case 0:case 1:default:price_as_text=currency+price_as_text;break;}}else{switch(country_id){case 0:case 1:default:break;}}
return price_as_text;}
function fls_store_step3_track(editor_version){window.onbeforeunload=null;}
function fls_store_promo_product_similar_tpl_direct_save(lid,editor,product_id,tpl_id){show_loading_overlay();var base_url=Drupal.settings.baseUrl;if(Drupal.settings.lang&&Drupal.settings.lang!='en'){base_url+='/'+Drupal.settings.lang;}
var base_url_nossl=base_url.replace('https://','http://');var url='';var isHttps=Drupal.settings.baseUrl.indexOf('https://');if(isHttps==-1){base_url=base_url_nossl;url+=base_url+'/product/directsave/'+lid+'/'+editor+'/'+tpl_id;}else{url+=base_url+'/product/directsave/ssl/'+lid+'/'+editor+'/'+tpl_id;}
if(product_id==36&&Drupal.settings.upsell_country=='US'){window.location=base_url+'/pens';return false;}
$.ajax({url:url,dataType:"json",success:function(Response){if(Response.success=='1'){var url=base_url;var lds='';if($('#lds').length){if($('#lds').val()==1){lds='&lds=1';}}
url+='/product/options/'+product_id+'?lid='+Response['lid']+lds;window.location=url;}else{if(Response.success=='0'&&Response.errcode==-1){window.location=base_url+$('#promo_'+lid+'_'+editor+'_'+product_id).attr('href');return;}
if($('#TB_load').length){if(typeof Drupal.settings.storage_failed_message!='undefined'){$('#TB_load p').html(Drupal.settings.storage_failed_message);$('#TB_load p .refresh_page').click(function(e){e.preventDefault();location.reload();return false;});}}}}});return false;}
function fls_store_promo_product_direct_save(lid,editor,product_id){show_loading_overlay();var base_url=Drupal.settings.baseUrl;if(Drupal.settings.lang&&Drupal.settings.lang!='en'){base_url+='/'+Drupal.settings.lang;}
var base_url_nossl=base_url.replace('https://','http://');var url='';var isHttps=Drupal.settings.baseUrl.indexOf('https://');if(isHttps==-1){base_url=base_url_nossl;url+=base_url+'/product/directsave/'+lid+'/'+editor;}else{url+=base_url+'/product/directsave/ssl/'+lid+'/'+editor;}
if(product_id==36&&Drupal.settings.upsell_country=='US'){window.location=base_url+'/pens';return false;}
$.ajax({url:url,dataType:"json",success:function(Response){console.log('success');if(Response.success=='1'){var url=base_url;var lds='';if($('#lds').length){if($('#lds').val()==1){lds='&lds=1';}}
url+='/product/options/'+product_id+'?lid='+Response['lid']+lds;window.location=url;}else{if(Response.success=='0'&&Response.errcode==-1){window.location=base_url+$('#promo_'+lid+'_'+editor+'_'+product_id).attr('href');return;}
if($('#TB_load').length){if(typeof Drupal.settings.storage_failed_message!='undefined'){$('#TB_load p').html(Drupal.settings.storage_failed_message);$('#TB_load p .refresh_page').click(function(e){e.preventDefault();location.reload();return false;});}}}}});return false;}
function fls_popunder_callback(param){$('.logo_promo_product_lightbox,#flash_promo_products_popup').hide();var popup_url=Drupal.settings.custom_popunder_url||Drupal.settings.popunder_url;fls_new_page(popup_url,'width=1000, height=690,scrollbars=yes,resizable=yes, location=yes, toolbar=yes, menubar=yes','step4');Drupal.settings.offer_flash_submited=true;var fls_popunder_callback_timer=typeof(fls_popunder_callback_timer_overwrite)!='undefined'?fls_popunder_callback_timer_overwrite:2000;setTimeout(function(){if(typeof param!='undefined'){if(param.length){if($(param+" .popunder_click").length)
param+=" .popunder_click";$(param).trigger('mousedown').trigger('click').focus();$(param)[0].click();popunder_hide_elements();return;}}
$('.popunder_click_holder:last').trigger('click');window.location=$('.popunder_click_holder:last').attr('href');},fls_popunder_callback_timer);}
function fls_store_holiday_card_direct_save(logo_id,editor,card_id){show_loading_overlay();var base_url=Drupal.settings.baseUrl;if(Drupal.settings.lang&&Drupal.settings.lang!='en'){base_url+='/'+Drupal.settings.lang;}
var base_url_nossl=base_url.replace('https://','http://');var url='';var isHttps=Drupal.settings.baseUrl.indexOf('https://');if(isHttps==-1){base_url=base_url_nossl;url+=base_url+'/product/directsave/'+logo_id+'/'+editor+'/'+card_id;}else{url+=base_url+'/product/directsave/ssl/'+logo_id+'/'+editor+'/'+card_id;}
$.ajax({url:url,dataType:"json",success:function(Response){if(Response.success=='1'){var url=base_url;url+='/holiday-greeting-cards/options/'+Response['lid'];window.location=url;}else{return true;}}});return false;}
function is_inside_iframe(){var inside_iframe=false;try
{if(top!==self){inside_iframe=true;}}
catch(err){inside_iframe=true;}
return inside_iframe;}
function fls_events_add(event,val){if(!val){fls_events_add_simple(event);return;}
var date=new Date();date.setTime(date.getTime()+(3*24*60*60*1000));if((data=$.cookie('tr_events_val_queue'))){data=$.deparam(data);}
else{data={};}
data[event]=val;data=$.param(data);if(!fls_events_check_skip(event)){$.cookie("tr_events_val_queue",data,{expires:date,path:'/'});}}
function fls_events_add_simple(event){var data;var date=new Date();date.setTime(date.getTime()+(3*24*60*60*1000));if((data=$.cookie('tr_events_queue')))
data+=',';else
data='';data+=event;if(!fls_events_check_skip(event)){$.cookie("tr_events_queue",data,{expires:date,path:'/'});}}
function fls_events_check_skip(event){var skip_update=false;if(typeof Drupal.settings.split_test_skip_updates!='undefined'){for(var i in Drupal.settings.split_test_skip_updates){for(var j in Drupal.settings.split_test_skip_updates[i]){var jpath=j.replace('*','');if(Drupal.settings.fls_path.indexOf(jpath)===0){if($.inArray(event,Drupal.settings.split_test_skip_updates[i][j])!==-1){skip_update=true;}}}}}
return skip_update;}
function fls_ga_track_event(name,action){if(typeof(action)=='undefined')
action='Click';if(Drupal.settings.ga_status){ga('send','event',name,action);}}
function fls_store_round_up(price){var price_o=parseFloat(price);price=price_o.toFixed(2);price_o=price_o.toFixed(6);var diff=price_o-price;if(diff>0){var arr_price=price.split('.');if(arr_price[1]!=undefined){var p=parseInt(arr_price[1]);p++;if(p.toString().length==1){p='0'+p;}
else if(p.toString().length==3){p=p-100;arr_price[0]++;}
arr_price[1]=p;price=arr_price.join('.');price=parseFloat(price);}}
price=parseFloat(price);price=price.toFixed(2);return price;}
function fls_new_page(url,attr_string,window_identifier){Drupal.settings.leavebehind_popup_submitted=true;var unique_identifier='flswin_'+window_identifier;var status=$.cookie(unique_identifier);if(status!==null)return false;fls_new_page_status_change(window_identifier,0);if(attr_string==undefined)attr_string='';var browser=$.browser;if(Drupal.settings.browser_details_name=="chrome"){var parent_url=url.split("?offer=1");if(parent_url[0]!==undefined){$('body').append('<a id="fls_open_new_page" class="none" style="display:none" href="'+parent_url[0]+'">  </a>');setTimeout(function(){window.location=url;},100);fls_simulate_click(true,false,false,'fls_open_new_page');}}else{$('body').append('<a id="fls_open_new_page" class="none" style="display:none" href="'+url+'">  </a>');fls_open_popup(url,attr_string);}
return false;}
function fls_simulate_click(ctrl,shift,isMiddle,linkTargetId){var evt=document.createEvent('MouseEvents');evt.initMouseEvent('click',true,true,window,0,0,0,0,0,ctrl,false,shift,false,isMiddle?1:0,null);document.getElementById(linkTargetId).dispatchEvent(evt);return false;}
mywindow=false;function fls_open_popup(url,attr_string){ga('send','event','Leave Behind','Popunder','Popunder Opened');fls_events_add('leavebehind_popup_opened');if(attr_string==undefined)attr_string='';mywindow=window.open(url,'mywindow',attr_string);mywindow.blur();window.open("javascript:window.focus()","_self","");window.focus();return false;}
function fls_new_page_status_change(window_identifier,status){var unique_identifier='flswin_'+window_identifier;var options={path:'/'};$.cookie(unique_identifier,status,options);}
function fls_new_page_get_status(window_identifier){var unique_identifier='flswin_'+window_identifier;return $.cookie(unique_identifier);}
(function($){$.deparam=function(params,coerce){var obj={},coerce_types={'true':!0,'false':!1,'null':null};$.each(params.replace(/\+/g,' ').split('&'),function(j,v){var param=v.split('='),key=decodeURIComponent(param[0]),val,cur=obj,i=0,keys=key.split(']['),keys_last=keys.length-1;if(/\[/.test(keys[0])&&/\]$/.test(keys[keys_last])){keys[keys_last]=keys[keys_last].replace(/\]$/,'');keys=keys.shift().split('[').concat(keys);keys_last=keys.length-1;}else{keys_last=0;}
if(param.length===2){val=decodeURIComponent(param[1]);if(coerce){val=val&&!isNaN(val)?+val:val==='undefined'?undefined:coerce_types[val]!==undefined?coerce_types[val]:val;}
if(keys_last){for(;i<=keys_last;i++){key=keys[i]===''?cur.length:keys[i];cur=cur[key]=i<keys_last?cur[key]||(keys[i+1]&&isNaN(keys[i+1])?{}:[]):val;}}else{obj[key]=val;}}else if(key){obj[key]=coerce?undefined:'';}});return obj;};})(jQuery);var id=0;function popunder_init_element(o){if(Drupal.settings.browser_details_name=='ie')
return false;id++;var url=Drupal.settings.popunder_close_location;var param='.popunder_parent_container_'+id;$(o).addClass('popunder_parent_container popunder_parent_container_'+id);$(o).append('<div id="popunder_object_container_'+id+'"><script>popunder_get_flash_object("popunder_object_container_'+id+'","'+url+'","'+param+'")</script></div>');}
function popunder_get_flash_object(id,url,param){var swfVersionStr="10.0.0";var flashvars={};var params={};params.wmode='transparent';params.menu=false;params.AllowScriptAccess='always';var attributes={};params.flashVars='url='+url+'&callback=fls_popunder_callback&window=flwindow&param='+param;swfobject.embedSWF(Drupal.settings.popunder_flash_object_location,id,"1","1",swfVersionStr,'',flashvars,params,attributes);}
function popunder_hide_elements(){$('.popunder_parent_container  object').hide();}
function popunder_add(o){popunder_init_element($(o));$(o).click(function(){var url=Drupal.settings.custom_popunder_url||Drupal.settings.popunder_url;if(typeof Drupal.settings.offer_flash_submited=='undefined'&&Drupal.settings.browser_details_name!=='chrome')
fls_new_page(url,'width=1000, height=690,scrollbars=yes,resizable=yes, location=yes, toolbar=yes, menubar=yes','step4');});}
function fls_logo_global_leavebehind_init(){if(typeof Drupal.settings.show_step4_offer=='undefined')return;if(!Drupal.settings.show_step4_offer)return;switch(Drupal.settings.fls_path){case'home':popunder_add('#choose_design_index a');break;}}
function fls_store_disable_fields_in_progress(){$('.upsells_new_check_logo input').attr('disabled',true);$('.google_upsell_dropdown_seat').attr('disabled',true);}
function fls_store_restore_fields_in_progress(){$('.upsells_new_check_logo input').each(function(){var id=$(this).attr('id');var disabled=$('label[for='+id+']').hasClass('disabled');$(this).attr('disabled',disabled);});$('.google_upsell_dropdown_seat').attr('disabled',false);}
(function($){$.fn.getTextWidth=function(){var spanText=$("BODY #spanCalculateTextWidth");if(spanText.size()<=0){spanText=$("<span id='spanCalculateTextWidth' style='filter: alpha(0);'></span>");spanText.appendTo("BODY");}
var valu=this.val();if(!valu)valu=this.text();spanText.text(valu);spanText.css({"fontSize":this.css('fontSize'),"fontWeight":this.css('fontWeight'),"fontFamily":this.css('fontFamily'),"position":"absolute","top":0,"opacity":0,"left":-2000});return spanText.outerWidth()+parseInt(this.css('paddingLeft'))+'px';};$.fn.getTextHeight=function(width){var spanText=$("BODY #spanCalculateTextHeight");if(spanText.size()<=0){spanText=$("<span id='spanCalculateTextHeight'></span>");spanText.appendTo("BODY");}
var valu=this.val();if(!valu)valu=this.text();spanText.text(valu);spanText.css({"fontSize":this.css('fontSize'),"fontWeight":this.css('fontWeight'),"fontFamily":this.css('fontFamily'),"top":0,"left":-1*parseInt(width)+'px',"position":'absolute',"display":"inline-block","width":width});return spanText.innerHeight()+'px';};$.fn.autoTextSizeFls=function(truncate){if(typeof(truncate=='undefined'))truncate=0;var min_size=8;var max_size=parseInt(this.css('font-size'));this.autoTextSize(min_size,max_size,truncate);}
$.fn.autoTextSize=function(minSize,maxSize,truncate){var _self=this,_width=_self.innerWidth(),_textWidth=parseInt(_self.getTextWidth()),_fontSize=parseInt(_self.css('font-size'));while(_width<_textWidth||(maxSize&&_fontSize>parseInt(maxSize))){if(minSize&&_fontSize<=parseInt(minSize))break;_fontSize--;_self.css('font-size',_fontSize+'px');_textWidth=parseInt(_self.getTextWidth());}
if(truncate)_self.autoTruncateText();};$.fn.autoTruncateText=function(){var _self=this,_width=_self.outerWidth(),_textHeight=parseInt(_self.getTextHeight(_width)),_text=_self.text();while(_textHeight>_self.outerHeight()){_text=_text.slice(0,-1);_self.text(_text);_textHeight=parseInt(_self.getTextHeight(_width));_truncated=true;}
if(!_truncated)return;_text=_text.slice(0,-3);var lastChar=_text[_text.length-1];if(lastChar==' '||lastChar=='.')_text=_text.slice(0,-1);_self.text(_text+'...');};})(jQuery);;(function($){$.scrollTo=function(target,settings){return $('html,body').scrollTo(target,settings);};$.scrollTo.defaults={axis:'y',speed:1};$.fn.scrollTo=function(target,settings){settings=$.extend({},$.scrollTo.defaults,settings);settings.queue=settings.queue&&settings.axis.length==2;if(settings.queue)
settings.speed=Math.ceil(settings.speed/2);if(typeof settings.offset=='number')
settings.offset={left:settings.offset,top:settings.offset};return this.each(function(){var $elem=$(this),t=target,toff,attr={};switch(typeof t){case'number':case'string':if(/^([+-]=)?\d+(px)?$/.test(t)){t={top:t,left:t};break;}
t=$(t,this);case'object':if(t.is||t.style)
toff=(t=$(t)).offset();}
$.each(settings.axis.split(''),parse);animate(settings.onAfter);function parse(i,axis){var Pos=axis=='x'?'Left':'Top',pos=Pos.toLowerCase(),key='scroll'+Pos,act=$elem[0][key];attr[key]=toff?toff[pos]+($elem.is('html,body')?0:act-$elem.offset()[pos]):t[pos];if(settings.margin&&t.css)
attr[key]-=parseInt(t.css('margin'+Pos))||0;if(settings.offset&&settings.offset[pos])
attr[key]+=settings.offset[pos];if(!i&&settings.queue){if(act!=attr[key])
animate(settings.onAfterFirst);delete attr[key];}};function animate(callback){$elem.animate(attr,settings.speed,settings.easing,function(){if(callback)
callback.call(this,$elem,attr,t);});};});};})(jQuery);;jQuery.cookie=function(name,value,options){if(typeof value!='undefined'){options=options||{};if(value===null){value='';options.expires=-1;}
var expires='';if(options.expires&&(typeof options.expires=='number'||options.expires.toUTCString)){var date;if(typeof options.expires=='number'){date=new Date();date.setTime(date.getTime()+(options.expires*24*60*60*1000));}else{date=options.expires;}
expires='; expires='+date.toUTCString();}
var path=options.path?'; path='+(options.path):'';var domain=options.domain?'; domain='+(options.domain):'';var secure=options.secure?'; secure':'';document.cookie=[name,'=',encodeURIComponent(value),expires,path,domain,secure].join('');}else{var cookieValue=null;if(document.cookie&&document.cookie!=''){var cookies=document.cookie.split(';');for(var i=0;i<cookies.length;i++){var cookie=jQuery.trim(cookies[i]);if(cookie.substring(0,name.length+1)==(name+'=')){cookieValue=decodeURIComponent(cookie.substring(name.length+1));break;}}}
return cookieValue;}};;window.Socialite=(function(window,document,undefined)
{'use strict';var uid=0,instances=[],networks={},widgets={},rstate=/^($|loaded|complete)/,euc=window.encodeURIComponent;var socialite={settings:{},trim:function(str)
{return str.trim?str.trim():str.replace(/^\s+|\s+$/g,'');},hasClass:function(el,cn)
{return(' '+el.className+' ').indexOf(' '+cn+' ')!==-1;},addClass:function(el,cn)
{if(!socialite.hasClass(el,cn)){el.className=(el.className==='')?cn:el.className+' '+cn;}},removeClass:function(el,cn)
{el.className=socialite.trim(' '+el.className+' '.replace(' '+cn+' ',' '));},extendObject:function(to,from,overwrite)
{for(var prop in from){var hasProp=to[prop]!==undefined;if(hasProp&&typeof from[prop]==='object'){socialite.extendObject(to[prop],from[prop],overwrite);}else if(overwrite||!hasProp){to[prop]=from[prop];}}},getElements:function(context,cn)
{var i=0,el=[],gcn=!!context.getElementsByClassName,all=gcn?context.getElementsByClassName(cn):context.getElementsByTagName('*');for(;i<all.length;i++){if(gcn||socialite.hasClass(all[i],cn)){el.push(all[i]);}}
return el;},getDataAttributes:function(el,noprefix,nostr)
{var i=0,str='',obj={},attr=el.attributes;for(;i<attr.length;i++){var key=attr[i].name,val=attr[i].value;if(val.length&&key.indexOf('data-')===0){if(noprefix){key=key.substring(5);}
if(nostr){obj[key]=val;}else{str+=euc(key)+'='+euc(val)+'&';}}}
return nostr?obj:str;},copyDataAttributes:function(from,to,noprefix,nohyphen)
{var attr=socialite.getDataAttributes(from,noprefix,true);for(var i in attr){to.setAttribute(nohyphen?i.replace(/-/g,'_'):i,attr[i]);}},createIframe:function(src,instance)
{var iframe=document.createElement('iframe');iframe.style.cssText='overflow: hidden; border: none;';socialite.extendObject(iframe,{src:src,allowtransparency:'true',frameborder:'0',scrolling:'no'},true);if(instance){iframe.onload=iframe.onreadystatechange=function()
{if(rstate.test(iframe.readyState||'')){iframe.onload=iframe.onreadystatechange=null;socialite.activateInstance(instance);}};}
return iframe;},networkReady:function(name)
{return networks[name]?networks[name].loaded:undefined;},appendNetwork:function(network)
{if(!network||network.appended){return;}
if(typeof network.append==='function'&&network.append(network)===false){network.appended=network.loaded=true;socialite.activateAll(network);return;}
if(network.script){network.el=document.createElement('script');socialite.extendObject(network.el,network.script,true);network.el.async=true;network.el.onload=network.el.onreadystatechange=function()
{if(rstate.test(network.el.readyState||'')){network.el.onload=network.el.onreadystatechange=null;network.loaded=true;if(typeof network.onload==='function'&&network.onload(network)===false){return;}
socialite.activateAll(network);}};document.body.appendChild(network.el);}
network.appended=true;},removeNetwork:function(network)
{if(!socialite.networkReady(network.name)){return false;}
if(network.el.parentNode){network.el.parentNode.removeChild(network.el);}
return!(network.appended=network.loaded=false);},reloadNetwork:function(name)
{var network=networks[name];if(network&&socialite.removeNetwork(network)){socialite.appendNetwork(network);}},createInstance:function(el,widget)
{var proceed=true,instance={el:el,uid:uid++,widget:widget};instances.push(instance);if(widget.process!==undefined){proceed=(typeof widget.process==='function')?widget.process(instance):false;}
if(proceed){socialite.processInstance(instance);}
instance.el.setAttribute('data-socialite',instance.uid);instance.el.className='socialite '+widget.name+' socialite-instance';return instance;},processInstance:function(instance)
{var el=instance.el;instance.el=document.createElement('div');instance.el.className=el.className;socialite.copyDataAttributes(el,instance.el);if(el.nodeName.toLowerCase()==='a'&&!el.getAttribute('data-default-href')){instance.el.setAttribute('data-default-href',el.getAttribute('href'));}
var parent=el.parentNode;parent.insertBefore(instance.el,el);parent.removeChild(el);},activateInstance:function(instance)
{if(instance&&!instance.loaded){instance.loaded=true;if(typeof instance.widget.activate==='function'){instance.widget.activate(instance);}
socialite.addClass(instance.el,'socialite-loaded');return instance.onload?instance.onload(instance.el):null;}},activateAll:function(network)
{if(typeof network==='string'){network=networks[network];}
for(var i=0;i<instances.length;i++){var instance=instances[i];if(instance.init&&instance.widget.network===network){socialite.activateInstance(instance);}}},load:function(context,el,w,onload,process)
{context=(context&&typeof context==='object'&&context.nodeType===1)?context:document;if(!el||typeof el!=='object'){socialite.load(context,socialite.getElements(context,'socialite'),w,onload,process);return;}
var i;if(/Array/.test(Object.prototype.toString.call(el))){for(i=0;i<el.length;i++){socialite.load(context,el[i],w,onload,process);}
return;}
if(el.nodeType!==1){return;}
if(!w||!widgets[w]){w=null;var classes=el.className.split(' ');for(i=0;i<classes.length;i++){if(widgets[classes[i]]){w=classes[i];break;}}
if(!w){return;}}
var instance,widget=widgets[w],sid=parseInt(el.getAttribute('data-socialite'),10);if(!isNaN(sid)){for(i=0;i<instances.length;i++){if(instances[i].uid===sid){instance=instances[i];break;}}}else{instance=socialite.createInstance(el,widget);}
if(process||!instance){return;}
if(!instance.init){instance.init=true;instance.onload=(typeof onload==='function')?onload:null;widget.init(instance);}
if(!widget.network.appended){socialite.appendNetwork(widget.network);}else{if(socialite.networkReady(widget.network.name)){socialite.activateInstance(instance);}}},activate:function(el,w,onload)
{window.Socialite.load(null,el,w,onload);},process:function(context,el,w)
{window.Socialite.load(context,el,w,null,true);},network:function(n,params)
{networks[n]={name:n,el:null,appended:false,loaded:false,widgets:{}};if(params){socialite.extendObject(networks[n],params);}},widget:function(n,w,params)
{params.name=n+'-'+w;if(!networks[n]||widgets[params.name]){return;}
params.network=networks[n];networks[n].widgets[w]=widgets[params.name]=params;},setup:function(params)
{socialite.extendObject(socialite.settings,params,true);}};return socialite;})(window,window.document);(function(window,document,Socialite,undefined)
{Socialite.setup({facebook:{lang:'en_GB',appId:null},twitter:{lang:'en'},googleplus:{lang:'en-GB'}});Socialite.network('facebook',{script:{src:'//connect.facebook.net/{{language}}/sdk.js',id:'facebook-jssdk'},append:function(network)
{var fb=document.createElement('div'),settings=Socialite.settings.facebook,events={onlike:'edge.create',onunlike:'edge.remove',onsend:'message.send'};fb.id='fb-root';document.body.appendChild(fb);network.script.src=network.script.src.replace('{{language}}',settings.lang);window.fbAsyncInit=function(){window.FB.init({appId:settings.appId,xfbml:true,version:'v2.2'});for(var e in events){if(typeof settings[e]==='function'){window.FB.Event.subscribe(events[e],settings[e]);}}};}});var facebookInit=function(instance)
{var el=document.createElement('div');el.className=instance.widget.fbtype;Socialite.copyDataAttributes(instance.el,el);instance.el.appendChild(el);if(window.FB&&window.FB.XFBML){window.FB.XFBML.parse(instance.el);}};Socialite.widget('facebook','like',{init:facebookInit,fbtype:'fb-like'});Socialite.widget('facebook','share',{init:facebookInit,fbtype:'fb-share-button'});Socialite.network('twitter',{script:{src:'//platform.twitter.com/widgets.js',id:'twitter-wjs',charset:'utf-8'},append:function()
{var notwttr=(typeof window.twttr!=='object'),settings=Socialite.settings.twitter,events=['click','tweet','retweet','favorite','follow'];if(notwttr){window.twttr=(t={_e:[],ready:function(f){t._e.push(f);}});}
window.twttr.ready(function(twttr)
{for(var i=0;i<events.length;i++){var e=events[i];if(typeof settings['on'+e]==='function'){twttr.events.bind(e,settings['on'+e]);}}
Socialite.activateAll('twitter');});return notwttr;}});var twitterInit=function(instance)
{var el=document.createElement('a');el.className=instance.widget.name+'-button';Socialite.copyDataAttributes(instance.el,el);el.setAttribute('href',instance.el.getAttribute('data-default-href'));el.setAttribute('data-lang',instance.el.getAttribute('data-lang')||Socialite.settings.twitter.lang);instance.el.appendChild(el);};var twitterActivate=function(instance)
{if(window.twttr&&typeof window.twttr.widgets==='object'&&typeof window.twttr.widgets.load==='function'){window.twttr.widgets.load();}};Socialite.widget('twitter','share',{init:twitterInit,activate:twitterActivate});Socialite.widget('twitter','follow',{init:twitterInit,activate:twitterActivate});Socialite.widget('twitter','hashtag',{init:twitterInit,activate:twitterActivate});Socialite.widget('twitter','mention',{init:twitterInit,activate:twitterActivate});Socialite.widget('twitter','timeline',{init:twitterInit,activate:twitterActivate});Socialite.widget('twitter','embed',{process:function(instance)
{instance.innerEl=instance.el;if(!instance.innerEl.getAttribute('data-lang')){instance.innerEl.setAttribute('data-lang',Socialite.settings.twitter.lang);}
instance.el=document.createElement('div');instance.el.className=instance.innerEl.className;instance.innerEl.className='';instance.innerEl.parentNode.insertBefore(instance.el,instance.innerEl);instance.el.appendChild(instance.innerEl);},init:function(instance)
{instance.innerEl.className='twitter-tweet';},activate:twitterActivate});Socialite.network('googleplus',{script:{src:'//apis.google.com/js/plusone.js'},append:function(network)
{if(window.gapi){return false;}
window.___gcfg={lang:Socialite.settings.googleplus.lang,parsetags:'explicit'};}});var googleplusInit=function(instance)
{var el=document.createElement('div');el.className='g-'+instance.widget.gtype;Socialite.copyDataAttributes(instance.el,el);instance.el.appendChild(el);instance.gplusEl=el;};var googleplusEvent=function(instance,callback){return(typeof callback!=='function')?null:function(data){callback(instance.el,data);};};var googleplusActivate=function(instance)
{var type=instance.widget.gtype;if(window.gapi&&window.gapi[type]){var settings=Socialite.settings.googleplus,params=Socialite.getDataAttributes(instance.el,true,true),events=['onstartinteraction','onendinteraction','callback'];for(var i=0;i<events.length;i++){params[events[i]]=googleplusEvent(instance,settings[events[i]]);}
window.gapi[type].render(instance.gplusEl,params);}};Socialite.widget('googleplus','one',{init:googleplusInit,activate:googleplusActivate,gtype:'plusone'});Socialite.widget('googleplus','share',{init:googleplusInit,activate:googleplusActivate,gtype:'plus'});Socialite.widget('googleplus','badge',{init:googleplusInit,activate:googleplusActivate,gtype:'plus'});Socialite.widget('googleplus','follow',{init:googleplusInit,activate:googleplusActivate,gtype:'follow'});Socialite.network('linkedin',{script:{src:'//platform.linkedin.com/in.js'}});var linkedinInit=function(instance)
{var el=document.createElement('script');el.type='IN/'+instance.widget.intype;Socialite.copyDataAttributes(instance.el,el);instance.el.appendChild(el);if(typeof window.IN==='object'&&typeof window.IN.parse==='function'){window.IN.parse(instance.el);Socialite.activateInstance(instance);}};Socialite.widget('linkedin','share',{init:linkedinInit,intype:'Share'});Socialite.widget('linkedin','recommend',{init:linkedinInit,intype:'RecommendProduct'});Socialite.widget('linkedin','follow',{init:linkedinInit,intype:'FollowCompany'});})(window,window.document,window.Socialite);(function(){var s=window._socialite;if(/Array/.test(Object.prototype.toString.call(s))){for(var i=0,len=s.length;i<len;i++){if(typeof s[i]==='function'){s[i]();}}}})();;var PluginDetect={handler:function(c,b,a){return function(){c(b,a)}},isDefined:function(b){return typeof b!="undefined"},isArray:function(b){return(b&&b.constructor===Array)},isFunc:function(b){return typeof b=="function"},isString:function(b){return typeof b=="string"},isNum:function(b){return typeof b=="number"},isStrNum:function(b){return(typeof b=="string"&&(/\d/).test(b))},getNumRegx:/[\d][\d\.\_,-]*/,splitNumRegx:/[\.\_,-]/g,getNum:function(b,c){var d=this,a=d.isStrNum(b)?(d.isDefined(c)?new RegExp(c):d.getNumRegx).exec(b):null;return a?a[0].replace(d.splitNumRegx,","):null},compareNums:function(h,f,d){var e=this,c,b,a,g=parseInt;if(e.isStrNum(h)&&e.isStrNum(f)){if(e.isDefined(d)&&d.compareNums){return d.compareNums(h,f)}c=h.split(e.splitNumRegx);b=f.split(e.splitNumRegx);for(a=0;a<Math.min(c.length,b.length);a++){if(g(c[a],10)>g(b[a],10)){return 1}if(g(c[a],10)<g(b[a],10)){return-1}}}return 0},formatNum:function(b,c){var d=this,a,e;if(!d.isStrNum(b)){return null}if(!d.isNum(c)){c=4}c--;e=b.replace(/\s/g,"").split(d.splitNumRegx).concat(["0","0","0","0"]);for(a=0;a<4;a++){if(/^(0+)(.+)$/.test(e[a])){e[a]=RegExp.$2}if(a>c||!(/\d/).test(e[a])){e[a]="0"}}return e.slice(0,4).join(",")},$$hasMimeType:function(a){return function(d){if(!a.isIE){var c,b,e,f=a.isString(d)?[d]:d;for(e=0;e<f.length;e++){if(/[^\s]/.test(f[e])&&(c=navigator.mimeTypes[f[e]])&&(b=c.enabledPlugin)&&(b.name||b.description)){return c}}}return null}},findNavPlugin:function(l,e,c){var j=this,h=new RegExp(l,"i"),d=(!j.isDefined(e)||e)?/\d/:0,k=c?new RegExp(c,"i"):0,a=navigator.plugins,g="",f,b,m;for(f=0;f<a.length;f++){m=a[f].description||g;b=a[f].name||g;if((h.test(m)&&(!d||d.test(RegExp.leftContext+RegExp.rightContext)))||(h.test(b)&&(!d||d.test(RegExp.leftContext+RegExp.rightContext)))){if(!k||!(k.test(m)||k.test(b))){return a[f]}}}return null},getMimeEnabledPlugin:function(a,e){var d=this,b,c=new RegExp(e,"i");if((b=d.hasMimeType(a))&&(b=b.enabledPlugin)&&(c.test(b.description||"")||c.test(b.name||""))){return b}return 0},getPluginFileVersion:function(f,b){var h=this,e,d,g,a,c=-1;if(h.OS>2||!f||!f.version||!(e=h.getNum(f.version))){return b}if(!b){return e}e=h.formatNum(e);b=h.formatNum(b);d=b.split(h.splitNumRegx);g=e.split(h.splitNumRegx);for(a=0;a<d.length;a++){if(c>-1&&a>c&&d[a]!="0"){return b}if(g[a]!=d[a]){if(c==-1){c=a}if(d[a]!="0"){return b}}}return e},AXO:window.ActiveXObject,getAXO:function(b,a){var g=null,f,d=false,c=this;try{g=new c.AXO(b);d=true}catch(f){}if(c.isDefined(a)){delete g;return d}return g},convertFuncs:function(f){var a,g,d,b=/^[\$][\$]/,c={};for(a in f){if(b.test(a)){c[a]=1}}for(a in c){try{g=a.slice(2);if(g.length>0&&!f[g]){f[g]=f[a](f)}}catch(d){}}},initScript:function(){var c=this,a=navigator,d="/",h=a.userAgent||"",f=a.vendor||"",b=a.platform||"",g=a.product||"";c.OS=(/win/i).test(b)?1:((/mac/i).test(b)?2:((/linux/i).test(b)?3:4));c.convertFuncs(c);c.isIE=new Function("return "+d+"*@cc_on!@*"+d+"false")();c.verIE=c.isIE&&(/MSIE\s*(\d+\.?\d*)/i).test(h)?parseFloat(RegExp.$1,10):null;c.ActiveXEnabled=false;if(c.isIE){var e,i=["Msxml2.XMLHTTP","Msxml2.DOMDocument","Microsoft.XMLDOM","ShockwaveFlash.ShockwaveFlash","TDCCtl.TDCCtl","Shell.UIHelper","Scripting.Dictionary","wmplayer.ocx"];for(e=0;e<i.length;e++){if(c.getAXO(i[e],1)){c.ActiveXEnabled=true;break}}c.head=c.isDefined(document.getElementsByTagName)?document.getElementsByTagName("head")[0]:null}c.isGecko=(/Gecko/i).test(g)&&(/Gecko\s*\/\s*\d/i).test(h);c.verGecko=c.isGecko?c.formatNum((/rv\s*\:\s*([\.\,\d]+)/i).test(h)?RegExp.$1:"0.9"):null;c.isSafari=(/Safari\s*\/\s*\d/i).test(h)&&(/Apple/i).test(f);c.isChrome=(/Chrome\s*\/\s*\d/i).test(h);c.isOpera=(/Opera\s*[\/]?\s*(\d+\.?\d*)/i).test(h);c.verOpera=c.isOpera&&((/Version\s*\/\s*(\d+\.?\d*)/i).test(h)||1)?parseFloat(RegExp.$1,10):null;;c.addWinEvent("load",c.handler(c.runWLfuncs,c));},init:function(d,a){var c=this,b;if(!c.isString(d)){return-3}if(d.length==1){c.getVersionDelimiter=d;return-3}b=c[d.toLowerCase().replace(/\s/g,"")];if(!b||!b.getVersion){return-3}c.plugin=b;if(!c.isDefined(b.installed)||a==true){b.installed=b.version=b.version0=b.getVersionDone=null;b.$=c}c.garbage=false;if(c.isIE&&!c.ActiveXEnabled){if(b!==c.java){return-2}}return 1},fPush:function(b,a){var c=this;if(c.isArray(a)&&(c.isFunc(b)||(c.isArray(b)&&b.length>0&&c.isFunc(b[0])))){a[a.length]=b}},callArray:function(b){var c=this,a;if(c.isArray(b)){for(a=0;a<b.length;a++){if(b[a]===null){return}c.call(b[a]);b[a]=null}}},call:function(c){var b=this,a=b.isArray(c)?c.length:-1;if(a>0&&b.isFunc(c[0])){c[0](b,a>1?c[1]:0,a>2?c[2]:0,a>3?c[3]:0)}else{if(b.isFunc(c)){c(b)}}},getVersionDelimiter:",",$$getVersion:function(a){return function(g,d,c){var e=a.init(g),f,b;if(e<0){return null}f=a.plugin;if(f.getVersionDone!=1){f.getVersion(d,c);if(f.getVersionDone===null){f.getVersionDone=1}}a.cleanup();b=(f.version||f.version0);return b?b.replace(a.splitNumRegx,a.getVersionDelimiter):b}},cleanup:function(){var a=this;if(a.garbage&&a.isDefined(window.CollectGarbage)){window.CollectGarbage()}},addWinEvent:function(d,c){var e=this,a=window,b;if(e.isFunc(c)){if(a.addEventListener){a.addEventListener(d,c,false)}else{if(a.attachEvent){a.attachEvent("on"+d,c)}else{b=a["on"+d];a["on"+d]=e.winHandler(c,b)}}}},winHandler:function(d,c){return function(){d();if(typeof c=="function"){c()}}},WLfuncs:[0],runWLfuncs:function(a){a.winLoaded=true;a.callArray(a.WLfuncs);if(a.onDoneEmptyDiv){a.onDoneEmptyDiv()}},winLoaded:false,$$onWindowLoaded:function(a){return function(b){if(a.winLoaded){a.call(b)}else{a.fPush(b,a.WLfuncs)}}},$$onDetectionDone:function(a){return function(h,g,e,b){var c=a.init(h),j,d;if(c==-3){return-1}d=a.plugin;if(d.getVersionDone!=1){j=a.isMinVersion?a.isMinVersion(h,"0",e,b):a.getVersion(h,e,b)}if(d.installed!=-0.5&&d.installed!=0.5){a.call(g);return 1}if(d!==a.java){return 1};a.fPush(g,d.funcs);return 0;;return 1}},div:null,divWidth:50,pluginSize:1,emptyDiv:function(){var c=this,a,e,b,d=0;if(c.div&&c.div.childNodes){for(a=c.div.childNodes.length-1;a>=0;a--){b=c.div.childNodes[a];if(b&&b.childNodes){if(d==0){for(e=b.childNodes.length-1;e>=0;e--){b.removeChild(b.childNodes[e])}c.div.removeChild(b)}else{}}}}},onDoneEmptyDiv:function(){var a=this;if(!a.winLoaded){return}if(a.WLfuncs&&a.WLfuncs.length>0&&a.isFunc(a.WLfuncs[a.WLfuncs.length-1])){return}if(a.java){if(a.java.OTF==3){return}if(a.java.funcs&&a.java.funcs.length>0&&a.isFunc(a.java.funcs[a.java.funcs.length-1])){return}}a.emptyDiv()},getObject:function(c,a){var g,d=this,f=null,b=d.getContainer(c);try{if(b&&b.firstChild){f=b.firstChild}if(a&&f){f.focus()}}catch(g){}return f},getContainer:function(a){return(a&&a[0]?a[0]:null)},instantiate:function(j,c,g,a,k){var m,n=document,i=this,r,q=n.createElement("span"),o,h,f="<";var l=function(t,s){var v=t.style,d,u;if(!v){return}v.outline="none";v.border="none";v.padding="0px";v.margin="0px";v.visibility="visible";if(i.isArray(s)){for(d=0;d<s.length;d=d+2){try{v[s[d]]=s[d+1]}catch(u){}}return}},b=function(){var t,u="pd33993399",s=null,d=(n.getElementsByTagName("body")[0]||n.body);if(!d){try{n.write(f+'div id="'+u+'">o'+f+"/div>");s=n.getElementById(u)}catch(t){}}d=(n.getElementsByTagName("body")[0]||n.body);if(d){if(d.firstChild&&i.isDefined(d.insertBefore)){d.insertBefore(i.div,d.firstChild)}else{d.appendChild(i.div)}if(s){d.removeChild(s)}}else{}};if(!i.isDefined(a)){a=""}if(i.isString(j)&&(/[^\s]/).test(j)){r=f+j+' width="'+i.pluginSize+'" height="'+i.pluginSize+'" ';for(o=0;o<c.length;o=o+2){if(/[^\s]/.test(c[o+1])){r+=c[o]+'="'+c[o+1]+'" '}}r+=">";for(o=0;o<g.length;o=o+2){if(/[^\s]/.test(g[o+1])){r+=f+'param name="'+g[o]+'" value="'+g[o+1]+'" />'}}r+=a+f+"/"+j+">"}else{r=a}if(!i.div){i.div=n.createElement("div");h=n.getElementById("plugindetect");if(h){i.div=h}else{i.div.id="plugindetect";b()}l(i.div,["width",i.divWidth+"px","height",(i.pluginSize+3)+"px","fontSize",(i.pluginSize+3)+"px","lineHeight",(i.pluginSize+3)+"px","verticalAlign","baseline","display","block"]);if(!h){l(i.div,["position","absolute","right","0px","top","0px"])}}if(i.div&&i.div.parentNode){i.div.appendChild(q);l(q,["fontSize",(i.pluginSize+3)+"px","lineHeight",(i.pluginSize+3)+"px","verticalAlign","baseline","display","inline"]);;try{if(q&&q.parentNode){q.focus()}}catch(m){}try{q.innerHTML=r}catch(m){}if(q.childNodes.length==1&&!(i.isGecko&&i.compareNums(i.verGecko,"1,5,0,0")<0)){l(q.firstChild,["display","inline"])}return[q]}return[null]},java:{mimeType:["application/x-java-applet","application/x-java-vm","application/x-java-bean"],mimeTypeJPI:"application/x-java-applet;jpi-version=",classID:"clsid:8AD9C840-044E-11D1-B3E9-00805F499D93",DTKclassID:"clsid:CAFEEFAC-DEC7-0000-0000-ABCDEFFEDCBA",DTKmimeType:["application/java-deployment-toolkit","application/npruntime-scriptable-plugin;DeploymentToolkit"],JavaVersions:[[1,9,2,30],[1,8,2,30],[1,7,2,30],[1,6,1,30],[1,5,1,30],[1,4,2,30],[1,3,1,30]],searchJavaPluginAXO:function(){var h=null,a=this,c=a.$,g=[],j=[1,5,0,14],i=[1,6,0,2],f=[1,3,1,0],e=[1,4,2,0],d=[1,5,0,7],b=false;if(!c.ActiveXEnabled){return null};if(c.verIE>=a.minIEver){g=a.searchJavaAXO(i,i,b);if(g.length>0&&b){g=a.searchJavaAXO(j,j,b)}}else{if(g.length==0){g=a.searchJavaAXO(f,e,false)}}if(g.length>0){h=g[0]}a.JavaPlugin_versions=[].concat(g);return h},searchJavaAXO:function(l,i,m){var n,f,h=this.$,q,k,a,e,g,j,b,r=[];if(h.compareNums(l.join(","),i.join(","))>0){i=l}i=h.formatNum(i.join(","));var o,d="1,4,2,0",c="JavaPlugin."+l[0]+""+l[1]+""+l[2]+""+(l[3]>0?("_"+(l[3]<10?"0":"")+l[3]):"");for(n=0;n<this.JavaVersions.length;n++){f=this.JavaVersions[n];q="JavaPlugin."+f[0]+""+f[1];g=f[0]+"."+f[1]+".";for(a=f[2];a>=0;a--){b="JavaWebStart.isInstalled."+g+a+".0";if(h.compareNums(f[0]+","+f[1]+","+a+",0",i)>=0&&!h.getAXO(b,1)){continue}o=h.compareNums(f[0]+","+f[1]+","+a+",0",d)<0?true:false;for(e=f[3];e>=0;e--){k=a+"_"+(e<10?"0"+e:e);j=q+k;if(h.getAXO(j,1)&&(o||h.getAXO(b,1))){r[r.length]=g+k;if(!m){return r}}if(j==c){return r}}if(h.getAXO(q+a,1)&&(o||h.getAXO(b,1))){r[r.length]=g+a;if(!m){return r}}if(q+a==c){return r}}}return r},minIEver:7,getMimeJPIversion:function(){var h,a=this,d=a.$,c=new RegExp("("+a.mimeTypeJPI+")(\\d.*)","i"),k=new RegExp("Java","i"),e,j,f="",i={},g=0,b;for(h=0;h<navigator.mimeTypes.length;h++){j=navigator.mimeTypes[h];if(c.test(j.type)&&(e=j.enabledPlugin)&&(j=RegExp.$2)&&(k.test(e.description||f)||k.test(e.name||f))){i["a"+d.formatNum(j)]=j}}b="0,0,0,0";for(h in i){g++;e=h.slice(1);if(d.compareNums(e,b)>0){b=e}}a.mimeTypeJPIresult=g>0?a.mimeTypeJPI+i["a"+b]:"";return g>0?b:null},queryNoApplet00:function(a){var b=window.java,c;try{if(b.lang){a.value=[b.lang.System.getProperty("java.version")+" ",b.lang.System.getProperty("java.vendor")+" "]}}catch(c){}},queryNoApplet:function(){var b=this,c=b.$,d,a=b.queryNoApplet;if(!a.value){a.value=[null,null];if(!c.isIE&&window.java){if(c.OS==2&&c.isOpera&&c.verOpera<9.2&&c.verOpera>=9){}else{if(c.isGecko&&c.compareNums(c.verGecko,"1,9,0,0")<0&&c.compareNums(c.verGecko,"1,8,0,0")>=0){}else{b.queryNoApplet00(a)}}}}return a.value},forceVerifyTag:[],jar:[],Enabled:navigator.javaEnabled(),VENDORS:["Sun Microsystems Inc.","Apple Computer, Inc."],init:function(){var a=this,b=a.$;a.tryApplet=[2,2,2];a.DOMobj=[0,0,0,0,0,0];a.Applet0Index=3;a.OTF=0;a.BridgeResult=[[null,null],[null,null],[null,null]];a.JavaActive=[0,0,0];a.All_versions=[];a.mimeTypeJPIresult="";a.mimeObj=b.hasMimeType(a.mimeType);a.JavaPlugin_versions=[];a.funcs=[];var c=a.NOTF;if(c){c.$=b;c.count=0;c.intervalLength=250;c.countMax=33}},getVersion:function(c,h){var e,b=this,d=b.$,g=vendor=versionEnabled=null;if(b.getVersionDone===null){b.init()}var i;if(d.isArray(h)){for(i=0;i<b.tryApplet.length;i++){if(d.isNum(h[i])){b.tryApplet[i]=h[i]}}}for(i=0;i<b.forceVerifyTag.length;i++){b.tryApplet[i]=b.forceVerifyTag[i]}if(d.isString(c)){b.jar[b.jar.length]=c}if(b.getVersionDone==0){if(!b.version||b.useAnyTag()){e=b.queryAnyApplet(c);if(e[0]){b.installed=1;b.EndGetVersion(e[0],e[1])}}return}var f=b.queryDeployTK();if(f.JRE){g=f.JRE;vendor=b.VENDORS[0]}if(!d.isIE){var l,j,a,k;k=(b.mimeObj&&b.Enabled)?true:false;if(!g&&(e=b.getMimeJPIversion())!==null){g=e}if(!g&&b.mimeObj){e="Java[^\\d]*Plug-in";a=d.findNavPlugin(e);if(a){e=new RegExp(e,"i");l=e.test(a.description||"")?d.getNum(a.description):null;j=e.test(a.name||"")?d.getNum(a.name):null;if(l&&j){g=(d.compareNums(d.formatNum(l),d.formatNum(j))>=0)?l:j}else{g=l||j}}}if(!g&&b.mimeObj&&d.isSafari&&d.OS==2){a=d.findNavPlugin("Java.*\\d.*Plug-in.*Cocoa",0);if(a){l=d.getNum(a.description);if(l){g=l}}}if(g){b.version0=g;if(b.Enabled){versionEnabled=g}}}else{if(!g&&f.status==0){g=b.searchJavaPluginAXO();if(g){vendor=b.VENDORS[0]}}if(g){b.version0=g;if(b.Enabled&&d.ActiveXEnabled){versionEnabled=g}}}if(!versionEnabled||b.useAnyTag()){e=b.queryAnyApplet(c);if(e[0]){versionEnabled=e[0];vendor=e[1]}}if(!versionEnabled&&(e=b.queryNoApplet())[0]){b.version0=versionEnabled=e[0];vendor=e[1];if(b.installed==-0.5){b.installed=0.5}}if(d.isSafari&&d.OS==2){if(!versionEnabled&&k){if(b.installed===null){b.installed=0}else{if(b.installed==-0.5){b.installed=0.5}}}}if(b.jreDisabled()){versionEnabled=null};if(b.installed===null){b.installed=versionEnabled?1:(g?-0.2:-1)}b.EndGetVersion(versionEnabled,vendor)},EndGetVersion:function(b,d){var a=this,c=a.$;if(a.version0){a.version0=c.formatNum(c.getNum(a.version0))}if(b){a.version=c.formatNum(c.getNum(b));a.vendor=(c.isString(d)?d:"")}if(a.getVersionDone!=1){a.getVersionDone=0}},jreDisabled:function(){var c=this,e=c.$,d=c.queryDeployTK().JRE,a=0,b;if(d&&e.OS==1){if((e.isGecko&&e.compareNums(e.verGecko,"1,9,2,0")>=0&&e.compareNums(d,"1,6,0,12")<0)||(e.isChrome&&e.compareNums(d,"1,6,0,12")<0)){a=1}};return a},queryDeployTK:function(){var d=this,g=d.$,b=d.queryDeployTK,i,a,c,h=len=null;if(!b.JREall){b.JREall=[];b.JRE=null;b.status=0}else{return b}if((g.isGecko&&g.compareNums(g.verGecko,g.formatNum("1.6"))<=0)||g.isSafari||(g.isIE&&!g.ActiveXEnabled)){return b}if(g.isIE&&g.verIE>=6){d.DOMobj[0]=g.instantiate("object",[],[]);h=g.getObject(d.DOMobj[0])}else{if(!g.isIE&&(c=g.hasMimeType(d.DTKmimeType))&&c.type){d.DOMobj[0]=g.instantiate("object",["type",c.type],[]);h=g.getObject(d.DOMobj[0])}}if(h){if(g.isIE&&g.verIE>=6){try{h.classid=d.DTKclassID}catch(i){}};try{var f=h.jvms;if(f){len=f.getLength();if(g.isNum(len)){b.status=len>0?1:-1;for(a=0;a<len;a++){c=g.getNum(f.get(len-1-a).version);if(c){b.JREall[a]=c}}}}}catch(i){}}if(b.JREall.length>0){b.JRE=g.formatNum(b.JREall[0])}return b},queryAnyApplet:function(f){var n=this,e=n.$,o=n.BridgeResult,h=n.DOMobj,b=n.Applet0Index,i="&nbsp;&nbsp;&nbsp;&nbsp;",t="A.class";if(!e.isString(f)||!(/\.jar\s*$/).test(f)||(/\\/).test(f)){return[null,null]}if(n.OTF<1){n.OTF=1}if(n.jreDisabled()){return[null,null]}if((e.isGecko||e.isChrome||(e.isOpera&&!n.Enabled))&&!n.mimeObj&&!n.queryNoApplet()[0]){return[null,null]}if(n.OTF<2){n.OTF=2}if(!h[1]&&n.canUseObjectTag()){h[1]=e.instantiate("object",[],[],i)}if(!h[2]){h[2]=e.instantiate("",[],[],i)}var d=f,r="",m;if((/[\/]/).test(f)){m=f.split("/");d=m[m.length-1];m[m.length-1]="";r=m.join("/")}var j=["archive",d,"code",t],l=["mayscript","true"],q=["scriptable","true"].concat(l),g=!e.isIE&&n.mimeObj&&n.mimeObj.type?n.mimeObj.type:n.mimeType[0];if(!h[b]&&n.canUseObjectTag()&&n.canTryApplet(0)){h[b]=e.isIE?e.instantiate("object",["type",g].concat(j),["codebase",r].concat(j).concat(q),i,n):e.instantiate("object",["type",g,"archive",d,"classid","java:"+t],["codebase",r,"archive",d].concat(q),i,n);o[0]=[0,0];n.query1Applet(b)}if(!h[b+1]&&n.canUseAppletTag()&&n.canTryApplet(1)){h[b+1]=e.isIE?e.instantiate("applet",["alt",i].concat(l).concat(j),["codebase",r].concat(l),i,n):e.instantiate("applet",["codebase",r,"alt",i].concat(l).concat(j),[].concat(l),i,n);o[1]=[0,0];n.query1Applet(b+1)}if(!h[b+2]&&n.canUseObjectTag()&&n.canTryApplet(2)){h[b+2]=e.isIE?e.instantiate("object",["classid",n.classID],["codebase",r].concat(j).concat(q),i,n):e.instantiate();o[2]=[0,0];n.query1Applet(b+2)};if(n.OTF<3&&((h[b]&&!o[0][0])||(h[b+1]&&!o[1][0])||(e.isIE&&h[b+2]&&!o[2][0]))){var c=n.NOTF.isJavaActive();if(c>=0){n.OTF=3;n.installed=c==1?0.5:-0.5;n.NOTF.initAppletQuery()}};var k,a=0;for(k=0;k<o.length;k++){if(h[b+k]||n.canTryApplet(k)){a++}else{break}}if(a==o.length){n.getVersionDone=n.forceVerifyTag.length>0?0:1}return n.getBR()},canUseAppletTag:function(){var a=this;return((!a.$.isIE||a.Enabled)?true:false)},canUseObjectTag:function(){return((!this.$.isIE||this.$.ActiveXEnabled)?true:false)},useAnyTag:function(){var b=this,a;for(a=0;a<b.tryApplet.length;a++){if(b.canTryApplet(a)){return true}}return false},canTryApplet:function(c){var a=this,b=a.$;if(a.tryApplet[c]==3){return true}if(!a.version0||!a.Enabled||(b.isIE&&!b.ActiveXEnabled)){if(a.tryApplet[c]==2){return true}if(a.tryApplet[c]==1&&!a.getBR()[0]){return true}}return false},getBR:function(){var b=this.BridgeResult,a;for(a=0;a<b.length;a++){if(b[a][0]){return[b[a][0],b[a][1]]}}return[b[0][0],b[0][1]]},query1Applet:function(g){var f,c=this,d=c.$,a=vendor=null,b=d.getObject(c.DOMobj[g],true);if(b){try{a=b.getVersion()+" ";vendor=b.getVendor()+" ";b.statusbar(d.winLoaded?" ":" ")}catch(f){}if(d.isStrNum(a)){c.BridgeResult[g-c.Applet0Index]=[a,vendor]}try{if(d.isIE&&a&&b.readyState!=4){d.garbage=true;b.parentNode.removeChild(b)}}catch(f){}}},NOTF:{isJavaActive:function(){var e=this,c=e.$.java,a,b,d=-9;for(a=c.Applet0Index;a<c.DOMobj.length;a++){b=e.isJavaActive_x_(a);c.JavaActive[a-c.Applet0Index]=b;if(b>d){d=b}}return d},isJavaActive_x_:function(g){var h=this,d=h.$,c=d.java,f,b=d.getObject(c.DOMobj[g]),a=h.status(g);if(a==-2){return-2}if(h.status(1)>=0){return 0}try{if(d.isIE&&d.verIE>=c.minIEver&&b.object){return 1}}catch(f){}if(a==1&&(d.isIE||((c.version0&&c.Enabled&&c.mimeObj)||c.queryNoApplet()[0]))){return 1}if(a<0){return-1}return 0},status:function(c){var f=this,d=f.$,b=d.java,h,a=d.getObject(b.DOMobj[c]),j=d.getContainer(b.DOMobj[c]),k=f.getObjectWidth(j),g=d.getContainer(b.DOMobj[2]),i=f.getObjectWidth(g);if(!a||!j){return-2}try{if(k>=0&&i>=0){if(k==i&&k>d.pluginSize){return-1}if(k!=i&&k==d.pluginSize&&d.winLoaded&&(!d.isIE||a.readyState==4)){return 1}}}catch(h){}return 0},getObjectWidth:function(c){if(c){var a=c.scrollWidth||c.offsetWidth,b=this.$;if(b.isNum(a)){return a}}return-1},initAppletQuery:function(){var b=this,a=b.$;if(!b.onIntervalQuery){b.onIntervalQuery=b.$$onIntervalQuery(b);if(!a.winLoaded){a.WLfuncs[0]=b.winOnLoadQuery}setTimeout(b.onIntervalQuery,b.intervalLength)}},winOnLoadQuery:function(c){var b=c.java,d=b.NOTF,a;if(b.OTF==3){a=d.AppletQuery();d.queryCleanup(a[1],a[2])}},$$onIntervalQuery:function(a){return function(){var d=a.$,c=d.java,b;if(c.OTF==3){b=a.AppletQuery();if(b[0]||(d.winLoaded&&a.count>a.countMax)){a.queryCleanup(b[1],b[2])}}a.count++;if(c.OTF==3){setTimeout(a.onIntervalQuery,a.intervalLength)}}},AppletQuery:function(){var f=this,e=f.$,d=e.java,b,a,c;for(b=0;b<d.BridgeResult.length;b++){d.query1Applet(b+d.Applet0Index)}a=d.getBR();c=(a[0]||f.isJavaActive()<0)?true:false;return[c,a[0],a[1]]},queryCleanup:function(d,g){var f=this,e=f.$,c=e.java,a;if(c.OTF==4){return}c.OTF=4;var b=f.isJavaActive()==1?true:false;if(d||c.queryNoApplet()[0]){c.installed=1}else{if(b){if(c.version0){c.installed=1;d=c.version0}else{c.installed=0}}else{if(c.installed==0.5){c.installed=0}else{if(c.version0){c.installed=-0.2}else{c.installed=-1}}}}c.EndGetVersion(d,g);e.callArray(c.funcs);if(e.onDoneEmptyDiv){e.onDoneEmptyDiv()}}},append:function(e,d){for(var c=0;c<d.length;c++){e[e.length]=d[c]}},JavaFix:function(){}},flash:{mimeType:["application/x-shockwave-flash","application/futuresplash"],progID:"ShockwaveFlash.ShockwaveFlash",classID:"clsid:D27CDB6E-AE6D-11CF-96B8-444553540000",getVersion:function(){var b=function(i){if(!i){return null}var e=/[\d][\d\,\.\s]*[rRdD]{0,1}[\d\,]*/.exec(i);return e?e[0].replace(/[rRdD\.]/g,",").replace(/\s/g,""):null};var d,h=this,f=h.$,j,g,k=null,c=null,a=null;if(!f.isIE){d=f.findNavPlugin("Flash");if(d&&d.description&&f.hasMimeType(h.mimeType)){k=b(d.description)}if(k){k=f.getPluginFileVersion(d,k)}}else{for(g=15;g>2;g--){c=f.getAXO(h.progID+"."+g);if(c){a=g.toString();break}}if(a=="6"){try{c.AllowScriptAccess="always"}catch(j){return"6,0,21,0"}}try{k=b(c.GetVariable("$version"))}catch(j){}if(!k&&a){k=a}}h.installed=k?1:-1;h.version=f.formatNum(k);return true}},zz:0};PluginDetect.initScript();;var payment_type_paypal=0;var stickyObjects=new Array();var startPrice=0;var payment_form_submited=0;$(document).ready(function(){if($('#checkoutv3').length==0){}else{fls_update_total_price();if(Drupal.settings.imagesrollover!=undefined){for(var k in Drupal.settings.imagesrollover){MM_preloadImages(Drupal.settings.imagesrollover[k]);}}}
$('#spam_free_policy_why.lang_v_nonen').tooltip({track:true,delay:0,showURL:false,showBody:" - ",fade:250});if($('#spam_free_policy_why.lang_v_en').length>0){var free_policy_why_title=$('#spam_free_policy_why').attr('title');$('#spam_free_policy_why').attr('title','');$('#spam_free_policy_why').click(function(){return false;})
$('#spam_free_policy_why').mouseover(function(){if($('#whyPopup').length==0){$(this).parent().append('<div id="whyPopup">'+free_policy_why_title+'</div>');$('#whyPopup img').attr('src','https://freelogo-assets.s3.amazonaws.com/sites/all/themes/freelogoservices/images/credit_cards.jpg');$('#whyPopup p').append('<img src="'+'https://freelogo-assets.s3.amazonaws.com/sites/all/themes/freelogoservices/images/cvc_tooltip.png" />');}});$('#spam_free_policy_why').mouseout(function(){$('#whyPopup').remove();});$('#spam_free_policy_why').parent().click(function(e){if($(e.target).is('#closeWhyPopup')){$('#whyPopup').remove();}
return false;});}
$("#checkoutv3 .scrollerConteiner li").mouseover(function(event){var li=$(this);var input_id=li.children('input').attr('id');var ids=input_id.split('-');var current_img_id=ids[2];$('.imgRollOver').remove();$('<div class="imgRollOver"></div>').appendTo('body');$('.imgRollOver').css({"position":"absolute","width":"150px","border":"solid 2px #383838","background":"#FFF","z-index":"999"}).append('<img src="'+Drupal.settings.imagesrollover[current_img_id]+'" />');$('.imgRollOver img').css({"padding-top":"5px"});var tooltipX=event.pageX+20;var tooltipY=event.pageY-90;$('.imgRollOver').css({top:tooltipY,left:tooltipX});});$("#checkoutv3 .scrollerConteiner li").mousemove(function(event){var tooltipX=event.pageX+20;var tooltipY=event.pageY-90;$('.imgRollOver').css({top:tooltipY,left:tooltipX});});$("#checkoutv3 .scrollerConteiner li").mouseout(function(){$('.imgRollOver').remove();});$('#step-checkout1 .order-logos').click(fls_update_total_price);var country_id=$('#edit-country').val();if(country_id=='221'){$('#edit-zip-label span.required').css('display','none');}else{$('#edit-zip-label span.required').css('display','');}
$('#edit-country').change(function(){fls_update_payment_types($(this).val());});$('p.paypal_js_disable').remove();setTimeout(function(){$('#paypal-payment-form').submit();},1000);$('#edit-payment-type').change(fls_checkout_update_form_fields);$('#security_guarantee').tooltip({track:true,delay:0,showURL:false,showBody:" - ",fade:250});$('#fls-store-payment-form #edit-promo-code').bind('blur',function(){var code=$(this).val();if(!startPrice){startPrice=$('.checkout_total .price span').html();}
if(code){$.ajax({url:'apply-promo/'+code,success:function(price){if(price){$('.checkout_total .price span').html(price);}else{$('.checkout_total .price span').html(startPrice);}}});}else{$('.checkout_total .price span').html(startPrice);}});$('.sticky').each(function(){var offset=$(this).offset();this.initialTop=offset.top;stickyObjects.push(this);});$(window).scroll(function(){if(stickyObjects){var scrollTop=$(this).scrollTop();var offsetTop=0;var offset=0;for(var i in stickyObjects){if(scrollTop>stickyObjects[i].initialTop){$(stickyObjects[i]).css('position','fixed').css('top',0);}else{$(stickyObjects[i]).css('position','').css('top','');}}}});$('#edit-country').each(fls_change_states);$('#payment-form #edit-submit').click(function(){additionalErrorHTML="";$("#rsvErrors").html("").css('display','none');var errorHTML=Drupal.settings.checkout_form.form_header_error;if($('#edit-confirm-card-no-err').val()!=""||$('#check_confirm').length<0){$('html, body').animate({scrollTop:$(".payment").offset().top},500);}
if(Drupal.settings.page_logo_products){var has_products=false;$('.productbox_addtocart input').each(function(){if(this.checked)
has_products=true;});if(!has_products){additionalErrorHTML+=Drupal.settings.checkout_form.products.required;$('.productbox_addtocart input').addClass('errorFieldDemo5');$('.productbox_addtocart label').addClass('signup_error_label');}
else{$('.productbox_addtocart input').removeClass('errorFieldDemo5');$('.productbox_addtocart label').removeClass('signup_error_label');}}
if($('#edit-payment-type').val()==""||$('#edit-payment-type').val()=="0"){additionalErrorHTML+=Drupal.settings.checkout_form.payment_type.required;$('#edit-payment-type').addClass('errorFieldDemo5');$('#edit-payment-type-label').addClass('signup_error_label');$('#edit-payment-type-label-icon').show();}else{$('#edit-payment-type').removeClass('errorFieldDemo5');$('#edit-payment-type-label').removeClass('signup_error_label');$('#edit-payment-type-label-icon').hide();}
if($('#edit-first-name').val()==""){additionalErrorHTML+=Drupal.settings.checkout_form.first_name.required;$('#edit-first-name').addClass('errorFieldDemo5');$('#edit-first-name-label').addClass('signup_error_label');$('#edit-first-name-label-icon').show();}else{$('#edit-first-name').removeClass('errorFieldDemo5');$('#edit-first-name-label').removeClass('signup_error_label');$('#edit-first-name-label-icon').hide();}
if($('#edit-last-name').val()==""){additionalErrorHTML+=Drupal.settings.checkout_form.last_name.required;$('#edit-last-name').addClass('errorFieldDemo5');$('#edit-last-name-label').addClass('signup_error_label');$('#edit-last-name-label-icon').show();}else{$('#edit-last-name').removeClass('errorFieldDemo5');$('#edit-last-name-label').removeClass('signup_error_label');$('#edit-last-name-label-icon').hide();}
additionalErrorHTML=validate_custom_fields(additionalErrorHTML);if($('#edit-card-number').val()==""){additionalErrorHTML+=Drupal.settings.checkout_form.card_number.required;$('#edit-card-number').addClass('errorFieldDemo5');$('#edit-card-number-label').addClass('signup_error_label');$('#edit-card-number-label-icon').show();}else{$('#edit-card-number').removeClass('errorFieldDemo5');$('#edit-card-number-label').removeClass('signup_error_label');$('#edit-card-number-label-icon').hide();}
if(!Drupal.settings.hasbraintree&&$('#edit-security-code').val()==""){additionalErrorHTML+=Drupal.settings.checkout_form.security_code.required;$('#edit-security-code').addClass('errorFieldDemo5');$('#edit-security-code-label').addClass('signup_error_label');$('#edit-security-code-label-icon').show();}else{$('#edit-security-code').removeClass('errorFieldDemo5');$('#edit-security-code-label').removeClass('signup_error_label');$('#edit-security-code-label-icon').hide();}
var valid_exp_date=1;if($('#edit-expiration-date-mm').val()==""){valid_exp_date=0;additionalErrorHTML+=Drupal.settings.checkout_form.expiration_date.required;$('#edit-expiration-date-mm').addClass('errorFieldDemo5');$('#edit-expiration-date-label').addClass('signup_error_label');$('#edit-expiration-date-label-icon').show();}else{$('#edit-expiration-date-mm').removeClass('errorFieldDemo5');$('#edit-expiration-date-label').removeClass('signup_error_label');$('#edit-expiration-date-label-icon').hide();}
if($('#edit-expiration-date-yy').val()==""){if(valid_exp_date){additionalErrorHTML+=Drupal.settings.checkout_form.expiration_date.required;}
$('#edit-expiration-date-yy').addClass('errorFieldDemo5');$('#edit-expiration-date-label').addClass('signup_error_label');$('#edit-expiration-date-label-icon').show();}else{$('#edit-expiration-date-yy').removeClass('errorFieldDemo5');$('#edit-expiration-date-label').removeClass('signup_error_label');$('#edit-expiration-date-label-icon').hide();}
if($('#edit-phone').val()==""){additionalErrorHTML+=Drupal.settings.checkout_form.phone.required;$('#edit-phone').addClass('errorFieldDemo5');$('#edit-phone-label').addClass('signup_error_label');$('#edit-phone-label-icon').show();}else if(!validate_phone_function()){additionalErrorHTML+=Drupal.settings.checkout_form.phone.invalid;$('#edit-phone').addClass('errorFieldDemo5');$('#edit-phone-label').addClass('signup_error_label');$('#edit-phone-label-icon').show();}else{$('#edit-phone').removeClass('errorFieldDemo5');$('#edit-phone-label').removeClass('signup_error_label');$('#edit-phone-label-icon').hide();}
if($('#edit-billing-address').val()==""){additionalErrorHTML+=Drupal.settings.checkout_form.billing_address.required;$('#edit-billing-address').addClass('errorFieldDemo5');$('#edit-billing-address-label').addClass('signup_error_label');$('#edit-billing-address-label-icon').show();}else{$('#edit-billing-address').removeClass('errorFieldDemo5');$('#edit-billing-address-label').removeClass('signup_error_label');$('#edit-billing-address-label-icon').hide();}
if($('#edit-city').val()==""){additionalErrorHTML+=Drupal.settings.checkout_form.city.required;$('#edit-city').addClass('errorFieldDemo5');$('#edit-city-label').addClass('signup_error_label');$('#edit-city-label-icon').show();}else{$('#edit-city').removeClass('errorFieldDemo5');$('#edit-city-label').removeClass('signup_error_label');$('#edit-city-label-icon').hide();}
var val=$('#edit-country').val();if(val=='1'){if($('#edit-stateus').val()==""){additionalErrorHTML+=Drupal.settings.checkout_form.stateus.required;$('#edit-stateus').addClass('errorFieldDemo5');$('#edit-stateus-label').addClass('signup_error_label');$('#edit-stateus-label-icon').show();}else{$('#edit-stateus').removeClass('errorFieldDemo5');$('#edit-stateus-label').removeClass('signup_error_label');$('#edit-stateus-label-icon').hide();}}else if(val=='2'){if($('#edit-statecan').val()==""){additionalErrorHTML+=Drupal.settings.checkout_form.statecan.required;$('#edit-statecan').addClass('errorFieldDemo5');$('#edit-statecan-label').addClass('signup_error_label');$('#edit-statecan-label-icon').show();}else{$('#edit-statecan').removeClass('errorFieldDemo5');$('#edit-statecan-label').removeClass('signup_error_label');$('#edit-statecan-label-icon').hide();}}else if(val=='36'){if($('#edit-statebr').val()==""){additionalErrorHTML+=Drupal.settings.checkout_form.statebr.required;$('#edit-statebr').addClass('errorFieldDemo5');$('#edit-statebr-label').addClass('signup_error_label');$('#edit-statebr-label-icon').show();}else{$('#edit-statebr').removeClass('errorFieldDemo5');$('#edit-statebr-label').removeClass('signup_error_label');$('#edit-statebr-label-icon').hide();}}
else{}
if(val!='221'){if($('#edit-zip').val()==""){additionalErrorHTML+=Drupal.settings.checkout_form.zip.required
$('#edit-zip').addClass('errorFieldDemo5');$('#edit-zip-label').addClass('signup_error_label');$('#edit-zip-label-icon').show();}else{$('#edit-zip').removeClass('errorFieldDemo5');$('#edit-zip-label').removeClass('signup_error_label');$('#edit-zip-label-icon').hide();}}
if(additionalErrorHTML){errorHTML+=additionalErrorHTML;$("#rsvErrors").css("display","block");$("#rsvErrors").html(errorHTML);return false;}
$('#edit-submit').hide();$('#payment_progress').show();$('#payment-form').submit();return false;});$('#payment-form #edit-submit-paypal').click(function(){additionalErrorHTML="";$("#rsvErrors").html("").css('display','none');var errorHTML=Drupal.settings.checkout_form.form_header_error;additionalErrorHTML=validate_custom_fields(additionalErrorHTML);if(additionalErrorHTML){errorHTML+=additionalErrorHTML;$("#rsvErrors").css("display","block");$("#rsvErrors").html(errorHTML);$("#rsvErrors").parent().parent().show();return false;}
$('#payment_progress').show();$('#payment-form').submit();return false;});setInterval(function(){if(paypal_point_wait<3){$('#paypal_point_wait').append('.');paypal_point_wait++;}else{$('#paypal_point_wait').text('');paypal_point_wait=0;}},300);$('#payment-form').each(function(){fls_checkout_update_form_fields();});setTimeout(function(){if(!$.browser.msie||$('#edit-payment-type').length==0)return;fls_payment_type_is_selected=false;if($('#edit-payment-type option:selected').length){fls_payment_type_is_selected=true;}
if(!fls_payment_type_is_selected){$('#edit-payment-type option:first').attr('selected','selected');}},0);});var paypal_point_wait=0;function validate_custom_fields(additionalErrorHTML){if($('#edit-confirm-card-no-err').val()==""&&$('#check_confirm').length>0){$('html, body').animate({scrollTop:$(".left_bc_preview").offset().top},500);$('#check_confirm input').parent().find('label').css('color','#CD0000');$('#check_confirm input').parent().parent().css('border','1px solid #CD0000');$('.proof_error_show').show();additionalErrorHTML+=Drupal.settings.checkout_form.confirm_card_no_err.required;}
return additionalErrorHTML;}
function fls_update_payment_types(country_id){if($('#step-checkout1').length>0||$('#ipage_checkout_main').length>0){show_loading_overlay();}
$('input.errorFieldDemo5, select.errorFieldDemo5').removeClass('errorFieldDemo5');$('div.error_icon').css('display','none');$('label.signup_error_label').removeClass('signup_error_label');if(country_id=='221'){$('#edit-zip-label span.required').css('display','none');}else{$('#edit-zip-label span.required').css('display','');}
if($('#edit-payment-type').length<=0){$('#edit-country').each(fls_change_states);return;}
if(Drupal.settings.checkout_form.payment_types_url==undefined){$('#edit-country').each(fls_change_states);return;}
$('#edit-payment-type').attr('disabled',true);$.ajax({url:Drupal.settings.checkout_form.payment_types_url,type:"POST",data:({country_id:country_id,form_buld_id:$('input[name=form_build_id]').val(),first_name:$('input[name=first_name]').val(),last_name:$('input[name=last_name]').val(),address:$('input[name=billing_address]').val(),address2:$('input[name=billing_address2]').val(),city:$('input[name=city]').val(),state:$('input[name=state]').val(),zip:$('input[name=zip]').val(),phone:$('input[name=phone]').val(),order_logos:$('#edit-order-logos').val()}),dataType:"json",success:function(data){location.reload();$('#edit-payment-type option').each(function(){var val=$(this).attr('value');if(val!="0"){$(this).remove();}});for(var i in data){$('#edit-payment-type').append($("<option></option>").attr("value",i).text(data[i]));}
$('#edit-payment-type').attr('disabled',false);$('#edit-payment-type').each(fls_checkout_update_form_fields);$('#edit-country').each(fls_change_states);}})}
function fls_change_states(){var val=$(this).val();$('#edit-statebr').removeClass('errorFieldDemo5');$('#edit-statebr-label').removeClass('signup_error_label');$('#edit-statebr-label-icon').hide();$('#edit-statecan').removeClass('errorFieldDemo5');$('#edit-statecan-label').removeClass('signup_error_label');$('#edit-statecan-label-icon').hide();$('#edit-stateus').removeClass('errorFieldDemo5');$('#edit-stateus-label').removeClass('signup_error_label');$('#edit-stateus-label-icon').hide();$('#edit-state').removeClass('errorFieldDemo5');$('#edit-state-label').removeClass('signup_error_label');$('#edit-state-label-icon').hide();$('.states').parent().parent().parent().hide();if(val=='1'||val=='01'){$('#edit-stateus').parent().parent().parent().show();}else if(val=='2'||val=='02'){$('#edit-statecan').parent().parent().parent().show();}else if(val=='36'){$('#edit-statebr').parent().parent().parent().show();}else{$('#edit-state').parent().parent().parent().show();}}
function fls_checkout_update_form_fields(){if(Drupal.settings.payment_type_js_callback){for(var i in Drupal.settings.payment_type_js_callback){eval(Drupal.settings.payment_type_js_callback[i]+'()');}}
var value=$(this).val();if(typeof(value)=='undefined')return;if(!value)return;value=value.replace(/\*/g,'');if(Drupal.settings.default_remove_fields===undefined){Drupal.settings.default_remove_fields=0;}
if(Drupal.settings.default_remove_fields){value='paypal';$('.payment_types_imgs').hide();}
if(value=='paypal'){payment_type_paypal=1;$('#payment-form .form_table tr').each(function(){var paypal=null;paypal=$(this).find('#edit-submit-paypal,#edit-payment-type,#edit-promo-code, .upsells_new_right');if(paypal.length<=0){$(this).css('display','none');}else{$(this).css('display','');}
if(Drupal.settings.checkout_form.payment_types_url!=undefined){if($(this).find('#edit-country').length>0){$(this).css('display','');}}});}else if(payment_type_paypal){$('#payment-form .form_table tr').each(function(){var paypal=null;paypal=$(this).find('#edit-submit-paypal');if(paypal.length>0){$(this).css('display','none');}else{$(this).css('display','');}});$('#edit-country').each(fls_change_states);payment_type_paypal=0;}}
function fls_update_total_price(){var no=1;var logos=new Array();$('#step-checkout1 .order-logos').each(function(){var attr=$(this).attr('checked');if(attr){no++;logos.push($(this).val());$(this).parent().addClass('logo_added');}else{$(this).parent().removeClass('logo_added');}});$('#edit-order-logos').val(logos.join(','));$('#step-checkout1 .checkout-multi-total-logos .total').text(no);no--;var price=parseFloat(Drupal.settings.checkout_first_price);var sum=parseFloat(no*parseFloat(Drupal.settings.checkout_price_item));var total=price+sum;total=total.toFixed(2);$('#step-checkout1 .checkout-multi-total-price .total').text(total);}
function update_payment_with_upsells_new_logo(action,type){return;if(Drupal.settings.promo_code_upsells)
return;if($('.upsells_new_total_price > span').length>0){var pricetext=$('.upsells_new_total_price > span').html();var obj=$('.upsells_new_total_price > span');}else{return;}
pricetext=parseFloat(pricetext);var newprice="";if($(action).is(":checked")){if($(action).hasClass("inputChecked")){if(($(action).attr('id')!=Drupal.settings.upsell_google_id&&$(action).attr('id')!=523&&$(action).attr('id')!=532&&$(action).attr('id')!=Drupal.settings.hosting_prod_id)||($(action).attr('id')==Drupal.settings.upsell_google_id&&!$(action).hasClass("seatUpdated"))||($(action).attr('id')==523&&!$(action).hasClass("seatUpdated"))||($(action).attr('id')==532&&!$(action).hasClass("seatUpdated"))||($(action).attr('id')==Drupal.settings.hosting_prod_id&&$("#weebly_packs").length==0))
return false;}else{$(action).addClass("inputChecked");}
$('#edit-'+$(action).val()).attr('value','1');var upsell_price=Drupal.settings.additional_offers[$(action).val()]['price'][Drupal.settings.upsell_country];if(upsell_price==undefined){upsell_price=Drupal.settings.additional_offers[$(action).val()]['default_price'];}
if($(action).attr('id')==Drupal.settings.upsell_google_id&&$("#seat_values").length>0)upsell_price=$('#seat_values option:selected').val()*upsell_price;else if($(action).attr('id')==523&&$("#bundle_seat_values").length>0){upsell_price=($('#bundle_seat_values option:selected').val()-1)*Drupal.settings.google_prod_price*1+upsell_price*1;}
else if($(action).attr('id')==532&&$("#custom_bundle_seat_values").length>0){upsell_price=($('#custom_bundle_seat_values option:selected').val()-1)*Drupal.settings.google_prod_price*1+upsell_price*1;}else if($(action).attr('id')==Drupal.settings.hosting_prod_id&&$("#weebly_packs").length>0&&Drupal.settings.weebly_packages!=undefined){upsell_price=upsell_price*1+Drupal.settings.weebly_packages[$("#weebly_packs option:selected").val()]['price']*1;}
newprice=parseFloat(pricetext)+parseFloat(upsell_price);newprice=newprice.toFixed(2);obj.html(newprice);if($('span.buy_now_price').length){$('span.buy_now_price').html(newprice);}
if($(action).attr('id')=='38')
{$('.attributes-box').css('display','block');}
if($(action).attr('id')=='447'){fls_events_add('added_cart_premium_upsell');}}else{if(!$(action).hasClass("inputChecked")){if(($(action).attr('id')!=Drupal.settings.upsell_google_id&&$(action).attr('id')!=523&&$(action).attr('id')!=532&&$(action).attr('id')!=Drupal.settings.hosting_prod_id)||($(action).attr('id')==Drupal.settings.upsell_google_id&&!$(action).hasClass("seatUpdated"))||($(action).attr('id')==523&&!$(action).hasClass("seatUpdated"))||($(action).attr('id')==532&&!$(action).hasClass("seatUpdated"))||($(action).attr('id')==Drupal.settings.hosting_prod_id&&$("#weebly_packs").length==0))
return false;}else{$(action).removeClass("inputChecked");}
$('#edit-'+$(action).val()).attr('value','');$('.attributes-box').css('display','none');if(type){var upsell_price=Drupal.settings.additional_offers[$(action).val()]['price'][Drupal.settings.upsell_country];if(upsell_price==undefined){upsell_price=Drupal.settings.additional_offers[$(action).val()]['default_price'];}
if($(action).attr('id')==Drupal.settings.upsell_google_id&&$("#seat_values").length>0)upsell_price=$('#seat_values option:selected').val()*upsell_price;else if($(action).attr('id')==523&&$("#bundle_seat_values").length>0){upsell_price=($('#bundle_seat_values option:selected').val()-1)*Drupal.settings.google_prod_price*1+upsell_price*1;}
else if($(action).attr('id')==532&&$("#custom_bundle_seat_values").length>0){upsell_price=($('#custom_bundle_seat_values option:selected').val()-1)*Drupal.settings.google_prod_price*1+upsell_price*1;}
else if($(action).attr('id')==Drupal.settings.hosting_prod_id&&$("#weebly_packs").length>0&&Drupal.settings.weebly_packages!=undefined){upsell_price=parseFloat(upsell_price)*1+Drupal.settings.weebly_packages[$("#weebly_packs option:selected").val()]['price']*1;}
newprice=pricetext-upsell_price;newprice=Math.round(newprice*100)/100;newprice=parseFloat(Math.round(newprice*100)/100).toFixed(2);obj.html(newprice);if($('span.buy_now_price').length){$('span.buy_now_price').html(newprice);}}else{var lng=0;if(Drupal.settings.notice_upsells){notice_upsells=Drupal.settings.notice_upsells;lng=notice_upsells.length;}
pricetext=Math.round(pricetext*100)/100;pricetext=parseFloat(Math.round(pricetext*100)/100).toFixed(2);obj.html(pricetext);if($('span.buy_now_price').length&&lng&&lng>0){$('span.buy_now_price').html(newprice);}}}
return newprice;}
function update_payment_with_upsells_from_notice(upsell){if($('.upsells_new_total_price > span').length>0){var pricetext=$('.upsells_new_total_price > span').html();var obj=$('.upsells_new_total_price > span');}else{return;}
if(Drupal.settings.current_price){pricetext=Drupal.settings.current_price;}
pricetext=parseFloat(pricetext);var newprice="";$('#edit-'+upsell).attr('value','1');newprice=parseFloat(pricetext)+parseFloat(Drupal.settings.additional_offers[upsell]['price'][Drupal.settings.upsell_country]);newprice=newprice.toFixed(2);obj.html(newprice);if($('span.buy_now_price').length){$('span.buy_now_price').html(newprice);}
Drupal.settings.current_price=newprice;return newprice;}
$(document).ready(function(){$('.upsells_new_check_logo input').each(function(){update_payment_with_upsells_new_logo(this,0);});$('.upsells_new_check_logo input').click(function(){update_payment_with_upsells_new_logo(this,1);});if(Drupal.settings.notice_upsells){var lng=0;notice_upsells=Drupal.settings.notice_upsells;lng=notice_upsells.length;if(lng&&lng>0){for(var i=0;i<lng;i++){update_payment_with_upsells_from_notice(notice_upsells[i]);}}}
$('.upsell-info').click(function(){return false;});$('.upsell-info').each(function(){$(this).hover(function(){var free_policy_why_title=$(this).attr('rel');if($(this).parent().find('.whyPopupUpsell').length==0){$(this).parent().append('<div class="whyPopupUpsell">'+free_policy_why_title+'</div>');}
$(this).parent().find('.whyPopupUpsell').show();},function(){$(this).parent().find('.whyPopupUpsell').hide();});});$('.upsells_new_see').click(function(){return false;});$('.upsells_new_see').each(function(){$(this).hover(function(){var free_policy_why_title=$(this).attr('rel');if($(this).parent().find('.whyPopupUpsell').length==0){var whyPopupId=$(this).parent().parent().parent().attr('id');var whyPopupClass='mouse_over_'+$(this).parent().parent().attr('item');$(this).parent().append('<div id="whyPopupUpsell_'+whyPopupId+'" class="whyPopupUpsell '+whyPopupClass+'">'+free_policy_why_title+'</div>');}
$(this).parent().find('.whyPopupUpsell').show();$(this).parent().parent().parent().parent().parent().css({'z-index':'3','position':'relative'});},function(){$(this).parent().find('.whyPopupUpsell').hide();$(this).parent().parent().parent().parent().parent().css({'z-index':'1'});});});$('.upsells_new_img').each(function(){$(this).hover(function(){if($(this).parent().parent().find('.upsells_new_see').length!=0){var free_policy_why_title=$(this).parent().parent().find('.upsells_new_see').attr('rel');if($(this).parent().parent().find('.whyPopupUpsell').length==0){var whyPopupId=$(this).parent().parent().attr('id');var whyPopupClass='mouse_over_'+$(this).parent().parent().attr('item');$(this).parent().parent().find('.upsells_new_details').append('<div id="whyPopupUpsell_'+whyPopupId+'" class="whyPopupUpsell '+whyPopupClass+'">'+free_policy_why_title+'</div>');}
$(this).parent().parent().find('.whyPopupUpsell').css('left','0px');$(this).parent().parent().find('.whyPopupUpsell').css('top','-10px');$(this).parent().parent().find('.whyPopupUpsell').show();$(this).parent().parent().parent().parent().css({'z-index':'3','position':'relative'});}},function(){$(this).parent().parent().find('.whyPopupUpsell').hide();$(this).parent().parent().find('.whyPopupUpsell').css('left','270px');$(this).parent().parent().find('.whyPopupUpsell').css('top','10px');$(this).parent().parent().parent().parent().css({'z-index':'1'});});});});;$(document).ready(function(){logo_creator_step1_init();});function load_logo_design_form(){$("<div class='form_title'>"+Drupal.settings.logo_design_form_subtitle+"</div>").insertBefore(".form_table");$(".form_table tr:last>td:first").css("height","0px");$(".signupBtn .orangeBtn_center").html(Drupal.settings.logo_design_form_button);$(".form_table tr:nth-child(2)").insertAfter($(".form_table tr:nth-child(4)"));$(".step1_form tr .label").each(function(){var html=$(this).html();if($(this).find('label').length){if($(this).next('td').find('input').val()=="")
$(this).next('td').find('input').attr("value",$(this).find('label').html());$(this).next('td').find('input').attr("title",$(this).find('label').html());}else{temp=html.split('<span');if(temp.length>0){if(temp[0]){if($(this).next('td').find('input').val()=="")
$(this).next('td').find('input').attr("value",temp[0]);$(this).next('td').find('input').attr("title",temp[0]);}}}
if($(this).next('td').find('input').val()==$(this).next('td').find('input').attr("title"))
$(this).next('td').find('input').addClass('text-label');if(!$(this).next('td').find('select').attr('id'))
$(this).hide();});$('input[type="text"]').each(function(){if(this.value==""){this.value=$(this).attr('title');$(this).addClass('text-label');}
$(this).focus(function(){if(this.value==$(this).attr('title')){this.value='';$(this).removeClass('text-label');}});$(this).blur(function(){if(this.value==''){this.value=$(this).attr('title');$(this).addClass('text-label');}});});if(Drupal.settings.logocategory_split_set==2){$('#logo-creator-step1-page-form select').each(function(){if(this.value=="-1"){$(this).addClass('text-label');}
$(this).focus(function(){$(this).removeClass('text-label');});$(this).blur(function(){if(this.value=='-1'){$(this).addClass('text-label');}});});}}
function fls_find_form(obj){var current=false;var idok='';if($(obj).is('form')){idok=$(obj).attr(id);}
if($(obj).is('body')){idok='false';}
while(current==false){obj=$(obj).parent();if($(obj).is('form')){idok=$(obj).attr('id');current=true;}
if($(obj).is('body')){idok='false';}}
return idok;}
function logo_creator_step1_init(){$('form input[type=text]').each(function(){$(this).bind('keypress',function(e){var idform=fls_find_form(this);if(e.keyCode==13&&idform!='fls-store-payment-form'){setTimeout(function(){$('#'+idform+' #edit-submit').click();},500);}});});$('form input[type=password]').each(function(){$(this).bind('keypress',function(e){var idform=fls_find_form(this);if(e.keyCode==13&&idform!='fls-store-payment-form'){$('#'+idform+' #edit-submit').click();}});});$('#edit-submit').css('display','inline-block');$('#logo-creator-step1-page-form #edit-submit').click(function(){additionalErrorHTML="";$("#rsvErrors").html("").css('display','none');var errorHTML=Drupal.settings.step_1_form.form_header_form;if($(".page-body-logo-design").length>0){errorHTML='';$("#rsvErrors").parent().parent().addClass("customErrMsg");}
if($('input[name="new_design"]').length>0&&$('input[name="new_design"]').val()=='logomaker'){if($('#edit-logo-type').val()=="00"){additionalErrorHTML+=Drupal.settings.step_1_form.logo_type.required;$('#edit-logo-type').addClass('errorFieldDemo5');}
else{$('#edit-logo-type').removeClass('errorFieldDemo5');}}
if(Drupal.settings.logocategory_split_set==2){if($('#edit-logo-type').val()=="-1"){additionalErrorHTML+=Drupal.settings.step_1_form.logo_type.invalid;$('#edit-logo-type').addClass('errorFieldDemo5');fls_events_add('error_msg_not_selecting_logo_category',1);}
else{$('#edit-logo-type').removeClass('errorFieldDemo5');}}
if($('input[name="new_design"]').length>0&&$('input[name="new_design"]').val()=='logocategory'){if($('#edit-logo-type').val()=="-1"){additionalErrorHTML+=Drupal.settings.step_1_form.logo_type.invalid;$('#edit-logo-type').addClass('errorFieldDemo5');fls_events_add('error_msg_second_lb',1);}
else{$('#edit-logo-type').removeClass('errorFieldDemo5');}}
if($('input[name="logo_first_line"]').val()==""||$('input[name="logo_first_line"]').val()==$('input[name="logo_first_line"]').attr('title')){additionalErrorHTML+=Drupal.settings.step_1_form.logo_first_line.required;$('input[name="logo_first_line"]').addClass('errorFieldDemo5');$('#edit-first-line-label').addClass('signup_error_label');$('#edit-first-line-label-icon').show();}else{$('input[name="logo_first_line"]').removeClass('errorFieldDemo5');$('#edit-first-line-label').removeClass('signup_error_label');$('#edit-first-line-label-icon').hide();}
if(Drupal.settings.no_leads_email){if($('input[name="email"]').val()==""){additionalErrorHTML+=Drupal.settings.step_1_form.email.required;$('input[name="email"]').addClass('errorFieldDemo5');$('#email-label').addClass('signup_error_label');$('#email-label-icon').show();}else{$('input[name="email"]').removeClass('errorFieldDemo5');$('#email-label').removeClass('signup_error_label');$('#email-label-icon').hide();}}
if(additionalErrorHTML){if($("#edit-new-design").val()!="")$(".error_icon").hide();errorHTML+=additionalErrorHTML;$("#rsvErrors").css("display","block");$("#rsvErrors").html(errorHTML);var iframe=window.parent.document.getElementById('TB_iframeContent');if(typeof iframe!="undefined"&&iframe!=null){var height=iframe.offsetHeight;iframe.style.height=(height+80)+"px";}
return false;}
else{if($('input[name="logo_second_line"]').val()==$('input[name="logo_second_line"]').attr('title')){$('input[name="logo_second_line"]').val("");}
if($('input[name="tag_line"]').val()==$('input[name="tag_line"]').attr('title')){$('input[name="tag_line"]').val("");}
if($('.step1_popup.step1_popup_ajax').length>0){if(typeof step1_form_submit_ajax=='function'){step1_form_submit_ajax();return false;}}
$('#logo-creator-step1-page-form').submit();return false;}});$('#logo-creator-step1-page-form').bind('submit',function(){if(typeof stop_duplicate_form_submit!=='undefined')return false;else stop_duplicate_form_submit=true;});$('.limitedCountSelect').focus(function(){$(this).attr("size",14);});$('.limitedCountSelect').blur(function(){$(this).attr("size",1);});$('.limitedCountSelect option').click(function(){if($('.limitedCountSelect').attr("size")>1){$('.limitedCountSelect').attr("size",1);$('.limitedCountSelect').blur();}});var isIE11=(!!navigator.userAgent.match(/Trident\/7\./));if($.browser.msie||isIE11){$('.limitedCountSelect').mouseup(function(){if($(this).attr('isopen')=='1'){$(this).attr('isopen','0');setTimeout(function(){$('.limitedCountSelect').trigger('blur');},10);return;}
$(this).attr('isopen','1');});}
if(Drupal.settings.show_step4_offer!=undefined){if(Drupal.settings.browser_details_name!='ie'){$("#step1 .form_table input, #step1 .form_table select").each(function(){$(this).addClass('popunder_click');popunder_init_element($(this).parent())});popunder_init_element($('#step1 #edit-submit'));}
$("#step1 .form_table input, #step1 .form_table select").click(function(){var url=Drupal.settings.baseUrl+"/step4?offer=1";if(Drupal.settings.show_step4_offer!=undefined&&Drupal.settings.show_step4_offer){if(typeof Drupal.settings.offer_flash_submited=='undefined'&&Drupal.settings.browser_details_name!=='op'){fls_new_page(url,'scrollbars=yes,resizable=yes&location=yes&toolbar=yes&menubar=yes','step4');}}
$(this).focus();});}};(function($){$.fn.jCarouselLite=function(o){o=$.extend({btnPrev:null,btnNext:null,btnGo:null,mouseWheel:false,auto:null,speed:200,easing:null,vertical:false,circular:true,visible:3,start:0,scroll:1,beforeStart:null,afterEnd:null},o||{});if(!o.circular)
{$(o.btnPrev).addClass("disabled");}
return this.each(function(){var running=false,animCss=o.vertical?"top":"left",sizeCss=o.vertical?"height":"width";var div=$(this),ul=$("ul",div),tLi=$("li",ul),tl=tLi.size(),v=o.visible;if(o.circular){ul.prepend(tLi.slice(tl-v-1+1).clone()).append(tLi.slice(0,v).clone());o.start+=v;}
var li=$("li",ul),itemLength=li.size(),curr=o.start;div.css("visibility","visible");li.css({overflow:"hidden",float:o.vertical?"none":"left"});ul.css({margin:"0",padding:"0",position:"relative","list-style-type":"none","z-index":"1"});div.css({overflow:"hidden",position:"relative","z-index":"2"});var liSize=o.vertical?height(li):width(li);var ulSize=liSize*itemLength;var divSize=liSize*v;li.css({width:li.width(),height:li.height()});ul.css(sizeCss,ulSize+"px").css(animCss,-(curr*liSize));div.css(sizeCss,divSize+"px");if(o.btnPrev)
$(o.btnPrev).click(function(){return go(curr-o.scroll);});if(o.btnNext)
$(o.btnNext).click(function(){return go(curr+o.scroll);});if(o.btnGo)
$.each(o.btnGo,function(i,val){$(val).click(function(){return go(o.circular?o.visible+i:i);});});if(o.mouseWheel&&div.mousewheel)
div.mousewheel(function(e,d){return d>0?go(curr-o.scroll):go(curr+o.scroll);});if(o.auto)
setInterval(function(){go(curr+o.scroll);},o.auto+o.speed);function vis(){return li.slice(curr).slice(0,v);};function go(to){if(!running){if(o.beforeStart)
o.beforeStart.call(this,vis());if(o.circular){if(to<=o.start-v-1){ul.css(animCss,-((itemLength-(v*2))*liSize)+"px");curr=to==o.start-v-1?itemLength-(v*2)-1:itemLength-(v*2)-o.scroll;}else if(to>=itemLength-v+1){ul.css(animCss,-((v)*liSize)+"px");curr=to==itemLength-v+1?v+1:v+o.scroll;}else curr=to;}else{if(to<0||to>itemLength-v)return;else curr=to;}
running=true;ul.animate(animCss=="left"?{left:-(curr*liSize)}:{top:-(curr*liSize)},o.speed,o.easing,function(){if(o.afterEnd)
o.afterEnd.call(this,vis());running=false;});if(!o.circular){$(o.btnPrev+","+o.btnNext).removeClass("disabled");$((curr-o.scroll<0&&o.btnPrev)||(curr+o.scroll>itemLength-v&&o.btnNext)||[]).addClass("disabled");}}
return false;};if(itemLength<=o.visible)
$(o.btnNext).addClass("disabled");});};function css(el,prop){return parseInt($.css(el[0],prop))||0;};function width(el){return el[0].offsetWidth+css(el,'marginLeft')+css(el,'marginRight');};function height(el){return el[0].offsetHeight+css(el,'marginTop')+css(el,'marginBottom');};})(jQuery);;$(function(){if($('.inner_step3 .scrollerConteiner ul li').length>0){$(".inner_step3 .scroller").jCarouselLite({btnNext:".next",btnPrev:".prev",circular:false,visible:5});}});$(function(){if($('#step-checkout1 .scrollerConteiner ul li').length>0){$('#checkout-slider-wrapper').css('display','');$("#step-checkout1 .scroller").jCarouselLite({btnNext:".next",btnPrev:".prev",circular:false,visible:4});}});;var check_payment_interval=0;var reorderEUCardType="";var reorderEUCardEditLink="";$(document).ready(function(){if(typeof Drupal.settings.reactivate_message!='undefined'){if(Drupal.settings.reactivate_message.length>0){alert(Drupal.settings.reactivate_message);}}
if(typeof Drupal.settings.saved_logos_action_message!='undefined'){if(Drupal.settings.saved_logos_action_message.length>0){alert(Drupal.settings.saved_logos_action_message);}}
$('.purchased_download_link').mousedown(function(){var category='/mylogos';var event='click';var label='';if($(this).hasClass('purchased_download_png')){label='download_png_only';}
if($(this).hasClass('purchased_logo_email')){label='email_logo';}
if($(this).hasClass('purchased_logo_sms')){label='text_logo';}
ga('send','event',category,event,label);});saved_logos_check_hash_autodownload();$("#websites_block .upgradeBtn").click(function(){$(".page-body-mylogos .checkoutwebsitebundle_popup .container.website_upsell").hide();$(".page-body-mylogos .checkoutwebsitebundle_popup .container.website_upsell .upsells_new_single").hide();Drupal.settings.site_id=$(this).attr("id");CHECKOUTWEBSITEBUNDLE.init();var current;var upsellNr;current=Drupal.settings.domainUpsells[$(this).attr("id")];upsellNr=0;$(".checkoutwebsitebundle_popup .upsells_new_single").each(function(){if(current.indexOf(parseInt($(this).attr("item")))!=-1){upsellNr++;$(this).show();}});if(upsellNr==1)$(".website_upsell .hr").hide();$(".page-body-mylogos .checkoutwebsitebundle_popup .container.website_upsell").show();});$('.show_feedback_popup').click(function(){show_feedback_popup(this);});$('.page-body-mylogos .bc50-banner1 a').click(function(){fls_events_add('bc50_mylogos_banner')});$('#edit-account-form #edit-submit').click(function(){$('#edit-account-form').submit();return false;});$('#fast-password-reset-form #edit-submit').click(function(){$('#fast-password-reset-form').submit();return false;});$('#fls-contactform-form #edit-submit').click(function(){$('#fls-contactform-form').submit();return false;});$('#unsubscribe-form #edit-submit').click(function(){$('#unsubscribe-form').submit();return false;});var logo_id=$('#last_purchased_logo_id_fb').val();if(logo_id){PO.init();}else{$('.thankYouBox, .overlay').css({"display":"none"});var logo_id=$('#last_purchased_logo_id').val();if(logo_id){check_payment_interval=setInterval("check_payment_ajax('"+logo_id+"')",10000);}}
$('.thankYouBox').click(function(e){if($(e.target).is('.purchase')){$.ajax({url:Drupal.settings.baseUrl+'/save-bc-purchase/',dataType:"json",success:function(Response){if(Response.success=='1'){}}});return true;}
if($(e.target).is('.download')||$(e.target).is('.noThankYou')){PO.hidePopUp();}
if($(e.target).is('.shareFB')){FB.ui({method:'feed',name:'Do you LIKE my new logo?',link:'http://www.freelogoservices.com/?utm_campaign=FaceBookLogoShare&utm_medium=ThankyouPageLightbox&utm_source=Facebook',picture:$('#logo_share_fb').attr('src'),caption:'www.FreeLogoServices.com',description:'I created my new logo on FreeLogoServices.com'},function(response){if(response&&response.post_id){Drupal.settings.fbPostID=response.post_id;}
PO.hidePopUp();});}});$('.fb-share-logo').click(function(e){FB.ui({method:'feed',name:Drupal.settings.fbShare.name,link:Drupal.settings.fbShare.utmLink,picture:$(this).parent().parent().parent().find('img.logo_thumb').attr('src'),caption:Drupal.settings.fbShare.caption,description:Drupal.settings.fbShare.description},function(response){if(response&&response.post_id){var lengPref="";if(Drupal.settings.lang)lengPref='/'+Drupal.settings.lang;$.ajax({url:Drupal.settings.baseUrl+lengPref+'/save-fb-share/',dataType:"json",success:function(Response){if(Response.success=='1'){}}});}else{}});});$('.clickable_link').click(function(e){e.preventDefault()});if($('#snapengage_contactus').length>0){$('#SnapABug_P').appendTo('#snapengage_contactus');SnapABug.startLink();}
$("#saved_logos .left .eu_card, #saved_logos .reorderUsCard, #saved_logos .reorderEditUsCard").click(function(){var href=$(this).attr('href');reorderEUCardEditLink=href;var classes=($(this).attr("class")).split(" ");reorderEUCardType=classes[0];href=href.split('/');var logoID=href.pop();if(logoID){var classes=$(this).attr('class');classes=classes.split(' ');var sideID=0;var cl_id=0;var side_clid=0;for(var i in classes){console.log(classes[i])
if(classes[i].indexOf('carddetails')==0){var details=classes[i].split('_');sideID=details[2];cl_id=details[3];side_clid=details[4];}}
bc2eu_init(logoID,sideID,cl_id,side_clid);return false;}});});function bc2eu_after_save_mylogos(data){$('.eucard_popup .eucard_images img').hide();$('.eucard_popup .eucard_images img').attr('src',data['preview1']);var href=$('.eucard_popup .buyNowBtn').attr('href');href=href.split('/');href.pop();href.push(data['design_id']);href=href.join('/');$('.eucard_popup .buyNowBtn').attr('href',href);if(reorderEUCardType=="reorderEditUsCard"){$('.eucard_popup .buyNowBtn').hide();$('.eucard_popup .editCardBtn').attr('href',reorderEUCardEditLink);}else{$('.eucard_popup .continueBtn').hide();}
href=$('.eucard_popup .editCardBtn').attr('href');href=href.split('/');href.pop();href.push(data['design_id']);href=href.join('/');$('.eucard_popup .editCardBtn').attr('href',href);setTimeout(function(){EUCARD.init()},500);$('.eucard_popup .eucard_images img').show();}
function check_payment_ajax(logo_id){if(logo_id){var fbpostid='';if(Drupal.settings.fbPostID!=undefined){fbpostid='?fbPostID=true';}
$.ajax({url:Drupal.settings.baseUrl+'/check-payment/'+logo_id+fbpostid,dataType:"json",success:function(Response){if(Response.success=='1'){clearInterval(check_payment_interval);var url=window.location.href;window.location.href=url;}}});}}
var fls_dow_win=null
function fls_close_download_window(){var url=$(this).attr('href');fls_dow_win=window.open(url,'','width=1,height=1');setTimeout(function(){window.fls_dow_win.close();},2000);return false;}
var PO={init:function(){if($('.thankYouBox').length>0&&$('.overlay').length>0){PO.placePopUp();$('.thankYouBox .close, .thankYouBox .noThankYou').click(PO.hidePopUp)}},initKeep:function(){if($('.thankYouBox').length>0&&$('.overlay').length>0){$(".thankYouBox .feedback_link .feedback_img").show();$(".thankYouBox .feedback_link .feedback_img").css("visibility","hidden");$(".thankYouBox .feedback_link .feedback_hide").hide();PO.placePopUpKeep();$('.thankYouBox .close, .thankYouBox .noThankYou,.thankYouBox .diylogo_no').click(PO.hidePopUpKeep);$(".thankYouBox .feedback_link .feedback_img").css("visibility","visible");}},initKeepF:function(){if($('.feedbackpopup').length>0&&$('.overlay').length>0){$(".feedbackpopup .feedback_link .feedback_img").show();$(".feedbackpopup .feedback_link .feedback_img").css("visibility","hidden");$(".feedbackpopup .feedback_link .feedback_hide").hide();PO.placePopUpKeepF();$('.feedbackpopup .close, .feedbackpopup .noThankYou,.feedbackpopup .diylogo_no').click(PO.hidePopUpKeepF);$(".feedbackpopup .feedback_link .feedback_img").css("visibility","visible");}},initKeepD:function(){if($('.diy_edit_logo').length>0&&$('.overlay').length>0){$(".diy_edit_logo .feedback_link .feedback_img").show();$(".diy_edit_logo .feedback_link .feedback_img").css("visibility","hidden");$(".diy_edit_logo .feedback_link .feedback_hide").hide();PO.placePopUpKeepD();$('.diy_edit_logo .close, .diy_edit_logo .noThankYou,.diy_edit_logo .diylogo_no').click(PO.hidePopUpKeepD);$(".diy_edit_logo .feedback_link .feedback_img").css("visibility","visible");}},placePopUp:function(){var overlay=$('.overlay');var thankYouBox=$('.thankYouBox');$('.overlay, .thankYouBox').remove();var docH=$(document).height();var docW=$(document).width();overlay.css({"width":docW+"px","height":docH+"px"});thankYouBox.prependTo('body');overlay.prependTo('body');overlay.show();$(window).load(function(){thankYouBox.show();var bW=$('.thankYouBox').width();var bH=$('.thankYouBox').height();var wW=$(window).width();var wH=$(window).height();bW=wW/2-bW/2;bH=wH/2-bH/2;$('.thankYouBox').css({left:bW,top:bH>40?bH:40});});},placePopUpKeep:function(){var overlay=$('.overlay');var thankYouBox=$('.thankYouBox');$('.overlay, .thankYouBox').remove();var docH=$(document).height();var docW=$(document).width();overlay.css({"width":docW+"px","height":docH+"px"});thankYouBox.prependTo('body');overlay.prependTo('body');overlay.show();var bW=$('.thankYouBox').width();var bH=$('.thankYouBox').height();var wW=$(window).width();var wH=$(window).height();bW=wW/2-bW/2;bH=wH/2-bH/2;$('.thankYouBox').css({left:bW,top:bH>40?bH:40});thankYouBox.show();$('html,body').animate({scrollTop:$('body').offset().top},'slow');},placePopUpKeepF:function(){var overlay=$('.overlay');var thankYouBox=$('.feedbackpopup');$('.overlay, .feedbackpopup').remove();var docH=$(document).height();var docW=$(document).width();overlay.css({"width":docW+"px","height":docH+"px"});thankYouBox.prependTo('body');overlay.prependTo('body');overlay.show();var bW=$('.feedbackpopup').width();var bH=$('.feedbackpopup').height();var wW=$(window).width();var wH=$(window).height();bW=wW/2-bW/2;bH=wH/2-bH/2;$('.feedbackpopup').css({left:bW,top:bH>40?bH:40});thankYouBox.show();$('html,body').animate({scrollTop:$('body').offset().top},'slow');},placePopUpKeepD:function(){var overlay=$('.overlay');var thankYouBox=$('.diy_edit_logo');$('.overlay, .diy_edit_logo').remove();var docH=$(document).height();var docW=$(document).width();overlay.css({"width":docW+"px","height":docH+"px"});thankYouBox.prependTo('body');overlay.prependTo('body');overlay.show();var bW=$('.diy_edit_logo').width();var bH=$('.diy_edit_logo').height();var wW=$(window).width();var wH=$(window).height();bW=wW/2-bW/2;bH=wH/2-bH/2;$('.diy_edit_logo').css({left:bW,top:bH>40?bH:40});thankYouBox.show();$('html,body').animate({scrollTop:$('body').offset().top},'slow');},hidePopUp:function(){$('.thankYouBox').fadeOut();$('.overlay').fadeOut();logo_thankyou_popup_trigger();$('.thankYouBox').remove();$('.overlay').remove();return false;},hidePopUpKeep:function(){$('.thankYouBox').fadeOut();$('.overlay').fadeOut()
return false;},hidePopUpKeepF:function(){$('.feedbackpopup').fadeOut();$('.overlay').fadeOut()
return false;},hidePopUpKeepD:function(){$('.diy_edit_logo').fadeOut();$('.overlay').fadeOut()
return false;}}
function show_purchased_edit_popup(id,bc)
{$('.diylogo_subtitle').hide();if(bc)
$('.diylogo_subtitle_bc').show();else
$('.diylogo_subtitle_logo').show();var link=Drupal.settings.baseUrl;link+=bc?'/business-cards':'';link+='/step3/logo/'+id;$('.diy_edit_logo .diylogo_yes a').attr('href',link);PO.initKeepD();return false;}
function show_feedback_popup(event)
{var link=$(event).attr('href');var banner=$(event).hasClass('banner_mylogos2');$.ajax({url:link,dataType:"json"});PO.initKeepF();$('.thankYouBox .feedback_hide').hide();$.ajax({url:Drupal.settings.baseUrl+'/global-track/ySD0zQA=',dataType:"json"});$('.thankYouBox .feedback_link').click(function(e){e.preventDefault();$(this).find(".feedback_img").hide();$(this).find(".feedback_hide").show();$(this).find(".feedback_hide textarea").select();});$('.thankYouBox #feedback_facebook').click(function(e){$.ajax({url:Drupal.settings.baseUrl+'/global-track/3Cn22gcdcc4=',dataType:"json"});});$('.thankYouBox #feedback_email').click(function(e){$.ajax({url:Drupal.settings.baseUrl+'/global-track/3yX01gk=',dataType:"json"});});$('.thankYouBox #feedback_twitter').click(function(e){$.ajax({url:Drupal.settings.baseUrl+'/global-track/zj...8yxEXbA==',dataType:"json"});});return false;}
function logo_thankyou_popup_trigger(){if(!$('.bc-purchasePopup').length>0&&!$('.tyFacebook').length>0)
return true;var logo_id=$('#last_purchased_logo_id').val();if(logo_id){setTimeout(function(){logo_thankyou_check_status(logo_id)},10000);}}
function logo_thankyou_check_status(logo_id){var fbpostid='';if(Drupal.settings.fbPostID!=undefined){fbpostid='?fbPostID=true';}
$.ajax({url:Drupal.settings.baseUrl+'/check-payment/'+logo_id+fbpostid,dataType:"json",success:function(Response){if(Response.success=='1'){var url=window.location.href;window.location.href=url;}
else{$('.payment_delay_message img').hide();$('.payment_delay_message_generating').hide();}}});}
function saved_logos_check_hash_autodownload(){var hash=window.location.hash;if(!hash)return-1;if(!$(hash).length)return-2;if(hash.substr(0,3)!='#l_')return-3;var logo_id=hash.substr(3);if(!Drupal.settings.autodownload_files)return-4;if(typeof Drupal.settings.autodownload_files[logo_id]=='undefined')return-5;var src=Drupal.settings.autodownload_files[logo_id];if(!$('#saved_logos_iframe').length)return-6;$('#saved_logos_iframe').attr('src',src);};function get_screen_size(){return $(window).width();}
var right_click_disabled=function(){this.apply=function(item){item.bind('mousedown',function(evt){var notice_img=0;if($("body[class*='page-body-notice']").length>0){if(((this.parentElement.className).split(" ")).indexOf("flstheme_notice_right")!==-1){notice_img=1;}}
if(Drupal.settings.is_flstheme){if($('.mobile_view').length==0){if($("body[class*='page-body-step2']").length){ga('send','event','Step2','Click','Image');}}}
if((notice_img&&evt.which==3)||(!notice_img&&evt.which!=1)){return false;}}).bind('contextmenu',function(){return false;});};};function config_bc_suggestion_lightbox(){var suggest_cfg;var lang="en";if(Drupal.settings.lang!="")lang=Drupal.settings.lang;if(lang=="pt")lang="pt-pt";else if(lang=="cn")lang="zh-hans";suggest_cfg={config:Drupal.settings.baseUrl+'/sites/all/themes/freelogoservices/flash/config/config.xml',line1:'test',line2:'here+we+go+again',line3:'',logoID:0,act:'',anchor1:'center',anchor2:'center',anchor3:'',anchorPosition1:'',anchorPosition2:'',anchorPosition3:'',autoscalling:1,type:2,lang:lang,loading:'Loading',suggestCards:1,product_type:'logo',logo_mode:'normal',suggested_first_name:Drupal.settings.bc_default_text['fname'],suggested_last_name:Drupal.settings.bc_default_text['lname'],suggested_job_title:Drupal.settings.bc_default_text['jobtitle'],suggested_addr_1:Drupal.settings.bc_default_text['address1'],suggested_addr_2:Drupal.settings.bc_default_text['address2'],suggested_phone:Drupal.settings.bc_default_text['phone'],suggested_email:Drupal.settings.bc_default_text['email'],suggested_website:Drupal.settings.bc_default_text['website'],bc_suggestion_ids:Drupal.settings.bc_suggestion_cards,parent:1,post_back_data:{parm1:1,param2:3,param3:[11,12,'asdasf'],param4:{asd:12,sdf:13}},card_type:Drupal.settings.bc_type,choice_callback:function(choice){if($.isEmptyObject(choice)){fls_events_add('close_bc_upsell');console.log('X');if(!Drupal.settings.weebly_preview_v2_split_set){$("#FLSBcSuggestLogoStep2Canvas-BackDesignDlg").hide();$(".selector-dlg-wrapper").hide();$('#TB_overlay').remove();$('#TB_window').remove();$('.overlay').first().show();if(fls_show_logowebv2_lightbox()){return false;}}else{$('.overlay').first().show();}
if($('.products_lp_box').length>0&&!$('.logoweb_popup.initialized').length&&!Drupal.settings.weebly_preview_v2_split_set){PP_UL.init();}else{if(Drupal.settings.is_user_logged)
window.location=Drupal.settings.baseUrl+"/notice/"+Drupal.settings.saved_logo_id;else window.location=Drupal.settings.baseUrl+"/step4/";}}else{$('.overlay').first().show();$.post(Drupal.settings.baseUrl+"/color-matched-bc/",{logo_id:Drupal.settings.saved_logo_id,ajax_call:1,bc_svg:choice.bc_svg,bc_parent_id:choice.bc_parent_id,bc_layout:choice.bc_layout,bc_raster:choice.bc_raster},function result(res){fls_events_add('accepted_bc_upsell');lang="";if(Drupal.settings.lang!="")lang="/"+Drupal.settings.lang;window.location=Drupal.settings.baseUrl+lang+"/business-cards/step3/logo/"+res+"?suggest=1";},"json");}},load_complete_callback:function(){if($("body[class*='page-body-step2']").length){if(typeof Drupal.settings.save_logo_timer_obj['bc_editor_end']=='undefined')Drupal.settings.save_logo_timer_obj['bc_editor_end']=Date.now();fls_events_add('bc_suggest_step2_timer',(Drupal.settings.save_logo_timer_obj['bc_editor_end']-Drupal.settings.save_logo_timer_obj['bc_editor_start']));}
Drupal.settings.bc_suggestions_html5_loaded=true;$('#FLSBcSuggestLogoStep2Canvas-BackDesignDlg .fls-button.fls-orangebutton.selector-action').click(function(e){fls_events_add('lightbox_step2bc_negativecta');});$('#FLSBcSuggestLogoStep2Canvas-BackDesignDlg .close-suggest-dlg').click(function(e){fls_events_add('lightbox_step2bc_close');});},before_dlg_show_callback:function(){Drupal.settings.bc_suggestions_html5_completed_loaded=true;console.log('completed loaded');show_loaded_color_bc_suggestion_lightbox();$('.TB_overlayBG').remove();$(".selector-dlg-wrapper .selector-slider .design-item span").addClass("orangeButton");},load_fonts:['Helvetica'],dummy:1};Drupal.settings.bc_suggestions_html5_start_loaded=true;LogoStep2BcSuggest.Init(suggest_cfg);}
function show_loaded_color_bc_suggestion_lightbox(){if(Drupal.settings.bc_suggestions_html5_completed_loaded!=undefined&&$('.thankYouBox.thankYouBoxVisible').length==0){$('.overlay').hide();$('.overlay').first().show();console.log('show overlay');console.log(Drupal.settings.websites_add_to_cart_status);if(Drupal.settings.websites_add_to_cart_status!=undefined&&!Drupal.settings.websites_add_to_cart_status){setTimeout(function(){show_loaded_color_bc_suggestion_lightbox()},400);return false;}
console.log('Show BC suggest!!!');$('#FLS_PageLoadingOverlay').hide();$("#FLSBcSuggestLogoStep2Canvas-BackDesignDlg").show().css('visibility','visible');$(".selector-dlg-wrapper").show();$('.overlay').hide();}else{console.log('Hide BC suggest!!!');$("#FLSBcSuggestLogoStep2Canvas-BackDesignDlg").hide().css('visibility','hidden');$(".selector-dlg-wrapper").hide();}}
function color_bc_suggestion_lightbox(logo_id,fonts){console.log("color_bc_suggestion_lightbox");var myfonts=[];if(fonts!=""){temp=fonts.split(",");if(temp.length>0)
for(i=0;i<temp.length;i++)
myfonts[i]=temp[i];}
console.log("check_logo_direct_save: "+Drupal.settings.step3_save_result);if($("body[class*='page-body-step2']").length&&Drupal.settings.weebly_preview_v2_split_set){fls_show_logowebv2_lightbox();}
interval=setInterval(function(){if(Drupal.settings.bc_suggestions_html5_loaded!=undefined){$('#TB_window').remove();LogoStep2BcSuggest.setLogoId(logo_id,myfonts);clearInterval(interval);}},1000);}
$(document).ready(function(){fls_events_add('screen_size',get_screen_size());$(".box2 .customize_logos").click(function(){fls_events_add('click_step2_customize_cta');});$(".customize_logo_step2_banner .customize_logos").click(function(){fls_events_add('click_step2_banner_customize_cta');});$(".step2Edit").click(function(){fls_events_add('clicked_edit_logo_text');});$('.deluxeStartNow').click(function(e){e.preventDefault();fls_events_add('deluxeaffiliate_start_now');window.location=$(this).attr('href');return false;});if($('#step2_filters').length>0){step2_filters_init();}
if(Drupal.settings.show_popup_logomix==1)
{tb_show('',Drupal.settings.popup_logomix_url+'?TB_iframe=true&width=571&height=350&modal=true','');}
if(Drupal.settings.show_snap_chat!=undefined&&Drupal.settings.show_snap_chat>0)
{setTimeout(function(){fls_snap_online_chat()},3000);}
if(Drupal.settings.show_popup_cantfind==1)
{}
$('.logoselect_step2_banner a').click(function(e){e.preventDefault();fls_events_add('logoselect_step2_banner_click');window.location=$(this).attr('href');return false;});if($('.pager .step2_pagination_next_only .next').length){$('.pager .step2_pagination_next_only .next').click(function(e){e.preventDefault();ls2s_next_split_click()});}else{$('.pager_step2.ptop li a').click(function(){fls_events_add('clicks_step2_top_pagination')});$('.pager_step2.pbottom li a').click(function(){fls_events_add('clicks_step2_bottom_pagination')});}
if(Drupal.settings.show_ad_logomix==1)
{$('#logomix_ad_step2').addClass(Drupal.settings.ad_logomix_classes);$('#logomix_ad_step2').append('<a href="'+Drupal.settings.ad_logomix_url+'" target="_blank"><img src="'+Drupal.settings.ad_logomix_img+'" alt="logomixad" /></a>')}
var right_click=new right_click_disabled();right_click.apply($('.logo_thumb, .logo_thumb_placeholder, .bcweb_preview img, #page_options #product_image img, #bc_options .product_image img, .websites_domain_page img, .checkout_element_image, #notice_right_container img, .option_steps_form .option img, .businesscards_upsell_page .upsell_info'));$('.thumbs_list1 ul li').click(function(){var ahref=$(this).find('a');if($(ahref).hasClass('multiversion')){tb_show(Drupal.t('Select position for your logo and text'),$(ahref).attr('href'),'');return false;}else{show_loading_overlay();setTimeout(function(){window.location=$(ahref).attr('href');},500);return false;}});$('.select_over_effect').click(function(){$(this).addClass('highlight_field');}).bind('mouseout',function(){$(this).removeClass('highlight_field');});$('.select_over_effect option').bind('mouseover',function(){$(this).parent().addClass('highlight_field');});$('.input_click_effect').click(function(){$(this).addClass('highlight_field');}).bind('blur',function(){$(this).removeClass('highlight_field');});$('.thumbs_list1 ul.ajax-customize li').bind('mouseover click',function(){if($('.thumbs_list1 ul.ajax-customize li.step2-elem-hover').length){var o=$('.thumbs_list1 ul.ajax-customize li.step2-elem-hover');if(Drupal.settings.step2_save==2){$('#placetoremove').remove();$(o).css('position','relative');$(o).css('left','auto');$(o).css('top','auto');$(o).find('a').css('border-width','1px');$(o).find('a .step2-hover-btns').hide();$(o).find('.favorites-btns .favoriteStatus').hide();$(o).find('.favorites-btns').removeClass('grey-arrow');$(o).find('.favorites-btns').css('zIndex','0');$(o).removeClass('step2-elem-hover');}else{$('.logo_notice1').remove();}}
if(Drupal.settings.step2_save==2){var position=$(this).position();$(this).css('position','absolute');$(this).css('left',position.left);$(this).css('top',position.top);$(this).before("<li id='placetoremove' class='placeHolder' style='width: 200px; float:left;'></li>");if($('.thumbs_list1 ul.ajax-customize li:nth-child(4n)').hasClass('placeHolder')){$('.thumbs_list1 ul.ajax-customize #placetoremove').css('height','154px');}
$(this).find('a').css('border-width','1px');$(this).addClass('step2-elem-hover');$(this).find('a .step2-hover-btns').show();$(this).find('.favorites-btns .favoriteStatus').show();$(this).find('.favorites-btns').addClass('grey-arrow');$(this).find('.favorites-btns').css('zIndex','100000');}else{var offset=$(this).offset();if($('.logo_notice1').length<=0&&!$(this).parent().parent().hasClass('step2b')){$('body').append('<div class="logo_notice1">'+Drupal.settings.step2_texttojs.text1+'</div>');}
$('.logo_notice1').css('position','absolute').css('top',offset.top-35+'px').css('left',offset.left+15+'px').css('display','');}}).bind('mouseout',function(){if(window.navigator.msPointerEnabled){return;}
if(Drupal.settings.step2_save==2){$('#placetoremove').remove();$(this).css('position','relative');$(this).css('left','auto');$(this).css('top','auto');$(this).find('a').css('border-width','1px');$(this).find('a .step2-hover-btns').hide();$(this).find('.favorites-btns .favoriteStatus').hide();$(this).find('.favorites-btns').removeClass('grey-arrow');$(this).find('.favorites-btns').css('zIndex','0');$(this).removeClass('step2-elem-hover');}else{$('.logo_notice1').remove();}}).find('a').click(function(){if(Drupal.settings.step2_save==2){return false;}else{var url=$(this).attr('rel');if(!$(this).hasClass('multiversion')){show_loading_overlay();$.ajax({url:url,type:'post',data:'json=1&action=customize',dataType:'json',success:function(result){if(result['status']=='1'){var query='';if(has_query_url('dev_force_tablet')){query='?dev_force_tablet=1';}
window.location=result['url']+query;}}});return false;}else{tb_show('',url);return false;}}});$('.thickbox-inner .thumbs_list1 li a').click(function(){if(Drupal.settings.step2_save==2){return false;}else{if(!$(this).hasClass('multiversion')){parent.show_loading_overlay();var url=$(this).attr('rel');$.ajax({url:url,type:'post',data:'json=1&action=customize',dataType:'json',success:function(result){if(result['status']=='1'){var query='';if(has_query_url('dev_force_tablet')){query='?dev_force_tablet=1';}
parent.window.location=result['url']+query;}}});return false;}}});$('.step2-save-button').bind('touchend click',function(){step2_save_button_click(this)});$('.customize_logos').bind('click',function(){STEP2CUSTOMIZELOGOS.init();});$('#edit-logo-type').change(function(){$('#step2-categories-form').submit();});if($('div#admin-menu ul').length>0){var height=$('div#admin-menu').height();if(height){var dif=height-20;$('body').css('padding-top',dif);}}
if(typeof(pageTracker)!='undefined'){$('.thumbs_list1 a').click(function(){pageTracker._trackPageview($(this).attr('href'));});}
$('.search-logos-btn').click(function(){$('#step2-search-form').submit();return false;});$('#cantfind_button').click(function(){$.ajax({type:'post',url:Drupal.settings.baseUrl+'/cantfindlogo',dataType:'json',data:{message:$("#cantfind_message").val()},success:function(result){PO_step2.hidePopUp();}});});$('#step2_search_text_input').focus(function(){$('#step2_search_text_input').val('');});$('#step2_search_text_input').blur(function(){if($('#step2_search_text_input').val().length<1)
$('#step2_search_text_input').val(Drupal.settings.sphinxDefaultSearch);});if($('.sphinxsearch_popup').length>0)
PO_step2_search.init();$('#step2_search_button, #step2_search_button_icon').click(function(){$('#step2-sphinx-search-form').submit();});$('.SnapABug_Button').attr('click','').bind('click',function(){snapengage_init();SnapABug.startLink();});$('.logos_list .logo_thumb').click(function(){if(Drupal.settings.is_flstheme){if($('.mobile_view').length==0&&$('.tablet_view').length==0){if(typeof Drupal.settings.editbtn_split!='undefined'){if(Drupal.settings.editbtn_split){if($(this).parents('li').find('.step2-save-button.step2-save-logo').length>0){$(this).parents('li').find('.step2-save-button.step2-save-logo').trigger('click');return false;}}}
var url=$(this).parent().attr('href');window.location=url;}}});});function fls_show_logowebv2_lightbox(){if(Drupal.settings.weebly_preview_v2_split_set&&$("body[class*='page-body-step3']").length){color_bc_suggestion_lightbox(Drupal.settings.step3_save_result["new_logo_id"],Drupal.settings.var_fonts);}
if(Drupal.settings.logoweb_split_set||Drupal.settings.bc_logoweb_split_set||Drupal.settings.tlds_split_set){if($('.bcweb_popup').length){if(!$('.bcweb_popup.initialized').length){LOGOWEBV2.init();ga('send','event','Domain LB Logo Flow','Fired','Domain_LB_fired_logo');return true;}}
ga('send','event','Domain LB Logo Flow','Not_Fired','Domain_LB_not_fired_logo');}
return false;}
function ls2s_next_split_click(){fls_events_add('clicks_step2_next');var page=$('.jscroll-added:last').attr('id');if(!page){page=2;}else{page=page.split('-');page=parseInt(page[2])+2;}
if(page>Drupal.settings.total_count_pages){$('.pager .step2_pagination_next_only .next').hide();return false;}
window.location='/step2/page/'+page;return false;}
function loadPageAfterChanges(){var url=window.location;window.location=url;}
function fls_goto(url){alert('a');$('#TB_window').html('<div id="TB_load" class="custom_tb_overlay"><p align="center"><img src="https://freelogo-assets.s3.amazonaws.com/sites/all/themes/freelogoservices/images/loading_animation.gif" /><br />'+Drupal.settings.step2_texttojs.text2+'</p></div>');setTimeout(function(){window.location=url;},500);return false;}
function show_saving_overlay(){$('#TB_overlay').css('opacity','0.94');}
function show_loading_overlay(msg,clear)
{var message='';if(msg===undefined){message=Drupal.settings.step2_texttojs.text2;}else{message=msg;}
if(clear===undefined){clear=0;}
if($('#flash_container').length>0){}
var is_safari=navigator.userAgent.toLowerCase().indexOf('safari')>-1;if(clear){$('#TB_overlay').remove();$('#TB_window').remove();}
if(is_safari&&$('#flash_container').length>0)return;$('body').append('<div id="TB_overlay" class="TB_overlayBG" style="z-index:102"></div>');$('body').append('<div id="TB_window" style="display:block;z-index:103"><div id="TB_load" class="custom_tb_overlay"><p align="center"><img src="https://freelogo-assets.s3.amazonaws.com/sites/all/themes/freelogoservices/images/loading_animation.gif" /><br /><span>'+message+'</span></p></div></div>');$('#TB_window').show();}
function rand(from,to){return Math.floor(Math.random()*(to-from+1)+from);}
function rand_values(from,to,count){var nr;var pos;var i=0;var status=new Array();if(to-from<count)return status;while(i<=count){nr=rand(from,to);pos=jQuery.inArray(nr,status);if(pos==-1){status.push(parseInt(nr));i++;}}
return status;}
function step2_save_preloader(){if(step2_save_interval_coutner_pos<=10){$('#TB_load span#status').text(step2_save_interval_array[step2_save_interval_coutner_pos]);step2_save_interval_coutner_pos++;}else{clearInterval(step2_save_interval_coutner);}}
function step2_save_start_process(obj){Drupal.settings.save_logo_timer_obj={};Drupal.settings.save_logo_timer_obj['save_logo_and_domain_check_start']=Date.now();if(obj===undefined){obj=this;}
$('#step2_save_logo_preview').remove();if($('#myFavoritesBtn').length&&$('#myFavoritesBtn').css('left')!='0px'){$('#myFavoritesBtn').click();}
var id=$(obj).hasClass('step2-save-logo');if(id){if($(obj).parent().parent().parent().parent().parent().hasClass('step2b')){obj=$(obj).clone();obj.hide();parent.tb_remove();parent.step2_save_start_process(obj);return false;}
show_loading_overlay(Drupal.settings.step2_save_logo_text);var status=new Array();status=rand_values(1,99,10);status.sort(function(a,b){return a-b});step2_save_interval_array=status;step2_save_interval_coutner_pos=0;step2_save_interval_coutner=setInterval(step2_save_preloader,1500);$.ajax({url:$(obj).attr('rel'),type:'post',data:'json=1&action=save',dataType:'json',success:function(result){Drupal.settings.save_logo_timer_obj['save_logo_and_domain_check_end']=Date.now();fls_events_add('save_logo_step2_timer',(Drupal.settings.save_logo_timer_obj['save_logo_and_domain_check_end']-Drupal.settings.save_logo_timer_obj['save_logo_and_domain_check_start']))
Drupal.settings.save_logo_timer_obj['bc_editor_start']=Date.now();if(result['status']=='1'){Drupal.settings.step2_save_result=result;Drupal.settings.skip_domain_result_population=0;if(typeof result['step2_direct_save']!='undefined'){if(result['step2_direct_save']){Drupal.settings.saved_logo_id=result['step2_direct_save'];}}
clearInterval(step2_save_interval_coutner);$('#TB_load span#status').text('100').attr('id','status-done');if(Drupal.settings.force_bc==1){var sep='?';if(result['url'].indexOf('?')>-1){sep='&';}
var query='';var workflow=has_query_url('workflow');if(workflow){query+=sep+'workflow='+workflow;}else{query='';}
window.location=result['url']+query;return false;}
if(typeof result['website_popup']!='undefined'){if(result['website_popup']&&$('.logoweb_popup').length){$('.logoweb_popup .logoweb_images').html($(result['website_popup']).find('.logoweb_images'));}
$('.orangeButton, .bcweb_popup .close').attr('href',result['url']);}
if(typeof result['website_popup_img']!='undefined'){$('.websites_domain_page .left img').attr('src',result['website_popup_img']);$('.thankYouBox.weeblypreview_popup .popup_content').css('background-image','url('+result['weebly_preview_popup_img']+')');$('#website_logo_id, .website_logo_id').val(result['website_logo_id']);$('#w_logo_id').val(result['website_logo_id']);Drupal.settings.onelinesearch=result['website_onelinesearch'];$('#websites_domain_search_input').val(result['website_onelinesearch']);$('#websites_domain_search_input_hidden').val(result['website_onelinesearch']);if(typeof result['website_twolinesearch']!='undefined'){Drupal.settings.twolinesearch=result['website_twolinesearch'];}
if(typeof result['website_multisearch']!='undefined')
Drupal.settings.multisearch=result['website_multisearch'];if(typeof result['website_response']!='undefined'){Drupal.settings.websites_populate_data=result['website_response'];}
$('.orangeButton, .bcweb_popup .close').attr('href',result['url']);}
else{$('.bcweb_popup').remove();$('.overlay_bcweb_popup').remove();}
if(result['business_content']&&result['promo_content']){if(result['business_content']){if(Drupal.settings.display_color_matched_bc)
{color_bc_suggestion_lightbox(result['step2_direct_save'],result['logo_fonts']);fls_events_add('logoweb_bc_init');fls_events_add('lightbox_step2bc_views');fls_events_add("fired_color_matched_bc_lightbox");if(!Drupal.settings.weebly_preview_v2_split_set){}}else{fls_events_add("fired_color_matched_bc_lightbox");$('#business_card_lightbox_content').html(result['business_content']);$('.medium-blue-btn-close').attr('href',result['url']);$('#TB_overlay').remove();$('#TB_window').remove();BC_UL.init();}}
if(result['promo_content']){$('#fls_products_lp').html(result['promo_content']);if(result['bc_50_free']){$('#TB_overlay').remove();$('#TB_window').remove();}
$('.medium-blue-btn-close').attr('href',result['url']);}}else if(result['business_content']&&!result['promo_content']){$('#business_card_lightbox_content').html(result['business_content']);$('.medium-blue-btn-close').attr('href',result['url']);$('#TB_overlay').remove();$('#TB_window').remove();BC_UL.init();}
else{var sep='?';if(result['url'].indexOf('?')>-1){sep='&';}
var query='';var workflow=has_query_url('workflow');if(workflow){query+=sep+'workflow='+workflow;}else{query='';}
window.location=result['url']+query;}}}});}else{var url=$(obj).attr('rel');if($(obj).parent().parent().hasClass('multiversion')){tb_show('',url);}else{if($(obj).parent().parent().parent().parent().parent().hasClass('step2b')){parent.show_loading_overlay();$.ajax({url:$(obj).attr('rel'),type:'post',data:'json=1&action=customize',dataType:'json',success:function(result){if(result['status']=='1'){var sep='?';if(result['url'].indexOf('?')>-1){sep='&';}
var query='';var workflow=has_query_url('workflow');if(workflow){query+=sep+'workflow='+workflow;}else{query='';}
parent.window.location=result['url']+query;}}});return false;}else{show_loading_overlay();$.ajax({url:$(obj).attr('rel'),type:'post',data:'json=1&action=customize',dataType:'json',success:function(result){if(result['status']=='1'){var sep='?';if(result['url'].indexOf('?')>-1){sep='&';}
var query='';var workflow=has_query_url('workflow');if(workflow){query+=sep+'workflow='+workflow;}else{query='';}
window.location=result['url']+query;}}});return false;}}}}
var PO_step2={init:function(){if($('.cantfind_popup').length>0&&$('.overlay').length>0){PO.placePopUp();$('.cantfind_popup .close, .cantfind_popup .noThankYou').click(PO.hidePopUp)}},placePopUp:function(){var overlay=$('.overlay:first');var thankYouBox=$('.cantfind_popup');$('.overlay, .cantfind_popup').remove();var docH=$(document).height();var docW=$(document).width();overlay.css({"width":docW+"px","height":docH+"px"});thankYouBox.prependTo('body');overlay.prependTo('body');overlay.show();thankYouBox.show();var bW=$('.cantfind_popup').width();var bH=$('.cantfind_popup').height();var wW=$(window).width();var wH=$(window).height();bW=wW/2-bW/2;bH=wH/2-bH/2;$('.cantfind_popup').css({left:bW,top:bH>40?bH:40});},hidePopUp:function(){$('.cantfind_popup').fadeOut();$('.overlay').fadeOut();$('.cantfind_popup').remove();$('.overlay').hide();return false;}}
var PO_step2_search={init:function(){if($('.sphinxsearch_popup').length>0&&$('.overlay').length>0){PO_step2_search.placePopUp();$('.sphinxsearch_popup .close, .sphinxsearch_popup .noThankYou').click(PO_step2_search.hidePopUp);$('#step2_search_p_text_input').focus(function(){$('#step2_search_p_text_input').val('');});$('#step2_search_p_text_input').blur(function(){if($('#step2_search_p_text_input').val().length<1)
$('#step2_search_p_text_input').val(Drupal.settings.sphinxDefaultSearch);});$('.sphinxsearch_popup .popup_sphinx_button_search').click(function(){$('#step2-sphinx-search-popup-form').submit();});$('.sphinxsearch_popup .popup_sphinx_button_browse').click(function(){$('#step2-sphinx-search-popup2-form').submit();});var fls_browser=$.browser;if(fls_browser.msie||navigator.userAgent.indexOf("Trident")>=0){$('#edit-logo-type').each(function(index,item){$(item).mouseup(function(){var open=$(item).data("isopen"+index)
if(open)setTimeout(function(){$(item).blur()},10);$(item).data("isopen"+index,!open);});});}}},placePopUp:function(){var overlay=$('.overlay:first');var thankYouBox=$('.sphinxsearch_popup');$('.overlay, .sphinxsearch_popup').remove();var docH=$(document).height();var docW=$(document).width();overlay.css({"width":docW+"px","height":docH+"px"});thankYouBox.prependTo('body');overlay.prependTo('body');overlay.show();thankYouBox.show();var bW=$('.sphinxsearch_popup').width();var bH=$('.sphinxsearch_popup').height();var wW=$(window).width();var wH=$(window).height();bW=wW/2-bW/2;bH=wH/2-bH/2;$('.sphinxsearch_popup').css({left:bW,top:bH>40?bH:40});},hidePopUp:function(){$('.sphinxsearch_popup').fadeOut();$('.overlay').fadeOut();$('.sphinxsearch_popup').remove();$('.overlay').hide();return false;}}
function step2_detect_ie_flash(){var is_ie=navigator.appVersion.indexOf("MSIE")!=-1;var flash=swfobject.getFlashPlayerVersion();var has_flash=true;var pluginData='';for(var i=0,l=navigator.plugins.length;i<l;i++){pluginData+=navigator.plugins[i]['name']+',';}
if(flash.major===undefined||flash.major<10||!isFlashEnabled())
has_flash=false;$.ajax({type:"POST",url:Drupal.settings.baseUrl+'/save-user-data',dataType:'post',data:{is_ie:is_ie,has_flash:has_flash,browser:BrowserDetect.browser+' '+BrowserDetect.version,useragent:navigator.userAgent,os:BrowserDetect.OS,flashVers:flash.major?flash.major+'.'+flash.minor:'0',has_cookie:navigator.cookieEnabled,donottrack:navigator.doNotTrack,language:navigator.language,pluginsd:pluginData}});}
function has_query_url(key){var queries={};$.each(document.location.search.substr(1).split('&'),function(c,q){var i=q.split('=');if(i[1]!==undefined){queries[i[0].toString()]=i[1].toString();}});if(key===undefined){return queries;}else{if(queries[key]!==undefined){return queries[key];}else{return false;}}}
var BrowserDetect={init:function(){this.browser=this.searchString(this.dataBrowser)||"An unknown browser";this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version";this.OS=this.searchString(this.dataOS)||"an unknown OS";},searchString:function(data){for(var i=0;i<data.length;i++){var dataString=data[i].string;var dataProp=data[i].prop;this.versionSearchString=data[i].versionSearch||data[i].identity;if(dataString){if(dataString.indexOf(data[i].subString)!=-1)
return data[i].identity;}
else if(dataProp)
return data[i].identity;}},searchVersion:function(dataString){var index=dataString.indexOf(this.versionSearchString);if(index==-1)return;return parseFloat(dataString.substring(index+this.versionSearchString.length+1));},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera",versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.userAgent,subString:"Macintosh",identity:"Mac"},{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]};BrowserDetect.init();function isFlashEnabled()
{var hasFlash=false;try
{var fo=new ActiveXObject('ShockwaveFlash.ShockwaveFlash');if(fo)hasFlash=true;}
catch(e)
{if(navigator.mimeTypes["application/x-shockwave-flash"]!=undefined)hasFlash=true;}
return hasFlash;}
function fls_snap_online_chat(){if(Drupal.settings.show_snap_chat!=2){setTimeout(function(){fls_snap_online_chat()},5*1000);return false;}
SnapABug.getAgentStatusAsync(function(online){if(online&&$('#SnapABug_WP').css('display')=='none'){SnapEngage.openProactiveChat(true,false);}});return true;}
function snapengage_init(){SnapEngage.setWidgetId('d9a5fcca-2d61-4e11-ad2c-68a909ef41ac');if(typeof(SnapFLS)!='undefined')
SnapABug=SnapFLS;snapengage_init_process();}
function snapengage_init_process(){SnapEngage.clearAllCookies();if(Drupal.settings.snapengage_init_name){SnapABug.setUserEmail(Drupal.settings.snapengage_init_name);SnapABug.setCallback('MessageSubmit',function(){SnapEngage.clearAllCookies();SnapABug.setUserEmail(Drupal.settings.snapengage_init_name);});}
SnapABug.setCallback('Open',function(status){if($('#flash_container').length>0){$('#flash_container').css('visibility','hidden');$('#flash_container').css('height','0px');Drupal.settings.inner_padding=$('.inner_step3').css('padding');$('.inner_step3').css('padding','0px');}});SnapABug.setCallback('Close',function(type,status){if($('#flash_container').length>0){var vis='visible';var height='';var pad=Drupal.settings.inner_padding;if($('#flash_promo_products_popup').length>0&&$('#flash_promo_products_popup').css('display')=='block')
{vis='hidden';height='0px';pad='0px';}
$('#flash_container').css('visibility',vis);$('#flash_container').css('height',height);$('.inner_step3').css('padding',pad);}});SnapABug.setLocale(Drupal.settings.snapengage_init_data.language_code);SnapABug.initDropdown(Drupal.settings.snapengage_init_data.initDropdown);for(var key in Drupal.settings.snapengage_init_data.questions){SnapABug.addDropdownItem(key,Drupal.settings.snapengage_init_data.questions[key]);}
if(Drupal.settings.snapengage_init_data.page_is_contact_us)
SnapABug.showScreenshotOption(false);}
var PP_UL={init:function(element){if($('.logo_promo_product_lightbox').length>0&&$('.overlay').length>0){PP_UL.placePopUp(element);$('html, body').animate({scrollTop:0},'fast');$('.product_buynow').click(function(){var id=$(this).attr('id');if(id){id=id.split('_');if(!(id[1]>0))
return true;}
fls_store_promo_product_click_direct_save(this);if(id)return false;});$('#fls_products_lp .products_lp_title').each(function(){var height=$(this).height();if(height>30){var text=$(this).text();var html='<div class="products_title_narrow">'+text+'</div>';$(this).html(html);}});if(Drupal.settings.show_step4_offer!=undefined&&Drupal.settings.browser_details_name!='ie'){$('#popunder_click, #popunder_click_close').css('display','block');}
$('.logo_promo_product_lightbox .close, .logo_promo_product_lightbox .noThankYou, .logo_promo_product_lightbox #continue_button ').click(function(){$(this).attr('href',$('.logo_promo_product_lightbox .medium-blue-btn-close').attr('href'));});$('#logo_promo_product_lightbox_content .store_checkout_logo_footer a, .logo_promo_product_lightbox .close').click(function(){var url=$(this).attr('href');if(url.indexOf('step4')>-1&&Drupal.settings.show_step4_offer!=undefined&&Drupal.settings.show_step4_offer){if(typeof Drupal.settings.offer_flash_submited=='undefined'&&Drupal.settings.browser_details_name!=='op'&&Drupal.settings.browser_details_name!=='chrome')
fls_new_page(url+'?offer=1','width=1000, height=690,scrollbars=yes,resizable=yes, location=yes, toolbar=yes, menubar=yes','step4');}});}},placePopUp:function(element){var overlay=$('.overlay:first');var thankYouBox=$('.logo_promo_product_lightbox');$('.overlay, .logo_promo_product_lightbox').remove();var docH=$(document).height();var docW=$(document).width();overlay.css({"width":docW+"px","height":docH+"px"});thankYouBox.prependTo('body');overlay.prependTo('body');thankYouBox.show();var bW=$('.logo_promo_product_lightbox').width();var bH=$('.logo_promo_product_lightbox').height();var wW=$(window).width();var wH=$(window).height();bW=wW/2-bW/2;bH=wH/2-bH/2;$('.logo_promo_product_lightbox').css({left:bW,top:bH>40?bH:40});$('.overlay:first').show();},hidePopUp:function(){$('.logo_promo_product_lightbox').hide();$('.overlay').hide();return false;}}
var BC_UL={init:function(element){if(Drupal.settings.logoweb_split_set){if($('.logoweb_popup').length){if(!$('.logoweb_popup.initialized').length){LOGOWEB.init();return;}}}
if($('.logo_business_card_lightbox').length>0&&$('.overlay').length>0){fls_events_add('logoweb_bc_init');BC_UL.placePopUp(element);$('html, body').animate({scrollTop:0},'fast');$('.logo_business_card_lightbox .close, .logo_business_card_lightbox .noThankYou, .logo_business_card_lightbox .medium-blue-btn-close ').click(function(){BC_UL.hidePopUp()
if(fls_show_logowebv2_lightbox()){return false;}
if($('.products_lp_box').length>0&&!$('.logoweb_popup.initialized').length){PP_UL.init();}else{window.location=$('.logo_business_card_lightbox .medium-blue-btn-close').attr('href');}
return false;});$('body').on('click','#business_card_lightbox_content .bc_action .medium-orange-btn',function(event){fls_events_add('bc_upsell_direct_save');});var right_click=new right_click_disabled();right_click.apply($('#business_card_lightbox_content img'));if($('body.mobile_view .bc_fix_container .bc_image').length>0){$('body.mobile_view .bc_fix_container .bc_image').click(function(){fls_events_add('accepted_bc_upsell');var new_url=$(this).parent().find('.bc_action a').attr('href');window.location=new_url;});}
$('.thankYouBox.logo_business_card_lightbox_logoweb .orangeButton').click(function(){flash_promo_products_finish();});$('.thankYouBox.logo_business_card_lightbox_logoweb .bc_container').click(function(){fls_events_add('bc_upsell_direct_save');window.location=$(this).find('.bc_action a').attr('href')});}else{fls_has_no_bc}},placePopUp:function(element){if(typeof Drupal.settings.save_logo_timer_obj['bc_editor_end']=='undefined')Drupal.settings.save_logo_timer_obj['bc_editor_end']=Date.now();fls_events_add('bc_suggest_step2_timer',(Drupal.settings.save_logo_timer_obj['bc_editor_end']-Drupal.settings.save_logo_timer_obj['bc_editor_start']))
var overlay=$('.overlay:first');var thankYouBox=$('.logo_business_card_lightbox');$('.overlay, .logo_business_card_lightbox, .TB_overlayBG').remove();var docH=$(document).height();var docW=$(document).width();overlay.css({"width":docW+"px","height":docH+"px"});thankYouBox.prependTo('body');overlay.prependTo('body');thankYouBox.show();var bW=$('.logo_business_card_lightbox').width();var bH=$('.logo_business_card_lightbox').height();var wW=$(window).width();var wH=$(window).height();bW=wW/2-bW/2;bH=wH/2-bH/2;$('.logo_business_card_lightbox').css({left:bW,top:bH>40?bH:40});$('.overlay:first').show();},hidePopUp:function(){$('.logo_business_card_lightbox').hide();$('.overlay').hide();return false;}}
var BC_FREE_UL={init:function(element){if($('.bc50v5_popup').length>0&&$('.overlay').length>0){BC_FREE_UL.placePopUp(element);$('html, body').animate({scrollTop:0},'fast');$('.bc50v5_popup .close, .bc50v5_popup .medium-blue-btn-close').click(function(){BC_FREE_UL.hidePopUp();PP_UL.init();return false;});$('.bc50v5_popup .medium-orange-btn').unbind('click');$('.bc50v5_popup .medium-orange-btn').click(function(){fls_events_add('bc_upsell_direct_save');});}},placePopUp:function(element){var overlay=$('.overlay:first');var thankYouBox=$('.bc50v5_popup');$('.overlay, .bc50v5_popup').remove();var docH=$(document).height();var docW=$(document).width();overlay.css({"width":docW+"px","height":docH+"px"});thankYouBox.prependTo('body');overlay.prependTo('body');thankYouBox.show();var bW=$('.bc50v5_popup').width();var bH=$('.bc50v5_popup').height();var wW=$(window).width();var wH=$(window).height();bW=wW/2-bW/2;bH=wH/2-bH/2;$('.bc50v5_popup').css({left:bW,top:bH>40?bH:40});$('.overlay:first').show();},hidePopUp:function(){$('.bc50v5_popup').remove();$('.overlay').hide();return false;}}
function flash_bc50v5_daisy_process_images(lid){var src=$('.bc50v5_popup #daisyImg img').attr('rel');src=src.replace('logoId',lid);$('.bc50v5_popup #daisyImg img').attr('src',src);}
function step2_save_button_click(o){if(typeof o=='undefined'){o=this;}
if(typeof Drupal.settings.step2_has_logosteps_logo!='undefined'){fls_events_add('logosteps_saved_logo_new');}else{fls_events_add('logosteps_saved_logo_old');}
if(typeof Drupal.settings.logosteps_step2_current_page!='undefined'){fls_events_add('logosteps_page_logo_saved_from',Drupal.settings.logosteps_step2_current_page);}
var workflow=has_query_url('workflow');if($(o).hasClass("step2-save-logo")){if(Drupal.settings.is_flstheme&&$('.mobile_view').length==0){ga('send','event','Step2','Click','Save Logo');}
fls_events_add('logo_step2_save');if(!workflow)fls_events_add('logo_step2_save_logo_flow');}
else{if(Drupal.settings.is_flstheme&&$('.mobile_view').length==0){ga('send','event','Step2','Click','Edit Logo');}
fls_events_add('logo_step2_edit');if(!workflow)fls_events_add('logo_step2_edit_logo_flow');}
if(Drupal.settings.display_color_matched_bc){config_bc_suggestion_lightbox();}
step2_save_start_process(o);}
function step2_filters_init(){$('.step2_filter_entry').click(function(e){e.preventDefault();step2_filters_select(this);return false;});$('.apply_filters').click(function(e){e.preventDefault();step2_filters_submit();return false;});$('.clear_filters').click(function(e){e.preventDefault();step2_filters_clear();return false;});step2_filters_initialize();}
function step2_filters_select(o){if(!$(o).hasClass('step2_filter_entry')){o=$(o).parents('.step2_filter_entry');}
var filter_type=$(o).attr('data-filter-type');var filter_name=$(o).attr('data-filter');if(filter_type=='fonts'&&step2_filters_condition_text()){return false;}
if(filter_type=='layout'&&step2_filters_condition_text()){return false;}
if(filter_type=='layout'&&step2_filters_condition_icon()){return false;}
var checkbox=$(o).find('input');checkbox_toggle(checkbox);step2_filters_set_classes();}
function checkbox_is_checked(checkbox){return $(checkbox).attr('checked')=='checked';}
function checkbox_toggle(checkbox){if(checkbox_is_checked(checkbox)){checkbox_toggle_disable(checkbox);}else{checkbox_toggle_enable(checkbox);}}
function checkbox_toggle_enable(checkbox){$(checkbox).attr('checked','checked');}
function checkbox_toggle_disable(checkbox){$(checkbox).attr('checked',false);}
function filter_is_selected(o){return checkbox_is_checked($(o).find('input'));}
function filter_selected_count(filter_name){var count=0;$('.step2_filter_entry_'+filter_name).each(function(){if(filter_is_selected(this))count++;});return count;}
function filter_clear_filter(filter_name){$('.step2_filter_entry_'+filter_name).each(function(){var checkbox=$(this).find('input');checkbox_toggle_disable(checkbox);});}
function step2_filters_condition_text(){return filter_is_selected($('.step2_filter_entry_style_text'))&&filter_selected_count('style')<2;}
function step2_filters_condition_icon(){return!filter_is_selected($('.step2_filter_entry_style_icon'));}
function step2_filters_set_classes(){if(step2_filters_condition_text()){$('#step2_filters').addClass('filters_text_only');filter_clear_filter('layout');filter_clear_filter('fonts');step2_filters_disable_checkboxes('layout');step2_filters_disable_checkboxes('fonts');}else{$('#step2_filters').removeClass('filters_text_only');step2_filters_enable_checkboxes('layout');step2_filters_enable_checkboxes('fonts');}
if(step2_filters_condition_icon()){$('#step2_filters').addClass('filters_noicons');filter_clear_filter('layout');step2_filters_disable_checkboxes('layout');}else{$('#step2_filters').removeClass('filters_noicons');step2_filters_enable_checkboxes('layout');}}
function step2_filters_enable_checkboxes(filter_name){$('.step2_filter_entry_'+filter_name).each(function(){var checkbox=$(this).find('input');$(checkbox).attr('disabled',false);});}
function step2_filters_enable_checkboxes_array(filter_name,arr){$.each(arr,function(k,v){var o=$('.step2_filter_entry_'+filter_name+'_'+v);var checkbox=$(o).find('input');checkbox_toggle_enable(checkbox);});}
function step2_filters_disable_checkboxes(filter_name){$('.step2_filter_entry_'+filter_name).each(function(){var checkbox=$(this).find('input');$(checkbox).attr('disabled',true);});}
function step2_filter_get_values(filter_name,attr_name){attr_name=attr_name?attr_name:'data-filter';var response=[];$('.step2_filter_entry_'+filter_name).each(function(){if(filter_is_selected(this)){response.push($(this).attr(attr_name));}});return response.join(',');}
function step2_filters_submit(){fls_events_add('clicked_apply_filters');$('#edit-logosteps-logo-type').val(step2_filter_get_values('style'));$('#edit-logosteps-logo-font-types').val(step2_filter_get_values('fonts'));$('#edit-logosteps-logo-font').val(step2_filter_get_values('fonts','data-fonts'));$('#edit-logosteps-logo-layout').val(step2_filter_get_values('layout'));$('#logosteps-form').submit();}
function step2_filters_clear(){filter_clear_filter('style');filter_clear_filter('fonts');filter_clear_filter('layout');step2_filters_set_classes();}
function step2_filters_set_initial(filter_name,data){step2_filters_enable_checkboxes_array(filter_name,data);}
function step2_filters_initialize(){step2_filters_set_classes();if($('body').hasClass('mobile_view')&&!$('body').hasClass('step2_gallery_mobile'))return;if(!$('body').hasClass('step2_gallery_mobile'))$('body').addClass('min1280');if(typeof Drupal.settings.logosteps=='undefined')return;if(typeof Drupal.settings.logosteps.logo_type!='undefined'){if(Drupal.settings.logosteps.logo_type.length>0){step2_filters_set_initial('style',Drupal.settings.logosteps.logo_type);}}
if(typeof Drupal.settings.logosteps.logo_layout!='undefined'){if(Drupal.settings.logosteps.logo_layout.length>0){step2_filters_set_initial('layout',Drupal.settings.logosteps.logo_layout);}}
if(typeof Drupal.settings.logosteps.logo_fonts_type!='undefined'){if(Drupal.settings.logosteps.logo_fonts_type.length>0){step2_filters_set_initial('fonts',Drupal.settings.logosteps.logo_fonts_type);}}
step2_filters_set_classes();}
function add_upsell_to_cart(domain,gotopage){lang="";if(Drupal.settings.lang!=''){lang=Drupal.settings.lang+"/";}
var fields={pid:463,reduce_flow:"1",final_destination:gotopage,website_searched:domain,websites_domain_suggestion:domain,website_upsells:523};var fields_str='';for(var i in fields){fields_str+='<input type="hidden" name="'+i+'" value="'+fields[i]+'" />';}
$('body').append('<form id="checkoutwebsitebundle_form" style="display:none;" action="'+Drupal.settings.baseUrl+'/'+lang+'websites/domain" method="post">'+fields_str+'</form>');$('#checkoutwebsitebundle_form').submit();return false;};$(document).ready(function(){$('input[id^="edit-password"]').focus(function(){$('.pass_label').hide();});$('input[id^="edit-password"]').change(function(){$('.pass_label').hide();});$('.pass_label').click(function(){$(this).hide();$(this).prev('div').find('input[id^="edit-password"]').trigger('focus');});$('input[id^="edit-password"]').blur(function(){if($(this).val()===""){$(this).parent().next(".pass_label").show();}});if(Drupal.settings.recomlogoparent!=undefined&&Drupal.settings.recomlogoparent){show_loading_overlay();$("#preview_logo2").hide();recom_start_saving_process();}
var eventFree=0;var eventCoupon=0;if(Drupal.settings.step4_offer_focus!=undefined&&Drupal.settings.step4_offer_focus==1){if(!$.cookie("has_logo"))ga('send','event','Leave Behind Upper Funnel','Open','Popup Opened');else ga('send','event','Leave Behind Logos','Open','Popup Opened');step4_offer_refresh_counter=0;step4_offer_refresh_interval=setInterval(function(){step4_offer_refresh_counter++;var logo_details=$.cookie("leavebehind_logodetails");if(logo_details!==null){clearInterval(step4_offer_refresh_interval);$.cookie('leavebehind_logodetails',null,{path:'/'});if(step4_offer_refresh_counter>1){setTimeout(function(){window.location=window.location},1000);}}},500);$(window).focus(function(){var status=fls_new_page_get_status('step4');if(status!=0){$('#step4_special_offer1').hide();$('#step4_special_offer3').hide();$('#step4_special_offer2').show();if(!eventCoupon){ga('send','event','Leave Behind Logos','Open','10% Off Promo Leave Behind Triggered');fls_events_add('leavebehind_coupon_trigger');eventCoupon=1;}}else{if(!$.cookie("has_logo")){$('#step4_special_offer2').hide();$('#step4_special_offer3').show();$('#step4_special_offer1').hide();fls_events_add('leavebehind_upper_trigger');var temp;temp=$("#step4_special_offer1 #edit-submit");temp.attr("id","other-edit-submit");temp1=$("#step4_special_offer3 #other-edit-submit");temp1.attr("id","edit-submit");}
else{$('#step4_special_offer2').hide();$('#step4_special_offer3').hide();$('#step4_special_offer1').show();fls_events_add('leavebehind_account_trigger');var temp;temp=$("#step4_special_offer3 #edit-submit");temp.attr("id","other-edit-submit");temp1=$("#step4_special_offer1 #other-edit-submit");temp1.attr("id","edit-submit");if(!eventFree){ga('send','event','Leave Behind Logos','Open','Free FB Leave Behind Triggered');eventFree=1;}}}});}
$('.tooltip').tooltip({track:true,delay:0,showURL:false,showBody:" - ",fade:250});if(Drupal.settings.step4_page)
{window.onbeforeunload=function(){return Drupal.settings.leave_page_message_step4};$("a").click(function(){window.onbeforeunload=null;});}
if($('#step4').length>0||Drupal.settings.on_buscards_step4){if(Drupal.settings.step2save_url){$.ajax({url:Drupal.settings.step2save_url,type:'post',data:'json=1&action=save',dataType:'json',success:function(result){if(result['status']=='1'){var lid=result.step2_direct_save||0;}}});}}
$('#step4-savelogo-form #edit-submit').click(function(){additionalErrorHTML="";var emailValid=1;$("#rsvErrors").html("").css('display','none');var errorHTML=Drupal.settings.step4_savelogo_form.form_header_error;if($('#step4-savelogo-form input[name="email"]').val()==""){emailValid=0;additionalErrorHTML+=Drupal.settings.step4_savelogo_form.email.required;$('#step4-savelogo-form input[name="email"]').addClass('errorFieldDemo5');$('#step4-savelogo-form #edit-email-label').addClass('signup_error_label');$('#step4-savelogo-form #edit-email-label-icon').show();}else if(!isValidEmail($('#step4-savelogo-form input[name="email"]').val())){emailValid=0;additionalErrorHTML+=Drupal.settings.step4_savelogo_form.email.invalid;$('#step4-savelogo-form input[name="email"]').addClass('errorFieldDemo5');$('#step4-savelogo-form #edit-email-label').addClass('signup_error_label');$('#step4-savelogo-form #edit-email-label-icon').show();}else{$('#step4-savelogo-form input[name="email"]').removeClass('errorFieldDemo5');$('#step4-savelogo-form #edit-email-label').removeClass('signup_error_label');$('#step4-savelogo-form #edit-email-label-icon').hide();}
if($('#step4-savelogo-form input[name="password"]').val()==""){additionalErrorHTML+=Drupal.settings.step4_savelogo_form.password.required;$('#step4-savelogo-form input[name="password"]').addClass('errorFieldDemo5');$('#step4-savelogo-form #edit-password-label').addClass('signup_error_label');$('#step4-savelogo-form #edit-password-label-icon').show();}else{$('#step4-savelogo-form input[name="password"]').removeClass('errorFieldDemo5');$('#step4-savelogo-form #edit-password-label').removeClass('signup_error_label');$('#step4-savelogo-form #edit-password-label-icon').hide();}
if(additionalErrorHTML&&!emailValid){errorHTML+=additionalErrorHTML;$("#rsvErrors").css("display","block");$("#rsvErrors").html(errorHTML);return false;}else if(emailValid){$('#step4-savelogo-form').submit();}
return false;});$('#step4-signup-form #edit-submit').click(function(){$('.pass_label').hide();additionalErrorHTML="";$("#rsvErrors").html("").css('display','none');var errorHTML=Drupal.settings.step4_signup_form.form_header_error;var langvs=Drupal.settings.lang;var allowedLang=[];var simple_version=($.inArray(langvs,allowedLang)!=-1)?1:0;if(!simple_version){if(typeof Drupal.settings.notallowedIDs!='undefined'){var notallowedIDs=Drupal.settings.notallowedIDs;}else{var notallowedIDs=["088","88","80"];}
var simple_version=($.inArray($('#edit-country').val(),notallowedIDs)==-1)?1:0;simple_version=($.inArray('all',notallowedIDs)==-1)?simple_version:0;}
if(!simple_version){if(Drupal.settings.simple_version)
simple_version=1;}
if(!simple_version){if($('#step4-signup-form input[name="first_name"]').val()==""||($('#step4-signup-form input[name="first_name"]').val()==$('#step4-signup-form input[name="first_name"]').attr('rel'))){additionalErrorHTML+=Drupal.settings.step4_signup_form.first_name.required;$('#step4-signup-form input[name="first_name"]').addClass('errorFieldDemo5');$('#step4-signup-form #logo_first_name_label').addClass('signup_error_label');$('#step4-signup-form #logo_first_name_error_icon').show();}else{$('#step4-signup-form input[name="first_name"]').removeClass('errorFieldDemo5');$('#step4-signup-form #logo_first_name_label').removeClass('signup_error_label');$('#step4-signup-form #logo_first_name_error_icon').hide();}
if($('#step4-signup-form input[name="last_name"]').val()==""||($('#step4-signup-form input[name="last_name"]').val()==$('#step4-signup-form input[name="last_name"]').attr('rel'))){additionalErrorHTML+=Drupal.settings.step4_signup_form.last_name.required;$('#step4-signup-form input[name="last_name"]').addClass('errorFieldDemo5');$('#step4-signup-form #logo_last_name_label').addClass('signup_error_label');$('#step4-signup-form #logo_last_name_error_icon').show();}else{$('#step4-signup-form input[name="last_name"]').removeClass('errorFieldDemo5');$('#step4-signup-form #logo_last_name_label').removeClass('signup_error_label');$('#step4-signup-form #logo_last_name_error_icon').hide();}}
if(!$('#step4-signup-form input[name="agree_terms"]').is(':checked')&&!Drupal.settings.step4_terms_acceptance_set){additionalErrorHTML+=Drupal.settings.step4_signup_form.agree_terms.required;$('#step4-signup-form input[name="agree_terms"]').addClass('errorFieldDemo5');$('#step4-signup-form #edit-agree-terms-wrapper label').addClass('signup_error_label');$('#step4-signup-form #termd_and_conditions_error_icon').show();}else{$('#step4-signup-form input[name="agree_terms"]').removeClass('errorFieldDemo5');$('#step4-signup-form #edit-agree-terms-wrapper label').removeClass('signup_error_label');$('#step4-signup-form #termd_and_conditions_error_icon').hide();}
var emailValid=1;if($('#step4-signup-form input[name="email"]').val()==""){emailValid=0;additionalErrorHTML+=Drupal.settings.step4_signup_form.email.required;$('#step4-signup-form input[name="email"]').addClass('errorFieldDemo5');$('#step4-signup-form #edit-email-label').addClass('signup_error_label');$('#step4-signup-form #edit-email-label-icon').show();}else if(!isValidEmail($('#step4-signup-form input[name="email"]').val())){emailValid=0;additionalErrorHTML+=Drupal.settings.step4_signup_form.email.invalid;$('#step4-signup-form input[name="email"]').addClass('errorFieldDemo5');$('#step4-signup-form #edit-email-label').addClass('signup_error_label');$('#step4-signup-form #edit-email-label-icon').show();}else if(emailValid){$('#step4-signup-form input[name="email"]').removeClass('errorFieldDemo5');$('#step4-signup-form #edit-email-label').removeClass('signup_error_label');$('#step4-signup-form #edit-email-label-icon').hide();}
if($('#step4-signup-form input[name="password"]').val()==""){additionalErrorHTML+=Drupal.settings.step4_signup_form.password.required;$('#step4-signup-form input[name="password"]').addClass('errorFieldDemo5');$('#step4-signup-form #edit-password-label').addClass('signup_error_label');$('#step4-signup-form #edit-password-label-icon').show();}else{$('#step4-signup-form input[name="password"]').removeClass('errorFieldDemo5');$('#step4-signup-form #edit-password-label').removeClass('signup_error_label');$('#step4-signup-form #edit-password-label-icon').hide();}
if(!simple_version){if($('#step4-signup-form input[name="phone"]').val()==""){additionalErrorHTML+=Drupal.settings.step4_signup_form.phone.required;$('#step4-signup-form input[name="phone"]').addClass('errorFieldDemo5');$('#step4-signup-form #phone_label').addClass('signup_error_label');$('#step4-signup-form #phone_error_icon').show();}else if(!validate_phone_function($('input[name="phone"]').val())){additionalErrorHTML+=Drupal.settings.step4_signup_form.phone.invalid;$('#step4-signup-form input[name="phone"]').addClass('errorFieldDemo5');$('#step4-signup-form #phone_label').addClass('signup_error_label');$('#step4-signup-form #phone_error_icon').show();}else{$('#step4-signup-form input[name="phone"]').removeClass('errorFieldDemo5');$('#step4-signup-form #phone_label').removeClass('signup_error_label');$('#step4-signup-form #phone_error_icon').hide();}}
if(additionalErrorHTML&&!emailValid){errorHTML+=additionalErrorHTML;$("#rsvErrors").css("display","block");$("#rsvErrors").html(errorHTML);return false;}else if(emailValid){$('#step4-signup-form').submit();}
return false;});$('#step4-savelogo-form,#step4-signup-form').each(function(){var langvs=Drupal.settings.lang;var allowedLang=[];var notallowedCountriesEN=Drupal.settings.notallowedCountriesEN;var simple_version=($.inArray(langvs,allowedLang)!=-1)?1:0;if(!simple_version)
simple_version=Drupal.settings.simple_version;if(!simple_version){simple_version=($.inArray(Drupal.settings.country_geoip,notallowedCountriesEN)==-1)?1:0;simple_version=($.inArray('all',notallowedCountriesEN)==-1)?simple_version:0;if(!simple_version){$('.optionalField').show();}else{$('.optionalField').hide();if(langvs=="cn"){$('.optionalField-zh-hans').show();}}}else{$('.optionalField').hide();if(langvs=="cn"){$('.optionalField-zh-hans').show();}}
$('#edit-country').change(function(){var notallowedIDs=Drupal.settings.notallowedIDs;var simple_version=($.inArray($(this).val(),notallowedIDs)==-1)?1:0;simple_version=($.inArray('all',notallowedIDs)==-1)?simple_version:0;if(!simple_version)
simple_version=Drupal.settings.simple_version;if(!simple_version){$('.optionalField').show();}else{$('.optionalField').hide();if($(this).val()=="50"){$('.optionalField-zh-hans').show();}}});});});function switchOfferPages(){var status=fls_new_page_get_status('step4');if(status!=0){$('#step4_special_offer1').hide();$('#step4_special_offer3').hide();$('#step4_special_offer2').show();}else{if(!$.cookie("has_logo")){$('#step4_special_offer2').hide();$('#step4_special_offer3').show();$('#step4_special_offer1').hide();}
else{if($.cookie("signup_begin")){$("#step4_special_offer1 .form_signup_end").hide();$("#step4_special_offer1 .form_signup_begin").show();$("#step4_special_offer1 .form_signup_begin .signupBtn").show();}
else if($.cookie("signup_end")){$("#step4_special_offer1 .form_signup_begin").hide();$("#step4_special_offer1 .form_signup_end").show();$("#step4_special_offer1 .form_signup_end .signupBtn").show();}
$('#step4_special_offer2').hide();$('#step4_special_offer3').hide();$('#step4_special_offer1').show();}}};;"use strict";var FLSEditorCore=function(canvasId,_settings){var ctx_transform=[1,0,0,1,0,0];var canvas=null,ctx=null,ccanvas=null,cctx=null,ghostcvs=null,viewframecvs=null,viewframecvstrim=null,overlaymask=null,view_topleft={x:0,y:0},elements=[],layout_elements=[],layout_visible=false,disable_layout_element_select=false,targetFps=60,settings={width:840,height:431,zoom:1,viewFrame:{offcenter:0,width:480,height:290,fill:'rgba(255,255,255, 0.5)',paper_color:'rgb(255,255,255)',lcolor:'#666',lwidth:2,dash:[11.1,8],shrink:[0,0],paper:false,message:'',message_color:'rgb(255,0,0)',message_font:'arial,verdana,sans-serif',paper_checker:false,shrink_offset_x:0},pluginparams:{},kb_tip_msg:'',layout_zones:false,watermark_str:false},animPrevframeTime=0,animId=null,curFps=0,doAnimation=true,animCallback=function(){},eventCallback=function(){},plugin_names=[],plugins=[],KEYS={LEFT:37,UP:38,RIGHT:39,DOWN:40};if(typeof(_settings)=='object'){jQuery.extend(true,settings,_settings);}
var mobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|PlayBook|BB10|IEMobile|Windows Phone/i.test(navigator.userAgent);var wp_mobile=/IEMobile/i.test(navigator.userAgent);var canvasWrapper=null;var edit_operation='op:none',dragstart=null;var canvasbgimg='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNXG14zYAAAAnSURBVCiRY/z//z8DseDNmzf/mYhWDQWjGoaoBpY3b94QnzYYGBgAmewKnSmh86IAAAAASUVORK5CYII=';var watermark='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAH0AAAASCAYAAAB2ItGqAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNXG14zYAAAUPSURBVGiB7Zlpb1tVEIafsePEWR2nzdamCFIoIMT//yEIgSoKFV1C7MRxnNjxPnyY9/je3jh8aBENikey7vWcc2Z5ZzuWzd1Z0MOi0uc2YEH/PS2C/gBpEfQHSEtFhplVgSOgDEwBAwbAG3effowSMysBz4Chu598vLn/qANgC3gKVAnffgfOP+XeYma7wCHwq7sPP93Sz0+3gi7eNtAGzvV9AriZlQEnEmGiZ1nnJp5DV3vRPoC13N4PyCJiSfY0ySnwk468fNP+KbAKHAMd4D2wB+wDF8C0IGvi7pjZUk62FdaM6IRtoA+MpJecH1N395zsxJsWbLyFT05WioG7+6Tg90xegZfH9QOf5uBKUe+8oCNnb4BrfR/LuedAyvYG8IioLgcuzey91rYI0EvACXB1hx7MbEVyNrW/BZyaWYUI2joB+Crwysz6QA3YEe/GzF7rbFl7+8Cfcniq4O4TiWfAX0RyfCMzBuJXgD/0/UD4dIAvpHuQ87kCtM3sVHtrwmEoe5aIjpmSp0UUUfIbyTqUvWUzewt0gV2grnNJ3hrwXHFB+/qypQy8za1hZsuKwcTMGimh4O6ZPpJBXwIv5BBSvC4gNoAnUnQl4zdk8FfiTYh2C1lFFelIuloE2Idmti7Ze0BT9mwKwE3Z1dOZGrDr7l05vg/8KICqAvdIdp3L50NVwQhYJpL7nd63c4B1ZeOGdB8RY6qtM5vS/1S2d+RLneiWa0SnueR2ga1I3gB4rec2WcFcyL8tYTsmgnshW/e09o6IyUZB/mMiDs+IcTejuyp9SY41iYzuiT8BGu7eMrNkyEj8Gxn1iOgGfSLQWwITCoEX8OvAqbs3zeyMCNiB9CZdV3LCBMzQ3U8low7UzOycDOAtfV4AP8npgfzqy84KqkB3b0hWlwhYsrMlf0Y6WwU67n6W82GHuPuM9byW7K54qZJbZlbK3YuWZUfD3cdE4DGzY/mXbFohkqsnXHvufm1mQ+DS3Qdm5mTtPlEqxtloSjQv6Glmd939urBmufeJjO7LIJPDUzk91aejvU60sCWyDjNOdqgi13SmSyRDTSNjhWx2OVDSvExybrT/GHjp7g0zuySqsCr9Fe2znG2lgk8N4Dvx2prtZQLsmW+6mJaJ7pGSyIVDWc8BUYUVoiq/Bn5WgCAbkxvEaEzJdQkcqNuMdX5EVunJ51LufSqMZuTuFxpH4+IFdF7QZxekOWuV3JlLIpNSG1slZmWLaFs18a/IAK6TBbBCVOF7ogUlGQMC/CrwLfBDzmG0Vteai98kS4jvzexC+tO9JP162CFA7pAFftZ93P3KzHqy8XUOo1XtOyHuAS/I7g8NosNs61wVOCOqc49IgNQBRsTYWnL3V2bWJEbNGtFR3gjDx8R4Spj/lvMv2Zu3/YZCC5c/vSIPwObc+JYFatvdB4W1feBa8zO1ngMB0HL3tviPicobA6d61sVLlVUGTtSedgXsGDhz96Euco+074aY4y/V2jYkD6LFdaR3NXdmCjTdva+1HaLlj6RjYGabRCXkL0CrQCUnc50IYNPdJ2aW5q4TY2mobvAEXfzc/Vydq66zTvx07Mn2krt3tGdPuPSFR/rZvE2MgAslY4UojK67j82sBvTlx3rEeH6Qi3Qr6PeF1O4OiKqsEJX7Swrigj6e7rrI3QfqkLXLKfCKaP0L+kS6t5WeyMy47zb+3+jeB31B/z4t/nB5gGTE7XFBD4eu/wb0hTQSf2IcvwAAAABJRU5ErkJggg==';var checker_pattern_img='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAK6wAACusBgosNWgAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNXG14zYAAAAWdEVYdENyZWF0aW9uIFRpbWUAMDMvMTMvMTgXIMLQAAAANklEQVQ4jWP8//8/AzFgwaI5vsSoYyLKNBLAqIGjBg4GA1mIzQEJcSmbiVE3+L08auCogWQAACIVCVIjyDgpAAAAAElFTkSuQmCC';var checker_pattern=null;var watermarkimg=new Image();if((typeof(settings.watermark_str)=='string')&&settings.watermark_str.length){var wtrmtxtfsz=10;var wmcvs_height=18;var cvsfont='bold '+wtrmtxtfsz+'px arial,verdana,sans-serif';settings.watermark_str+='  \u2022  ';var twrmeheights=FLSUtil.measureText(settings.watermark_str,'sans-serif',wtrmtxtfsz,true);var wmcnvs=document.createElement('canvas');var wmctx=wmcnvs.getContext('2d');wmctx.font=cvsfont;var wtrtxtmetrics=wmctx.measureText(settings.watermark_str);var wtrtwdth=Math.round(wtrtxtmetrics.width);wmcnvs.width=wtrtwdth;wmcnvs.height=wmcvs_height;wmctx.setTransform(1,0,0,1,0,0);wmctx.save();wmctx.font=cvsfont;wmctx.fillStyle='rgba(0,0,0,0.2)';var wty=twrmeheights.height+((wmcvs_height-twrmeheights.height)/2);if(twrmeheights.descent){wty=wtrmtxtfsz+((wmcvs_height-twrmeheights.height)/2);}
wty-=1;wmctx.fillText(settings.watermark_str,0,wty);wmctx.restore();wmctx.strokeStyle='rgba(0,0,0,0.2)';wmctx.lineWidth=1;wmctx.beginPath();wmctx.moveTo(0,wmcnvs.height)
wmctx.lineTo(wtrtwdth,wmcnvs.height)
wmctx.stroke();watermark=wmcnvs.toDataURL();}
watermarkimg.src=watermark;var _this=this;var mouseCoords={x:0,y:0,clickColor:[0,0,0,0]};var mouseCoords2={x:0,y:0,active:false};var currentObj=null;var undoStack=[];var redoStack=[];var undoSteps=40;var prevtaptime=new Date().getTime();var doubletapdelay=300;var doubletaptolerance=10;var prevMouseCoords={x:0,y:0};var editiconscss='@font-face {\n'+'font-family: "FlsObjectEditIcons";\n'+'src: url(data:font/truetype;charset=utf-8;base64,'+'AAEAAAANAIAAAwBQRkZUTXdB1uYAACDMAAAAHEdERUYAJwBRAAAgpAAAACZPUy8yT+JL9wAAAVgAAABWY21hcNvWSYIAAAIsAAABamdhc3D//wADAAAgnAAA'+'AAhnbHlmUFs8jwAAA/AAABlYaGVhZArcmRcAAADcAAAANmhoZWEDQQEiAAABFAAAACRobXR4H1YATgAAAbAAAAB8bG9jYYReiTwAAAOYAAAAWG1heHAAeAHv'+'AAABOAAAACBuYW1lHasuZgAAHUgAAAIHcG9zdLBOyfYAAB9QAAABSgABAAAAAQAAySlCz18PPPUACwIAAAAAANU3LFIAAAAA1TcsUv9O/7QCAQHCAAAACAAC'+'AAAAAAAAAAEAAAHB/8AALgIA/07/TgIBAAEAAAAAAAAAAAAAAAAAAAATAAEAAAArAewACwAAAAAAAgAAAAEAAQAAAEAAAAAAAAAAAQH5AZAABQAAAUwBZgAA'+'AEcBTAFmAAAA9QAZAIQAAAIABQkAAAAAAAAAAAAAEAAAAAAAAAAAAAAAUGZFZABAADDgGAHA/8AALgHBAEAAAAABAAAAAAAAAgAAAAAAAAACAAAAAgAABgIA'+'ABUCAAALAgAAAAIAAEYCAABGAgAAAAIA//8CAAAAAgD//QIAAAABBAAEAfMAHwAA/4wAAP9OAgAAAgAYAAkAAABGAEYAAP//AAH//QAAAAAAAAAAAEwAAAAB'+'AAAAAQABAAAAAAAAAAAAAwAAAAMAAAADAAAAHAABAAAAAABkAAMAAQAAABwABABIAAAADgAIAAIABgAAADoAaQBtAHfgGP//AAAAAAAwAGkAbAB34AD//wAA'+'/9P/pf+j/5ogEgABAAAAAAAAAAAAAAAAAAAAAAEGAAABAAAAAAAAAAECAAAAAgAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAADBAUGBwgJCgsM'+'DQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAPEAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'+'AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'+'AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABsAKgA3gD2AToBhAGiAdIB7AIeAoQCrgVoBbAGDAZ4BrQG6gcCB0YHkAesB9wH9ggoCI4I1gk8CVQJjAnM'+'CiwLEAtSC4wLxgwADDwMeAysAAoABv/tAfoBkAADAAcACwAPABsAHwAjACcAKwBLAAAlMxUjNxUjNTMVIzUXMxUjAzMVMxUjFSM1IzUzAzMVIzM1MxUnMxUj'+'NzMVIwU3IRcjJyYnJisBFRQXFh8BFSM1NzY3Nj0BIyIHBg8BAUQ0NE4aUBwcMjI2GjQ0GjQ0GhoaNByENDSEMjL+PgQBMAQiAggKDCYQBAYeCKgMGgYEECgK'+'CggCCBs2GxsbGxsbAW/sGjMzGgEGGhoaNBoaGpRsbAkkCgjyFgQFAgEgIAEDBAUb7AoIJAkAAAEAFf/qAesBoAAmAAAlJicmIyIHBhUUFxYXNjMyFhQGIyIn'+'JicmJyY1NDc2MzIXFhczBycBSwwdHiYuISEREBwUHCAsLCAYExMJOCMkOztTSzg4DEZ2ePoiFRYhIS8hGxsOESxALA4NFhcxND9TPDswMEZ4eAAAAAEAC//Q'+'AfUBugAjAAA3JyY1NDYzMh8BNzYzMhYVFA8BFxYVFAYiLwEHBiMiJyY1NDeMaRgvIyEYamsXIyEvF2pqFy9FF2tpFiQjFhgYxGsYISMvGGlpGC8jIRhraRgj'+'IS8XamoXFxghIxgAAAEAAP/BAgABwAAJAAAFITcnBxEhBxc3AgD+rGqqbAFUaqpsP2urawFUa6trAAAAAAMARv/hAboBnwAXAB8AMQAAEzQ2MhYdATMyFh0B'+'FAYjISImPQE0NjsDNTQmIgYVFxQXBxQWOwEyNjUnNjU0JiIGh0dkRxwPFhYP/tYPFhYPHC+UKz4rJREICAYcBggIERYeFgEmMkdHMkEWD7oPFhYPug8WQR8s'+'LB+nFAswBggIBjALFA8WFgACAEb/4QG6AZ8AIwA1AAA3NTQ2OwE1NDYyFh0BFAYiJj0BNCYiBh0BMzIWHQEUBiMhIiY3FBcHFBY7ATI2NSc2NTQmIgZGFg8c'+'R2RHDhMOKz4r3w8WFg/+1g8WlREICAYcBggIERYeFga6DxZBMkdHMgQKDg4KBB8sLB9BFg+6DxYWiBQLMAYICAYwCxQPFhYAAAAAAgAA/84CAAHAAAYADQAA'+'ERcHFwcnBwUXNxcnNyfSS3s8ekgBNnpIBNJLewHAAUxvQ3hGJnlHzQFMbwAAAf///7QB9AHBABoAAAEeARc3ByM3LgEOAR4BFxY2NxcOAS4CNjc2AQY1YCM2'+'AalDKHJuQQJFNzdxJjQ0mpdeAllKMQHAASwoNqNBKxsrYnZfFBQfLSw9KjaCoIUdEwAAAQAAAAECAAGKAAsAABMXNxcHFwcnDwE3J6dZWaenp6dYWqenpwGK'+'dnYBw8QBbGoBw8QAAAH//f+3AfMBwAAbAAABByM3LgEOAR4CNjcXDgEnLgInJjY3Njc2FwHzAd9IIllMJBFAV08VZCaOTjRYOwoQQkQ4P2BKAcDoTxwILVFX'+'PQ0nJzVGSAwIN1U0TpEoIQIDPQAAAAALAAD/9gIAAcAAHQAhACUAKQAtADEANQA5AD0AQQBFAAATIRcjJicmKwERFBcWFxUjNTI3NjURIyIHBgcGFSMlMxUj'+'NzMVIzcVIzUjMxUjETMVIzczFSMXIzUzJzMVIyczFSMTMxEjBAEcBA4LCxAqHQsNG5QiBgcdKREJCgILAXAdHTkdHVc6kDo6Ojo6HR2QOjpXHR1WkJA6HBwB'+'TVcrCwv+/B4GBgQLCwoIIAEACwYpBAOtHR0dOh0dHf5wHTodHR0dHXMdAR3+qgACAAT/4AEBAZkADwAXAAA3MzY3MRYXFgcGBxUnNxU2NwYHIyYnNRbrAQkF'+'BQEBESU0k4tBKgUJASx7mtQRNCYxRBc3ET9akkUddTQRRhRrEgAAAAAGAB8AEQHUAYkAmwCjAUgBUAHjAesAACUeAR0BFAcGByIOAQcGBwYWFx4BHwEOAQ8B'+'BgcmJy4BByIHDgIVBw4BKwEiJyYnNC4BJyYnJgYHDgEjBy4BLwEmJzY3PgEnJicuAiMnLgE9ATQ3Njc+Ajc2NzYmJy4BNSc+AT8BNjcWFx4BNzY3PgI1NzI2'+'OwEyFxYXFB4BFxYXFjY3PgE/AR4BHwEWFwYHDgEXFhceAhcGMjY0JiIGFCUeARUXMBYUFQYHDgIHFBUUHgEXHgEfARQGDwEGByYnJgYHBgcOAR8BDgEHIwYi'+'BiMmJy4CJyIjDgIHDgEPASImJyMmJzY3NiYnJicuAQ8BLgE1JzQmNDU2Nz4CNzQ1LgInLgEvAT4BPwE2NzIXFjY3Njc+AS8BPgEzNzI2MjMWFx4CFzIXPgI3'+'PgE/ATIWMxcWFwYHBhYXMRYXHgE3Bj4BLgEOARYXFhQdAQYPASIOAQcGBwYWHwEOAQ8BBgcmJy4CIwYjDgIPASIGKwEmLwE2LgEnJicmBg8BLgEvASYnNjc+'+'AjUmJzEuAi8BJjQ9ATY3MzI+ATc2NzYmLwE+AT8BNjcWFx4CNzEyNz4CPwE2MjsBFhcVFB4BFzEWFxY2PwEeAR8BFhcGBw4BFBUWFR4CFwYWPgEuAQ4BAQcB'+'AQIFDAcKBAMBAQIDBgQEAQEBAwEBBQUECQgOBQMCBQQFAwIGAQIGBQIBBQQFAgMFDggEBwECAgQBAgQCAggGAwIBAQMECgcRAQECBA0HCgQDAQECAwYEBQEB'+'AwEBBQQFCQgOBQMCBQQFAwIGAQIGBQECBQQFAgMFDggEBwEBAwQBAgQCAggGAwIBAQMECgd5LiAgLiABNAIDAQEDDAYIAwICBwYFBgEBAQEBAwQECwwKBwED'+'BQIBAwIFAQIBAgYCAwUCCAUFAwMFBgkDAwUBAQMFAgEGAwEEBAEEAgEHCQwRAQMBAQMMBggDAgEBBwYFBgIBAQEBAQMDBQsMCQgBAwQDAQMCBQECAQIGAgMF'+'AggFBQMDBQYJAwMFAQEDBQECBgMBBAQBBAECBwkMXisUDSkrFA3ZAQEDEAcLBQMCAQIBBQgBBAEBBQUECAUKBgUDAwQFBgIEAgYCAQcEAQEEBAQCAgUPCA8C'+'BAEBBAECCQUFAQEBAgQJBxABAQIRBwoFBAECAgEFCAEDAgEFBQQIBQoGBQMCBQUGAQUCBgECBgUDBAQDAgUOCQ8CBAEBBAECCQUGAQMECQeALSMGHC0kBbIC'+'BQECBQQCAQQEBAMCBQwHBAYBAQIEAQEEAgIHBgICAQMECQYPAQECBAsGCQQDAQEBAgYDBQEBAwEBBAQECAcMBQIDBAQEAwEFAgEGBAEBAQQEBAICBQ0HAwYC'+'AQIEAQEEAgIHBgIBAQEDBAkGDwEBBAsGCQQDAQEBAgYDBAEBAQMBAQQEBAgHDQUCAgQEBAE8HCkcHCm5AQUBAgIFAgMEAwYFBQIDBAYHBAIFAQECBAIBBQMB'+'BAMBAwIBBggLDwECAQEBBAoFCAICAQEGBgQGAQECAQMDBAoLCAcBAgQDAgICBAIBAQIFAgIFAgcFBAMCBQUIAwMEAQECBQEBBQMEBAEEAQIFCAsPAQMBAQMK'+'BgcDAQEBAgYFBAYBAQIBAgQECgsIBgICBAIBWwwkJxIMJCaNAgUBAgUEAQMDBAICBQwIDQIDAQEEAQIIBQQBAQMDCAcOAQECDwcJBAQBAQIBBQcBAwIBBAQE'+'BwUIBgUCAgQFBQEFAQUCAQYEAwQDAgIFDQcNAgQBAQMBAggEBQEBAQIECAYOAQECDwYJBQMBAQMBBQcBAwEBBQQDCAQJBQUCAwQFBQEvBRkoIAQYKAAAAv+M'+'AAMAdAGJACIALwAAExQHBgcVIzU2NzY1NCcmIyIGBxcWFRQHBiInJjU0NjMyFxYCNjMyFhUUBwYiJyY1dCIiOhYkFBQODhgKEgYGBAwMKAgMQiw2IiK4HBQU'+'HA4OKA4OARw1ISEFJGcDFRQlHhARBAUWDgoTCgoNDBMeKh4e/voeHhQTDw4ODxMAAAAABv9OAAQAsgD+AA0AGQAhACkAMQA5AAAnBTI9ATEnIwcnBycmDwE3'+'FxY/ARcWPwEXFQU3FzcXNx8BJjQmIgYUFjI2FAYiJjQ2MhYUBiImNDYysgFjAVcDNx9bHgIBMzUdAgFZIAEBNlb+oTcgWiE3VwHsHCgcHCgZGyUaGiUcGyYc'+'HCYHAwJRj00edSECAltXIAICdB4BAkyMTwFcInYfTo5RsCoeHioeRygcHCgcHCgdHSgdAAAAAAoAAv/tAfcBkAADAAcACwAPABsAHwAjACcAKwBLAAAlMxUj'+'NxUjNTMVIzUXMxUjAzMVMxUjFSM1IzUzAzMVIzM1MxUnMxUjNzMVIwU3IRcjJyYnJisBFRQXFh8BFSM1NzY3Nj0BIyIHBg8BAUA1NU8aTxsbMzM1GjQ0GjU1'+'GhoaNBuENTWEMzP+PgQBMQQjAggKDCUQBAYdCakMGgYEECcKCwcCCBs2GxsbGxsbAW/sGjMzGgEGGhoaNBoaGpRsbAkkCgjyFgQFAgEgIAEDBAUb7AoIJAkA'+'AAEAGP/qAe4BoAAmAAAlJicmIyIHBhUUFxYXNjMyFhQGIyInJicmJyY1NDc2MzIXFhczBycBTgwdHiYuISEREBwUHCAsLCAYExMJOCMkOztTSzg4DEZ2ePoi'+'FRYhIS8hGxsOESxALA4NFhcxND9TPDswMEZ4eAAAAAEACf/QAfMBugAjAAA3JyY1NDYzMh8BNzYzMhYVFA8BFxYVFAYiLwEHBiMiJyY1NDeKaRgvIyEYamsX'+'IyEvF2pqFy9FF2tpFiQjFhgYxGsYISMvGGlpGC8jIRhraRgjIS8XamoXFxghIxgAAAEAAP/BAf8BwAAJAAAFITcnBxEhBxc3Af/+rGurawFUa6trP2urawFU'+'a6trAAAAAAMARv/hAboBnwAXAB8AMQAAEzQ2MhYdATMyFh0BFAYjISImPQE0NjsDNTQmIgYVFxQXBxQWOwEyNjUnNjU0JiIGh0dkRxwPFhYP/tYPFhYPHC+U'+'Kz4rJREICAYcBggIERYeFgEmMkdHMkEWD7oPFhYPug8WQR8sLB+nFAswBggIBjALFA8WFgACAEb/4QG6AZ8AIwA1AAA3NTQ2OwE1NDYyFh0BFAYiJj0BNCYi'+'Bh0BMzIWHQEUBiMhIiY3FBcHFBY7ATI2NSc2NTQmIgZGFg8cR2RHDhMOKz4r3w8WFg/+1g8WlREICAYcBggIERYeFga6DxZBMkdHMgQKDg4KBB8sLB9BFg+6'+'DxYWiBQLMAYICAYwCxQPFhYAAAAAAgAA/8ECAAHAAAYADQAAETMHFwcnBwUXNxUjNyfcUns6fU4BNX1O3FJ7AcBPeTl3TCl2TNZPeQAB////tAH0AcEAGgAA'+'AR4BFzcHIzcuAQ4BHgEXFjY3Fw4BLgI2NzYBBjVgIzYBqUMocm5BAkU3N3EmNDSal14CWUoxAcABLCg2o0ErGytidl8UFB8tLD0qNoKghR0TAAABAAEAAAIB'+'AYkACwAAExc3FwcXBycPATcnqFlZp6enp1hap6enAYl2dgHDxAFsagHDxAAAAf/9/7cB8wHAABsAAAEHIzcuAQ4BHgI2NxcOAScuAicmNjc2NzYXAfMB30gi'+'WUwkEUBXTxVkJo5ONFg7ChBCRDg/YEoBwOhPHAgtUVc9DScnNUZIDAg3VTROkSghAgM9AAAAAAsAAP/2AgABwAAdACEAJQApAC0AMQA1ADkAPQBBAEUAABMh'+'FyMmJyYrAREUFxYXFSM1Mjc2NREjIgcGBwYVIyUzFSM3MxUjNxUjNSMzFSMRMxUjNzMVIxcjNTMnMxUjJzMVIxMzESMEARwEDgsLECodCw0blCIGBx0pEQkK'+'AgsBcB0dOR0dVzqQOjo6OjodHZA6OlcdHVaQkDocHAFNVysLC/78HgYGBAsLCgggAQALBikEA60dHR06HR0d/nAdOh0dHR0dcx0BHf6qAAIAAP/AAgABwAAX'+'AC8AACU3NjIfATc2MhYdARQGKwEiJjQ/AScmNAE0NjsBMhYUDwEXFhQPAQYiLwEHBiImNQEIJgMJA28wBhENDQiWCA0GMG4E/vwNCJYIDQYwbgQEJgMJA28w'+'BhENkiYEBG4wBg0IlggNDREGMG8DCQEcCA0NEQYwbwMJAyYEBG4wBg0IAAEAAP/DAgABwABEAAABFRQHBisBIicmPwEmIyIHBgcGBwYVFBcWFxYXFjMyNzY3'+'NDIfARYVFCMGBwYjIicmJy4BNDc2NzY3NjMyFxYXNzYXMhYCAAcGCpUPBQUJLjNBJxsUIRoKDQ0UECEUGycmJiMZDQMvAwMjNy4/MTInKyEoFBAlJy8xMi4x'+'LiUrCwwDBwGVlQMNBw4OCS4uDQoaIRgnFygaKA0bCg0RDyIEBC4DBAYtGRcUECUhY2MyJyseFxQUFCErDAgKAAAAAAEAAP/VAgABwAALAAAFJwcjNyczFzcz'+'BxcBeH1ziLysgmlzgrzMK6Ki+/CYmPD7AAIATAAFAbkBuwAbACUAADc2OwE1NDYyFh0BMzIXFh0BFAcGIyEiJyY9ASYlNCYjIgcGHQEzWgcPC1NwUgsIDwcH'+'BBP+1QcPCAYBCC0hIBwXoekIPzlSUjk7CAQStAcPCAgDE7QMTSItFhciOwAAAAABAAAACAIAAbcALQAAEzIXFh0BMzIXFh0BFAcGIyEiJyY9ATQ2OwE1NCcm'+'IyIHBh0BFAYrASImPQE0NohAJCjPBw8HBwQS/tkIDggPDx0WGyAbHBYPAxcDD1EBtykuMTsIAxOwCA8HBwQTsAsPPyEWFhYWIU4HDw8EUTdRAAAAAAIAAf/A'+'Af8BwAAdAEUAACU2NxUUBiMhIiY1ETQ2OwEGByMiBhURFBYzITI2NRMyFh0BFAYiJj0BBwYHMzIWFAYrASImPQE0NjIWHQE3NjcjIiY0NjMB2RUQIRf+cxch'+'IRexDwKgCAsLCAGNCAsKCxERFxDEAQN4DBAQDLwMEBAXEcQBAngLEBALlwIPsRYhIRYBjhcgDxYLB/5yBwsLBwHJEAy8DBAQDHnEAQIQFxERC70LEBALesUB'+'AREXEAAAAAgAAP/AAf4BmAAaADAARgBXAG0AfgCRAJ8AADcjFTAzFj4FFhc3NSYiBgcOBSYnHgE+BDc+ATIXFSYOBScXIwcwFRc3JxY2NxczNzQxJwcXDgEH'+'Nwc+ATc1JxcHJyMOAScHFyc3IwcwFRc3JxY2NxczNzQxJwcXDgEHNwc+ATc1JxcHJyMOAScHFyc3Fj4FFhcVJg4FJxcHPgE3JxcHJw4BJxcnFgEBITkqKCAk'+'ISoXARgtIBQIHhQfHSMqFhYqJB0eFR0IFCAsGBowJSgnMzkoPgFTZAEdbahEDQFPswEwQYlpDA1riUEvsU4NAUSobgEdYVIBU2QBHW2oRA0BT7MBMEGJaQwN'+'a4lBL7FODQFEqG4BHWEUITgrKCAjIioYGzAkKSYzOig+DmqJQjG0Tw1FqG4dY5wNDgYfLDIpGwISAQwTGRkKKhsiEw8ECAkEDxIjGykLGRkSCxQEJTQ4KA4Q'+'LFsBRwFEAUVcZugBcAFmcHUpPj8pdXEBZG/mZVxFAQFDRltbAUcBRAFFXGboAXABZnB1KT4/KXVxAWRv5mVcRQEBQ0aUDgYgKzIpGwISDBQDJjQ4KA0QLEEq'+'dHFncehnXEYBREcAAAUAAf+/Af8BvwAOABYAHAAgACcAAAE/AzUTAzUvBDUHLwE1PwIVLwE1PwEVJzU3FScVJzcVNxcBQBUVFRVrahYVFRUVKhUVFRUVaRUV'+'FVQVQEJCFQEBHAIBAgKc/wD/AJ0CAQICAbayAgGoAgICswkBngICpQeXApsFNX1+NgKUAAAAAAQAAf/CAgABwgAHABEAGQAjAAATFTcUFScVJxc0Jz8CFBUv'+'ARc0NT8BFBUnFzQ1PwE1EwM1J0MqKkKXARYVFRUVVBUVFVQVFWxrFQFkZQ0uZQxkoVZ2NgYHBpBCBwYZoUoGBrNRBhnMXgcGXv8A/wBfBgAABAAA/8ECAAG/'+'AAcAEQAZACMAAAEjFyIjNyM3BzIzHwIiIz8BBzI3HwEiIzcHMjMfATMFJTM3AaJlDS5lDWWhVnY2BwYGkEIHBhmhSgYHtFEHGs1dBwZe/wD/AF8GAX0qKkKW'+'FRUVFRVVARUWFVQVFWtrFQAEAAD/wQIAAb8ABwARABkAIwAAJQcnMycyMwcvAxYzDwIiLwIyMw8BIi8CIyUFIw8BIgGioqFlDWUuDZMGBgdCkAYGBzaVBgdR'+'tAcGSsEGBl8BAAEAXgYHXQNCQioqVBUVFgEVFRVqFRUVFWkVFWtrFRUAAAYAAP/BAgABvwAHAAsADwATABoAIQAAJQcnMycyMwcvATMHLwEzFzczByM/ARcn'+'ByM3JxcjJwc3FwGVlZlTDnQ0DqgW8BXqDmUYSGUObQaRT0cOZRu9HGsOR1KSDk1NICBLP0BrKioqKsU3gBkrRgFHKxd9OgAAAAYAAP/BAgABvwAHAAsADwAT'+'ABoAIQAAASMXIgc3IzcHMxcjBzMHIzMnMxcHNyczFzcHJRcHJxc3MwGVTw40dA5TmWLFFfAPbxhlxRZtDnVBG2UOR0/+80CSUkcOawFxHwEgTphAKisrK5oU'+'RioYf0sROn4XKgAAAAQAA//oAf8BgQALABUAGQAdAAASNhYVIy4BDgEHIzQXJzcXBx8BByczJzMVIyUzFSOrpHoaA2aWZQIZwC4+PywCLEBCMOvg4QEc3+AB'+'gAF/VFBrAWtQVB4BYGEBkgJlZlMaHBoAAAAAAAAMAJYAAQAAAAAAAQASACYAAQAAAAAAAgAHAEkAAQAAAAAAAwAtAK0AAQAAAAAABAASAQEAAQAAAAAABQAL'+'ASwAAQAAAAAABgASAV4AAwABBAkAAQAkAAAAAwABBAkAAgAOADkAAwABBAkAAwBaAFEAAwABBAkABAAkANsAAwABBAkABQAWARQAAwABBAkABgAkATgARgBs'+'AHMATwBiAGoAZQBjAHQARQBkAGkAdABJAGMAbwBuAHMAAEZsc09iamVjdEVkaXRJY29ucwAAUgBlAGcAdQBsAGEAcgAAUmVndWxhcgAARgBvAG4AdABGAG8A'+'cgBnAGUAIAAyAC4AMAAgADoAIABGAGwAcwBPAGIAagBlAGMAdABFAGQAaQB0AEkAYwBvAG4AcwAgADoAIAAxAC0ANAAtADIAMAAxADUAAEZvbnRGb3JnZSAy'+'LjAgOiBGbHNPYmplY3RFZGl0SWNvbnMgOiAxLTQtMjAxNQAARgBsAHMATwBiAGoAZQBjAHQARQBkAGkAdABJAGMAbwBuAHMAAEZsc09iamVjdEVkaXRJY29u'+'cwAAVgBlAHIAcwBpAG8AbgAgADEALgAwAABWZXJzaW9uIDEuMAAARgBsAHMATwBiAGoAZQBjAHQARQBkAGkAdABJAGMAbwBuAHMAAEZsc09iamVjdEVkaXRJ'+'Y29ucwAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKwAAAAEAAgATABQAFQAWABcAGAAZABoAGwAcAB0ATABPAFAAWgECAQMBBAEFAQYBBwEI'+'AQkBCgELAQwBDQEOAQ8BEAERARIBEwEUARUBFgEXARgBGQEaC2NpcmN1bGFyMjY1CmNsb2Nrd2lzZTIGY2xvc2UzC2Nyb3NzLW1hcmsxB3VuaUUwMDQHdW5p'+'RTAwNQd1bmlFMDA2B3VuaUUwMDcHdW5pRTAwOAd1bmlFMDA5B3VuaUUwMEEHdW5pRTAwQgd1bmlFMDBDB3VuaUUwMEQHdW5pRTAwRQd1bmlFMDBGB3VuaUUw'+'MTAHdW5pRTAxMQd1bmlFMDEyB3VuaUUwMTMHdW5pRTAxNAd1bmlFMDE1B3VuaUUwMTYHdW5pRTAxNwd1bmlFMDE4AAAAAAAB//8AAgABAAAADAAAABYAHgAC'+'AAEAAQAqAAEABAAAAAIAAAABAAAAAQAAAAAAAAABAAAAANDJVCIAAAAA0UFWmgAAAADVNywp) format("truetype");\n'+'font-weight: normal;\n'+'font-style: normal;\n'+'}\n';jQuery('style#FlsObjectEditIconsFont').remove();jQuery('<style type="text/css" id="FlsObjectEditIconsFont">\n'+
editiconscss+'.FlsObjectEditIconsFontLoader{'+'font-family:FlsObjectEditIcons;'+'position:absolute;'+'right:110%;'+'top:-100px;'+'}\n'+'.FlsObjectEditIconsFontLoader:after{'+'font-family:FlsObjectEditIcons;'+'content: "\\e009 \\e00a \\e00b \\e00c";'+'}'+'</style>').appendTo('head');var iconloader=document.createElement('span');iconloader.className='FlsObjectEditIconsFontLoader';document.body.appendChild(iconloader);canvas=document.getElementById(canvasId);if(!canvas)throw"Unable to find the specified canvas element";ctx=canvas.getContext('2d');if(!ctx)throw"Unable to get the context of canvas element";window.requestAnimationFrame=(function()
{return window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(callback){return window.setTimeout(function(){callback(new Date());},1000/targetFps);};})();window.cancelAnimationFrame=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||function(requestId){clearTimeout(requestId);};canvas.width=settings['width'];canvas.height=settings['height'];canvas.style.position='relative';canvas.style.display='block';canvas.style.zIndex='1';canvas.style.backgroundImage='url('+canvasbgimg+')';canvas.style.backgroundColor='#FFF';canvasWrapper=document.createElement('div');canvasWrapper.style.position='relative';canvasWrapper.style.overflow='hidden';canvasWrapper.style.overflowX='visible';canvas.parentNode.insertBefore(canvasWrapper,canvas);canvasWrapper.appendChild(canvas);canvasWrapper.id=canvasId+'-CWrapper';ghostcvs=document.createElement('canvas');ghostcvs.width=canvas.width;ghostcvs.height=canvas.height;_initOverlay();function isDoubleTap(){var prevtime=prevtaptime;prevtaptime=new Date().getTime();return((prevtaptime-prevtime)<=doubletapdelay)&&(Math.abs(prevMouseCoords.x-mouseCoords.x)<doubletaptolerance)&&(Math.abs(prevMouseCoords.y-mouseCoords.y)<doubletaptolerance);}
function objectNearEdges(editor_obj,dragstart,mouseCoords){if(editor_obj instanceof FLSEditorCore.CObject){var corners=[];editor_obj.objCenter(corners);var dx=mouseCoords.x-dragstart.x;var dy=mouseCoords.y-dragstart.y;var wievfarame_top=_this.viewtopleft();var ed_zoom=_this.zoom();var canvas_width=Math.floor(settings.width/ed_zoom);var canvas_height=Math.floor(settings.height/ed_zoom);var top_corner_x=corners[0].x+wievfarame_top.x;var top_corner_y=corners[0].y+wievfarame_top.y;var bottom_corner_x=settings.width-corners[1].x-wievfarame_top.x;var bottom_corner_y=settings.height-corners[1].y-wievfarame_top.y;if(((top_corner_x<2)&&(dx<0))||((top_corner_y<2)&&(dy<0))||((bottom_corner_x<2)&&(dx>0))||((bottom_corner_y<2)&&(dy>0))){return true;}}
return false;}
function handleEvents(evt){var doevt=true;if(['keydown','keyup'].indexOf(evt.type)==-1){getMousePos(evt);}else{if([document.body,overlaymask].indexOf(evt.target)==-1){doevt=false;}}
var dorender=false;var clear_op=false;if(doevt){switch(evt.type){case'mousedown':case'touchstart':case'pointerdown':var do_detect=true;if(currentObj){edit_operation=currentObj.whichControl(mouseCoords,mouseCoords2);do_detect=['op:none','op:translate'].indexOf(edit_operation)>-1;if(do_detect&&edit_operation=='op:translate'){if(isDoubleTap()){edit_operation='op:doubletap';do_detect=false;}else if(currentObj.fixed()){currentObj.setActive(false);currentObj=null;}}}
if(do_detect){var clickobj=_detectObject(mouseCoords,mouseCoords2);if(clickobj!==currentObj){if(clickobj){clickobj.setActive();if(currentObj)currentObj.setActive(false);}else{if(currentObj)currentObj.setActive(false);}
currentObj=clickobj;dorender=true;}
edit_operation=currentObj?'op:translate':'op:none';}
dragstart={x:mouseCoords.x,y:mouseCoords.y};prevMouseCoords.x=dragstart.x;prevMouseCoords.y=dragstart.y;if(evt.type=='mousedown'&&!mobile){}
break;case'mousemove':case'touchmove':case'pointermove':if(currentObj&&edit_operation!='op:none'){switch(edit_operation){case'op:translate':case'op:doubletap':if(!objectNearEdges(currentObj,dragstart,mouseCoords)){currentObj.move(dragstart,mouseCoords);dragstart.x=mouseCoords.x;dragstart.y=mouseCoords.y;}
dorender=true;break;case'op:rotate':currentObj.use_pivot(true);currentObj.mrotate(dragstart,mouseCoords,{x:view_topleft.x,y:view_topleft.y});dragstart.x=mouseCoords.x;dragstart.y=mouseCoords.y;dorender=true;break;case'op:scale':currentObj.use_pivot(true);currentObj.mscale(dragstart,mouseCoords,{x:view_topleft.x,y:view_topleft.y});dragstart.x=mouseCoords.x;dragstart.y=mouseCoords.y;dorender=true;break;case'op:resize_x':case'op:resize_y':case'op:resize_xs':var edit_funcs={'op:resize_x':currentObj.mresize_x,'op:resize_y':currentObj.mresize_y,'op:resize_xs':currentObj.mresize_xs,}
var resizefunc=edit_funcs[edit_operation];resizefunc.apply(currentObj,[dragstart,mouseCoords,{x:view_topleft.x,y:view_topleft.y}]);dragstart.x=mouseCoords.x;dragstart.y=mouseCoords.y;dorender=true;break;case'op:vertex_move':currentObj.mvertex_move(dragstart,mouseCoords,{x:view_topleft.x,y:view_topleft.y});dragstart.x=mouseCoords.x;dragstart.y=mouseCoords.y;dorender=true;break;case'op:path_scale':case'op:path_scale_top':case'op:path_scale_bottom':currentObj.mpath_scale(dragstart,mouseCoords,{x:view_topleft.x,y:view_topleft.y},edit_operation.replace('op:',''));dragstart.x=mouseCoords.x;dragstart.y=mouseCoords.y;dorender=true;break;}}else{if(currentObj&&!mobile){currentObj.whichControl(mouseCoords,mouseCoords2,true);}}
break;case'keydown':if(currentObj&&!currentObj.fixed()&&[KEYS.LEFT,KEYS.UP,KEYS.RIGHT,KEYS.DOWN].indexOf(evt.keyCode)>-1){var cntrl_shift=evt.shiftKey&&(evt.ctrlKey||evt.metaKey);var cntrl_shift_alt=cntrl_shift&&evt.altKey;var point={x:0,y:0};edit_operation=cntrl_shift?'op:kb_resize':'op:translate';clear_op=true;switch(evt.keyCode){case KEYS.LEFT:point.x=-1*settings.zoom;break;case KEYS.UP:point.y=-1*settings.zoom;break;case KEYS.RIGHT:point.x=1*settings.zoom;break;case KEYS.DOWN:point.y=1*settings.zoom;break;}
var pointmtrx=[settings.zoom,0,0,settings.zoom,0,0];FLSUtil.unTransformPoint(pointmtrx,point,true);if(!cntrl_shift){if(!objectNearEdges(currentObj,{x:0,y:0},point)){if(currentObj instanceof FLSEditorCore.CSelectionGroup){currentObj.stranslate(point.x,point.y);}
pointmtrx=[1,0,0,1,0,0];FLSUtil.tmatrixRotate(pointmtrx,currentObj.getRotation());FLSUtil.transformPoint(pointmtrx,point,true);currentObj.translate(point.x,point.y);}}else{currentObj.kbresize(point.x,point.y,cntrl_shift_alt);}}
break;case'mouseup':case'touchend':case'touchcancel':case'mouseout':case'keyup':case'pointerup':case'pointercancel':if(currentObj){currentObj.use_pivot(false);currentObj.unsetCurrentControl();}
edit_operation='op:none';dragstart=null;break;}}
if(typeof(eventCallback)=='function'){eventCallback(evt,mouseCoords,edit_operation);}
for(var i in plugins){plugins[i]['eventCallback'].apply(plugins[i],[evt,mouseCoords,edit_operation]);}
if(dorender&&!doAnimation)_this.render();if(currentObj&&doevt){if(typeof(evt.preventDefault)=='function'){evt.stopPropagation();evt.preventDefault();}else{evt.returnValue=false;};}
if(clear_op){edit_operation='op:none';return!doevt;}}
function _initOverlay(evnts){ctx_transform[0]=1;ctx_transform[1]=0;ctx_transform[2]=0;ctx_transform[3]=1;ctx_transform[4]=0;ctx_transform[5]=0;var framesize=settings.viewFrame;framesize.width*=settings.zoom;framesize.height*=settings.zoom;if(typeof(evnts)!='boolean'){evnts=true;}
if(overlaymask==null){overlaymask=document.createElement('canvas');viewframecvs=document.createElement('canvas');viewframecvstrim=document.createElement('canvas');ccanvas=document.createElement('canvas');canvas.parentNode.insertBefore(overlaymask,canvas);canvas.parentNode.insertBefore(ccanvas,canvas);overlaymask.tabIndex=100;}
viewframecvs.width=framesize.width;viewframecvs.height=framesize.height;viewframecvstrim.width=framesize.width-framesize.shrink[0];viewframecvstrim.height=framesize.height-framesize.shrink[1];overlaymask.width=canvas.width;overlaymask.height=canvas.height;overlaymask.style.position='absolute';overlaymask.style.display='block';overlaymask.style.zIndex='30';ccanvas.width=canvas.width;ccanvas.height=canvas.height;ccanvas.style.position='absolute';ccanvas.style.display='block';ccanvas.style.zIndex='3';cctx=ccanvas.getContext('2d');var octx=overlaymask.getContext('2d');if(!octx.setLineDash){octx.setLineDash=function(){};}
octx.save();octx.fillStyle=settings.viewFrame.fill;octx.lineWidth=settings.viewFrame.lwidth;octx.setLineDash(settings.viewFrame.dash);octx.mozDash=settings.viewFrame.dash;octx.webkitLineDash=settings.viewFrame.dash;octx.strokeStyle=settings.viewFrame.lcolor;octx.setTransform(1,0,0,1,0,0);octx.beginPath();octx.moveTo(-2,-2);octx.lineTo(overlaymask.width+2,-2);octx.lineTo(overlaymask.width+2,overlaymask.height+2);octx.lineTo(-2,overlaymask.height+2);octx.lineTo(-2,-2);var frametopX=(overlaymask.width-framesize.width)/2;var frametopY=(overlaymask.height-framesize.height)/2;frametopX+=framesize.offcenter;octx.moveTo(frametopX+(framesize.shrink[0]+framesize.shrink_offset_x),frametopY+(framesize.shrink[1]));octx.lineTo(frametopX+(framesize.shrink[0]+framesize.shrink_offset_x),framesize.height+frametopY-(framesize.shrink[1]));octx.lineTo(framesize.width+frametopX-(framesize.shrink[0]-framesize.shrink_offset_x),framesize.height+frametopY-(framesize.shrink[1]));octx.lineTo(framesize.width+frametopX-(framesize.shrink[0]-framesize.shrink_offset_x),frametopY+(framesize.shrink[1]));octx.closePath();octx.fill();octx.stroke();octx.restore();if(framesize.message.length){octx.save();var msgfsz=(settings.flat_design?13:18);octx.font=msgfsz+'px '+framesize.message_font;octx.fillStyle=framesize.message_color;var texts=framesize.message.split('|');var filltextargs=[];var xmin=overlaymask.width;var wmax=0;var ymin=overlaymask.height;var ymax=0;for(var ti=0;ti<texts.length;ti++){var tline=texts[ti].trim();var tw=octx.measureText(tline);var mx=(overlaymask.width-tw.width)/2;mx+=framesize.offcenter;var my=frametopY-(20*(texts.length-ti)-ti);xmin=(xmin>mx)?mx:xmin;ymin=(ymin>my)?my:ymin;ymax=(ymax<my)?my:ymax;wmax=(wmax<tw.width)?tw.width:wmax;filltextargs.push([tline,mx,my]);}
if(settings.flat_design){var tipstr=[];var tipw=0;var fontsave=octx.font;if(framesize.message_tip){octx.font='bold '+octx.font;var tipm=octx.measureText(framesize.message_tip);tipw=tipm.width+5;var tw_half=tipw/2;var tipx=xmin-tw_half;xmin+=tw_half;wmax+=tipw;tipstr.push(framesize.message_tip);tipstr.push(tipx);tipstr.push(ymin);octx.font=fontsave;}
for(var argi=0;argi<filltextargs.length;argi++){filltextargs[argi][1]=xmin;filltextargs[argi][2]-=15;}
octx.save();octx.fillStyle='#FFFFFF';octx.lineWidth=0.5;octx.strokeStyle='#999';ymin-=(20+msgfsz);xmin-=5+tipw;octx.fillRect(xmin,ymin,wmax+10,(ymax-ymin)-5);octx.strokeRect(xmin,ymin,wmax+10,(ymax-ymin)-5);octx.restore();if(tipw&&tipstr.length){fontsave=octx.font;octx.font='bold '+octx.font;tipstr[2]=filltextargs[0][2];octx.fillText.apply(octx,tipstr);octx.font=fontsave;}}
while(filltextargs.length){octx.fillText.apply(octx,filltextargs.shift());}
octx.restore();}
if(!mobile&&settings.kb_tip_msg){var splitmsg=[];var tipwidth=185;var tf_sz=10;octx.save();octx.font=tf_sz+'px arial,verdana';var tw=octx.measureText(settings.kb_tip_msg).width;if(tw>tipwidth){var words=settings.kb_tip_msg.split(' ');var line=words[0];var _line=line;for(var wi=1;wi<words.length;wi++){var cur_w=octx.measureText(_line).width;if(cur_w<tipwidth){line=_line;_line+=' '+words[wi];}else{_line=words[wi-1]+' '+words[wi];splitmsg.push(line);}}
splitmsg.push(_line);}else{splitmsg.push(settings.kb_tip_msg);}
var lineheight=13;var tipheight=splitmsg.length*(lineheight+10);var ty=overlaymask.height-tipheight-15.5;var box_x=19.5;var box_pad=10;octx.fillStyle='#FFF';octx.lineWidth=0.5;octx.strokeStyle='#999';octx.fillRect(box_x,ty,tipwidth+(box_pad*2),tipheight);octx.strokeRect(box_x,ty,tipwidth+(box_pad*2),tipheight);octx.restore();octx.save();octx.font=tf_sz+'px arial,verdana';octx.fillStyle='#666';ty+=Math.ceil(lineheight-(tf_sz/2))+box_pad;for(var si=0;si<splitmsg.length;si++){octx.fillText(splitmsg[si],box_x+10,ty);ty+=lineheight;}
octx.restore();}
view_topleft.x=frametopX;view_topleft.y=frametopY;if(framesize.paper_checker===true){var ptrn_img=new Image();ptrn_img.src=checker_pattern_img;ptrn_img.onload=function(){checker_pattern=ctx.createPattern(ptrn_img,'repeat');}}
FLSUtil.tmatrixTranslate(ctx_transform,frametopX,frametopY);FLSUtil.tmatrixScale(ctx_transform,settings.zoom,settings.zoom);ctx.setTransform.apply(ctx,ctx_transform);cctx.setTransform(1,0,0,1,0,0);cctx.translate(frametopX,frametopY);if(evnts){var mob_evtnts=wp_mobile?['pointerdown','pointermove','pointerup','pointercancel']:['touchstart','touchmove','touchend','touchcancel'];var events=mobile?mob_evtnts:['mousedown','mousemove','mouseup','mouseout','keydown','keyup'];for(var i in events){var where=['keydown','keyup'].indexOf(events[i])>-1?document.body:overlaymask;if(document.addEventListener){where.addEventListener(events[i],handleEvents,false);}else if(document.attachEvent){where.attachEvent("on"+events[i],handleEvents);}}}}
function _render(timedelta){if(typeof(timedelta)=='undefined'){timedelta=animPrevframeTime;}
if(timedelta!=animPrevframeTime){curFps=Math.floor(1/((timedelta-animPrevframeTime)/1000));animPrevframeTime=timedelta;}
if(curFps<=targetFps){ctx.setTransform(1,0,0,1,0,0);ctx.clearRect(0,0,canvas.width,canvas.height);ctx.setTransform.apply(ctx,ctx_transform);for(var i=0;i<plugins.length;i++){plugins[i]['onBeforeRender'].apply(plugins[i],[ctx]);}
if(settings.viewFrame.paper){ctx.save();ctx.beginPath();ctx.rect(0.5,0.5,(settings.viewFrame.width/settings.zoom)-1,(settings.viewFrame.height/settings.zoom)-1);ctx.fillStyle=settings.viewFrame.paper_color;ctx.shadowColor='rgba(0,0,0,0.8)';ctx.shadowBlur=25;ctx.shadowOffsetX=0;ctx.shadowOffsetY=0;ctx.closePath();ctx.fill();ctx.restore();}
if((settings.viewFrame.paper_checker===true)&&(checker_pattern)){ctx.save();ctx.beginPath();ctx.rect(0.5,0.5,(settings.viewFrame.width/settings.zoom)-1,(settings.viewFrame.height/settings.zoom)-1);ctx.fillStyle=checker_pattern;ctx.fill();ctx.restore();}
cctx.save();cctx.setTransform(1,0,0,1,0,0);cctx.clearRect(0,0,ccanvas.width,ccanvas.height);cctx.restore();if(doAnimation&&typeof(animCallback)=='function')animCallback(timedelta);for(var i=0;i<elements.length;i++){elements[i].render(ctx,cctx,timedelta);}
if(layout_visible){for(var i=0;i<layout_elements.length;i++){layout_elements[i].render(ctx,cctx,timedelta);}}}
if(doAnimation){animId=requestAnimationFrame(_render);}}
function _detectObject(point,point2){if(layout_visible&&!disable_layout_element_select){for(var i=layout_elements.length-1;i>=0;i--){if(layout_elements[i].containsPoint(point,point2)&&!layout_elements[i].in_selection){return layout_elements[i];}}}
for(var i=elements.length-1;i>=0;i--){if(elements[i].containsPoint(point,point2)){return elements[i];}}
return null;}
function getMousePos(evt){var rect=canvas.getBoundingClientRect();if(evt.type=='touchend')return mouseCoords;if(evt.touches){mouseCoords.x=evt.touches[0].clientX-rect.left;mouseCoords.y=evt.touches[0].clientY-rect.top;if(evt.touches.length>1){mouseCoords2.x=evt.touches[1].clientX-rect.left;mouseCoords2.y=evt.touches[1].clientY-rect.top;mouseCoords2.active=true;}else{mouseCoords2.x=0;mouseCoords2.y=0;mouseCoords2.active=false;}}else{mouseCoords.x=evt.clientX-rect.left;mouseCoords.y=evt.clientY-rect.top;}
mouseCoords.clickColor=ctx.getImageData(mouseCoords.x,mouseCoords.y,1,1).data;return mouseCoords;}
function cloneSettings(stngs){if(!stngs||typeof stngs!=='object'){return stngs;}
var st_cpy=stngs.constructor();for(var i in stngs){if(typeof(stngs[i])==='object'){st_cpy[i]=cloneSettings(stngs[i]);}else{st_cpy[i]=stngs[i];}}
return st_cpy;}
this.layout_visible=function(_ly_visible){if(typeof(_ly_visible)=='boolean'){layout_visible=_ly_visible;}
return layout_visible;};this.undoPush=function(obj,clearRedo,op){if(!obj)return false;if(typeof(clearRedo)!='boolean'){clearRedo=true;}
if(clearRedo){redoStack.length=0;redoStack=null;redoStack=[];}
if(undoStack.length>=undoSteps){undoStack.shift();}
if(typeof(op)=='undefined'){op=edit_operation;}
undoStack.push({FLSobj:elements.indexOf(obj),properties:obj.getProperties(),operation:op});};this.redoPush=function(obj,op){if(!obj)return false;if(redoStack.length>=undoSteps){redoStack.shift();}
redoStack.push({FLSobj:elements.indexOf(obj),properties:obj.getProperties(),operation:op});};this.undo=function(){if(undoStack.length){var _top=undoStack.pop();if(_top.operation=='op:delete'){var to=new FLSEditorCore.CPathText();to.editor(this);to.removable(true);to.setProperties(_top.properties);elements.splice(_top.FLSobj,0,to);}
this.redoPush(elements[_top.FLSobj],_top.operation);if(_top.operation=='op:addtext'){this.removeObject(elements[_top.FLSobj]);}else{elements[_top.FLSobj]['setProperties'](_top.properties);}
return true;}
return false;};this.redo=function(){if(redoStack.length){var _top=redoStack.pop();if(_top.operation=="op:addtext"){var to=new FLSEditorCore.CPathText();to.editor(this);to.removable(true);to.setProperties(_top.properties);elements.splice(_top.FLSobj,0,to);}
this.undoPush(elements[_top.FLSobj],false,_top.operation);elements[_top.FLSobj]['setProperties'](_top.properties);if(_top.operation=="op:delete"){this.removeObject(elements[_top.FLSobj]);}
return true;}
return false;};this.clearUndoStacks=function(){undoStack.length=0;redoStack.length=0;undoStack=[];redoStack=[];return true;};this.undoStats=function(){return{undo:undoStack.length,redo:redoStack.length};};this.redrawViewFrame=function(width,height){width=parseInt(width,10);height=parseInt(height,10);width=isNaN(width)?settings.viewFrame.width:width;height=isNaN(height)?settings.viewFrame.height:height;settings.viewFrame.width=width;settings.viewFrame.height=height;_initOverlay(false);for(var i in plugins){plugins[i]['onViewframeChange'].apply(plugins[i],[settings]);}
return false;};this.addObject=function(obj){if(obj instanceof FLSEditorCore.CObject){obj.editor(this);if(obj instanceof FLSEditorCore.CLayoutZone){layout_elements.push(obj);}else{elements.push(obj);obj.fonticons(FLSUtil.isFontAvailable('FlsObjectEditIcons'));}
return obj;}
return false;};this.removeObject=function(obj){if(obj instanceof FLSEditorCore.CObject){if(currentObj==obj){currentObj=null;}
var idx=elements.indexOf(obj);if(idx==-1){idx=layout_elements.indexOf(obj);return idx>-1?layout_elements.splice(idx,1):false;}
return idx>-1?elements.splice(idx,1):false;}
return false;};this.getObjects=function(){return elements;};this.getLayoutObjects=function(force){if(typeof(force)!='boolean'){force=false;}
if((layout_visible&&!disable_layout_element_select)||force){return layout_elements;}
return[];};this.disable_layout_element_select=function(disable){if(typeof(disable)=='boolean'){disable_layout_element_select=disable;}
return disable_layout_element_select;};this.setObjects=function(_elements){if(_elements instanceof Array){for(var i=0;i<_elements.length;i++){if(!(_elements[i]instanceof FLSEditorCore.CObject)){return false;}
if(!_elements[i].editor()){_elements[i].editor(this);}
_elements[i].fonticons(FLSUtil.isFontAvailable('FlsObjectEditIcons'));}
this.deselect();elements=_elements;}
return true;};this.setLayoutObjects=function(_elements){if(_elements instanceof Array){for(var i=0;i<_elements.length;i++){if(!(_elements[i]instanceof FLSEditorCore.CLayoutZone)){return false;}
if(!_elements[i].editor()){_elements[i].editor(this);}}
layout_elements=_elements;}
return true;};this.clearObjects=function(){elements.length=0;elements=null;elements=[];layout_elements.length=0;layout_elements=null;layout_elements=[];currentObj=null;};this.clearLayoutObjects=function(){while(layout_elements.length){layout_elements.pop();}
if(currentObj instanceof FLSEditorCore.CLayoutZone){currentObj=null;}};this.render=function(){_render(new Date());};this.setAnimate=function(callback,animate){if(typeof(animate)!='boolean'){animate=true;}
if(!animate&&animId){cancelAnimationFrame(animId);animId=null;}
if(typeof(callback)=='function'){animCallback=callback;}
if(doAnimation!=animate){doAnimation=animate;this.render();}};this.setEventCallback=function(callback){if(typeof(callback)=='function'){eventCallback=callback;}};this.getContext=function(){return ctx;};this.getControlContext=function(){return cctx;};this.generateSVG=function(){};this.ghostcanvas=function(){return ghostcvs;};this.viewtopleft=function(){return view_topleft;};this.viewsize=function(){return settings.viewFrame;};this.getCurrentObject=function(){return currentObj;};this.toSVG=function(){var svg=document.createElementNS('http://www.w3.org/2000/svg','svg');var logolayer=document.createElementNS('http://www.w3.org/2000/svg','g');var textlayer=document.createElementNS('http://www.w3.org/2000/svg','g');logolayer.setAttribute('id','surface2');textlayer.setAttribute('id','surface4');svg.setAttribute('width',settings.viewFrame.width+'pt');svg.setAttribute('height',settings.viewFrame.height+'pt');svg.setAttribute('viewBox','0 0 '+settings.viewFrame.width+' '+settings.viewFrame.height);svg.setAttribute('version','1.1');svg.setAttribute('xmlns','http://www.w3.org/2000/svg');svg.setAttribute('xmlns:xlink','http://www.w3.org/1999/xlink');svg.appendChild(document.createTextNode('\n  '));svg.appendChild(logolayer);svg.appendChild(document.createTextNode('\n  '));svg.appendChild(textlayer);svg.appendChild(document.createTextNode('\n'));for(var i in elements){if(elements[i]instanceof FLSEditorCore.CPathGroup){elements[i].toSVG(logolayer);}
if(elements[i]instanceof FLSEditorCore.CText){elements[i].toSVG(textlayer);}}
return new XMLSerializer().serializeToString(svg);};this.getCanvasWrapper=function(){return canvasWrapper;};this.getViewFrameData=function(_watermark,as_data_url,as_canvas,force_white_bg,force_def_txt,_watermark_bg_color,invert_colors){if(typeof(as_data_url)!='boolean'){as_data_url=false;}
if(typeof(as_canvas)!='boolean'){as_canvas=false;}
if(typeof(_watermark)!='boolean'){_watermark=false;}
if(typeof(force_white_bg)!='boolean'){force_white_bg=false;}
if(typeof(force_def_txt)!='boolean'){force_def_txt=false;}
if(typeof(invert_colors)!='boolean'){invert_colors=false;}
var vfdatacvs=this.trimdata?viewframecvstrim:viewframecvs;var vfctx=vfdatacvs.getContext('2d');vfctx.clearRect(0,0,settings.viewFrame.width,settings.viewFrame.height);if(_watermark){vfctx.fillStyle=_watermark_bg_color?_watermark_bg_color:'#FFF';vfctx.fillRect(0,0,settings.viewFrame.width,settings.viewFrame.height);}
var trpos=[0,0];if(this.trimdata){trpos[0]=-settings.viewFrame.shrink[0]/2;trpos[1]=-settings.viewFrame.shrink[1]/2;}
vfctx.setTransform(settings.zoom,0,0,settings.zoom,trpos[0],trpos[1]);vfctx.save();for(var i=0;i<elements.length;i++){if(elements[i]instanceof FLSEditorCore.CLayoutZone)continue;if(!_watermark&&!force_white_bg&&elements[i]instanceof FLSEditorCore.CRect&&elements[i].id&&elements[i].id=='backgroundColor'&&/rgb\(\s*?(100(\.\d+)?%|255)\s*?,\s*?(100(\.\d+)?%|255)\s*?,\s*?(100(\.\d+)?%|255)\s*?\)|rgba\(\s*?(0)s*?,\s*?(0)\s*?,\s*?(0)\s*?,\s*?(0)\s*?\)/i.test(elements[i].getColor())){continue;}
elements[i].for_preview=!force_def_txt;elements[i].render(vfctx);elements[i].for_preview=false;}
vfctx.restore();vfctx.setTransform(1,0,0,1,0,0);if(_watermark){var ptrn=vfctx.createPattern(watermarkimg,'repeat');vfctx.beginPath();vfctx.moveTo(0,0);vfctx.lineTo(settings.viewFrame.width,0);vfctx.lineTo(settings.viewFrame.width,settings.viewFrame.height);vfctx.lineTo(0,settings.viewFrame.height);vfctx.closePath();vfctx.save();vfctx.rotate(-0.2);vfctx.fillStyle=ptrn;vfctx.fill();vfctx.restore();}
this.trimdata=false;if(invert_colors){FLSUtil.invertImage(vfdatacvs);}
if(as_data_url){var data_url_args=[];if(this.jpeg_raster){data_url_args.push('image/jpeg');data_url_args.push(1);}
return vfdatacvs.toDataURL.apply(vfdatacvs,data_url_args);}else if(as_canvas){return vfdatacvs;}
return vfctx.getImageData(0,0,settings.viewFrame.width,settings.viewFrame.height);};this.centerResizeTexts=function(anchor1){if(typeof(anchor1)=='undefined'||['left','center','right'].indexOf(anchor1)==-1){anchor1='center';}
var gctx=ghostcvs.getContext('2d');var need_resize=false;var corners=[];var _ed_zoom=this.zoom();var center=elements[0].objCenter(corners);var test_width=settings.viewFrame.width/_ed_zoom;var alignx=test_width/2;test_width-=40;switch(anchor1){case'left':test_width-=(corners[1]['x']/_ed_zoom);alignx=(corners[1]['x']/_ed_zoom);break;case'right':test_width=(corners[0]['x']/_ed_zoom);alignx=(corners[0]['x']/_ed_zoom);break;}
for(var i in elements){if(elements[i]instanceof FLSEditorCore.CText){if((elements[i]instanceof FLSEditorCore.CPathText)&&elements[i].has_path()){continue;}
var fsize=elements[i].getFontSize();elements[i].align_point=anchor1;if(elements[i]instanceof FLSEditorCore.CMultiLineText){var sz=elements[i].getSize();need_resize=need_resize?need_resize:sz.width>test_width;if(need_resize){fsize=Math.ceil(fsize*(test_width/sz.width));}}else{var text=elements[i].getText();var font=elements[i].getFontFamily();gctx.font=fsize+'px '+font;var txtmetrics=gctx.measureText(text);need_resize=need_resize?need_resize:txtmetrics.width>test_width;if(need_resize){var done_resize=false;while(!done_resize){fsize-=1;gctx.font=fsize+'px '+font;txtmetrics=gctx.measureText(text);done_resize=txtmetrics.width<test_width;}}}
elements[i].setFontSize(fsize);center=elements[i].objCenter(corners);if(anchor1=='center'){elements[i].translateX(alignx-(center.x/_ed_zoom));}else if(anchor1=='right'){elements[i].translateX(alignx-(corners[1].x/_ed_zoom));}else{elements[i].translateX(alignx-(corners[0].x/_ed_zoom));}}}};this.debug=function(data){jQuery('#debug').html(JSON.stringify(data));};this.registerPlugin=function(_plugin){var pinstance=_plugin;if(typeof(_plugin)=='function'){pinstance=new _plugin();}else if(typeof(_plugin)=='string'&&typeof(window[_plugin])=='function'){pinstance=new window[_plugin];if(pinstance.name()=='BasePlugin'){pinstance.name(_plugin);}}
if(pinstance instanceof FLSPlugin){var pname=pinstance.name();if(pname=='BasePlugin'){console.warn('Please set a valid name for your plugin using this.name("YourPluginName") in the constructor');}else{if(plugin_names.indexOf(pname)==-1){pinstance.init(this,settings,canvas);plugins.push(pinstance);plugin_names.push(pname);}else{console.warn("Plugin already registered: "+pname);}
return pinstance;}}
return false;};this.setCurrentObject=function(obj){if(obj instanceof FLSEditorCore.CObject&&elements.indexOf(obj)!=-1){if(currentObj){currentObj.setActive(false);}
currentObj=obj;currentObj.setActive(true);}};this.getSettings=function(){return JSON.parse(JSON.stringify(settings));};this.zoom=function(zoom){zoom=parseFloat(zoom,10);if(!isNaN(zoom)){settings.zoom=zoom;}
return settings.zoom;};this.overlayMessage=function(msg){settings.viewFrame.message=msg.trim();};this.deselect=function(){if(currentObj){currentObj.use_pivot(false);currentObj.unsetCurrentControl();}
currentObj=null;edit_operation='op:none';dragstart=null;};this.layerMove=function(obj,npos){npos=parseInt(npos,10);var o_idx=elements.indexOf(obj);if(o_idx>-1&&!isNaN(npos)&&(npos>=0&&npos<elements.length)&&npos!=o_idx){elements.splice(npos,0,elements.splice(o_idx,1)[0]);return true;}
return false;};this.mobile=function(){return mobile?true:false;};this.wp_mobile=function(){return wp_mobile?true:false;};this.contentInsideSafeLine=function(is_logo){var framesize={width:settings.viewFrame.width,height:settings.viewFrame.height}
var safe_margins=settings.viewFrame.shrink.slice(0);var trim_offset_x=settings.viewFrame.shrink_offset_x;var trimsize={width:framesize.width-(safe_margins[0]*2),height:framesize.height-(safe_margins[1]*2)}
var left_margin=safe_margins[0]+trim_offset_x;var top_margin=safe_margins[1];var right_margin=left_margin+trimsize.width;var bottom_margin=top_margin+trimsize.height;var check=true;var corners=[];var all_inside=true;for(var i=0;i<elements.length;i++){if(((elements[i]instanceof FLSEditorCore.CImage)&&elements[i].xlinktype=='templateBackground')||(elements[i]instanceof FLSEditorCore.CRect)||((elements[i]instanceof FLSEditorCore.CPathGroup)&&(is_logo===false))){check=false;}
if(check){var box_padding=elements[i].bboxpad();elements[i].bboxpad(0);var center=elements[i].objCenter(corners);elements[i].bboxpad(box_padding);all_inside=all_inside&&((corners[0]['x']>left_margin)&&(corners[0]['y']>top_margin)&&(corners[1]['x']<right_margin)&&(corners[1]['y']<bottom_margin));if(!all_inside)break;}
check=true;}
return all_inside;};this.getGradientIds=function(){var grd_ids=[];for(var e_idx=0;e_idx<elements.length;e_idx++){var pths=[];if(elements[e_idx]instanceof FLSEditorCore.CPathGroup){pths=elements[e_idx].getPaths();}else if(elements[e_idx]instanceof FLSEditorCore.CLogoObjectGroup){var lgo_elmnts=elements[e_idx].getElements();for(var el_idx=0;el_idx<lgo_elmnts.length;el_idx++){if(lgo_elmnts[el_idx]instanceof FLSEditorCore.CPathGroup){pths=lgo_elmnts[el_idx].getPaths();}}}
if(pths.length){for(var pidx=0;pidx<pths.length;pidx++){if(pths[pidx]['gradientId']&&(grd_ids.indexOf(pths[pidx]['gradientId'])==-1)){grd_ids.push(pths[pidx]['gradientId']);}}}}
return grd_ids;};};FLSEditorCore.CObject=function(){var editor=null;var obj_shadow={};var use_shadow=false;var position={x:0,y:0};var size={width:100,height:100};var controls={'scale':{x:0,y:0},'rotate':{x:0,y:0},'delete':{x:0,y:0}};var showControls=true;var current_control='none';var pivot={x:0,y:0};var center={x:0,y:0};var use_pivot=false;var isActive=false;var bboxpad=5;var bboxpos={x:0,y:0};var DEG_TO_RAD=Math.PI/180;var inGroup=false;var removable=false;var hasrotate=true;var scalable=true;var selectable=true;var highlight=false;var editable=true;var fixed=false;var hastextedit=false;var unlockable=false;var unlocked=false;var colorEditable=true;var fonticons=true;var iconstyle='flat';var controlSize={def:18,flat:15};controlSize=controlSize[iconstyle];var fonticontextpos={def:{'scale':{x:-11,y:8},'rotate':{x:-14.5,y:13.5},'delete':{x:-12.5,y:9.5},'textedit':{x:-12.5,y:10},'lock_unlock':{x:-12.5,y:10}},flat:{'scale':{x:-5.5,y:5.5},'rotate':{x:-8,y:6},'delete':{x:-5,y:4},'textedit':{x:-7,y:6},'lock_unlock':{x:-10,y:7}}};fonticontextpos=fonticontextpos[iconstyle];var recalc_icon_tpos=false;var fonticonprops={def:{'scale':{size:22,glyph:'\uE003',adj_y:-3,adj_x:0,bg_color:'rgba(255, 255, 255,0.8)',color:'rgb(64, 125, 181)'},'rotate':{size:33,glyph:'\uE001',adj_y:-3,adj_x:2,bg_color:'rgba(255, 255, 255,0.8)',color:'rgb(64, 125, 181)'},'delete':{size:25,glyph:'\uE002',adj_y:-3,adj_x:0,bg_color:'rgba(255, 255, 255,0.8)',color:'rgb(231, 35, 28)'},'textedit':{size:25,glyph:'\uE000',adj_y:-2,adj_x:0,bg_color:'rgba(255, 255, 255,0.8)',color:'rgb(64, 125, 181)'},'lock_unlock':{size:25,glyph:'\uE004',adj_y:-3,adj_x:0,bg_color:'rgba(255, 255, 255,0.8)',color:'rgb(64, 125, 181)'},'lock':{size:25,glyph:'\uE004',adj_y:0,adj_x:0,bg_color:'rgba(255, 255, 255,0.8)',color:'rgb(64, 125, 181)'},'unlock':{size:25,glyph:'\uE005',adj_y:0,adj_x:0,bg_color:'rgba(255, 255, 255,0.8)',color:'rgb(63, 146, 62)'}},flat:{'scale':{size:13,glyph:'\uE00B',adj_y:-1,adj_x:1,bg_color:'rgb(226, 228, 228)',color:'rgb(0, 69, 121)'},'rotate':{size:16,glyph:'\uE00C',adj_y:-2,adj_x:0,bg_color:'rgb(226, 228, 228)',color:'rgb(0, 69, 121)'},'delete':{size:10,glyph:'\uE00D',adj_y:-1,adj_x:0,bg_color:'rgb(226, 228, 228)',color:'rgb(231, 35, 28)'},'textedit':{size:14,glyph:'\uE00A',adj_y:-1,adj_x:0,bg_color:'rgb(226, 228, 228)',color:'rgb(0, 69, 121)'},'lock_unlock':{size:20,glyph:'\uE00E',adj_y:-3,adj_x:0,bg_color:'rgb(226, 228, 228)',color:'rgb(0, 69, 121)'},'lock':{size:20,glyph:'\uE00E',adj_y:-3,adj_x:0,bg_color:'rgb(226, 228, 228)',color:'rgb(0, 69, 121)'},'unlock':{size:20,glyph:'\uE00F',adj_y:-3,adj_x:0,bg_color:'rgb(226, 228, 228)',color:'rgb(63, 146, 62)'}}};fonticonprops=fonticonprops[iconstyle];var flat_contol_paths={'rb':'M 7.3838083,21.480863 C -0.90046275,21.480863 -7.6161917,14.765134 -7.6161917,6.4808632 C -7.6107717,4.2635034 -7.1138217,2.0749238 -6.1611137,0.07265982 L 0.05177722,0.07265982 L 0.05177722,-6.5972622 C 2.2909593,-7.8550032 4.8155709,-8.5167562 7.3838083,-8.5191372 C 15.541834,-8.4749422 22.383807,-1.8034082 22.383807,6.4808632 C 22.383807,14.765134 15.668078,21.480863 7.3838083,21.480863 Z','lb':'M -7.4169736,21.516019 C 0.86729748,21.516019 7.5830264,14.80029 7.5830264,6.5160195 C 7.5776064,4.2986597 7.0806564,2.1100801 6.1279484,0.10781607 L -0.08494252,0.10781607 L -0.08494252,-6.5621059 C -2.3241246,-7.8198469 -4.8487362,-8.4815999 -7.4169736,-8.4839809 C -15.575,-8.4397859 -22.416973,-1.7682519 -22.416973,6.5160195 C -22.416973,14.80029 -15.701244,21.516019 -7.4169736,21.516019 Z','lt':'M -7.3437503,-21.445312 C 0.94052078,-21.445312 7.6562497,-14.729583 7.6562497,-6.4453125 C 7.6508297,-4.2279527 7.1538797,-2.039373 6.2011717,-0.03710938 L -0.01171922,-0.03710938 L -0.01171922,6.6328125 C -2.2509013,7.8905541 -4.7755129,8.5523064 -7.3437503,8.5546876 C -15.501777,8.5104933 -22.34375,1.8389587 -22.34375,-6.4453125 C -22.34375,-14.729583 -15.628021,-21.445312 -7.3437503,-21.445312 Z','rt':'M 7.3320312,-21.410156 C -0.95223997,-21.410156 -7.6679687,-14.694427 -7.6679688,-6.4101562 C -7.662549,-4.1927965 -7.1655993,-2.0042167 -6.2128906,-0.00195313 L 0,-0.00195313 L 0,6.6679688 C 2.2391818,7.9257103 4.7637938,8.5874626 7.3320312,8.5898438 C 15.490058,8.5456495 22.332031,1.874115 22.332031,-6.4101562 C 22.332031,-14.694427 15.616302,-21.410156 7.3320312,-21.410156 Z'}
var flat_contol_paths_dims={};var bboxCalculated=false;var tmatrix=[1,0,0,1,0,0];var matrix=[1,0,0,0,1,0,0,0,1];var inverse=[];var _this=this;inverseMatrix();function calculatePivotTransform(reverse){if(typeof(reverse)!='boolean'){reverse=false;}
var pivotmatrix=[1,0,0,1,0,0];if(reverse){FLSUtil.tmatrixTranslate(pivotmatrix,-pivot.x,-pivot.y);}else{FLSUtil.tmatrixTranslate(pivotmatrix,pivot.x,pivot.y);}
var pos=_this.getPosition();FLSUtil.tmatrixTranslate(pivotmatrix,pos.x,pos.y);FLSUtil.tmatrixRotate(pivotmatrix,-_this.getRotation());var sclx=_this.getScaleX();var scly=_this.getScaleY();FLSUtil.tmatrixScale(pivotmatrix,sclx,scly);if(reverse){FLSUtil.tmatrixTranslate(pivotmatrix,pivot.x,pivot.y);}else{FLSUtil.tmatrixTranslate(pivotmatrix,-pivot.x,-pivot.y);}
_this.setMatrix(pivotmatrix);}
function updateMatrix(){matrix[0]=tmatrix[0];matrix[1]=tmatrix[2];matrix[2]=tmatrix[4];matrix[3]=tmatrix[1];matrix[4]=tmatrix[3];matrix[5]=tmatrix[5];inverseMatrix();}
function _transformPoint(point){var newpoint={};newpoint.x=inverse[0]*point.x+inverse[1]*point.y+inverse[2];newpoint.y=inverse[3]*point.x+inverse[4]*point.y+inverse[5];return newpoint;}
function _applyTransformMatrixToPoint(point){var px=0,py=0;px=matrix[0]*point.x+matrix[1]*point.y+matrix[2];py=matrix[3]*point.x+matrix[4]*point.y+matrix[5];point.x=Math.floor(px);point.y=Math.floor(py);}
function inverseMatrix(){var a00=matrix[0],a01=matrix[1],a02=matrix[2],a10=matrix[3],a11=matrix[4],a12=matrix[5],a20=matrix[6],a21=matrix[7],a22=matrix[8],b01=a22*a11-a12*a21,b11=-a22*a10+a12*a20,b21=a21*a10-a11*a20,det=a00*b01+a01*b11+a02*b21;if(!det){return null;}
det=1.0/det;inverse[0]=b01*det;inverse[1]=(-a22*a01+a02*a21)*det;inverse[2]=(a12*a01-a02*a11)*det;inverse[3]=b11*det;inverse[4]=(a22*a00-a02*a20)*det;inverse[5]=(-a12*a00+a02*a10)*det;inverse[6]=b21*det;inverse[7]=(-a21*a00+a01*a20)*det;inverse[8]=(a11*a00-a01*a10)*det;}
function calculateBoundingBox(){var ghostcvs=_this.editor().ghostcanvas();var gctx=ghostcvs.getContext('2d');gctx.setTransform(1,0,0,1,0,0);gctx.clearRect(0,0,ghostcvs.width,ghostcvs.height);_this.render(gctx,gctx,null,true);var idata=gctx.getImageData(0,0,ghostcvs.width,ghostcvs.height);var extremities={tx:0,ty:0,rx:0,ry:0,bx:0,by:0,lx:0,ly:0};var foundcolor=false;for(var y=0;y<idata.height;y++){foundcolor=false;for(var x=0;x<idata.width;x++){if(idata.data[((idata.width*y)+x)*4+3]){extremities.tx=x;extremities.ty=y;foundcolor=true;break;}}
if(foundcolor)break;}
for(var y=idata.height-1;y>0;y--){foundcolor=false;for(var x=0;x<idata.width;x++){if(idata.data[((idata.width*y)+x)*4+3]){extremities.bx=x;extremities.by=y;foundcolor=true;break;}}
if(foundcolor)break;}
for(var x=0;x<idata.width;x++){foundcolor=false;for(var y=0;y<idata.height;y++){if(idata.data[((idata.width*y)+x)*4+3]){extremities.lx=x;extremities.ly=y;foundcolor=true;break;}}
if(foundcolor)break;}
for(var x=idata.width-1;x>0;x--){foundcolor=false;for(var y=0;y<idata.height;y++){if(idata.data[((idata.width*y)+x)*4+3]){extremities.rx=x;extremities.ry=y;foundcolor=true;break;}}
if(foundcolor)break;}
size.width=extremities.rx-extremities.lx;size.height=extremities.by-extremities.ty;bboxpos.x=extremities.lx;bboxpos.y=extremities.ty;pivot.x=Math.floor(bboxpos.x+size.width/2);pivot.y=Math.floor(bboxpos.y+size.height/2);center.x=pivot.x;center.y=pivot.y;bboxCalculated=true;};this.highlight=function(_highlight){if(typeof(_highlight)=='boolean'){highlight=_highlight;}
return highlight;};this.fonticons=function(_fonticons){_fonticons=true;if(typeof(_fonticons)=='boolean'){fonticons=_fonticons;if(editor&&recalc_icon_tpos){var ctx=editor.getControlContext();if(fonticons){for(var i in fonticontextpos){ctx.save();var tw=0;var text='';switch(i){case'scale':ctx.font=fonticonprops[i]['size']+'px FlsObjectEditIcons';text=fonticonprops[i]['glyph'];tw=ctx.measureText(text);var mw=tw.width/2;fonticontextpos[i]['x']=-mw+fonticonprops[i]['adj_x'];fonticontextpos[i]['y']=mw+fonticonprops[i]['adj_y'];break;case'rotate':ctx.font=fonticonprops[i]['size']+'px FlsObjectEditIcons';text=fonticonprops[i]['glyph'];tw=ctx.measureText(text);var mw=tw.width/2;fonticontextpos[i]['x']=-mw+fonticonprops[i]['adj_x'];fonticontextpos[i]['y']=mw+fonticonprops[i]['adj_y'];break;case'delete':ctx.font=fonticonprops[i]['size']+'px FlsObjectEditIcons';text=fonticonprops[i]['glyph'];tw=ctx.measureText(text);var mw=tw.width/2;fonticontextpos[i]['x']=-mw+fonticonprops[i]['adj_x'];fonticontextpos[i]['y']=mw+fonticonprops[i]['adj_y'];break;case'textedit':ctx.font=fonticonprops[i]['size']+'px FlsObjectEditIcons';text=fonticonprops[i]['glyph'];tw=ctx.measureText(text);var mw=tw.width/2;fonticontextpos[i]['x']=-mw+fonticonprops[i]['adj_x'];fonticontextpos[i]['y']=mw+fonticonprops[i]['adj_y'];case'lock_unlock':ctx.font=fonticonprops[i]['size']+'px FlsObjectEditIcons';text=fonticonprops[i]['glyph'];tw=ctx.measureText(text);var mw=tw.width/2;fonticontextpos[i]['x']=-mw+fonticonprops[i]['adj_x'];fonticontextpos[i]['y']=mw+fonticonprops[i]['adj_y'];break;}
ctx.restore();}}else{ctx.save();ctx.font='25px Georgia,serif';var tw=ctx.measureText('T');var mw=tw.width/2;fonticontextpos['textedit']['x']=fonticontextpos['lock_unlock']['x']=-mw+fonticonprops['textedit']['adj_x']
fonticontextpos['textedit']['y']=fonticontextpos['lock_unlock']['y']=mw+fonticonprops['textedit']['adj_y'];ctx.restore();}
console.log(fonticontextpos)}}
return fonticons;};this.showControls=function(show){if(typeof(show)=='boolean'){showControls=show;}
return showControls;};this.editor=function(_editor){if(_editor instanceof FLSEditorCore){editor=_editor;if(this.calcbbox()){this.calculateBoundingBox();}}
return editor;};this.getScaleX=function(){return Math.sqrt(matrix[0]*matrix[0]+matrix[1]*matrix[1]);};this.getScaleY=function(){return Math.sqrt(matrix[3]*matrix[3]+matrix[4]*matrix[4]);};this.getRotation=function(){return Math.atan2(tmatrix[2],tmatrix[3]);};this.unsetCurrentControl=function(){current_control='none';};this.drawControls=function(ctx){function draw_control_circle(ccenter,obj_rot,corner){var iconpos={x:0,y:0};var arcparam={start:0,end:2*Math.PI}
switch(iconstyle){case'flat':switch(corner){case'rb':arcparam.start=1.5*Math.PI;arcparam.end=Math.PI;break;case'lb':arcparam.end=1.5*Math.PI;break;case'rt':arcparam.start=Math.PI;arcparam.end=0.5*Math.PI;break;case'lt':arcparam.start=0.5*Math.PI;arcparam.end=0;break;}
if(flat_contol_paths[corner]){if(typeof(flat_contol_paths[corner])==='string'){flat_contol_paths[corner]=SVGPath2Cnvs.parse(flat_contol_paths[corner]);flat_contol_paths_dims[corner]=SVGPath2Cnvs.bbox(flat_contol_paths[corner]);flat_contol_paths_dims[corner]['width']=flat_contol_paths_dims[corner]['x1']-flat_contol_paths_dims[corner]['x0'];flat_contol_paths_dims[corner]['height']=flat_contol_paths_dims[corner]['y1']-flat_contol_paths_dims[corner]['y0'];flat_contol_paths_dims[corner]['c_dx']=(flat_contol_paths_dims[corner]['width']/2)+flat_contol_paths_dims[corner]['x0'];flat_contol_paths_dims[corner]['c_dy']=(flat_contol_paths_dims[corner]['height']/2)+flat_contol_paths_dims[corner]['y0'];controlSize=flat_contol_paths_dims[corner]['width']/2;}
var p_diff={x:flat_contol_paths_dims[corner]['c_dx'],y:flat_contol_paths_dims[corner]['c_dy']};var dif_mtrx=[1,0,0,1,0,0];FLSUtil.tmatrixRotate(dif_mtrx,objrotation);FLSUtil.transformPoint(dif_mtrx,p_diff,true);ctx.translate(ccenter.x,ccenter.y);ctx.rotate(objrotation);ctx.beginPath();for(var cmdi=0;cmdi<flat_contol_paths[corner].length;cmdi++){ctx[flat_contol_paths[corner][cmdi]['func']].apply(ctx,flat_contol_paths[corner][cmdi]['args']);}
ctx.fill();ctx.stroke();ctx.translate(-ccenter.x,-ccenter.y);iconpos.x=ccenter.x+flat_contol_paths_dims[corner]['c_dx'];iconpos.y=ccenter.y+flat_contol_paths_dims[corner]['c_dy'];ccenter.x+=p_diff.x;ccenter.y+=p_diff.y;}else{ctx.beginPath();ctx.moveTo(ccenter.x,ccenter.y);ctx.arc(ccenter.x,ccenter.y,controlSize,arcparam.start+objrotation,arcparam.end+objrotation);ctx.closePath();ctx.fill();ctx.stroke();ctx.translate(ccenter.x,ccenter.y);ctx.rotate(objrotation);ctx.translate(-ccenter.x,-ccenter.y);iconpos.x=ccenter.x;iconpos.y=ccenter.y;}
break;default:ctx.translate(ccenter.x,ccenter.y);ctx.rotate(objrotation);ctx.beginPath();ctx.arc(0,0,controlSize,0,2*Math.PI);ctx.closePath();ctx.fill();ctx.stroke();}
return iconpos;}
if(ctx&&(isActive||highlight)){var px=use_pivot?pivot.x:0,py=use_pivot?pivot.y:0,zoom=this.editor().zoom();var _bboxpad=bboxpad;var lt={x:(bboxpos.x-_bboxpad-px),y:(bboxpos.y-_bboxpad-py)};var rt={x:size.width+bboxpos.x-px+_bboxpad,y:bboxpos.y-py-_bboxpad};var rb={x:(size.width)+(bboxpos.x-px)+_bboxpad,y:(bboxpos.y-py)+(size.height)+_bboxpad};var lb={x:(bboxpos.x-px-_bboxpad),y:(bboxpos.y-py)+(size.height)+_bboxpad};_applyTransformMatrixToPoint(lt);_applyTransformMatrixToPoint(rt);_applyTransformMatrixToPoint(rb);_applyTransformMatrixToPoint(lb);lt.x+=px;lt.y+=py;rt.x+=px;rt.y+=py;rb.x+=px;rb.y+=py;lb.x+=px;lb.y+=py;if(this.inGroup()){var parent_mtrx=this.parentGroup.getMatrix().slice(0);FLSUtil.transformPoint(parent_mtrx,lt,true);FLSUtil.transformPoint(parent_mtrx,rt,true);FLSUtil.transformPoint(parent_mtrx,rb,true);FLSUtil.transformPoint(parent_mtrx,lb,true);}
if(zoom!=1){FLSUtil.transformPoint([zoom,0,0,zoom,0,0],lt,true);FLSUtil.transformPoint([zoom,0,0,zoom,0,0],rt,true);FLSUtil.transformPoint([zoom,0,0,zoom,0,0],rb,true);FLSUtil.transformPoint([zoom,0,0,zoom,0,0],lb,true);}
if(highlight){ctx.strokeStyle='#006696';ctx.fillStyle='rgba(0,0,100,0.2)';}else{ctx.strokeStyle=current_control=='translate'?'#006696':'#000';}
ctx.lineWidth=0.5;ctx.beginPath();ctx.moveTo(lt.x,lt.y);ctx.lineTo(rt.x,rt.y);ctx.lineTo(rb.x,rb.y);ctx.lineTo(lb.x,lb.y);ctx.closePath();ctx.stroke();if(highlight){ctx.fill();}
if(showControls&&highlight===false){var ilinewidth=4.5;var cicon_size=(controlSize/2)-1;var objrotation=-_this.getRotation();ctx.lineCap='round';for(var ci in controls){switch(ci){case'scale':if(!fixed&&scalable){ctx.save();ctx.fillStyle=current_control==ci?'rgba(64, 125, 181,0.95)':fonticonprops[ci]['bg_color'];ctx.strokeStyle='#000';var ioffset=draw_control_circle(rb,objrotation,'rb');if(fonticons){ctx.font=fonticonprops[ci]['size']+'px FlsObjectEditIcons';ctx.fillStyle=current_control==ci?'rgb(255,255,255)':fonticonprops[ci]['color'];var text=fonticonprops[ci]['glyph'];ctx.fillText(text,fonticontextpos[ci]['x']+ioffset.x,fonticontextpos[ci]['y']+ioffset.y);}else{ctx.translate(ioffset.x,ioffset.y);ctx.beginPath();ctx.lineWidth=ilinewidth;ctx.strokeStyle=current_control==ci?'rgb(255,255,255)':fonticonprops[ci]['color'];ctx.moveTo(-cicon_size,-cicon_size);ctx.lineTo(cicon_size,cicon_size);ctx.moveTo(-cicon_size,-cicon_size);ctx.lineTo(-cicon_size,0);ctx.moveTo(-cicon_size,-cicon_size);ctx.lineTo(0,-cicon_size);ctx.moveTo(cicon_size,cicon_size);ctx.lineTo(cicon_size,0);ctx.moveTo(cicon_size,cicon_size);ctx.lineTo(0,cicon_size);ctx.stroke();}
ctx.restore();}
controls[ci]=rb;break;case'rotate':if(hasrotate&&!fixed){ctx.save();ctx.fillStyle=current_control==ci?'rgba(64, 125, 181,0.95)':fonticonprops[ci]['bg_color'];ctx.strokeStyle='#000';var ioffset=draw_control_circle(rt,objrotation,'rt');if(fonticons){ctx.font=fonticonprops[ci]['size']+'px FlsObjectEditIcons';ctx.fillStyle=current_control==ci?'rgb(255,255,255)':fonticonprops[ci]['color'];var text=fonticonprops[ci]['glyph'];ctx.fillText(text,fonticontextpos[ci]['x']+ioffset.x,fonticontextpos[ci]['y']+ioffset.y);}else{ctx.translate(ioffset.x,ioffset.y);ctx.beginPath();ctx.lineWidth=ilinewidth;ctx.strokeStyle=current_control==ci?'rgb(255,255,255)':fonticonprops[ci]['color'];ctx.arc(0,0,controlSize-7.5,0.35*Math.PI,0);ctx.stroke();ctx.moveTo(controlSize-7.5,0);ctx.lineTo(controlSize-5,-9);ctx.moveTo(controlSize-7.5,0);ctx.lineTo(controlSize-16,-4);ctx.stroke();}
ctx.restore();}
controls[ci]=rt;break;case'delete':if(removable){ctx.save();ctx.fillStyle=current_control==ci?'rgba(231, 35, 28,0.95)':fonticonprops[ci]['bg_color'];ctx.strokeStyle='#000';var ioffset=draw_control_circle(lt,objrotation,'lt');if(fonticons){ctx.font=fonticonprops[ci]['size']+'px FlsObjectEditIcons';ctx.fillStyle=current_control==ci?'rgb(255,255,255)':fonticonprops[ci]['color'];var text=fonticonprops[ci]['glyph'];ctx.fillText(text,fonticontextpos[ci]['x']+ioffset.x,fonticontextpos[ci]['y']+ioffset.y);}else{ctx.translate(ioffset.x,ioffset.y);ctx.beginPath();ctx.lineWidth=ilinewidth;ctx.strokeStyle=current_control==ci?'rgb(255,255,255)':fonticonprops[ci]['color'];ctx.moveTo(-cicon_size,-cicon_size);ctx.lineTo(cicon_size,cicon_size);ctx.moveTo(cicon_size,-cicon_size);ctx.lineTo(-cicon_size,cicon_size);ctx.stroke();}
ctx.restore();}
controls[ci]=lt;break;case'textedit':if(hastextedit&&editable){ctx.save();ctx.fillStyle=current_control==ci?'rgba(64, 125, 181,0.95)':fonticonprops[ci]['bg_color'];ctx.strokeStyle='#000';var ioffset=draw_control_circle(lb,objrotation,'lb');ctx.font=fonticons?fonticonprops[ci]['size']+'px FlsObjectEditIcons':'25px Georgia,serif';ctx.fillStyle=current_control==ci?'rgb(255,255,255)':fonticonprops[ci]['color'];var text=fonticons?fonticonprops[ci]['glyph']:'T';ctx.fillText(text,fonticontextpos[ci]['x']+ioffset.x,fonticontextpos[ci]['y']+ioffset.y);ctx.restore();}
controls[ci]=lb;break;case'lock_unlock':if((!fixed||this.unlocked())&&unlockable){ctx.save();ctx.fillStyle=current_control==ci?'rgba(64, 125, 181,0.95)':fonticonprops[ci]['bg_color'];ctx.strokeStyle='#000';var ioffset=draw_control_circle(lb,objrotation,'lb');var icon=unlocked?fonticonprops['unlock']['glyph']:fonticonprops['lock']['glyph'];var alticon=unlocked?'U':'L';ctx.font=fonticons?fonticonprops[ci]['size']+'px FlsObjectEditIcons':'25px Georgia,serif';ctx.fillStyle=current_control==ci?'rgb(255,255,255)':(unlocked?fonticonprops['unlock']['color']:fonticonprops[ci]['color']);var text=fonticons?icon:alticon;ctx.fillText(text,fonticontextpos[ci]['x']+ioffset.x,fonticontextpos[ci]['y']+ioffset.y);ctx.restore();}
controls[ci]=lb;break;}}
ctx.lineCap='butt';}}};this.setActive=function(active){if(typeof(active)!=='boolean'){active=true;}
isActive=active;if(!isActive){current_control='none';highlight=false;}};this.getActive=function(){return isActive;};this.pointInBbox=function(point){var extrpxl=isActive?bboxpad:0;var vpoint=this.editor().viewtopleft();var zoom=this.editor().zoom();extrpxl/=zoom;var istext=(this instanceof FLSEditorCore.CText)||this.stringdata;var _point={x:(point.x-vpoint.x)/zoom,y:(point.y-vpoint.y)/zoom};if(istext||isActive){_point=_transformPoint(_point);return(bboxpos.x-extrpxl<=_point.x)&&(size.width+bboxpos.x+extrpxl>=_point.x)&&(bboxpos.y-extrpxl<=_point.y)&&(size.height+bboxpos.y+extrpxl>=_point.y);}
return false;};this.containsPoint=function(point){if(!selectable)return false;var extrpxl=isActive?bboxpad:0;var vpoint=this.editor().viewtopleft();var zoom=this.editor().zoom();var _point={x:point.x-vpoint.x,y:point.y-vpoint.y};extrpxl/=zoom;var istext=this instanceof FLSEditorCore.CText;var isimg=this instanceof FLSEditorCore.CImage;if(istext||isActive){_point=_transformPoint(zoom!=1?FLSUtil.unTransformPoint([zoom,0,0,zoom,0,0],_point):_point);return(bboxpos.x-extrpxl<=_point.x)&&(size.width+bboxpos.x+extrpxl>=_point.x)&&(bboxpos.y-extrpxl<=_point.y)&&(size.height+bboxpos.y+extrpxl>=_point.y);}else{if(point.clickColor[3]>0){var ghostcvs=this.editor().ghostcanvas();var gctx=ghostcvs.getContext('2d');gctx.save();gctx.setTransform(1,0,0,1,0,0);gctx.clearRect(0,0,ghostcvs.width,ghostcvs.height);gctx.setTransform(zoom,0,0,zoom,vpoint.x,vpoint.y);this.render(gctx,gctx);var clr=gctx.getImageData(point.x,point.y,1,1).data;gctx.restore();var samecolor=(clr[0]==point.clickColor[0]&&clr[1]==point.clickColor[1]&&clr[2]==point.clickColor[2]&&clr[3]==point.clickColor[3]);return samecolor||(isimg?clr[3]>0:samecolor);}}};this.render=function(ctx,cctx,timedelta){console.log('this is the superclass of all objects. Nothing renders here.');};this.setPosition=function(x,y){x=parseFloat(x);y=parseFloat(y);if(!isNaN(x)&&!isNaN(y)){position.x=x;position.y=y;tmatrix[4]=x;tmatrix[5]=y;}else{console.log("Invald coordinates");}
updateMatrix();return position;};this.setPositionX=function(x){x=parseFloat(x);if(!isNaN(x)){position.x=x;tmatrix[4]=x;}else{console.log("Invald coordinates");}
updateMatrix();return position;};this.setPositionY=function(y){y=parseFloat(y);if(!isNaN(y)){position.y=y;tmatrix[5]=y;}else{console.log("Invald coordinates");}
updateMatrix();return position;};this.getPosition=function(){return{x:tmatrix[4],y:tmatrix[5]};};this.getSize=function(){return size;};this.setSize=function(width,height){width=parseFloat(width);height=parseFloat(height);if(!isNaN(width)&&!isNaN(height)){size.width=width;size.height=height;}else{console.log("Invald sizes");}
return size;};this.rotate=function(angle,deg){if(typeof(deg)!=='boolean'){deg=false;}
if(deg){angle=angle*DEG_TO_RAD;}
var c=Math.cos(angle);var s=Math.sin(angle);var m11=tmatrix[0]*c+tmatrix[1]*-s;var m12=tmatrix[0]*s+tmatrix[1]*c;var m21=tmatrix[2]*c+tmatrix[3]*-s;var m22=tmatrix[2]*s+tmatrix[3]*c;tmatrix[0]=m11;tmatrix[1]=m12;tmatrix[2]=m21;tmatrix[3]=m22;updateMatrix();};this.mrotate=function(from,to,origin){if(fixed||!hasrotate)return false;var pos=this.getPosition();var zoom=this.editor().zoom();FLSUtil.unTransformPoint([zoom,0,0,zoom,0,0],origin,true);origin.x+=pos.x;origin.y+=pos.y;var _pivot=use_pivot?{x:pivot.x+origin.x,y:pivot.y+origin.y}:origin;var angle=FLSUtil.lineAngleRad(_pivot,FLSUtil.unTransformPoint([zoom,0,0,zoom,0,0],from),FLSUtil.unTransformPoint([zoom,0,0,zoom,0,0],to));this.rotate(angle);};this.translate=function(dx,dy){tmatrix[4]+=tmatrix[0]*dx+tmatrix[2]*dy;tmatrix[5]+=tmatrix[1]*dx+tmatrix[3]*dy;position.x=tmatrix[4];position.y=tmatrix[5];updateMatrix();return tmatrix;};this.translateX=function(dx){return _this.translate(dx,0);};this.translateY=function(dy){return _this.translate(0,dy);};this.move=function(from,to){if(fixed)return false;var zoom=this.editor().zoom();var _from,_to,cfrom={x:from.x,y:from.y},cto={x:to.x,y:to.y};if(zoom!=1){FLSUtil.unTransformPoint([zoom,0,0,zoom,0,0],cfrom,true);FLSUtil.unTransformPoint([zoom,0,0,zoom,0,0],cto,true);}
_from=_transformPoint(cfrom);_to=_transformPoint(cto);if(this.stringdata&&this.parentGroup){var gmtrx=[1,0,0,1,0,0];FLSUtil.tmatrixScale(gmtrx,this.parentGroup.getScaleX(),this.parentGroup.getScaleY());FLSUtil.tmatrixRotate(gmtrx,-this.parentGroup.getRotation());FLSUtil.unTransformPoint(gmtrx,_from,true);FLSUtil.unTransformPoint(gmtrx,_to,true);}
var dx=_to.x-_from.x;var dy=_to.y-_from.y;this.translate(dx,dy);};this.scale=function(sx,sy){tmatrix[0]*=sx;tmatrix[1]*=sx;tmatrix[2]*=sy;tmatrix[3]*=sy;updateMatrix();return tmatrix;};this.scaleUniform=function(d){return _this.scale(d,d);};this.resetScale=function(){var tmpmtrx=[1,0,0,1,tmatrix[4],tmatrix[5]];FLSUtil.tmatrixRotate(tmpmtrx,-this.getRotation());this.setMatrix(tmpmtrx);};this.mscale=function(from,to,origin,restrict,up){if(fixed||!scalable)return false;if(typeof(restrict)!=='boolean')restrict=false;if(typeof(up)!=='boolean')up=true;var pos=this.getPosition();var zoom=this.editor().zoom();FLSUtil.unTransformPoint([zoom,0,0,zoom,0,0],origin,true);origin.x+=pos.x;origin.y+=pos.y;var _pivot=use_pivot?{x:pivot.x+origin.x,y:pivot.y+origin.y}:origin;var sizeold=FLSUtil.pointDistance(_pivot,FLSUtil.unTransformPoint([zoom,0,0,zoom,0,0],from));var sizenew=FLSUtil.pointDistance(_pivot,FLSUtil.unTransformPoint([zoom,0,0,zoom,0,0],to));var s=Math.abs(sizenew/sizeold);if(restrict&&((up&&s>1)||(!up&&s<1))){return false;}
this.scaleUniform(s);};this.getMatrix=function(){return tmatrix;};this.setMatrix=function(m){if(typeof(m)=='object'&&m.length==6){tmatrix[0]=m[0];tmatrix[1]=m[1];tmatrix[2]=m[2];tmatrix[3]=m[3];tmatrix[4]=m[4];tmatrix[5]=m[5];}
updateMatrix();return tmatrix;};this.inGroup=function(_ingroup){if(typeof(_ingroup)=='boolean'){inGroup=_ingroup;}
return inGroup;};this.removable=function(_removable){if(typeof(_removable)=='boolean'){removable=_removable;}
return removable;};this.hasrotate=function(_hasrotate){if(typeof(_hasrotate)=='boolean'){hasrotate=_hasrotate;}
return hasrotate;};this.scalable=function(_scalable){if(typeof(_scalable)=='boolean'){scalable=_scalable;}
return scalable;};this.selectable=function(_selectable){if(typeof(_selectable)=='boolean'){selectable=_selectable;}
return selectable;};this.fixed=function(_fixed){if(typeof(_fixed)=='boolean'){fixed=_fixed;}
return fixed;};this.editable=function(_editable){if(typeof(_editable)=='boolean'){editable=_editable;}
return editable;};this.hastextedit=function(_hastextedit){if(typeof(_hastextedit)=='boolean'){hastextedit=_hastextedit;if(hastextedit){controls['textedit']={x:0,y:0};}else{if(controls['textedit']){delete controls['textedit'];}}}
return hastextedit;};this.unlockable=function(_unlockable){if(typeof(_unlockable)=='boolean'){unlockable=_unlockable&&(this.hasStringPath==true);if(unlockable){controls['lock_unlock']={x:0,y:0};}else{if(controls['lock_unlock']){delete controls['lock_unlock'];}}}
return unlockable;};this.unlocked=function(_unlocked){if(unlockable&&(typeof(_unlocked)=='boolean')){unlocked=_unlocked;}
return unlocked;};this.size=function(){return size;};this.calculateBoundingBox=function(){calculateBoundingBox();};this.use_pivot=function(set){if(typeof(set)!='boolean'){set=use_pivot;}
if(use_pivot===true){if(set===false){calculatePivotTransform(false);}else{}}else{if(set==true){calculatePivotTransform(true);}}
use_pivot=set;return use_pivot;};this.get_use_pivot=function(){return use_pivot;};this.whichControl=function(mousepos,mousepos2,only_corner_controls){var op='op:none';if(isActive){if(showControls){var tmp=editor.viewtopleft();for(var ci in controls){var cpos={x:controls[ci].x+tmp.x,y:controls[ci].y+tmp.y};if(FLSUtil.pointInCircle(cpos,controlSize,mousepos)){op='op:'+ci;break;}}}
if(typeof(only_corner_controls)!='boolean'){only_corner_controls=false;}
if(op=='op:none'){var check=only_corner_controls?this.pointInBbox(mousepos):this.containsPoint(mousepos);if(check){op='op:translate';}}}
current_control=op.replace('op:','');return op;};this.pivot=function(point){if(typeof(point)=='object'&&point!=null){pivot.x=point.x;pivot.y=point.y;}
return pivot;};this.center=function(point){if(typeof(point)=='object'&&point!=null){center.x=point.x;center.y=point.y;}
return center;};this.transformsApply=function(ctx){if(use_pivot===true){ctx.translate(pivot.x,pivot.y);ctx['transform'].apply(ctx,this.getMatrix());ctx.translate(-pivot.x,-pivot.y);}else{ctx['transform'].apply(ctx,this.getMatrix());}};this.getProperties=function(){var _tmatrix=[];_tmatrix[0]=tmatrix[0];_tmatrix[1]=tmatrix[1];_tmatrix[2]=tmatrix[2];_tmatrix[3]=tmatrix[3];_tmatrix[4]=tmatrix[4];_tmatrix[5]=tmatrix[5];return{tmatrix:_tmatrix};};this.setProperties=function(props){if(typeof(props.tmatrix)!='undefined'){this.setMatrix(props.tmatrix);}};this.objCenter=function(corners){var zoom=this.editor().zoom();var _pivot={x:center.x,y:center.y};_applyTransformMatrixToPoint(_pivot);if(zoom!=1){FLSUtil.transformPoint([zoom,0,0,zoom,0,0],_pivot,true);}
_pivot.x=Math.round(_pivot.x);_pivot.y=Math.round(_pivot.y);var _bboxpad=bboxpad;if(corners instanceof Array){corners.length=0;var px=use_pivot?pivot.x:0,py=use_pivot?pivot.y:0;corners.push({x:(bboxpos.x-_bboxpad-px),y:(bboxpos.y-_bboxpad-py)});corners.push({x:(size.width+(bboxpos.x-px)+_bboxpad),y:(bboxpos.y-py)+(size.height)+_bboxpad});for(var i=0;i<corners.length;i++){_applyTransformMatrixToPoint(corners[i]);if(zoom!=1){FLSUtil.transformPoint([zoom,0,0,zoom,0,0],corners[i],true);}
corners[i]['x']=Math.round(corners[i]['x']);corners[i]['y']=Math.round(corners[i]['y']);}}
return _pivot;};this.bboxpad=function(padpx){if(!isNaN(padpx=parseFloat(padpx))){bboxpad=padpx;}
return bboxpad;};this.bboxpos=function(x,y){x=parseFloat(x);y=parseFloat(y);if(!isNaN(x)&&!isNaN(y)){bboxpos.x=x;bboxpos.y=y;}
return{x:bboxpos.x,y:bboxpos.y};};this.calcbbox=function(){return false;};this.transformPoint=function(point){return _transformPoint(point);};this.colorEditable=function(c_editable){if(typeof(c_editable)=='boolean'){colorEditable=c_editable;}
return colorEditable;};this.bboxCalculated=function(_calced){if(typeof(_calced)=='boolean'){bboxCalculated=_calced;}
return bboxCalculated;};this.applyDropShadow=function(ctx){if(use_shadow&&ctx){ctx.shadowColor=obj_shadow.color?obj_shadow.color:'rgb(0,0,0)';ctx.shadowBlur=obj_shadow.blur?obj_shadow.blur:0;ctx.shadowOffsetX=obj_shadow.offset_x?obj_shadow.offset_x:0;ctx.shadowOffsetY=obj_shadow.offset_y?obj_shadow.offset_y:0;}};this.setDropShadow=function(shadow_settings){if(typeof(shadow_settings)==='object'){var skip_color=false;for(var ss in shadow_settings){switch(ss){case'color':case'opacity':if(skip_color)break;var clr=shadow_settings.color?shadow_settings.color:(obj_shadow.color?obj_shadow.color:'rgb(0,0,0)');clr=FLSUtil.normalizeCssColor(clr);var sh_opacity=parseFloat(shadow_settings.opacity,10);sh_opacity=isNaN(sh_opacity)?1:(sh_opacity<0?0:sh_opacity);var rgb=FLSUtil.hexdec2rgb(clr.uint);obj_shadow.opacity=sh_opacity;if(sh_opacity<1){rgb.push(sh_opacity);clr='rgba('+rgb.join(',')+')';}else{clr='rgb('+rgb.join(',')+')';}
obj_shadow.color=clr;skip_color=true;break;case'offset':if(shadow_settings.offset instanceof Object){shadow_settings.offset.x=parseInt(shadow_settings.offset.x,10);shadow_settings.offset.y=parseInt(shadow_settings.offset.y,10);}else{var offset=parseInt(shadow_settings.offset.x,10);offset=isNaN(offset)?0:offset;shadow_settings.offset={x:offset,y:offset};}
obj_shadow.offset_x=isNaN(shadow_settings.offset.x)?0:shadow_settings.offset.x;obj_shadow.offset_y=isNaN(shadow_settings.offset.y)?0:shadow_settings.offset.y;break;case'blur':shadow_settings.blur=parseInt(shadow_settings.blur,10);obj_shadow.blur=isNaN(shadow_settings.blur)?0:shadow_settings.blur;break;}}}
return obj_shadow;};this.getDropShadow=function(){return obj_shadow;};this.use_shadow=function(use_sh){if(typeof(use_sh)==='boolean'){use_sh=(obj_shadow.blur||obj_shadow.offset_x||obj_shadow.offset_y)?use_sh:false;use_shadow=use_sh;}
return use_shadow;};this.applyTransformMatrixToPoint=function(point){_applyTransformMatrixToPoint(point);};this.toSVG=function(svgparent){};this.setColor=function(){};this.getColor=function(){};this.setFillOpacity=function(){};this.getFillOpacity=function(){};this.setColorAllChild=function(){};this.setStroke=function(){};this.setStrokeWidth=function(){};this.getStroke=function(){return null;};this.getStrokeWidth=function(){return 0};this.mresize_x=function(){};this.mresize_y=function(){};this.mresize_xs=function(){};this.kbresize=function(){};this.mvertex_move=function(){};this.mpath_scale=function(){};};FLSEditorCore.CRect=function(x,y,w,h,brdr,fill){FLSEditorCore.CObject.apply(this,arguments);var border=brdr||null;var color=fill||'rgb(255,0,0)';var stroke_width=0;this.setPosition(x,y);this.setSize(w,h);this.pivot({x:w/2,y:h/2});this.center(this.pivot());this.render=function(ctx,cctx,timedelta){var sze=this.getSize();ctx.save();if(color){ctx.fillStyle=color;}
if(border){ctx.strokeStyle=border;}
ctx.lineWidth=stroke_width;this.transformsApply(ctx);ctx.fillRect(0,0,sze.width,sze.height);if(border){ctx.strokeRect(0,0,sze.width,sze.height);}
ctx.restore();this.drawControls(cctx);};this.getColor=function(){return color;};this.setColor=function(_color){if(typeof(_color)!='undefined'){color=['none','rgb(255,255,255)','rgb(100%,100%,100%)'].indexOf(_color)>-1&&this.id=='bacgroundColor'?'rgba(0,0,0,0)':_color.toString().trim();}};this.setColorAllChild=function(){this.setColor.apply(this,arguments);}
this.toSVG=function(svgparent){var rn=document.createElementNS('http://www.w3.org/2000/svg','rect');var a=0;if(color&&color.indexOf('%')==-1){var rgb=color.replace(/rgb(a?)\(/,'').replace(')','').split(',');var r=(parseInt(rgb[0],10)*100/255).toFixed(6);var g=(parseInt(rgb[1],10)*100/255).toFixed(6);var b=(parseInt(rgb[2],10)*100/255).toFixed(6);if(rgb[3]){a=parseInt(rgb[3],10);if(!a)return'';}
color=a?color:'rgb('+r+'%,'+g+'%,'+b+'%)';}
var sze=this.getSize();rn.setAttribute('style','fill:'+(a?'none':color));rn.setAttribute('transform','matrix('+this.getMatrix().join(',')+')');rn.setAttribute('x',0);rn.setAttribute('y',0);rn.setAttribute('width',sze.width+'px');rn.setAttribute('height',sze.height+'px');if(typeof(this.id)!='undefined'&&this.id){rn.setAttribute('id',this.id);}
if(typeof(svgparent)!='undefined'){svgparent.appendChild(document.createTextNode('\n    '));svgparent.appendChild(rn);}
return rn;};this.setStroke=function(_borderclr){if(_borderclr){_borderclr=FLSUtil.normalizeCssColor(_borderclr);border=_borderclr.css;}};this.setStrokeWidth=function(_strkwidth){_strkwidth=parseInt(_strkwidth,10)
if(!isNaN(_strkwidth)){stroke_width=_strkwidth;}else{stroke_width=0;}};};FLSEditorCore.CRect.prototype=new FLSEditorCore.CObject;FLSEditorCore.CLayoutZone=function(){FLSEditorCore.CRect.apply(this,arguments);var controls={'resize_x':{x:0,y:0},'resize_y':{x:0,y:0},'delete':{x:0,y:0},'resize_xs':{x:0,y:0}};var current_control='none';var controlSize=10;var min_zone_width=20;var min_zone_height=10;var _this=this;var setSize_org=this.setSize;this.align='left';this.vAlign='middle';this.setColor('rgba(255,0,0,0.5)');this.setStrokeWidth(1);this.bboxpad(0);this.hasrotate(false);this.colorEditable(false);this.removable(true);this.containsPoint=function(point){var extrpxl=this.getActive()?this.bboxpad():0;var vpoint=this.editor().viewtopleft();var zoom=this.editor().zoom();var _point={x:point.x-vpoint.x,y:point.y-vpoint.y};extrpxl/=zoom;var bboxpos=this.bboxpos();var size=this.getSize();if(this.getActive()){_point=this.transformPoint(zoom!=1?FLSUtil.unTransformPoint([zoom,0,0,zoom,0,0],_point):_point);return(bboxpos.x-extrpxl<=_point.x)&&(size.width+bboxpos.x+extrpxl>=_point.x)&&(bboxpos.y-extrpxl<=_point.y)&&(size.height+bboxpos.y+extrpxl>=_point.y);}else{if(point.clickColor[3]>0){var ghostcvs=this.editor().ghostcanvas();var gctx=ghostcvs.getContext('2d');gctx.save();gctx.setTransform(1,0,0,1,0,0);gctx.clearRect(0,0,ghostcvs.width,ghostcvs.height);gctx.setTransform(zoom,0,0,zoom,vpoint.x,vpoint.y);this.render(gctx,gctx);var clr=gctx.getImageData(point.x,point.y,1,1).data;gctx.restore();return clr[3]>0;}}};this.setSize=function(w,h){this.pivot({x:w/2,y:h/2});this.center(this.pivot());return setSize_org.apply(this,arguments);};this.drawControls=function(ctx){var highlight=this.highlight();var showControls=this.showControls();if(ctx){var use_pivot=this.use_pivot();var pivot=this.pivot();var bboxpad=this.bboxpad();var bboxpos=this.bboxpos();var size=this.getSize();var px=use_pivot?pivot.x:0,py=use_pivot?pivot.y:0,zoom=this.editor().zoom();var _bboxpad=bboxpad;var lt={x:(bboxpos.x-_bboxpad-px),y:(bboxpos.y-_bboxpad-py)};var rt={x:size.width+bboxpos.x-px+_bboxpad,y:bboxpos.y-py-_bboxpad};var rb={x:(size.width)+(bboxpos.x-px)+_bboxpad,y:(bboxpos.y-py)+(size.height)+_bboxpad};var lb={x:(bboxpos.x-px-_bboxpad),y:(bboxpos.y-py)+(size.height)+_bboxpad};this.applyTransformMatrixToPoint(lt);this.applyTransformMatrixToPoint(rt);this.applyTransformMatrixToPoint(rb);this.applyTransformMatrixToPoint(lb);lt.x+=px;lt.y+=py;rt.x+=px;rt.y+=py;rb.x+=px;rb.y+=py;lb.x+=px;lb.y+=py;if(zoom!=1){FLSUtil.transformPoint([zoom,0,0,zoom,0,0],lt,true);FLSUtil.transformPoint([zoom,0,0,zoom,0,0],rt,true);FLSUtil.transformPoint([zoom,0,0,zoom,0,0],rb,true);FLSUtil.transformPoint([zoom,0,0,zoom,0,0],lb,true);}
if(this.getActive()||highlight){if(highlight){ctx.strokeStyle='#006696';ctx.fillStyle='rgba(0,0,100,0.2)';}else{ctx.strokeStyle=current_control=='translate'?'#006696':'#000';}
ctx.lineWidth=0.5;ctx.beginPath();ctx.moveTo(lt.x,lt.y);ctx.lineTo(rt.x,rt.y);ctx.lineTo(rb.x,rb.y);ctx.lineTo(lb.x,lb.y);ctx.closePath();ctx.stroke();if(highlight){ctx.fill();}
if(showControls&&highlight===false){var cntrl_radius=controlSize/2;var ilinewidth=4.5;ctx.save();ctx.strokeStyle='rgb(255,255,255)';ctx.shadowColor='rgba(0,0,0,0.8)';ctx.shadowBlur=3;ctx.shadowOffsetX=1;ctx.shadowOffsetY=1;var objrotation=-_this.getRotation();ctx.lineCap='round';for(var ci in controls){switch(ci){case'resize_x':controls[ci]={x:rt.x,y:(rt.y+rb.y)/2};ctx.fillStyle=current_control==ci?'rgb(255,255,255)':'rgb(101,152,19)';break;case'resize_y':controls[ci]={x:(lb.x+rb.x)/2,y:rb.y};ctx.fillStyle=current_control==ci?'rgb(255,255,255)':'rgb(101,152,19)';break;case'delete':controls[ci]={x:lt.x+10,y:lt.y};ctx.fillStyle='rgb(255,0,0)';break;case'resize_xs':controls[ci]={x:lt.x,y:(rt.y+rb.y)/2};ctx.fillStyle=current_control==ci?'rgb(255,255,255)':'rgb(101,152,19)';break;}
ctx.beginPath();ctx.arc(controls[ci].x,controls[ci].y,cntrl_radius,0,2*Math.PI);ctx.closePath();ctx.fill();ctx.stroke();}
ctx.restore();}}else{ctx.save();ctx.strokeStyle='#000';ctx.lineWidth=0.5;ctx.beginPath();ctx.moveTo(lt.x,lt.y);ctx.lineTo(rt.x,rt.y);ctx.lineTo(rb.x,rb.y);ctx.lineTo(lb.x,lb.y);ctx.closePath();ctx.stroke();ctx.restore();}}};this.whichControl=function(mousepos,mousepos2){var op='op:none';if(this.getActive()){if(this.showControls()){var tmp=this.editor().viewtopleft();for(var ci in controls){var cpos={x:controls[ci].x+tmp.x,y:controls[ci].y+tmp.y};if(FLSUtil.pointInCircle(cpos,controlSize,mousepos)){op='op:'+ci;break;}}}
if(op=='op:none'){var check=this.containsPoint(mousepos);if(check){op='op:translate';}}}
current_control=op.replace('op:','');return op;};this.mresize_x=function(from,to,origin){var zoom=this.editor().zoom();var _to=FLSUtil.unTransformPoint([zoom,0,0,zoom,0,0],to);var _from=FLSUtil.unTransformPoint([zoom,0,0,zoom,0,0],from);var dx=_to.x-_from.x;var csize=_this.getSize();var new_width=csize.width+dx;new_width=new_width<min_zone_width?min_zone_width:new_width;this.setSize(new_width,csize.height);};this.mresize_xs=function(from,to,origin){var zoom=this.editor().zoom();var _to=FLSUtil.unTransformPoint([zoom,0,0,zoom,0,0],to);var _from=FLSUtil.unTransformPoint([zoom,0,0,zoom,0,0],from);var dx=_to.x-_from.x;var csize=_this.getSize();var new_width=csize.width-dx;if(new_width<=min_zone_width){new_width=min_zone_width;dx=0;}
this.setSize(new_width,csize.height);this.translateX(dx);};this.mresize_y=function(from,to,origin){var zoom=this.editor().zoom();var _to=FLSUtil.unTransformPoint([zoom,0,0,zoom,0,0],to);var _from=FLSUtil.unTransformPoint([zoom,0,0,zoom,0,0],from);var dy=_to.y-_from.y;var csize=_this.getSize();var new_height=csize.height+dy;new_height=new_height<min_zone_height?min_zone_height:new_height;this.setSize(csize.width,new_height);};this.kbresize=function(x,y,keep_right){if(typeof(keep_right)!=='boolean'){keep_right=false;}
x=parseFloat(x);y=parseFloat(y);x=isNaN(x)?0:x;y=isNaN(y)?0:y;var _x=keep_right?x*-1:x;var _y=keep_right?y*-1:y;var sz=this.getSize();var w=sz.width+_x;var h=sz.height+_y;if(w<min_zone_width){w=min_zone_width}
if(h<min_zone_height){h=min_zone_height}
if((keep_right==true)&&(w!=sz.width)){this.translateX(x);}
if((keep_right==true)&&(h!=sz.height)){this.translateY(y);}
this.setSize(w,h);};}
FLSEditorCore.CLayoutZone.prototype=new FLSEditorCore.CRect;FLSEditorCore.CText=function(str){FLSEditorCore.CObject.apply(this,arguments);var font_family='Helvetica';var fontsize=25;var fontstyle='';var color='rgb(0,0,0)';var stroke=null;var stroke_width=0;var text=str;var default_text='Enter Text';var _this=this;var mscale_org=this.mscale;var minscale=7;var bold_font=false;var italic_font=false;updateMeasurements();this.xmlspace='preserve';this.mscale=function(){if(this.restrict){var is_downscale=Math.min(arguments[1].x-arguments[0].x,arguments[1].y-arguments[0].y)<=0;var cscale=this.getScaleX()*fontsize;if(cscale<=minscale&&is_downscale){this.scaleUniform(minscale/cscale);return false;}}
return mscale_org.apply(this,arguments);};this.default_text=function(dstr){if(typeof(dstr)=='string'){default_text=dstr;}
return default_text;};this.editTextInline=function(){var vrtxt=document.createElement('input');vrtxt.type='text';vrtxt.style.position='absolute';vrtxt.style.visibility='none';var tp=this.getPosition();vrtxt.style.top=tp.y+'px';vrtxt.style.left=0;vrtxt.style.width=0;vrtxt.style.padding=0;vrtxt.value=text;var canvas=this.editor().getCanvasWrapper();canvas.appendChild(vrtxt);if(document.addEventListener){vrtxt.addEventListener('keypress',keyUpHandler,false);vrtxt.addEventListener('blur',function(){this.parentNode.removeChild(this);},false);}else if(document.attachEvent){vrtxt.attachEvent("onkeypress",keyUpHandler);vrtxt.addEventListener('onblur',function(){this.parentNode.removeChild(this);});}
vrtxt.focus();function keyUpHandler(event){var key=event.which;if(key==13){this.parentNode.removeChild(this);}else{text=this.value;updateMeasurements();}
return false;}};function updateMeasurements(){if(text){var tcvs=document.createElement('canvas');var ctx=tcvs.getContext('2d');ctx.font=fontstyle+' '+fontsize+'px '+font_family;ctx.fillStyle='#000';var txtmetrics=ctx.measureText(text);var twdth=Math.round(txtmetrics.width);var domtxtmetrics=FLSUtil.measureText(text,font_family,fontsize,bold_font,italic_font);_this.setSize(twdth,domtxtmetrics.pixel_height);_this.bboxpos(0,-domtxtmetrics.pixel_ascent);var pivot_y=-(domtxtmetrics['pixel_ascent']/2)+(domtxtmetrics.pixel_descent/2);_this.pivot({x:Math.floor((twdth)/2),y:Math.floor(pivot_y)});_this.center(_this.pivot());_this.pixel_height=domtxtmetrics.pixel_height;_this.pixel_ascent=domtxtmetrics.pixel_ascent;_this.descent=domtxtmetrics.pixel_descent;}else{_this.setSize(0,0);}}
this.render=function(ctx,cctx,timedelta){ctx.save();ctx.font=fontstyle+' '+fontsize+'px '+font_family;ctx.fillStyle=color;if(stroke){ctx.strokeStyle=stroke;if(stroke_width)ctx.lineWidth=stroke_width;}
this.applyDropShadow(ctx);this.transformsApply(ctx);ctx.fillText(this.for_preview&&text==default_text?'':text,0,0);if(stroke){ctx.strokeText(this.for_preview&&text==default_text?'':text,0,0);}
ctx.restore();if(text.length&&fontsize){this.drawControls(cctx);}};this.setText=function(str){text=str.replace(/[\x00-\x1f]/g,'');text=text.replace(/[\xAD]/g,'');if(this.alluppercase&&this.alllowercase){this.alllowercase=false;}
if(this.alluppercase){text=text.toUpperCase()}
if(this.alllowercase){text=text.toLowerCase()}
updateMeasurements();};this.getText=function(test_def){if(test_def){return text!=default_text?text:'';}
return text;};this.setFontFamily=function(ff){if(typeof(ff)=='string'&&this.editable()){font_family='"'+ff+'"';updateMeasurements();}};this.getFontFamily=function(){return font_family.replace(/"/ig,'');};this.setFontSize=function(fs){fs=parseFloat(fs);if(!isNaN(fs)&&this.editable()){fontsize=fs;updateMeasurements();}
return fontsize;};this.getFontSize=function(){return fontsize;};this.setFontStyle=function(){var fstyles=[];if(bold_font)fstyles.push('bold');if(italic_font)fstyles.push('italic');fontstyle=fstyles.join(' ');updateMeasurements();};this.getFontStyle=function(){var fstyles=[];if(bold_font)fstyles.push('bold');if(italic_font)fstyles.push('italic');fontstyle=fstyles.join(' ');return fontstyle;};this.bold=function(bold){if(typeof(bold)=='boolean'){bold_font=bold;this.setFontStyle();}
return bold_font;};this.italic=function(italic){if(typeof(italic)=='boolean'){italic_font=italic;this.setFontStyle();}
return italic_font;};this.setColor=function(_color){if(this.editable()&&_color){color=_color.toString().trim();var _fill=FLSUtil.normalizeCssColor(color);var rgb=FLSUtil.hexdec2rgb(_fill.uint);this.colorluma=Math.floor(FLSUtil.colorLuma(rgb));}};this.setColorAllChild=function(){this.setColor.apply(this,arguments)};this.getColor=function(){return color;};this.toSVG=function(svgparent){var tn=document.createElementNS('http://www.w3.org/2000/svg','text');if(color.indexOf('%')!=-1){var rgb=color.replace('rgb(','').replace(')','').replace(/%/ig,'').split(',');var r=(parseFloat(rgb[0],10)*2.55).toFixed(0);var g=(parseFloat(rgb[1],10)*2.55).toFixed(0);var b=(parseFloat(rgb[2],10)*2.55).toFixed(0);color='rgb('+r+','+g+','+b+')';}
var stroke_style=[];if(stroke){stroke_style.push('stroke:'+stroke);if(stroke_width)stroke_style.push('stroke-width:'+stroke_width);}
tn.setAttribute('style','fill:'+color+(stroke_style.length?';'+stroke_style.join(';'):''));tn.setAttribute('font-family',font_family.replace(/"/gi,''));tn.setAttribute('font-size',fontsize);tn.setAttribute('transform','matrix('+this.getMatrix().join(',')+')');if(this.bold()){tn.setAttribute('font-weight','bold');}
if(this.italic()){tn.setAttribute('font-style','italic');}
if(typeof(this.id)!='undefined'&&this.id){tn.setAttribute('id',this.id);}
tn.setAttribute('xml:space','preserve');if(typeof(this.logochild)!='undefined'&&this.logochild){tn.setAttribute('logochild',this.logochild);tn.setAttribute('type','logo');}
if(typeof(this.bcchild)!='undefined'&&this.bcchild){tn.setAttribute('type','bc');}
if(typeof(this.alluppercase)!='undefined'&&this.alluppercase){tn.setAttribute('data-alluppercase','1');}
if(typeof(this.alllowercase)!='undefined'&&this.alllowercase){tn.setAttribute('data-alllowercase','1');}
tn.appendChild(new DOMParser().parseFromString('<xml></xml>','application/xml').createCDATASection((text!=default_text||this.for_bc_tpl)?text:''));if(typeof(svgparent)!='undefined'){svgparent.appendChild(document.createTextNode('\n    '));svgparent.appendChild(tn);}
return tn;};this.getProperties=function(){var _tmatrix=[];var mtrx=_this.getMatrix();_tmatrix[0]=mtrx[0];_tmatrix[1]=mtrx[1];_tmatrix[2]=mtrx[2];_tmatrix[3]=mtrx[3];_tmatrix[4]=mtrx[4];_tmatrix[5]=mtrx[5];return{tmatrix:_tmatrix,color:color,text:text,default_text:default_text,fontsize:fontsize,stroke:stroke,stroke_width:stroke_width,font_family:_this.getFontFamily(),hastextedit:_this.hastextedit(),fonticons:_this.fonticons(),bold:_this.bold(),italic:_this.italic(),};};this.setProperties=function(props){var call_measurements=true;if(typeof(props.tmatrix)!='undefined'){this.setMatrix(props.tmatrix);}
if(typeof(props.color)!='undefined'){color=props.color;}
if(typeof(props.stroke)!='undefined'){stroke=props.stroke;}
if(typeof(props.stroke_width)!='undefined'){stroke_width=props.stroke_width;}
if(typeof(props.text)!='undefined'){text=props.text;}
if(typeof(props.fontsize)!='undefined'){fontsize=props.fontsize;}
if(typeof(props.bold)!='undefined'){bold_font=props.bold;}
if(typeof(props.italic)!='undefined'){italic_font=props.italic;}
if(typeof(props.hastextedit)!='undefined'){this.hastextedit(props.hastextedit);}
if(typeof(props.fonticons)!='undefined'){this.fonticons(props.fonticons);}
this.getFontStyle();if(typeof(props.font_family)!='undefined'){_this.setFontFamily(props.font_family);call_measurements=false;}
if(typeof(props.default_text)!='undefined'){_this.default_text(props.default_text);call_measurements=false;}
if(call_measurements)updateMeasurements();};this.minscale=function(newminscale){newminscale=parseFloat(newminscale);if(!isNaN(newminscale)){minscale=newminscale;}
return minscale;};this.updateMeasurements=function(){updateMeasurements();};this.setStroke=function(_borderclr){if(_borderclr){_borderclr=FLSUtil.normalizeCssColor(_borderclr);stroke=_borderclr.css;}else{stroke=null;}};this.setStrokeWidth=function(_strkwidth){_strkwidth=parseInt(_strkwidth,10)
if(!isNaN(_strkwidth)){stroke_width=_strkwidth;}else{stroke_width=0;}};this.getStroke=function(){return stroke;};this.getStrokeWidth=function(_strkwidth){return stroke_width=0;};this.has_path=function(){return false;};};FLSEditorCore.CText.prototype=new FLSEditorCore.CObject;FLSEditorCore.CMultiLineText=function(str){FLSEditorCore.CText.apply(this,arguments);var _this=this;var text_lines=[];var text_lines_props=[];var multiline_on=true;var multistyle_on=false;var multistyle_cfg=[];var max_lines=2;var line_spaceing=5;var fill_zone_width=false;var font_family=this.getFontFamily();var fontsize=this.getFontSize();var fontstyle='';var color=this.getColor();var text=this.getText();var default_text=this.default_text();var stroke=null;var stroke_width=0;var setText_org=this.setText;var setFontFamily_org=this.setFontFamily;var setFontSize_org=this.setFontSize;var setFontStyle_org=this.setFontStyle;var setColor_org=this.setColor;var setStroke_org=this.setStroke;var setStrokeWidth_org=this.setStrokeWidth;var default_text_org=this.default_text;var updateMeasurements_org=this.updateMeasurements;var render_org=this.render;_fitText();function _fitText(){while(text_lines.length){text_lines.pop();text_lines_props.pop();}
if(multiline_on&&text){var words=_this.getText().split(' ');var full_line_words_cnt=Math.ceil(words.length/max_lines);var last_line_words_cnt=Math.floor(words.length/max_lines);var lidx=0;var ml_width=0;var ml_height=0;var ml_pixel_height=0;var extra_line_height=0;var last_line_descent=0;var tcvs=document.createElement('canvas');var tctx=tcvs.getContext('2d');tctx.font=fontstyle+' '+fontsize+'px '+font_family;tctx.fillStyle='#000';while(words.length){var wmax=words.length>=full_line_words_cnt?full_line_words_cnt:last_line_words_cnt;if(!(text_lines[lidx]instanceof Array)){text_lines[lidx]=[];}
for(var widx=0;widx<wmax;widx++){text_lines[lidx].push(words.shift());}
text_lines[lidx]=text_lines[lidx].join(' ').trim();if(text_lines[lidx].length){text_lines_props[lidx]=FLSUtil.measureText(text_lines[lidx],font_family,fontsize,_this.bold(),_this.italic());var txtmetrics=tctx.measureText(text_lines[lidx]);text_lines_props[lidx]['width']=Math.round(txtmetrics.width);text_lines_props[lidx]['dy']=lidx>0?(text_lines_props[lidx]['pixel_ascent']+text_lines_props[lidx-1]['pixel_descent']+line_spaceing):0;text_lines_props[lidx]['dx']=0;extra_line_height+=text_lines_props[lidx]['dy'];ml_width=ml_width<text_lines_props[lidx]['width']?text_lines_props[lidx]['width']:ml_width;last_line_descent=text_lines_props[lidx]['pixel_descent'];lidx++;}else{text_lines.pop();}}
if(fill_zone_width){extra_line_height=0;for(var m_idx=0;m_idx<text_lines_props.length;m_idx++){if(text_lines_props[m_idx].width<ml_width){text_lines_props[m_idx]['font_size']=fontsize*(ml_width/text_lines_props[m_idx].width);var new_props=FLSUtil.measureText(text_lines[m_idx],font_family,text_lines_props[m_idx]['font_size'],_this.bold(),_this.italic());for(var nprp_idx in new_props){text_lines_props[m_idx][nprp_idx]=new_props[nprp_idx];}}
text_lines_props[m_idx]['dy']=m_idx>0?(text_lines_props[m_idx]['pixel_ascent']+text_lines_props[m_idx-1]['pixel_descent']+line_spaceing):0;extra_line_height+=text_lines_props[m_idx]['dy'];last_line_descent=text_lines_props[m_idx]['pixel_descent'];}
for(var m_idx=0;m_idx<text_lines_props.length;m_idx++){ml_height+=text_lines_props[m_idx]['height'];ml_pixel_height+=text_lines_props[m_idx]['pixel_height'];}}else{for(var m_idx=0;m_idx<text_lines_props.length;m_idx++){ml_height+=text_lines_props[m_idx]['height'];ml_pixel_height+=text_lines_props[m_idx]['pixel_height'];if(text_lines_props[m_idx]['width']<ml_width){switch(_this.align_point){case'center':text_lines_props[m_idx]['dx']=text_lines_props[m_idx]['_dx']=(ml_width-text_lines_props[m_idx]['width'])/2;break;case'right':text_lines_props[m_idx]['dx']=text_lines_props[m_idx]['_dx']=ml_width-text_lines_props[m_idx]['width'];break;default:}}}}
ml_pixel_height+=(text_lines.length-1)*line_spaceing;extra_line_height+=last_line_descent;_this.setSize(ml_width,ml_pixel_height);_this.bboxpos(0,-text_lines_props[0].pixel_ascent);var pivot_y=-(text_lines_props[0]['pixel_ascent']/2)+(extra_line_height/2);_this.pivot({x:Math.floor((ml_width)/2),y:Math.floor(pivot_y)});_this.center(_this.pivot());_this.pixel_height=ml_pixel_height;_this.descent=text_lines_props[0].pixel_descent;_this.line1_fs=text_lines_props[0]['font_size']?text_lines_props[0]['font_size']:fontsize;_this.line1_pxh=text_lines_props[0]['pixel_height'];_this.line1_px_ascent=_this.pixel_ascent=text_lines_props[0]['pixel_ascent'];_this.extra_line_height=extra_line_height;_this.last_line_descent=last_line_descent;}else if(multistyle_on&&text&&multistyle_cfg.length){var ms_width=0;var ms_height=0;var ms_pixel_height=0;var ms_pixel_ascent=0;var ms_pixel_descent=0;var dx=0;var tcvs=document.createElement('canvas');var tctx=tcvs.getContext('2d');tctx.fillStyle='#000';for(var lidx=0;lidx<multistyle_cfg.length;lidx++){var _mcfg=multistyle_cfg[lidx];text_lines.push(_mcfg.text);var ff=_mcfg['font_family']?_mcfg['font_family']:font_family;var fs=_mcfg['font_size']?_mcfg['font_size']:fontsize;var bld=_mcfg['bold']?_mcfg['bold']:_this.bold();var itl=_mcfg['italic']?_mcfg['italic']:_this.italic();var _fstyl=[];if(bld){_fstyl.push('bold');}
if(itl){_fstyl.push('italic');}
text_lines_props[lidx]=FLSUtil.measureText(text_lines[lidx],ff,fontsize,bld,itl);text_lines_props[lidx]['fontstyle']=_fstyl.join(' ');text_lines_props[lidx]['dy']=0;text_lines_props[lidx]['dx']=0;text_lines_props[lidx]['font_family']=ff;tctx.font=text_lines_props[lidx]['fontstyle']+' '+fs+'px '+ff;var txtmetrics=tctx.measureText(text_lines[lidx]);text_lines_props[lidx]['width']=txtmetrics.width;if(_mcfg['color']){text_lines_props[lidx]['color']=_mcfg['color'];}
ms_width+=txtmetrics.width;text_lines_props[lidx]['dx']=dx;ms_height=Math.max(text_lines_props[lidx]['height'],ms_height);ms_pixel_height=Math.max(text_lines_props[lidx]['pixel_height'],ms_pixel_height);ms_pixel_ascent=Math.max(text_lines_props[lidx]['pixel_ascent'],ms_pixel_ascent);ms_pixel_descent=Math.max(text_lines_props[lidx]['pixel_descent'],ms_pixel_descent);dx+=text_lines_props[lidx]['width'];}
_this.setSize(ms_width,ms_pixel_height);_this.bboxpos(0,-ms_pixel_ascent);var pivot_y=-(ms_pixel_ascent/2)+(ms_pixel_descent/2);_this.pivot({x:Math.floor((ms_width)/2),y:Math.floor(pivot_y)});_this.center(_this.pivot());_this.pixel_height=ms_pixel_height;_this.descent=ms_pixel_descent;}else{updateMeasurements_org.apply(this,[]);}}
this.multiline_on=function(ml_on){if(typeof(ml_on)=='boolean'){multiline_on=ml_on;if(multiline_on==true){multistyle_on=false;}
_fitText();}
return multiline_on;};this.multistyle_on=function(ms_on){if(typeof(ms_on)=='boolean'){multistyle_on=ms_on;if(multistyle_on==true){multiline_on=false;}
_fitText();}
return multistyle_on;};this.fill_zone_width=function(fillw){if(typeof(fillw)=='boolean'){fill_zone_width=fillw;_fitText();}
return fill_zone_width;};this.max_lines=function(lncnt){lncnt=parseInt(lncnt,10);if(!isNaN(lncnt)&&(lncnt>0)&&(lncnt!=max_lines)){max_lines=lncnt;_fitText();}
return max_lines;};this.setText=function(){setText_org.apply(this,arguments);if((text!=this.getText())&&multistyle_on&&multistyle_cfg.length){while(text_lines.length){text_lines.pop()
text_lines_props.pop()}
while(multistyle_cfg.length){multistyle_cfg.pop()}
setFontFamily_org.apply(this,[font_family]);}
text=this.getText();_fitText();};this.setFontFamily=function(){setFontFamily_org.apply(this,arguments);font_family=this.getFontFamily();if(multistyle_on&&multistyle_cfg.length){multistyle_cfg[0]['font_family']=font_family;}
_fitText();};this.setFontSize=function(){fontsize=setFontSize_org.apply(this,arguments);_fitText();return fontsize};this.setColor=function(){setColor_org.apply(this,arguments);color=this.getColor();if(multistyle_on&&multistyle_cfg.length){multistyle_cfg[0]['color']=color;text_lines_props[0]['color']=color;}};this.setStroke=function(){setStroke_org.apply(this,arguments);stroke=this.getStroke();};this.setStrokeWidth=function(){setStrokeWidth_org.apply(this,arguments);stroke_width=this.getStrokeWidth();};this.setColorAllChild=function(){this.setColor.apply(this,arguments)};this.setFontStyle=function(){setFontStyle_org.apply(this,arguments);fontstyle=this.getFontStyle();_fitText();};this.default_text=function(dstr){default_text=default_text_org.apply(this,arguments);return default_text;};this.render=function(ctx,cctx,timedelta){if(multiline_on||(multistyle_on&&multistyle_cfg.length)){ctx.save();ctx.font=fontstyle+' '+fontsize+'px '+font_family;ctx.fillStyle=color;if(stroke){ctx.strokeStyle=stroke;if(stroke_width)ctx.lineWidth=stroke_width;}
this.applyDropShadow(ctx);this.transformsApply(ctx);for(var tlidx=0;tlidx<text_lines.length;tlidx++){ctx.translate(0,text_lines_props[tlidx]['dy']);ctx.save();ctx.translate(text_lines_props[tlidx]['dx'],0);if(multistyle_on){var fs=text_lines_props[tlidx]['font_size']?text_lines_props[tlidx]['font_size']:fontsize
var ff=text_lines_props[tlidx]['font_family']?text_lines_props[tlidx]['font_family']:font_family
ctx.font=text_lines_props[tlidx]['fontstyle']+' '+fs+'px '+ff;}else{if(text_lines_props[tlidx]['font_size']){ctx.font=fontstyle+' '+text_lines_props[tlidx]['font_size']+'px '+font_family;}}
if(text_lines_props[tlidx]['color']){ctx.fillStyle=text_lines_props[tlidx]['color'];}
ctx.fillText(this.for_preview&&text==default_text?'':text_lines[tlidx],0,0);if(stroke){ctx.strokeText(this.for_preview&&text==default_text?'':text_lines[tlidx],0,0);}
ctx.restore();}
ctx.restore();if(text.length&&fontsize){this.drawControls(cctx);}}else{render_org.apply(this,arguments);}};this.getProperties=function(){return{tmatrix:this.getMatrix().slice(0),color:color,text:this.getText(),default_text:default_text,fontsize:fontsize,font_family:this.getFontFamily(),hastextedit:this.hastextedit(),fonticons:this.fonticons(),bold:this.bold(),italic:this.italic(),multiline_on:multiline_on,multistyle_on:multistyle_on,max_lines:max_lines,fill_zone_width:fill_zone_width,align_point:this.align_point,line_spaceing:line_spaceing};};this.setProperties=function(props){var call_measurements=true;if(typeof(props.align_point)!='undefined'){this.align_point=props.align_point;}
if(typeof(props.tmatrix)!='undefined'){this.setMatrix(props.tmatrix);}
if(typeof(props.default_text)!='undefined'){this.default_text(props.default_text);}
if(typeof(props.text)!='undefined'){this.setText(props.text);call_measurements=false;}
if(typeof(props.fontsize)!='undefined'){this.setFontSize(props.fontsize);call_measurements=false;}
if(typeof(props.font_family)!='undefined'){this.setFontFamily(props.font_family);call_measurements=false;}
if(typeof(props.color)!='undefined'){this.setColor(props.color);}
if(typeof(props.hastextedit)!='undefined'){this.hastextedit(props.hastextedit);}
if(typeof(props.fonticons)!='undefined'){this.fonticons(props.fonticons);}
if(typeof(props.multiline_on)!='undefined'){this.multiline_on(props.multiline_on);}
if(typeof(props.max_lines)!='undefined'){this.max_lines(props.max_lines);}
if(typeof(props.fill_zone_width)!='undefined'){this.fill_zone_width(props.fill_zone_width);}
if(typeof(props.line_spaceing)!='undefined'){this.line_spaceing(props.line_spaceing);}
if(call_measurements)_fitText();};this.toSVG=function(svgparent){var tn=document.createElementNS('http://www.w3.org/2000/svg','text');if(color.indexOf('%')!=-1){var rgb=color.replace('rgb(','').replace(')','').replace(/%/ig,'').split(',');var r=(parseFloat(rgb[0],10)*2.55).toFixed(0);var g=(parseFloat(rgb[1],10)*2.55).toFixed(0);var b=(parseFloat(rgb[2],10)*2.55).toFixed(0);color='rgb('+r+','+g+','+b+')';}
var stroke_style=[];if(stroke){stroke_style.push('stroke:'+stroke);if(stroke_width)stroke_style.push('stroke-width:'+stroke_width);}
tn.setAttribute('style','fill:'+color+(stroke_style.length?';'+stroke_style.join(';'):''));tn.setAttribute('font-family',font_family.replace(/"/gi,''));tn.setAttribute('font-size',fontsize);tn.setAttribute('transform','matrix('+this.getMatrix().join(',')+')');if(this.bold()){tn.setAttribute('font-weight','bold');}
if(this.italic()){tn.setAttribute('font-style','italic');}
if(typeof(this.id)!='undefined'&&this.id){tn.setAttribute('id',this.id);}
tn.setAttribute('xml:space','preserve');if(typeof(this.logochild)!='undefined'&&this.logochild){tn.setAttribute('logochild',this.logochild);tn.setAttribute('type','logo');}
if(typeof(this.bcchild)!='undefined'&&this.bcchild){tn.setAttribute('type','bc');}
if(typeof(this.alluppercase)!='undefined'&&this.alluppercase){tn.setAttribute('data-alluppercase','1');}
if(typeof(this.alllowercase)!='undefined'&&this.alllowercase){tn.setAttribute('data-alllowercase','1');}
if(multiline_on||multistyle_on){if(text_lines.length){for(var ti=0;ti<text_lines.length;ti++){var tspn=document.createElementNS('http://www.w3.org/2000/svg','tspan');if(multiline_on){tspn.setAttribute('x',0);tspn.setAttribute('dx',text_lines_props[ti]['dx']);tspn.setAttribute('dy',text_lines_props[ti]['dy']);}
if(text_lines_props[ti]['font_size']){tspn.setAttribute('font-size',text_lines_props[ti]['font_size']);}
if(text_lines_props[ti]['font_family']){tspn.setAttribute('font-family',text_lines_props[ti]['font_family']);}
if(text_lines_props[ti]['color']){tspn.setAttribute('style','fill:'+text_lines_props[ti]['color']);}
tspn.appendChild(new DOMParser().parseFromString('<xml></xml>','application/xml').createCDATASection((text!=default_text||this.for_bc_tpl)?text_lines[ti]:''));tn.appendChild(tspn);}}else{tn.appendChild(new DOMParser().parseFromString('<xml></xml>','application/xml').createCDATASection((text!=default_text||this.for_bc_tpl)?text:''));}
if(multiline_on){tn.setAttribute('data-multiline_on','1');tn.setAttribute('data-original_string',this.getText());tn.setAttribute('data-max_lines',max_lines);}else if(multistyle_on&&multistyle_cfg.length){tn.setAttribute('data-multistyle_on','1');}
if(fill_zone_width){tn.setAttribute('data-fill_zone_width','1');}
if(this.align_point){tn.setAttribute('data-align_point',this.align_point);}}else{tn.appendChild(new DOMParser().parseFromString('<xml></xml>','application/xml').createCDATASection((text!=default_text||this.for_bc_tpl)?text:''));}
if(typeof(svgparent)!='undefined'){svgparent.appendChild(document.createTextNode('\n    '));svgparent.appendChild(tn);}
return tn;};this.updateMeasurements=function(){_fitText();};this.getTextLines=function(){var retval=[];if(multiline_on){for(var i=0;i<text_lines.length;i++){retval.push({text:text_lines[i],font_family:font_family,fontsize:text_lines_props[i]['font_size']?text_lines_props[i]['font_size']:fontsize,dy:text_lines_props[i]['dy'],dx:text_lines_props[i]['dx']});}}else{retval.push({text:this.getText(),font_family:font_family,fontsize:fontsize,dy:0,dx:0});}
return retval;};this.multistyle_cfg=function(ms_cfg){if(ms_cfg&&(ms_cfg instanceof Array)){while(multistyle_cfg.length){multistyle_cfg.pop();}
var _txt='';while(ms_cfg.length){var stly_row=ms_cfg.shift();_txt+=stly_row.text;multistyle_cfg.push(stly_row);}
text=_txt;setText_org.apply(this,[text]);setFontFamily_org.apply(this,[multistyle_cfg[0]['font_family']]);_fitText();}
return multistyle_cfg.slice(0);};this.line_spaceing=function(n_ls){if(multiline_on){n_ls=parseInt(n_ls,10);if(!isNaN(n_ls)&&(n_ls>=5)&&(n_ls!=line_spaceing)){line_spaceing=n_ls;_fitText();}}
return line_spaceing;}};FLSEditorCore.CMultiLineText.prototype=new FLSEditorCore.CText;FLSEditorCore.CPath=function(){FLSEditorCore.CObject.apply(this,arguments);var fill=null;var fill_opacity=1;var stroke=null;var stroke_width=0;var stroke_cap=null;var stroke_miter=null;var stroke_join=null;var data='';var stroke_selected=false;var commands=[];function parseSvgPath(){SVGPath2Cnvs.parse(data,commands);}
this.containsPoint=function(point){stroke_selected=false;if(!this.selectable())return false;var ghostcvs=this.editor().ghostcanvas();var gctx=ghostcvs.getContext('2d');var ingrp=this.inGroup();gctx.save();if(!ingrp){var vpoint=this.editor().viewtopleft();var zoom=this.editor().zoom();gctx.setTransform(zoom,0,0,zoom,vpoint.x,vpoint.y);}
this.transformsApply(gctx);gctx.beginPath();for(var i=0;i<commands.length;i++){gctx[commands[i]['func']].apply(gctx,commands[i]['args']);}
var gotit=gctx.isPointInPath(point.x,point.y);if(stroke){if(!fill&&gotit){stroke_selected=true;}else if(!gotit){gotit=stroke_selected=gctx.isPointInStroke(point.x,point.y);}}
gctx.restore();gotit=gotit?gotit:(this.stringdata?this.pointInBbox(point):gotit);var in_box=this.getActive()?this.pointInBbox(point):false;return ingrp?gotit:(gotit?gotit:in_box);};this.setFill=function(_fill){if(typeof(_fill)=='undefined'){_fill=null;}
if(_fill){if((_fill instanceof CanvasGradient)){this.fillIsGradient=true;fill=_fill;}else{if(!this.fillIsGradient){this.fillIsGradient=false;_fill=FLSUtil.normalizeCssColor(_fill);var rgb=FLSUtil.hexdec2rgb(_fill.uint);this.colorluma=Math.floor(FLSUtil.colorLuma(rgb));if(fill_opacity<1){rgb.push(fill_opacity);_fill='rgba('+rgb.join(',')+')';}else{_fill=_fill.css;}}}}
if(!this.fillIsGradient){if(stroke&&stroke_selected){stroke=_fill?_fill.toString().trim():stroke;}else{fill=_fill?_fill.toString().trim():null;}}};this.setFillOpacity=function(_fill_opacity){_fill_opacity=parseFloat(_fill_opacity,10);if(!isNaN(_fill_opacity)){_fill_opacity=(_fill_opacity>0)&&(_fill_opacity<=1)?_fill_opacity:1;}else{_fill_opacity=0;}
fill_opacity=_fill_opacity?_fill_opacity:fill_opacity;if(fill){var color_info=FLSUtil.normalizeCssColor(fill);var rgb=FLSUtil.hexdec2rgb(color_info.uint);if(fill_opacity<1){rgb.push(fill_opacity);}
fill=(fill_opacity<1?'rgba(':'rgb(')+rgb.join(',')+')';}};this.getFillOpacity=function(){return fill_opacity;};this.setColor=function(_fill){this.setFill(_fill);};this.setColorAllChild=function(_fill){this.setFill(_fill);};this.getFill=function(){if(fill&&!(fill instanceof CanvasGradient)){var color_info=FLSUtil.normalizeCssColor(fill);var rgb=FLSUtil.hexdec2rgb(color_info.uint);return'rgb('+rgb.join(',')+')';}
return fill;};this.getColor=function(){return this.getFill();};this.setStroke=function(_storke){if(typeof(_storke)=='undefined'){_storke=null;}
stroke=_storke;};this.setStrokeWidth=function(_storke_width){if(typeof(_storke_width)=='undefined'){_storke_width=0;}
stroke_width=_storke_width;};this.setStrokeCap=function(_storke_cap){if(typeof(_storke_cap)=='undefined'){_storke_cap=null;}
stroke_cap=_storke_cap;};this.setStrokeMieter=function(_stroke_miter){if(typeof(_stroke_miter)=='undefined'){_stroke_miter=null;}
stroke_miter=_stroke_miter;};this.setStrokeJoin=function(_stroke_join){if(typeof(_stroke_join)=='undefined'){_stroke_join=null;}
stroke_join=_stroke_join;};this.setPathStr=function(svgpath){data=svgpath;parseSvgPath();};this.render=function(ctx,cctx,timedelta){if(!commands.length)return false;ctx.save();if(fill)ctx.fillStyle=fill;if(stroke)ctx.strokeStyle=stroke;if(stroke_width)ctx.lineWidth=stroke_width;if(stroke_cap)ctx.lineCap=stroke_cap;if(stroke_miter)ctx.miterLimit=stroke_miter;if(stroke_join)ctx.lineJoin=stroke_join;this.transformsApply(ctx);ctx.beginPath();for(var i=0;i<commands.length;i++){ctx[commands[i]['func']].apply(ctx,commands[i]['args']);}
if(fill)ctx.fill();if(stroke)ctx.stroke();ctx.restore();if(!this.inGroup()||this.parentGroup.unlocked()){this.drawControls(cctx);}};this.getRenderData=function(){return{commands:commands,fill:fill,stroke:stroke,stroke_width:stroke_width,stroke_cap:stroke_cap,stroke_miter:stroke_miter,stroke_join:stroke_join};};this.toSVG=function(svgparent){var pn=document.createElementNS('http://www.w3.org/2000/svg','path');var color=fill;if(fill instanceof CanvasGradient){color='url(#'+this.gradientId+')';}else{if(fill&&fill.indexOf('%')==-1){var color_info=FLSUtil.normalizeCssColor(fill);var rgb=FLSUtil.hexdec2rgb(color_info.uint);var r=(rgb[0]*100/255).toFixed(6);var g=(rgb[1]*100/255).toFixed(6);var b=(rgb[2]*100/255).toFixed(6);color='rgb('+r+'%,'+g+'%,'+b+'%)';}}
var stroke_style=[];if(stroke_width)stroke_style.push('stroke-width:'+stroke_width);if(stroke_width)stroke_style.push('stroke-opacity:1');if(stroke_cap)stroke_style.push('stroke-linecap:'+stroke_cap);if(stroke_join)stroke_style.push('stroke-linejoin:'+stroke_join);if(stroke_miter)stroke_style.push('stroke-miterlimit:'+stroke_miter);pn.setAttribute('style','stroke:'+(stroke?stroke:'none')+';fill-rule:evenodd;fill:'+(color?color:'none')+';fill-opacity:'+fill_opacity+(stroke_style.length?';'+stroke_style.join(';'):''));pn.setAttribute('d',data);if(typeof(svgparent)!='undefined'){svgparent.appendChild(document.createTextNode('\n    '));svgparent.appendChild(pn);}
var mtrx=this.getMatrix();var identity=(mtrx[0]==1&&mtrx[1]==0&&mtrx[2]==0&&mtrx[3]==1&&mtrx[4]==0&&mtrx[5]==0);if(!identity){pn.setAttribute('transform','matrix('+mtrx.join(',')+')');}
if(this.stringdata){if((typeof(this.stringdata.color)!='undefined')&&!this.fillIsGradient){this.stringdata.color=color;}
for(var sdidx in this.stringdata){pn.setAttribute('data-str-'+sdidx,this.stringdata[sdidx]);}}
if(this.lyt_name){pn.setAttribute('data-lyt_name',this.lyt_name.toString());}
return pn;};this.getProperties=function(){return{fill:this.getFill(),fill_opacity:fill_opacity,stroke:stroke,stroke_width:stroke_width,stroke_cap:stroke_cap,stroke_miter:stroke_miter,stroke_join:stroke_join,data:data,tmatrix:JSON.parse(JSON.stringify(this.getMatrix())),stringdata:this.stringdata?this.stringdata:false};};this.setProperties=function(props){if(props){this.setFillOpacity(props.fill_opacity);this.setFill(props.fill);this.setStroke(props.stroke);this.setStrokeWidth(props.stroke_width);this.setStrokeCap(props.stroke_cap);this.setStrokeMieter(props.stroke_miter);this.setStrokeJoin(props.stroke_join);this.setPathStr(props.data);if(typeof(props.tmatrix)!='undefined'){this.setMatrix(props.tmatrix);}
if(typeof(props.stringdata)!='undefined'){this.stringdata=props.stringdata;}}};this.calcbbox=function(){if(!this.inGroup()){return true;}
return false;};this.calculateBoundingBox=function(){if(data.length&&commands.length){var lb_corners=SVGPath2Cnvs.bbox(commands);var width=lb_corners.x1-lb_corners.x0;var height=lb_corners.y1-lb_corners.y0;this.setSize(width,height);this.bboxpos(lb_corners.x0,lb_corners.y0);var pvt={x:Math.floor(lb_corners.x0+width/2),y:Math.floor(lb_corners.y0+height/2)};this.pivot(pvt);this.center(this.pivot());}};this.isEmpty=function(){return commands.length==0;}};FLSEditorCore.CPath.prototype=new FLSEditorCore.CObject;FLSEditorCore.CPathGroup=function(){FLSEditorCore.CObject.apply(this,arguments);var _this=this;var curpath=null;var move_org=this.move;var translate_org=this.translate;var paths=[];this.calculateBoundingBox=function(){if(paths.length&&!this.bboxCalculated()){var gmtrx=this.inGroup()?this.getMatrix().slice(0):[1,0,0,1,0,0];var pmtrx=paths[0].getMatrix().slice(0);var rd=paths[0].getRenderData();var bb=SVGPath2Cnvs.bbox(rd.commands,pmtrx);var lt={x:bb.x0,y:bb.y0};var rb={x:bb.x1,y:bb.y1};var gbb={x0:Math.min(lt.x,rb.x),y0:Math.min(lt.y,rb.y),x1:Math.max(lt.x,rb.x),y1:Math.max(lt.y,rb.y)};for(var i=1;i<paths.length;i++){pmtrx=paths[i].getMatrix().slice(0);rd=paths[i].getRenderData();bb=SVGPath2Cnvs.bbox(rd.commands,pmtrx);lt={x:bb.x0,y:bb.y0};rb={x:bb.x1,y:bb.y1};if((bb.x0!=bb.x1)||(bb.y0!=bb.y1)){gbb.x0=Math.min(gbb.x0,lt.x,rb.x);gbb.y0=Math.min(gbb.y0,lt.y,rb.y);gbb.x1=Math.max(gbb.x1,lt.x,rb.x);gbb.y1=Math.max(gbb.y1,lt.y,rb.y);}}
var tmp_coord={x:gbb.x0,y:gbb.y0};FLSUtil.transformPoint(gmtrx,tmp_coord,true);gbb.x0=tmp_coord.x;gbb.y0=tmp_coord.y;tmp_coord={x:gbb.x1,y:gbb.y1};FLSUtil.transformPoint(gmtrx,tmp_coord,true);gbb.x1=tmp_coord.x;gbb.y1=tmp_coord.y;var width=gbb.x1-gbb.x0;var height=gbb.y1-gbb.y0;this.setSize(width,height);this.bboxpos(gbb.x0,gbb.y0);var pvt={x:Math.floor(gbb.x0+width/2),y:Math.floor(gbb.y0+height/2)};this.pivot(pvt);this.center(this.pivot());}
if(!paths.length){this.setSize(0,0);}};this.containsPoint=function(point){if(!this.selectable())return false;var candidates=[];var found=false;if((point.clickColor[3]>0)||this.hasStringPath){var ghostcvs=this.editor().ghostcanvas();var gctx=ghostcvs.getContext('2d');var vpoint=this.editor().viewtopleft();var zoom=this.editor().zoom();gctx.save();gctx.setTransform(zoom,0,0,zoom,vpoint.x,vpoint.y);this.transformsApply(gctx);for(var i=paths.length-1;i>=0;i--){if(paths[i].containsPoint(point)){candidates.push(paths[i]);break;}}
gctx.restore();}
if(candidates.length){found=true;curpath=candidates[candidates.length-1];}
return found===true?true:_this.pointInBbox(point);};this.addPath=function(CpathObj,force_parent){if(typeof(force_parent)!=='boolean'){force_parent=false;}
if(CpathObj instanceof FLSEditorCore.CPath){paths.push(CpathObj);CpathObj.inGroup(true);if(!CpathObj.parentGroup||force_parent){CpathObj.parentGroup=this;}}
return CpathObj;};this.render=function(ctx,cctx,timedelta,notransform){if(typeof(notransform)!=='boolean'){notransform=false;}
ctx.save();if(notransform){ctx.setTransform(1,0,0,1,0,0);}else{this.transformsApply(ctx);this.applyDropShadow(ctx);}
for(var pi=0;pi<paths.length;pi++){var rdata=paths[pi].getRenderData();ctx.save();ctx['transform'].apply(ctx,paths[pi].getMatrix());if(rdata.fill)ctx.fillStyle=rdata.fill;if(rdata.stroke)ctx.strokeStyle=rdata.stroke;if(rdata.stroke_width)ctx.lineWidth=rdata.stroke_width;if(rdata.stroke_cap)ctx.lineCap=rdata.stroke_cap;if(rdata.stroke_miter)ctx.miterLimit=rdata.stroke_miter;if(rdata.stroke_join)ctx.lineJoin=rdata.stroke_join;ctx.beginPath();for(var i=0;i<rdata.commands.length;i++){ctx[rdata.commands[i]['func']].apply(ctx,rdata.commands[i]['args']);}
if(rdata.fill)ctx.fill();if(rdata.stroke)ctx.stroke();ctx.restore();if(paths[pi].getActive()){paths[pi].drawControls(cctx);}}
ctx.restore();if(!notransform){this.drawControls(cctx);}};this.toSVG=function(svgparent){svgparent.setAttribute('transform','matrix('+this.getMatrix().join(',')+')');if(this.tpl_matrix&&(this.tpl_matrix instanceof Array)&&(this.tpl_matrix.length==6)){svgparent.setAttribute('data-tpl_matrix',this.tpl_matrix.join(','));}
if(typeof(this.bcchild)!='undefined'&&this.bcchild){svgparent.setAttribute('type','bc');}
if(typeof(this.datachoice)!='undefined'&&this.datachoice){svgparent.setAttribute('data-choice',this.datachoice.toString());}
for(var i in paths){paths[i].toSVG(svgparent);}};this.setColor=function(fill){if(curpath instanceof FLSEditorCore.CPath){curpath.setFill(fill);}};this.setColorAllChild=function(color){if(this.colorEditable()){for(var i=0;i<paths.length;i++)
paths[i].setColor(color);}};this.getColor=function(){if(curpath instanceof FLSEditorCore.CPath){return curpath.getFill();}};this.getCurrentPath=function(){return curpath;};this.setCurrentPath=function(path){var i=paths.indexOf(path);if(i>-1)curpath=paths[i];};this.getPaths=function(){return paths;};this.getProperties=function(){var _tmatrix=[];var mtrx=_this.getMatrix();_tmatrix[0]=mtrx[0];_tmatrix[1]=mtrx[1];_tmatrix[2]=mtrx[2];_tmatrix[3]=mtrx[3];_tmatrix[4]=mtrx[4];_tmatrix[5]=mtrx[5];return{tmatrix:_tmatrix,color:_this.getColor(),path_idx:paths.indexOf(curpath)};};this.setProperties=function(props){if(typeof(props.tmatrix)!='undefined'){this.setMatrix(props.tmatrix);}
if(typeof(props.color)!='undefined'&&typeof(props.path_idx)!='undefined'){paths[props.path_idx].setFill(props.color);}};this.calcbbox=function(){return true;};this.move=function(){if(this.unlocked()&&curpath.stringdata){curpath.move.apply(curpath,arguments);}else{move_org.apply(this,arguments);}};this.translate=function(){if(this.unlocked()&&curpath.stringdata){curpath.translate.apply(curpath,arguments);}else{translate_org.apply(this,arguments);}}};FLSEditorCore.CPathGroup.prototype=new FLSEditorCore.CObject;FLSEditorCore.CLogoObjectGroup=function(){FLSEditorCore.CObject.apply(this,arguments);var _this=this;var curobj=null;var elements=[];var mscale_org=this.mscale;var minscale=0;this.calculateBoundingBox=function(){if(elements.length&&!this.bboxCalculated()){var found_first_valid_obj=false;var gbb={x0:0,y0:0,x1:0,y1:0};var trnsfrm_applyed,el_tl,el_sz,lt,rb,rt,lb,emtrx;for(var i=0;i<elements.length;i++){trnsfrm_applyed=false;if(elements[i]instanceof FLSEditorCore.CPathGroup){elements[i].calculateBoundingBox();trnsfrm_applyed=true;}
el_tl=elements[i].bboxpos();el_sz=elements[i].getSize();if((el_sz.width==0)||(el_sz.height==0))continue;lt={x:el_tl.x,y:el_tl.y};rb={x:lt.x+el_sz.width,y:lt.y+el_sz.height};rt={x:rb.x,y:lt.y};lb={x:lt.x,y:rb.y};if(!trnsfrm_applyed){emtrx=elements[i].getMatrix();FLSUtil.transformPoint(emtrx,lt,true);FLSUtil.transformPoint(emtrx,rb,true);FLSUtil.transformPoint(emtrx,rt,true);FLSUtil.transformPoint(emtrx,lb,true);}
var xs=[lt.x,rb.x,rt.x,lb.x];var ys=[lt.y,rb.y,rt.y,lb.y];gbb.x0=Math.min.apply(null,(found_first_valid_obj?[gbb.x0]:[]).concat(xs));gbb.y0=Math.min.apply(null,(found_first_valid_obj?[gbb.y0]:[]).concat(ys));gbb.x1=Math.max.apply(null,(found_first_valid_obj?[gbb.x1]:[]).concat(xs));gbb.y1=Math.max.apply(null,(found_first_valid_obj?[gbb.y1]:[]).concat(ys));found_first_valid_obj=true;}
var bbpos={x:Math.round(gbb.x0),y:Math.round(gbb.y0)};var width=Math.round(gbb.x1)-bbpos.x;var height=Math.round(gbb.y1)-bbpos.y;this.setSize(width,height);this.bboxpos(bbpos.x,bbpos.y);var pvt={x:Math.floor(bbpos.x+width/2),y:Math.floor(bbpos.y+height/2)};this.pivot(pvt);this.center(_this.pivot());}};this.addElement=function(_element){if(_element instanceof FLSEditorCore.CObject){elements.push(_element);_element.inGroup(true);return _element;}
return false;};this.clearElements=function(){var mymtrx=this.getMatrix();while(elements.length){var element=elements.pop();var elm_matrix=element.getMatrix();element.inGroup(false);element.setMatrix(FLSUtil.tmatrixMultiply(elm_matrix,mymtrx.slice(0)));element.calculateBoundingBox();}}
this.containsPoint=function(point){if(!this.selectable())return false;var found=false;var zoom=this.editor().zoom();var vpoint=this.editor().viewtopleft();var _point={x:point.x-vpoint.x,y:point.y-vpoint.y};FLSUtil.unTransformPoint([zoom,0,0,zoom,0,0],_point,true);FLSUtil.unTransformPoint(this.getMatrix(),_point,true);for(var i=elements.length-1;i>=0;i--){if(elements[i]instanceof FLSEditorCore.CText){var __point=FLSUtil.unTransformPoint(elements[i].getMatrix(),_point);var ts=elements[i].getSize();var bbps=elements[i].bboxpos();var lt={x:bbps.x,y:bbps.y};var rb={x:bbps.x+ts.width,y:bbps.y+ts.height};if((lt.x<=__point.x)&&((rb.x)>=__point.x)&&(lt.y<=__point.y)&&(rb.y>=__point.y)){curobj=elements[i];found=true;break;}}else{if(elements[i]instanceof FLSEditorCore.CPathGroup&&point.clickColor[3]>0){var candidates=[];var ghostcvs=this.editor().ghostcanvas();var gctx=ghostcvs.getContext('2d');gctx.save();gctx.setTransform(zoom,0,0,zoom,vpoint.x,vpoint.y);this.transformsApply(gctx);elements[i].transformsApply(gctx);var paths=elements[i].getPaths();for(var pi=paths.length-1;pi>=0;pi--){if(paths[pi].containsPoint(point)){candidates.push(paths[pi]);break;}}
gctx.restore();if(candidates.length){found=true;curobj=elements[i];curobj.setCurrentPath(candidates[candidates.length-1]);break;}}}}
return found===true?true:this.pointInBbox(point);};this.pointInBbox=function(point){var actv=this.getActive();if(actv){var sz=this.getSize();var bbpos=this.bboxpos();var zoom=this.editor().zoom();var extrapx=this.bboxpad();var vpoint=this.editor().viewtopleft();var _point={x:point.x-vpoint.x,y:point.y-vpoint.y};FLSUtil.unTransformPoint([zoom,0,0,zoom,0,0],_point,true);FLSUtil.unTransformPoint(this.getMatrix(),_point,true);return(_point.x>=(bbpos.x-extrapx))&&(_point.x<=(bbpos.x+sz.width+extrapx))&&(_point.y>=(bbpos.y-extrapx))&&(_point.y<=(bbpos.y+sz.height+extrapx));}
return false;};this.render=function(ctx,cctx,timedelta,notransform){if(typeof(notransform)!=='boolean'){notransform=false;}
ctx.save();if(notransform){ctx.setTransform(1,0,0,1,0,0);}else{this.transformsApply(ctx);}
for(var pi=0;pi<elements.length;pi++){elements[pi].render(ctx,cctx,timedelta);}
ctx.restore();if(!notransform){this.drawControls(cctx);}};this.toSVG=function(svgparent){svgparent.setAttribute('transform','matrix('+this.getMatrix().join(',')+')');if(typeof(this.id)!=='undefined'){svgparent.setAttribute('id',this.id);}
if(typeof(this.bcchild)!='undefined'&&this.bcchild){svgparent.setAttribute('type','bc');}
var textlayer=document.createElementNS('http://www.w3.org/2000/svg','g');var logolayer=document.createElementNS('http://www.w3.org/2000/svg','g');logolayer.setAttribute('id','surface2');textlayer.setAttribute('id','surface4');for(var i in elements){if(elements[i]instanceof FLSEditorCore.CPathGroup){elements[i].toSVG(logolayer);}
if(elements[i]instanceof FLSEditorCore.CText){if(elements[i].getText().trim().length){elements[i].toSVG(textlayer);}}}
svgparent.appendChild(logolayer);svgparent.appendChild(document.createTextNode('\n  '));svgparent.appendChild(textlayer);svgparent.appendChild(document.createTextNode('\n'));};this.calcbbox=function(){return true;};this.getElements=function(){return elements;};this.mscale=function(){if(this.fixed())return false;if(minscale){var cscale=this.getScaleX();var is_downscale=Math.min(arguments[1].x-arguments[0].x,arguments[1].y-arguments[0].y)<=0;if(cscale<=minscale&&is_downscale){this.scaleUniform(minscale/cscale);return false;}}
return mscale_org.apply(this,arguments);};this.minscale=function(newminscale){newminscale=parseFloat(newminscale);if(!isNaN(newminscale)){minscale=newminscale;}
return minscale;};this.getColor=function(){if(curobj)return curobj.getColor();};this.setColor=function(color){if(curobj)return curobj.setColor(color);};this.setColorAllChild=function(color){if(this.colorEditable()){for(var i=0;i<elements.length;i++)
elements[i].setColorAllChild(color);}};this.getCurrentPath=function(){if(curobj instanceof FLSEditorCore.CPathGroup){return curobj.getCurrentPath();}
return curobj;};this.strokeTexts=function(_stroke){for(var i=0;i<elements.length;i++){if(elements[i]instanceof FLSEditorCore.CText){elements[i].setStroke(_stroke);elements[i].setStrokeWidth(_stroke?1:0);}else if((elements[i]instanceof FLSEditorCore.CPathGroup)&&elements[i].hasStringPath){var pg_paths=elements[i].getPaths();for(var j=0;j<pg_paths.length;j++){if(pg_paths[j].stringdata){pg_paths[j].setStroke(_stroke);pg_paths[j].setStrokeWidth(_stroke?1:0);}}}}};this.strokePaths=function(_stroke){for(var i=0;i<elements.length;i++){if(elements[i]instanceof FLSEditorCore.CPathGroup){var pg_paths=elements[i].getPaths();for(var j=0;j<pg_paths.length;j++){pg_paths[j].setStroke(_stroke);pg_paths[j].setStrokeWidth(_stroke?1:0);}}}};};FLSEditorCore.CLogoObjectGroup.prototype=new FLSEditorCore.CObject;FLSEditorCore.CImage=function(src){FLSEditorCore.CObject.apply(this,arguments);var loadingstr='.';var loadingstridx=0;var is_new=false;var targetdpi=300;this.colorEditable(false);this.bboxpad(0);var _this=this;var loaded=false;this.setSize(57,40);var img=new Image();var def_src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADcAAAAmCAYAAABgUQN4AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAANiAAADYgBgtNgwQAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNXG14zYAAAUJSURBVGiB3ZhNaBxlGMd/87G7szO7m1gDER6ltBCNRVA0puLB9pRTrGlqQRBbFfGivWj1ECrGg3jxELD11oIJGms2H02lCgVrwYKlB8V4EkUovBehIcluEpJsZjxMdpls9mMmySahfxh2eZ/3+fjP88zzPjOapxTlyIlo1+GUDqeBdg9adPjPgykXBnuVGt6gtAehlZMbFXnWgCEDJAkpA9ABF1gFFiDvwj8unOpV6o9diDk01pEbF3lEg6kUNMVqKC2Dl4fcKhx6WVVI/R6BXvwzKGJocNUGpxYxgDhoNiQNGO8T0ets3zImRJzN6JUCS8PzOhxIgBlG0YKYDu3PwQubcRwWwyLNwG9jIo9F1S2R06AjBokoyglIrEBHVKdhkRPRkjBmwAEdvo6qHyR31IxIzoS4AUeiOg2Ln6DfgM4MmDq0j4u8EUW/RM4FR4voXPOvhyKqhcKoSJcH76fAAUj7vwPfibSEtRHM3M8FKEQJoADeKvwSRScMvhfZr8NIGpxigDqQBCsOF8LaCXa628uwECWIFcjrcCuKTj2MiiRW4UcHnPLOZkFch+5JkaNhbJXIrcAtD3Ir4IVRLACrUDDgRujIQ8CAizHYnwCjXKYBNtguDA2JxOvZKpE7qdTCMnTnYcGto+QCeZh34cSLSt0LG/iEyDO15GMib+nQ40Cy2p6Yf+1Lw0f1/K07gE8q9fsqvD4Ls/OwWE7SBRZhZRYWPDh3XKnQWRsTeQW4MylytpJ8XORpHQbWGkdN2GBr8N5VkUdr7dswXZxQKqvD/iW4NAv3pmF5BuamYWkGcouQ1aCtR6mBsMTWAr+Y9ivrk3KCEyL7NPghFWgg9YK2wCrAUK19GwbncoyKZFw4GIO7PUpNh/C9DpdFWhPwZwpaYvjZz8E80H9Mqc/7RPROuGnB4aRfdaExC/kCvNur1FeV5HXJbQVDIvE03EnC41YgcBeYg3kN+l1oMeFMGuyo9l1gBuY0OFDpxjd06E3BoAltVllGdCADjgf9OpxxNkGsaMeChAfnq8kbglGRswZ0p6t0viLBNNhbCSIJCQ2OZUU2DPANKctRkS4TxjNbDDwsVoA83M1B22tKLRfXt933FZE2A7KpHSIGfs2b8GAT9AXXtzVzkyJNLkw58HDcb/s7BhdYO3+fPK7U37CNmesT0V2YjEPrThMDn4jtP3+DwbVtQScMmNDhQN2Zr1FIgGHAExMir8I2leUVkdMafJnxx6JdxdrZN+PAwbrkxkR6DTBeUmqkkjwrctiAG82Q3KkGUg8LsLgE2ZrkhkWaLfhXAwt4p0epS0F5VkRifgN5oHhKH1GqYvJuilR8lSruryavpVPNvgfMgFfzS5cNF2JgJyE+C+cnRTLH1gbmayKWCdeTkKk0EEYJNgqq3YwjSmnFNQ3wQKtaSZMiRzXosf23X5r8SePTMZGPAZZhOOZ/CtzwUrkbqHQzK5K7JmK58I0TaBA6kAbbhA8nRH41oCvll+uuoFr5B1GxLAvwWRyay4VFgvN+y6+ZsXLn21WmN0W8ou2gj0r2N5AbEXkqDm8nawy86RCl2Khnrtx2kGi5z3VlOShixOCys4faej3UuonrOGTgAxMktgvjU1iEedaKKJVlVuSgCeecEB9oGoF6Z1dwLeze0iE+LnLbhg6rwW/nO4Vp1ohMiLxpwqH7hVgR2rfQmoC/miBzPzGbBswEfOFBZma3o2kA/geJ8XsL39LaPAAAAABJRU5ErkJggg==';img.src=typeof(src)=='string'?src:def_src;img.onload=function(){var _sz=_this.getSize();if(_sz.width==0){_sz=_this.setSize(img.width,img.height);}
_sz.height=Math.round((img.height/img.width)*_sz.width);if(_sz.width>img.width){_sz.width=img.width;_sz.height=img.height;}
_sz=_this.setSize(_sz.width,_sz.height);_this.pivot({x:Math.floor(_sz.width/2),y:Math.floor(_sz.height/2)});_this.center(_this.pivot());var curdpi=(img.width/_sz.width)*72;curdpi/=_this.getScaleX();if(curdpi<targetdpi){_this.scaleUniform(curdpi/targetdpi);}
loaded=true;if(typeof(_this.onload)=='function'){_this.onload(_this);}};img.onerror=function(err){loaded=false;img.src=def_src;if(typeof(_this.onerror)=='function'){_this.onerror(_this);}};var mscale_org=this.mscale;function _showLoading(ctx){var _sz=_this.getSize();ctx.strokeStyle='#265c92';ctx.strokeWidth=1;ctx.beginPath();var fw=(_sz.width>57?_sz.width:57);var fh=(_sz.height>40?_sz.height:40);ctx.moveTo(0,0);ctx.lineTo(fw,0);ctx.lineTo(fw,fh);ctx.lineTo(0,fh);ctx.closePath();ctx.fillStyle='rgba(255,255,255,0.5)';ctx.fill();ctx.stroke();ctx.save();ctx.scale(0.5,0.5);ctx.fillStyle='rgba(38,92,146,1)';ctx.beginPath();ctx.moveTo(1.875,38.415359);ctx.lineTo(10,25.707026);ctx.lineTo(14.583333,30.082026);ctx.lineTo(28.541667,12.998693);ctx.lineTo(33.125,17.582026);ctx.lineTo(42.708333,5.2903593);ctx.lineTo(55.625,26.123693);ctx.lineTo(55.625,38.415359);ctx.closePath();ctx.fill();ctx.beginPath();ctx.moveTo(3.7196764,7.791188);ctx.bezierCurveTo(3.7196764,-1.1234551,17.309384,-1.0563661,17.309384,7.938502);ctx.bezierCurveTo(17.309384,16.698654,3.7196764,16.635624,3.7196764,7.791188);ctx.closePath();ctx.fill();ctx.restore();ctx.fillStyle='rgba(38,92,146,1)';ctx.font='12px arial,verdana,sans-serif';ctx.textAlign='right';ctx.fillText(loadingstr,fw-5,fh-5);loadingstridx++;if(!(loadingstridx%5)){loadingstr+=loadingstr;if(loadingstr.length>9){loadingstr='.';}}}
this.src=function(_src){img.src=_src;loaded=false;};this.render=function(ctx,cctx,timedelta,notransform){if(typeof(notransform)!=='boolean'){notransform=false;}
ctx.save();if(notransform){ctx.setTransform(1,0,0,1,0,0);}else{this.transformsApply(ctx);}
if(loaded){var _sz=_this.getSize();ctx.drawImage(img,0,0,img.width,img.height,0,0,_sz.width,_sz.height);}else{_showLoading(ctx);}
ctx.restore();if(!notransform){this.drawControls(cctx);}};this.toSVG=function(svgparent){var svgimgnode=document.createElementNS('http://www.w3.org/2000/svg','image');var _sz=this.getSize();svgimgnode.setAttribute('transform','matrix('+this.getMatrix().join(',')+')');svgimgnode.setAttribute('width',_sz.width);svgimgnode.setAttribute('height',_sz.height);svgimgnode.setAttribute('externalResourcesRequired','false');svgimgnode.setAttribute('preserveAspectRatio','xMidYMid');svgimgnode.setAttribute('xlink:href',this.xlinkhref?this.xlinkhref:this.imageData);if(typeof(this.xlinktype)!='undefined'&&this.xlinktype){svgimgnode.setAttribute('xlink:type',this.xlinktype);}
if(typeof(this.bcchild)!='undefined'&&this.bcchild){svgimgnode.setAttribute('type','bc');}
if(typeof(this.datachoice)!='undefined'&&this.datachoice){svgimgnode.setAttribute('data-choice',this.datachoice.toString());}
svgparent.appendChild(document.createTextNode('\n    '));svgparent.appendChild(svgimgnode);};this.loaded=function(){return loaded;};this.imageData=function(dataonly){if((typeof(this.mimetype)=='undefined'||!this.mimetype)&&this.xlinkhref){var ext=this.xlinkhref.substring(this.xlinkhref.lastIndexOf('.'));switch(ext.toLowerCase()){case'.jpg':case'.jpeg':this.mimetype='image/jpeg';break;case'.png':default:this.mimetype='image/png';}}else{this.mimetype=this.mimetype?this.mimetype:'image/png';}
if(is_new&&typeof(this.base64src)==='boolean'&&this.base64src){return dataonly?img.src.split('base64,')[1]:img.src;}else{var tcvs=document.createElement('canvas');tcvs.width=img.width;tcvs.height=img.height;var ctx=tcvs.getContext('2d');ctx.drawImage(img,0,0,img.width,img.height);if(typeof(dataonly)!=='boolean'){dataonly=false;}
return dataonly?tcvs.toDataURL(this.mimetype,1).split('base64,')[1]:tcvs.toDataURL(this.mimetype,1);}};this.is_new=function(isnew){if(typeof(isnew)==='boolean'){is_new=isnew;}
return is_new;};this.mscale=function(){var _sz=this.getSize();var curdpi=(img.width/_sz.width)*72;curdpi/=this.getScaleX();var args=Array.prototype.slice.call(arguments,0);args.push(curdpi<=targetdpi);mscale_org.apply(this,args);_sz=this.getSize();curdpi=(img.width/_sz.width)*72;curdpi/=this.getScaleX();if(curdpi<targetdpi){this.scaleUniform(curdpi/targetdpi);}};this.targetdpi=function(newdpi){if(typeof(newdpi)==='number'){targetdpi=newdpi;}
return targetdpi;};this.getImgSize=function(){if(loaded){return{width:img.width,height:img.height};}
return{width:0,height:0};};this.getImageTag=function(){return img;};this.is_placeholder=function(){return loaded&&(img.src==def_src);};this.getProperties=function(){var _tmatrix=[];var mtrx=_this.getMatrix();_tmatrix[0]=mtrx[0];_tmatrix[1]=mtrx[1];_tmatrix[2]=mtrx[2];_tmatrix[3]=mtrx[3];_tmatrix[4]=mtrx[4];_tmatrix[5]=mtrx[5];return{tmatrix:_tmatrix,img_src:img.src,targetdpi:targetdpi,xlinkhref:this.xlinkhref?this.xlinkhref:this.imageData,xlinktype:this.xlinktype,is_new:is_new};};this.set_img=function(_img){img=_img;loaded=true;}};FLSEditorCore.CImage.prototype=new FLSEditorCore.CObject;FLSEditorCore.CDIFMLogoSVGImg=function(xml,server_url,logoid,is_copy){is_copy=typeof(is_copy)=='boolean'?is_copy:false;FLSEditorCore.CObject.apply(this,arguments);var _this=this;var loadingstr='.';var loadingstridx=0;var cnvsImg=document.createElement('canvas');var svgSrc='';var targetdpi=12;var base_matrix=[1,0,0,1,0,0];var clientSize={width:0,height:0};var src;var colors=[];var mm2pixel=3.7795275591;var cm2pixel=mm2pixel*10;var inch2pixel=96;var point2pixel=1.3333333333;var units=['mm','cm','inch','pt'];this.colorEditable(false);_getSvgBounds();_populateColorsArray();this.bboxpad(0);var loaded=false;var img=new Image();img.crossOrigin='anonymous';var def_src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADcAAAAmCAYAAABgUQN4AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAANiAAADYgBgtNgwQAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNXG14zYAAAUJSURBVGiB3ZhNaBxlGMd/87G7szO7m1gDER6ltBCNRVA0puLB9pRTrGlqQRBbFfGivWj1ECrGg3jxELD11oIJGms2H02lCgVrwYKlB8V4EkUovBehIcluEpJsZjxMdpls9mMmySahfxh2eZ/3+fjP88zzPjOapxTlyIlo1+GUDqeBdg9adPjPgykXBnuVGt6gtAehlZMbFXnWgCEDJAkpA9ABF1gFFiDvwj8unOpV6o9diDk01pEbF3lEg6kUNMVqKC2Dl4fcKhx6WVVI/R6BXvwzKGJocNUGpxYxgDhoNiQNGO8T0ets3zImRJzN6JUCS8PzOhxIgBlG0YKYDu3PwQubcRwWwyLNwG9jIo9F1S2R06AjBokoyglIrEBHVKdhkRPRkjBmwAEdvo6qHyR31IxIzoS4AUeiOg2Ln6DfgM4MmDq0j4u8EUW/RM4FR4voXPOvhyKqhcKoSJcH76fAAUj7vwPfibSEtRHM3M8FKEQJoADeKvwSRScMvhfZr8NIGpxigDqQBCsOF8LaCXa628uwECWIFcjrcCuKTj2MiiRW4UcHnPLOZkFch+5JkaNhbJXIrcAtD3Ir4IVRLACrUDDgRujIQ8CAizHYnwCjXKYBNtguDA2JxOvZKpE7qdTCMnTnYcGto+QCeZh34cSLSt0LG/iEyDO15GMib+nQ40Cy2p6Yf+1Lw0f1/K07gE8q9fsqvD4Ls/OwWE7SBRZhZRYWPDh3XKnQWRsTeQW4MylytpJ8XORpHQbWGkdN2GBr8N5VkUdr7dswXZxQKqvD/iW4NAv3pmF5BuamYWkGcouQ1aCtR6mBsMTWAr+Y9ivrk3KCEyL7NPghFWgg9YK2wCrAUK19GwbncoyKZFw4GIO7PUpNh/C9DpdFWhPwZwpaYvjZz8E80H9Mqc/7RPROuGnB4aRfdaExC/kCvNur1FeV5HXJbQVDIvE03EnC41YgcBeYg3kN+l1oMeFMGuyo9l1gBuY0OFDpxjd06E3BoAltVllGdCADjgf9OpxxNkGsaMeChAfnq8kbglGRswZ0p6t0viLBNNhbCSIJCQ2OZUU2DPANKctRkS4TxjNbDDwsVoA83M1B22tKLRfXt933FZE2A7KpHSIGfs2b8GAT9AXXtzVzkyJNLkw58HDcb/s7BhdYO3+fPK7U37CNmesT0V2YjEPrThMDn4jtP3+DwbVtQScMmNDhQN2Zr1FIgGHAExMir8I2leUVkdMafJnxx6JdxdrZN+PAwbrkxkR6DTBeUmqkkjwrctiAG82Q3KkGUg8LsLgE2ZrkhkWaLfhXAwt4p0epS0F5VkRifgN5oHhKH1GqYvJuilR8lSruryavpVPNvgfMgFfzS5cNF2JgJyE+C+cnRTLH1gbmayKWCdeTkKk0EEYJNgqq3YwjSmnFNQ3wQKtaSZMiRzXosf23X5r8SePTMZGPAZZhOOZ/CtzwUrkbqHQzK5K7JmK58I0TaBA6kAbbhA8nRH41oCvll+uuoFr5B1GxLAvwWRyay4VFgvN+y6+ZsXLn21WmN0W8ou2gj0r2N5AbEXkqDm8nawy86RCl2Khnrtx2kGi5z3VlOShixOCys4faej3UuonrOGTgAxMktgvjU1iEedaKKJVlVuSgCeecEB9oGoF6Z1dwLeze0iE+LnLbhg6rwW/nO4Vp1ohMiLxpwqH7hVgR2rfQmoC/miBzPzGbBswEfOFBZma3o2kA/geJ8XsL39LaPAAAAABJRU5ErkJggg==';img.src=src;img.onload=function(){if(is_copy===false){_getRasterBBox();var svgctx=cnvsImg.getContext('2d');if(svgctx.drawSvg){console.log('drawSvg');svgctx.drawSvg(_getSvgString(),0,0);}else{svgctx.drawImage(img,0,0);}
URL.revokeObjectURL(src);loaded=true;if(typeof(_this.onload)=='function'){_this.onload(_this);}}};img.onerror=function(err){loaded=false;img.src=def_src;if(typeof(_this.onerror)=='function'){_this.onerror(_this);}};function _getSvgString(){var serialize=new XMLSerializer();var _svgstr=serialize.serializeToString(svgSrc)
if(/xmlns:NS1=""/.test(_svgstr)){_svgstr=_svgstr.replace(/xmlns:NS1=""/,'').replace(/NS1:/g,'');}
if(_svgstr.match(/xmlns="http:\/\/www.w3.org\/2000\/svg"/g).length>1){_svgstr=_svgstr.replace(/xmlns="http:\/\/www.w3.org\/2000\/svg"/g,'').replace(/<svg/,'<svg xmlns="http://www.w3.org/2000/svg"');}
return _svgstr;}
function _populateColorsArray(){while(colors.length){colors.pop();}
var pths=svgSrc.querySelectorAll('path[style*="fill:"]');for(var pidx=0;pidx<pths.length;pidx++){var styles=pths[pidx].getAttribute('style');styles=styles.trim().split(';');var stopswitch=false;for(var i=0;i<styles.length;i++){var stmp=styles[i].split(':');if(stmp.length==2){switch(stmp[0]){case'fill':if((stmp[1]!='none')&&(/url\(/.test(stmp[1])==false)&&(colors.indexOf(stmp[1])==-1)){colors.push(stmp[1]);}
stopswitch=true;break;}}
if(stopswitch)break;}}}
function _getRasterBBox(){try{var tmpCnvs=document.createElement('canvas');tmpCnvs.width=clientSize.width;tmpCnvs.height=clientSize.height;var tmpCtx=tmpCnvs.getContext('2d');if(tmpCtx.drawSvg){tmpCtx.drawSvg(_getSvgString(),0,0);}else{tmpCtx.drawImage(img,0,0,clientSize.width,clientSize.height);}
var idata=tmpCtx.getImageData(0,0,clientSize.width,clientSize.height);var extremities={tx:0,ty:0,rx:0,ry:0,bx:0,by:0,lx:0,ly:0};var foundcolor=false;for(var y=0;y<idata.height;y++){foundcolor=false;for(var x=0;x<idata.width;x++){if(idata.data[((idata.width*y)+x)*4+3]){extremities.tx=x;extremities.ty=y;foundcolor=true;break;}}
if(foundcolor)break;}
for(var y=idata.height-1;y>0;y--){foundcolor=false;for(var x=0;x<idata.width;x++){if(idata.data[((idata.width*y)+x)*4+3]){extremities.bx=x;extremities.by=y;foundcolor=true;break;}}
if(foundcolor)break;}
for(var x=0;x<idata.width;x++){foundcolor=false;for(var y=0;y<idata.height;y++){if(idata.data[((idata.width*y)+x)*4+3]){extremities.lx=x;extremities.ly=y;foundcolor=true;break;}}
if(foundcolor)break;}
for(var x=idata.width-1;x>0;x--){foundcolor=false;for(var y=0;y<idata.height;y++){if(idata.data[((idata.width*y)+x)*4+3]){extremities.rx=x;extremities.ry=y;foundcolor=true;break;}}
if(foundcolor)break;}
var _width=extremities.rx-extremities.lx;var _height=extremities.by-extremities.ty;var _x=extremities.lx;var _y=extremities.ty;var _px=Math.floor(_width/2);var _py=Math.floor(_height/2);if(_width&&_height){base_matrix[4]=-_x;base_matrix[5]=-_y;var svgctx=cnvsImg.getContext('2d');cnvsImg.width=_width;cnvsImg.height=_height;svgctx.setTransform.apply(svgctx,base_matrix);_this.setSize(_width,_height);_this.pivot({x:Math.floor(_px),y:Math.floor(_py)});_this.center(_this.pivot());}}catch(e){console.log(e)}}
function _getSvgBounds(){var svgbbox;var parser=new DOMParser();var serialize=new XMLSerializer();if((xml instanceof jQuery)&&(xml.length==1)){var domXML=xml.get(0)
if(domXML.nodeName=='g'){var svgroot=document.createElementNS('http://www.w3.org/2000/svg','svg');svgroot.setAttribute('version','1.1');svgroot.setAttribute('xmlns','http://www.w3.org/2000/svg');svgroot.setAttribute('xmlns:xlink','http://www.w3.org/1999/xlink');var _sz=xml.attr('data-size');if(_sz){_sz=_sz.replace(/,/,' ').replace(/\s+/,' ').split(' ');}else{_sz=[100,100];}
svgbbox={width:parseFloat(_sz[0],10),height:parseFloat(_sz[1],10)};var svg_sz=xml.attr('data-svgsize');if(svg_sz){svg_sz=svg_sz.replace(/,/,' ').replace(/\s+/,' ').split(' ');}else{svg_sz=[svgbbox.width,svgbbox.height];}
var _logoid=xml.attr('data-logoid');if(_logoid){_this.logoid=_logoid;}else if(logoid){_this.logoid=logoid;}
clientSize.width=parseFloat(svg_sz[0],10);clientSize.height=parseFloat(svg_sz[1],10);svgroot.setAttribute('width',clientSize.width);svgroot.setAttribute('height',clientSize.height);var cr_mtrx=xml.attr('data-current_matrix');if(cr_mtrx){cr_mtrx=cr_mtrx.replace(/,/,' ').replace(/\s+/,' ').split(' ');for(var cridx=0;cridx<cr_mtrx.length;cridx++){cr_mtrx[cridx]=parseFloat(cr_mtrx[cridx],10);}
_this.setMatrix(cr_mtrx);}
var bs_mtrx=xml.attr('data-base_matrix');if(bs_mtrx){bs_mtrx=bs_mtrx.replace(/,/,' ').replace(/\s+/,' ').split(' ');for(var cridx=0;cridx<bs_mtrx.length;cridx++){bs_mtrx[cridx]=parseFloat(bs_mtrx[cridx],10);}
base_matrix[0]=bs_mtrx[0];base_matrix[1]=bs_mtrx[1];base_matrix[2]=bs_mtrx[2];base_matrix[3]=bs_mtrx[3];base_matrix[4]=bs_mtrx[4];base_matrix[5]=bs_mtrx[5];}
for(var chn_idx=0;chn_idx<domXML.childNodes.length;chn_idx++){var cn_str=serialize.serializeToString(domXML.childNodes[chn_idx]);svgroot.appendChild(parser.parseFromString(cn_str,"image/svg+xml").childNodes[0]);}
var svgstr=serialize.serializeToString(svgroot);if(/xmlns:NS1=""/.test(svgstr)){svgstr=svgstr.replace(/xmlns:NS1=""/,'').replace(/NS1:/g,'');}
if(svgstr.match(/xmlns="http:\/\/www.w3.org\/2000\/svg"/g).length>1){svgstr=svgstr.replace(/xmlns="http:\/\/www.w3.org\/2000\/svg"/g,'').replace(/<svg/,'<svg xmlns="http://www.w3.org/2000/svg"');}
var svgBlob=new Blob([svgstr],{type:"image/svg+xml"});src=URL.createObjectURL(svgBlob);svgSrc=svgroot;}}else{var tmpdiv=document.createElement('div');tmpdiv.style.width=tmpdiv.style.height='1px';tmpdiv.style.position='absolute';tmpdiv.style.top='-1px';tmpdiv.style.left='-1px';tmpdiv.style.overflow='hidden';document.body.appendChild(tmpdiv);var svgstr=serialize.serializeToString(xml);var svgBlob=new Blob([svgstr],{type:"image/svg+xml"});src=URL.createObjectURL(svgBlob);svgSrc=parser.parseFromString(svgstr,"image/svg+xml");tmpdiv.appendChild(svgSrc.childNodes[0]);svgSrc=tmpdiv.childNodes[0];var clientrect=svgSrc.getBoundingClientRect();clientSize.width=clientrect.width;clientSize.height=clientrect.height;svgbbox=svgSrc.getBBox();base_matrix[4]=-svgbbox.x;base_matrix[5]=-svgbbox.y;document.body.removeChild(tmpdiv);}
cnvsImg.width=Math.ceil(svgbbox.width);cnvsImg.height=Math.ceil(svgbbox.height);var svgctx=cnvsImg.getContext('2d');svgctx.setTransform.apply(svgctx,base_matrix);_this.setSize(svgbbox.width,svgbbox.height);_this.pivot({x:Math.floor(svgbbox.width/2),y:Math.floor(svgbbox.height/2)});_this.center(_this.pivot());if(/blob:/.test(src)&&!(/blob:http?s:\/\//.test(src))){}}
function _showLoading(ctx){var _sz=_this.getSize();ctx.strokeStyle='#265c92';ctx.strokeWidth=1;ctx.beginPath();var fw=(_sz.width>57?_sz.width:57);var fh=(_sz.height>40?_sz.height:40);ctx.moveTo(0,0);ctx.lineTo(fw,0);ctx.lineTo(fw,fh);ctx.lineTo(0,fh);ctx.closePath();ctx.fillStyle='rgba(255,255,255,0.5)';ctx.fill();ctx.stroke();ctx.save();ctx.scale(0.5,0.5);ctx.fillStyle='rgba(38,92,146,1)';ctx.beginPath();ctx.moveTo(1.875,38.415359);ctx.lineTo(10,25.707026);ctx.lineTo(14.583333,30.082026);ctx.lineTo(28.541667,12.998693);ctx.lineTo(33.125,17.582026);ctx.lineTo(42.708333,5.2903593);ctx.lineTo(55.625,26.123693);ctx.lineTo(55.625,38.415359);ctx.closePath();ctx.fill();ctx.beginPath();ctx.moveTo(3.7196764,7.791188);ctx.bezierCurveTo(3.7196764,-1.1234551,17.309384,-1.0563661,17.309384,7.938502);ctx.bezierCurveTo(17.309384,16.698654,3.7196764,16.635624,3.7196764,7.791188);ctx.closePath();ctx.fill();ctx.restore();ctx.fillStyle='rgba(38,92,146,1)';ctx.font='12px arial,verdana,sans-serif';ctx.textAlign='right';ctx.fillText(loadingstr,fw-5,fh-5);loadingstridx++;if(!(loadingstridx%5)){loadingstr+=loadingstr;if(loadingstr.length>9){loadingstr='.';}}}
this.getColors=function(){return colors.slice(0);}
this.src=function(_src){img.src=_src;loaded=false;};this.render=function(ctx,cctx,timedelta,notransform){if(typeof(notransform)!=='boolean'){notransform=false;}
ctx.save();if(notransform){ctx.setTransform(1,0,0,1,0,0);}else{this.transformsApply(ctx);}
if(loaded){var _sz=_this.getSize();ctx.drawImage(cnvsImg,0,0,cnvsImg.width,cnvsImg.height,0,0,_sz.width,_sz.height);}else{_showLoading(ctx);}
ctx.restore();if(!notransform){this.drawControls(cctx);}};this.toSVG=function(svgparent){var svgimgnode=document.createElementNS('http://www.w3.org/2000/svg','g');var _sz=this.getSize();var mtrx_cpy=this.getMatrix().slice(0);svgimgnode.setAttribute('transform','matrix('+FLSUtil.tmatrixMultiply(base_matrix,mtrx_cpy).join(',')+')');if(typeof(this.xlinktype)!='undefined'&&this.xlinktype){svgimgnode.setAttribute('xlink:type',this.xlinktype);}
if(typeof(this.id)!='undefined'&&this.id){svgimgnode.setAttribute('id',this.id);}
if(typeof(this.logoid)!='undefined'&&this.logoid){svgimgnode.setAttribute('data-logoid',this.logoid);}
svgimgnode.setAttribute('data-base_matrix',base_matrix.join(' '));svgimgnode.setAttribute('data-current_matrix',mtrx_cpy.join(' '));svgimgnode.setAttribute('data-size',_sz.width+' '+_sz.height);svgimgnode.setAttribute('data-svgsize',clientSize.width+' '+clientSize.height);var parser=new DOMParser();var serializer=new XMLSerializer();for(var cn_idx=0;cn_idx<svgSrc.childNodes.length;cn_idx++){var cn_str=serializer.serializeToString(svgSrc.childNodes[cn_idx]);svgimgnode.appendChild(parser.parseFromString(cn_str,"image/svg+xml").childNodes[0]);}
if(svgparent){svgparent.appendChild(document.createTextNode('\n    '));svgparent.appendChild(svgimgnode);}else{return svgimgnode;}};this.loaded=function(){return loaded;};this.getImgSize=function(){if(loaded){return{width:cnvsImg.width,height:cnvsImg.height};}
return{width:0,height:0};};this.targetdpi=function(newdpi){if(typeof(newdpi)==='number'){targetdpi=newdpi;}
return targetdpi;};this.getImageTag=function(){return cnvsImg;};this.getProperties=function(){var _tmatrix=_this.getMatrix().slice(0);var _pvt=_this.pivot();var _cntr=_this.center();return{tmatrix:_tmatrix,img_src:img.src,targetdpi:targetdpi,xlinktype:this.xlinktype,cnvsImg:cnvsImg,base_matrix:base_matrix.slice(0),size:this.getSize(),svgSrc:svgSrc,logoid:this.logoid,svgSize:clientSize,pivot:{x:_pvt.x,y:_pvt.y},center:{x:_cntr.x,y:_cntr.y},};};this.set_imgcnvs=function(_cnvs){if(_cnvs instanceof HTMLCanvasElement){cnvsImg=_cnvs;loaded=true;}};this.set_base_matrix=function(_mtrx){if((_mtrx instanceof Array)&&(_mtrx.length==6)){base_matrix[0]=_mtrx[0];base_matrix[1]=_mtrx[1];base_matrix[2]=_mtrx[2];base_matrix[3]=_mtrx[3];base_matrix[4]=_mtrx[4];base_matrix[5]=_mtrx[5];}}};FLSEditorCore.CDIFMLogoSVGImg.prototype=new FLSEditorCore.CObject;FLSEditorCore.CPathText=function(str){FLSEditorCore.CText.apply(this,arguments);var _this=this;var setFontFamily_org=this.setFontFamily;var setFontSize_org=this.setFontSize;var setFontStyle_org=this.setFontStyle;var setColor_org=this.setColor;var setText_org=this.setText;var setStroke_org=this.setStroke;var setStrokeWidth_org=this.setStrokeWidth;var default_text_org=this.default_text;var whichControl_org=this.whichControl;var drawControls_org=this.drawControls;var font_family=this.getFontFamily();var fontsize=this.getFontSize();var fontstyle='';var color=this.getColor();var text=this.getText();var default_text=this.default_text();var stroke=null;var stroke_width=0;var data='';var path_pixel_lenght=0;var path_segments_pixel_lenght=[];var use_path=false;var enable_path_edit=false;var center_text_on_path=true;var letter_spacing=0;var txt_dy=0;var scale_fontsize_if_short_path=true;var letters=[];var commands=[];var path_vertexes=[];var cp_lines=[];var controlSize=10;var otherControlSize=15;var vertex_cntrl_radius=controlSize/2;var current_control=false;var current_other_control='none';var other_vertex=[{x:0,y:0},{x:0,y:0},{x:0,y:0}];var other_controls={normal:{'path_scale_bottom':{x:0,y:0}},path_edit:{'path_scale':{x:0,y:0}}};var fonticonprops={'path_scale':{size:23,glyph:'\uE013',adj_y:0,adj_x:0,bg_color:'rgb(226, 228, 228)',color:'rgb(0, 69, 121)'},'path_scale_top':{size:23,glyph:'\uE016',adj_y:0,adj_x:0,bg_color:'rgb(226, 228, 228)',color:'rgb(0, 69, 121)'},'path_scale_bottom':{size:26,glyph:'\uE018',adj_y:0,adj_x:0,bg_color:'rgb(226, 228, 228)',color:'rgb(0, 69, 121)'}};var fonticontextpos={'path_scale':{x:-12,y:8.5},'path_scale_top':{x:-12,y:8.5},'path_scale_bottom':{x:-13,y:9.5},};var Tvalues=0||[[],[],[-0.5773502691896257645091487805019574556476,0.5773502691896257645091487805019574556476],[0,-0.7745966692414833770358530799564799221665,0.7745966692414833770358530799564799221665],[-0.3399810435848562648026657591032446872005,0.3399810435848562648026657591032446872005,-0.8611363115940525752239464888928095050957,0.8611363115940525752239464888928095050957],[0,-0.5384693101056830910363144207002088049672,0.5384693101056830910363144207002088049672,-0.9061798459386639927976268782993929651256,0.9061798459386639927976268782993929651256],[0.6612093864662645136613995950199053470064,-0.6612093864662645136613995950199053470064,-0.2386191860831969086305017216807119354186,0.2386191860831969086305017216807119354186,-0.9324695142031520278123015544939946091347,0.9324695142031520278123015544939946091347],[0,0.4058451513773971669066064120769614633473,-0.4058451513773971669066064120769614633473,-0.7415311855993944398638647732807884070741,0.7415311855993944398638647732807884070741,-0.9491079123427585245261896840478512624007,0.9491079123427585245261896840478512624007],[-0.1834346424956498049394761423601839806667,0.1834346424956498049394761423601839806667,-0.5255324099163289858177390491892463490419,0.5255324099163289858177390491892463490419,-0.7966664774136267395915539364758304368371,0.7966664774136267395915539364758304368371,-0.9602898564975362316835608685694729904282,0.9602898564975362316835608685694729904282],[0,-0.8360311073266357942994297880697348765441,0.8360311073266357942994297880697348765441,-0.9681602395076260898355762029036728700494,0.9681602395076260898355762029036728700494,-0.3242534234038089290385380146433366085719,0.3242534234038089290385380146433366085719,-0.6133714327005903973087020393414741847857,0.6133714327005903973087020393414741847857],[-0.1488743389816312108848260011297199846175,0.1488743389816312108848260011297199846175,-0.4333953941292471907992659431657841622000,0.4333953941292471907992659431657841622000,-0.6794095682990244062343273651148735757692,0.6794095682990244062343273651148735757692,-0.8650633666889845107320966884234930485275,0.8650633666889845107320966884234930485275,-0.9739065285171717200779640120844520534282,0.9739065285171717200779640120844520534282],[0,-0.2695431559523449723315319854008615246796,0.2695431559523449723315319854008615246796,-0.5190961292068118159257256694586095544802,0.5190961292068118159257256694586095544802,-0.7301520055740493240934162520311534580496,0.7301520055740493240934162520311534580496,-0.8870625997680952990751577693039272666316,0.8870625997680952990751577693039272666316,-0.9782286581460569928039380011228573907714,0.9782286581460569928039380011228573907714],[-0.1252334085114689154724413694638531299833,0.1252334085114689154724413694638531299833,-0.3678314989981801937526915366437175612563,0.3678314989981801937526915366437175612563,-0.5873179542866174472967024189405342803690,0.5873179542866174472967024189405342803690,-0.7699026741943046870368938332128180759849,0.7699026741943046870368938332128180759849,-0.9041172563704748566784658661190961925375,0.9041172563704748566784658661190961925375,-0.9815606342467192506905490901492808229601,0.9815606342467192506905490901492808229601],[0,-0.2304583159551347940655281210979888352115,0.2304583159551347940655281210979888352115,-0.4484927510364468528779128521276398678019,0.4484927510364468528779128521276398678019,-0.6423493394403402206439846069955156500716,0.6423493394403402206439846069955156500716,-0.8015780907333099127942064895828598903056,0.8015780907333099127942064895828598903056,-0.9175983992229779652065478365007195123904,0.9175983992229779652065478365007195123904,-0.9841830547185881494728294488071096110649,0.9841830547185881494728294488071096110649],[-0.1080549487073436620662446502198347476119,0.1080549487073436620662446502198347476119,-0.3191123689278897604356718241684754668342,0.3191123689278897604356718241684754668342,-0.5152486363581540919652907185511886623088,0.5152486363581540919652907185511886623088,-0.6872929048116854701480198030193341375384,0.6872929048116854701480198030193341375384,-0.8272013150697649931897947426503949610397,0.8272013150697649931897947426503949610397,-0.9284348836635735173363911393778742644770,0.9284348836635735173363911393778742644770,-0.9862838086968123388415972667040528016760,0.9862838086968123388415972667040528016760],[0,-0.2011940939974345223006283033945962078128,0.2011940939974345223006283033945962078128,-0.3941513470775633698972073709810454683627,0.3941513470775633698972073709810454683627,-0.5709721726085388475372267372539106412383,0.5709721726085388475372267372539106412383,-0.7244177313601700474161860546139380096308,0.7244177313601700474161860546139380096308,-0.8482065834104272162006483207742168513662,0.8482065834104272162006483207742168513662,-0.9372733924007059043077589477102094712439,0.9372733924007059043077589477102094712439,-0.9879925180204854284895657185866125811469,0.9879925180204854284895657185866125811469],[-0.0950125098376374401853193354249580631303,0.0950125098376374401853193354249580631303,-0.2816035507792589132304605014604961064860,0.2816035507792589132304605014604961064860,-0.4580167776572273863424194429835775735400,0.4580167776572273863424194429835775735400,-0.6178762444026437484466717640487910189918,0.6178762444026437484466717640487910189918,-0.7554044083550030338951011948474422683538,0.7554044083550030338951011948474422683538,-0.8656312023878317438804678977123931323873,0.8656312023878317438804678977123931323873,-0.9445750230732325760779884155346083450911,0.9445750230732325760779884155346083450911,-0.9894009349916499325961541734503326274262,0.9894009349916499325961541734503326274262],[0,-0.1784841814958478558506774936540655574754,0.1784841814958478558506774936540655574754,-0.3512317634538763152971855170953460050405,0.3512317634538763152971855170953460050405,-0.5126905370864769678862465686295518745829,0.5126905370864769678862465686295518745829,-0.6576711592166907658503022166430023351478,0.6576711592166907658503022166430023351478,-0.7815140038968014069252300555204760502239,0.7815140038968014069252300555204760502239,-0.8802391537269859021229556944881556926234,0.8802391537269859021229556944881556926234,-0.9506755217687677612227169578958030214433,0.9506755217687677612227169578958030214433,-0.9905754753144173356754340199406652765077,0.9905754753144173356754340199406652765077],[-0.0847750130417353012422618529357838117333,0.0847750130417353012422618529357838117333,-0.2518862256915055095889728548779112301628,0.2518862256915055095889728548779112301628,-0.4117511614628426460359317938330516370789,0.4117511614628426460359317938330516370789,-0.5597708310739475346078715485253291369276,0.5597708310739475346078715485253291369276,-0.6916870430603532078748910812888483894522,0.6916870430603532078748910812888483894522,-0.8037049589725231156824174550145907971032,0.8037049589725231156824174550145907971032,-0.8926024664975557392060605911271455154078,0.8926024664975557392060605911271455154078,-0.9558239495713977551811958929297763099728,0.9558239495713977551811958929297763099728,-0.9915651684209309467300160047061507702525,0.9915651684209309467300160047061507702525],[0,-0.1603586456402253758680961157407435495048,0.1603586456402253758680961157407435495048,-0.3165640999636298319901173288498449178922,0.3165640999636298319901173288498449178922,-0.4645707413759609457172671481041023679762,0.4645707413759609457172671481041023679762,-0.6005453046616810234696381649462392798683,0.6005453046616810234696381649462392798683,-0.7209661773352293786170958608237816296571,0.7209661773352293786170958608237816296571,-0.8227146565371428249789224867127139017745,0.8227146565371428249789224867127139017745,-0.9031559036148179016426609285323124878093,0.9031559036148179016426609285323124878093,-0.9602081521348300308527788406876515266150,0.9602081521348300308527788406876515266150,-0.9924068438435844031890176702532604935893,0.9924068438435844031890176702532604935893],[-0.0765265211334973337546404093988382110047,0.0765265211334973337546404093988382110047,-0.2277858511416450780804961953685746247430,0.2277858511416450780804961953685746247430,-0.3737060887154195606725481770249272373957,0.3737060887154195606725481770249272373957,-0.5108670019508270980043640509552509984254,0.5108670019508270980043640509552509984254,-0.6360536807265150254528366962262859367433,0.6360536807265150254528366962262859367433,-0.7463319064601507926143050703556415903107,0.7463319064601507926143050703556415903107,-0.8391169718222188233945290617015206853296,0.8391169718222188233945290617015206853296,-0.9122344282513259058677524412032981130491,0.9122344282513259058677524412032981130491,-0.9639719272779137912676661311972772219120,0.9639719272779137912676661311972772219120,-0.9931285991850949247861223884713202782226,0.9931285991850949247861223884713202782226],[0,-0.1455618541608950909370309823386863301163,0.1455618541608950909370309823386863301163,-0.2880213168024010966007925160646003199090,0.2880213168024010966007925160646003199090,-0.4243421202074387835736688885437880520964,0.4243421202074387835736688885437880520964,-0.5516188358872198070590187967243132866220,0.5516188358872198070590187967243132866220,-0.6671388041974123193059666699903391625970,0.6671388041974123193059666699903391625970,-0.7684399634756779086158778513062280348209,0.7684399634756779086158778513062280348209,-0.8533633645833172836472506385875676702761,0.8533633645833172836472506385875676702761,-0.9200993341504008287901871337149688941591,0.9200993341504008287901871337149688941591,-0.9672268385663062943166222149076951614246,0.9672268385663062943166222149076951614246,-0.9937521706203895002602420359379409291933,0.9937521706203895002602420359379409291933],[-0.0697392733197222212138417961186280818222,0.0697392733197222212138417961186280818222,-0.2078604266882212854788465339195457342156,0.2078604266882212854788465339195457342156,-0.3419358208920842251581474204273796195591,0.3419358208920842251581474204273796195591,-0.4693558379867570264063307109664063460953,0.4693558379867570264063307109664063460953,-0.5876404035069115929588769276386473488776,0.5876404035069115929588769276386473488776,-0.6944872631866827800506898357622567712673,0.6944872631866827800506898357622567712673,-0.7878168059792081620042779554083515213881,0.7878168059792081620042779554083515213881,-0.8658125777203001365364256370193787290847,0.8658125777203001365364256370193787290847,-0.9269567721871740005206929392590531966353,0.9269567721871740005206929392590531966353,-0.9700604978354287271239509867652687108059,0.9700604978354287271239509867652687108059,-0.9942945854823992920730314211612989803930,0.9942945854823992920730314211612989803930],[0,-0.1332568242984661109317426822417661370104,0.1332568242984661109317426822417661370104,-0.2641356809703449305338695382833096029790,0.2641356809703449305338695382833096029790,-0.3903010380302908314214888728806054585780,0.3903010380302908314214888728806054585780,-0.5095014778460075496897930478668464305448,0.5095014778460075496897930478668464305448,-0.6196098757636461563850973116495956533871,0.6196098757636461563850973116495956533871,-0.7186613631319501944616244837486188483299,0.7186613631319501944616244837486188483299,-0.8048884016188398921511184069967785579414,0.8048884016188398921511184069967785579414,-0.8767523582704416673781568859341456716389,0.8767523582704416673781568859341456716389,-0.9329710868260161023491969890384229782357,0.9329710868260161023491969890384229782357,-0.9725424712181152319560240768207773751816,0.9725424712181152319560240768207773751816,-0.9947693349975521235239257154455743605736,0.9947693349975521235239257154455743605736],[-0.0640568928626056260850430826247450385909,0.0640568928626056260850430826247450385909,-0.1911188674736163091586398207570696318404,0.1911188674736163091586398207570696318404,-0.3150426796961633743867932913198102407864,0.3150426796961633743867932913198102407864,-0.4337935076260451384870842319133497124524,0.4337935076260451384870842319133497124524,-0.5454214713888395356583756172183723700107,0.5454214713888395356583756172183723700107,-0.6480936519369755692524957869107476266696,0.6480936519369755692524957869107476266696,-0.7401241915785543642438281030999784255232,0.7401241915785543642438281030999784255232,-0.8200019859739029219539498726697452080761,0.8200019859739029219539498726697452080761,-0.8864155270044010342131543419821967550873,0.8864155270044010342131543419821967550873,-0.9382745520027327585236490017087214496548,0.9382745520027327585236490017087214496548,-0.9747285559713094981983919930081690617411,0.9747285559713094981983919930081690617411,-0.9951872199970213601799974097007368118745,0.9951872199970213601799974097007368118745]];var Cvalues=0||[[],[],[1.0,1.0],[0.8888888888888888888888888888888888888888,0.5555555555555555555555555555555555555555,0.5555555555555555555555555555555555555555],[0.6521451548625461426269360507780005927646,0.6521451548625461426269360507780005927646,0.3478548451374538573730639492219994072353,0.3478548451374538573730639492219994072353],[0.5688888888888888888888888888888888888888,0.4786286704993664680412915148356381929122,0.4786286704993664680412915148356381929122,0.2369268850561890875142640407199173626432,0.2369268850561890875142640407199173626432],[0.3607615730481386075698335138377161116615,0.3607615730481386075698335138377161116615,0.4679139345726910473898703439895509948116,0.4679139345726910473898703439895509948116,0.1713244923791703450402961421727328935268,0.1713244923791703450402961421727328935268],[0.4179591836734693877551020408163265306122,0.3818300505051189449503697754889751338783,0.3818300505051189449503697754889751338783,0.2797053914892766679014677714237795824869,0.2797053914892766679014677714237795824869,0.1294849661688696932706114326790820183285,0.1294849661688696932706114326790820183285],[0.3626837833783619829651504492771956121941,0.3626837833783619829651504492771956121941,0.3137066458778872873379622019866013132603,0.3137066458778872873379622019866013132603,0.2223810344533744705443559944262408844301,0.2223810344533744705443559944262408844301,0.1012285362903762591525313543099621901153,0.1012285362903762591525313543099621901153],[0.3302393550012597631645250692869740488788,0.1806481606948574040584720312429128095143,0.1806481606948574040584720312429128095143,0.0812743883615744119718921581105236506756,0.0812743883615744119718921581105236506756,0.3123470770400028400686304065844436655987,0.3123470770400028400686304065844436655987,0.2606106964029354623187428694186328497718,0.2606106964029354623187428694186328497718],[0.2955242247147528701738929946513383294210,0.2955242247147528701738929946513383294210,0.2692667193099963550912269215694693528597,0.2692667193099963550912269215694693528597,0.2190863625159820439955349342281631924587,0.2190863625159820439955349342281631924587,0.1494513491505805931457763396576973324025,0.1494513491505805931457763396576973324025,0.0666713443086881375935688098933317928578,0.0666713443086881375935688098933317928578],[0.2729250867779006307144835283363421891560,0.2628045445102466621806888698905091953727,0.2628045445102466621806888698905091953727,0.2331937645919904799185237048431751394317,0.2331937645919904799185237048431751394317,0.1862902109277342514260976414316558916912,0.1862902109277342514260976414316558916912,0.1255803694649046246346942992239401001976,0.1255803694649046246346942992239401001976,0.0556685671161736664827537204425485787285,0.0556685671161736664827537204425485787285],[0.2491470458134027850005624360429512108304,0.2491470458134027850005624360429512108304,0.2334925365383548087608498989248780562594,0.2334925365383548087608498989248780562594,0.2031674267230659217490644558097983765065,0.2031674267230659217490644558097983765065,0.1600783285433462263346525295433590718720,0.1600783285433462263346525295433590718720,0.1069393259953184309602547181939962242145,0.1069393259953184309602547181939962242145,0.0471753363865118271946159614850170603170,0.0471753363865118271946159614850170603170],[0.2325515532308739101945895152688359481566,0.2262831802628972384120901860397766184347,0.2262831802628972384120901860397766184347,0.2078160475368885023125232193060527633865,0.2078160475368885023125232193060527633865,0.1781459807619457382800466919960979955128,0.1781459807619457382800466919960979955128,0.1388735102197872384636017768688714676218,0.1388735102197872384636017768688714676218,0.0921214998377284479144217759537971209236,0.0921214998377284479144217759537971209236,0.0404840047653158795200215922009860600419,0.0404840047653158795200215922009860600419],[0.2152638534631577901958764433162600352749,0.2152638534631577901958764433162600352749,0.2051984637212956039659240656612180557103,0.2051984637212956039659240656612180557103,0.1855383974779378137417165901251570362489,0.1855383974779378137417165901251570362489,0.1572031671581935345696019386238421566056,0.1572031671581935345696019386238421566056,0.1215185706879031846894148090724766259566,0.1215185706879031846894148090724766259566,0.0801580871597602098056332770628543095836,0.0801580871597602098056332770628543095836,0.0351194603317518630318328761381917806197,0.0351194603317518630318328761381917806197],[0.2025782419255612728806201999675193148386,0.1984314853271115764561183264438393248186,0.1984314853271115764561183264438393248186,0.1861610000155622110268005618664228245062,0.1861610000155622110268005618664228245062,0.1662692058169939335532008604812088111309,0.1662692058169939335532008604812088111309,0.1395706779261543144478047945110283225208,0.1395706779261543144478047945110283225208,0.1071592204671719350118695466858693034155,0.1071592204671719350118695466858693034155,0.0703660474881081247092674164506673384667,0.0703660474881081247092674164506673384667,0.0307532419961172683546283935772044177217,0.0307532419961172683546283935772044177217],[0.1894506104550684962853967232082831051469,0.1894506104550684962853967232082831051469,0.1826034150449235888667636679692199393835,0.1826034150449235888667636679692199393835,0.1691565193950025381893120790303599622116,0.1691565193950025381893120790303599622116,0.1495959888165767320815017305474785489704,0.1495959888165767320815017305474785489704,0.1246289712555338720524762821920164201448,0.1246289712555338720524762821920164201448,0.0951585116824927848099251076022462263552,0.0951585116824927848099251076022462263552,0.0622535239386478928628438369943776942749,0.0622535239386478928628438369943776942749,0.0271524594117540948517805724560181035122,0.0271524594117540948517805724560181035122],[0.1794464703562065254582656442618856214487,0.1765627053669926463252709901131972391509,0.1765627053669926463252709901131972391509,0.1680041021564500445099706637883231550211,0.1680041021564500445099706637883231550211,0.1540457610768102880814315948019586119404,0.1540457610768102880814315948019586119404,0.1351363684685254732863199817023501973721,0.1351363684685254732863199817023501973721,0.1118838471934039710947883856263559267358,0.1118838471934039710947883856263559267358,0.0850361483171791808835353701910620738504,0.0850361483171791808835353701910620738504,0.0554595293739872011294401653582446605128,0.0554595293739872011294401653582446605128,0.0241483028685479319601100262875653246916,0.0241483028685479319601100262875653246916],[0.1691423829631435918406564701349866103341,0.1691423829631435918406564701349866103341,0.1642764837458327229860537764659275904123,0.1642764837458327229860537764659275904123,0.1546846751262652449254180038363747721932,0.1546846751262652449254180038363747721932,0.1406429146706506512047313037519472280955,0.1406429146706506512047313037519472280955,0.1225552067114784601845191268002015552281,0.1225552067114784601845191268002015552281,0.1009420441062871655628139849248346070628,0.1009420441062871655628139849248346070628,0.0764257302548890565291296776166365256053,0.0764257302548890565291296776166365256053,0.0497145488949697964533349462026386416808,0.0497145488949697964533349462026386416808,0.0216160135264833103133427102664524693876,0.0216160135264833103133427102664524693876],[0.1610544498487836959791636253209167350399,0.1589688433939543476499564394650472016787,0.1589688433939543476499564394650472016787,0.1527660420658596667788554008976629984610,0.1527660420658596667788554008976629984610,0.1426067021736066117757461094419029724756,0.1426067021736066117757461094419029724756,0.1287539625393362276755157848568771170558,0.1287539625393362276755157848568771170558,0.1115666455473339947160239016817659974813,0.1115666455473339947160239016817659974813,0.0914900216224499994644620941238396526609,0.0914900216224499994644620941238396526609,0.0690445427376412265807082580060130449618,0.0690445427376412265807082580060130449618,0.0448142267656996003328381574019942119517,0.0448142267656996003328381574019942119517,0.0194617882297264770363120414644384357529,0.0194617882297264770363120414644384357529],[0.1527533871307258506980843319550975934919,0.1527533871307258506980843319550975934919,0.1491729864726037467878287370019694366926,0.1491729864726037467878287370019694366926,0.1420961093183820513292983250671649330345,0.1420961093183820513292983250671649330345,0.1316886384491766268984944997481631349161,0.1316886384491766268984944997481631349161,0.1181945319615184173123773777113822870050,0.1181945319615184173123773777113822870050,0.1019301198172404350367501354803498761666,0.1019301198172404350367501354803498761666,0.0832767415767047487247581432220462061001,0.0832767415767047487247581432220462061001,0.0626720483341090635695065351870416063516,0.0626720483341090635695065351870416063516,0.0406014298003869413310399522749321098790,0.0406014298003869413310399522749321098790,0.0176140071391521183118619623518528163621,0.0176140071391521183118619623518528163621],[0.1460811336496904271919851476833711882448,0.1445244039899700590638271665537525436099,0.1445244039899700590638271665537525436099,0.1398873947910731547221334238675831108927,0.1398873947910731547221334238675831108927,0.1322689386333374617810525744967756043290,0.1322689386333374617810525744967756043290,0.1218314160537285341953671771257335983563,0.1218314160537285341953671771257335983563,0.1087972991671483776634745780701056420336,0.1087972991671483776634745780701056420336,0.0934444234560338615532897411139320884835,0.0934444234560338615532897411139320884835,0.0761001136283793020170516533001831792261,0.0761001136283793020170516533001831792261,0.0571344254268572082836358264724479574912,0.0571344254268572082836358264724479574912,0.0369537897708524937999506682993296661889,0.0369537897708524937999506682993296661889,0.0160172282577743333242246168584710152658,0.0160172282577743333242246168584710152658],[0.1392518728556319933754102483418099578739,0.1392518728556319933754102483418099578739,0.1365414983460151713525738312315173965863,0.1365414983460151713525738312315173965863,0.1311735047870623707329649925303074458757,0.1311735047870623707329649925303074458757,0.1232523768105124242855609861548144719594,0.1232523768105124242855609861548144719594,0.1129322960805392183934006074217843191142,0.1129322960805392183934006074217843191142,0.1004141444428809649320788378305362823508,0.1004141444428809649320788378305362823508,0.0859416062170677274144436813727028661891,0.0859416062170677274144436813727028661891,0.0697964684245204880949614189302176573987,0.0697964684245204880949614189302176573987,0.0522933351526832859403120512732112561121,0.0522933351526832859403120512732112561121,0.0337749015848141547933022468659129013491,0.0337749015848141547933022468659129013491,0.0146279952982722006849910980471854451902,0.0146279952982722006849910980471854451902],[0.1336545721861061753514571105458443385831,0.1324620394046966173716424647033169258050,0.1324620394046966173716424647033169258050,0.1289057221880821499785953393997936532597,0.1289057221880821499785953393997936532597,0.1230490843067295304675784006720096548158,0.1230490843067295304675784006720096548158,0.1149966402224113649416435129339613014914,0.1149966402224113649416435129339613014914,0.1048920914645414100740861850147438548584,0.1048920914645414100740861850147438548584,0.0929157660600351474770186173697646486034,0.0929157660600351474770186173697646486034,0.0792814117767189549228925247420432269137,0.0792814117767189549228925247420432269137,0.0642324214085258521271696151589109980391,0.0642324214085258521271696151589109980391,0.0480376717310846685716410716320339965612,0.0480376717310846685716410716320339965612,0.0309880058569794443106942196418845053837,0.0309880058569794443106942196418845053837,0.0134118594871417720813094934586150649766,0.0134118594871417720813094934586150649766],[0.1279381953467521569740561652246953718517,0.1279381953467521569740561652246953718517,0.1258374563468282961213753825111836887264,0.1258374563468282961213753825111836887264,0.1216704729278033912044631534762624256070,0.1216704729278033912044631534762624256070,0.1155056680537256013533444839067835598622,0.1155056680537256013533444839067835598622,0.1074442701159656347825773424466062227946,0.1074442701159656347825773424466062227946,0.0976186521041138882698806644642471544279,0.0976186521041138882698806644642471544279,0.0861901615319532759171852029837426671850,0.0861901615319532759171852029837426671850,0.0733464814110803057340336152531165181193,0.0733464814110803057340336152531165181193,0.0592985849154367807463677585001085845412,0.0592985849154367807463677585001085845412,0.0442774388174198061686027482113382288593,0.0442774388174198061686027482113382288593,0.0285313886289336631813078159518782864491,0.0285313886289336631813078159518782864491,0.0123412297999871995468056670700372915759,0.0123412297999871995468056670700372915759]];function updateLetters(){while(letters.length){letters.shift();}
if(commands.length&&use_path){var ctx=document.createElement('canvas').getContext('2d');ctx.font=fontstyle+' '+fontsize+'px '+font_family;var subpath_ln_idx=0;var pathinfo=path_segments_pixel_lenght[subpath_ln_idx];var tm=0;var pbb={x0:0,y0:-fontsize,x1:1,y1:0};var offset=0;var do_break=false;var display_text=text;if(center_text_on_path){var path_total_length=0;for(var ps_idx=0;ps_idx<path_segments_pixel_lenght.length;ps_idx++){path_total_length+=path_segments_pixel_lenght[ps_idx].plen;}
var text_width=ctx.measureText(display_text).width+(letter_spacing*(display_text.length-1));var trimside=true;while(text_width>path_total_length){if(scale_fontsize_if_short_path){var fontscale=path_total_length/text_width;var new_font_size=Math.floor(fontsize*fontscale);fontsize=new_font_size>_this.minscale()?new_font_size:_this.minscale();ctx.font=fontstyle+' '+fontsize+'px '+font_family;text_width=ctx.measureText(display_text).width+(letter_spacing*(display_text.length-1));pbb.yo=-fontsize;setFontSize_org.apply(_this,[fontsize]);}else{if(trimside){display_text=display_text.substring(1);}else{display_text=display_text.substring(0,display_text.length-1);}
trimside=!trimside;text_width=ctx.measureText(display_text).width+(letter_spacing*(display_text.length-1));}}
var extra_path_lengt=(path_total_length-text_width)/2;path_total_length=0;for(var ps_idx=0;ps_idx<path_segments_pixel_lenght.length;ps_idx++){path_total_length+=path_segments_pixel_lenght[ps_idx].plen;if(path_total_length>=extra_path_lengt){subpath_ln_idx=ps_idx;offset=extra_path_lengt-(path_total_length-path_segments_pixel_lenght[ps_idx].plen);pathinfo=path_segments_pixel_lenght[subpath_ln_idx];break;}}}
for(var lidx=0;lidx<display_text.length;lidx++){var letter_info=[];var metrics=ctx.measureText(display_text[lidx]);var ltl={x:0,y:-fontsize+txt_dy};var ltr={x:metrics.width,y:-fontsize+txt_dy};var lrb={x:metrics.width,y:0+txt_dy};var llb={x:0,y:0+txt_dy};var letter_h_half=metrics.width*0.5;var lettertransform=[1,0,0,1,0,0];var middletransform=[1,0,0,1,0,0];var t_offset=offset+letter_h_half;if(t_offset>pathinfo.plen){subpath_ln_idx++;if(path_segments_pixel_lenght[subpath_ln_idx]){offset-=pathinfo.plen;pathinfo=path_segments_pixel_lenght[subpath_ln_idx];}else{break;}}
tm=getTforDistLUT(offset+letter_h_half,pathinfo);var tgnm=getTangentAndNormal(tm,pathinfo.start,pathinfo.end,pathinfo.cpoints);FLSUtil.tmatrixTranslate(lettertransform,tgnm['point'][0],tgnm['point'][1]);FLSUtil.tmatrixRotate(lettertransform,Math.atan2(tgnm['normalized_tangent'][1],tgnm['normalized_tangent'][0]));FLSUtil.tmatrixTranslate(lettertransform,-letter_h_half,0);offset+=(metrics.width);FLSUtil.transformPoint(lettertransform,ltl,true);FLSUtil.transformPoint(lettertransform,ltr,true);FLSUtil.transformPoint(lettertransform,lrb,true);FLSUtil.transformPoint(lettertransform,llb,true);pbb.x0=lidx==0?Math.min(ltl.x,lrb.x,ltr.x,llb.x):Math.min(pbb.x0,ltl.x,lrb.x,ltr.x,llb.x);pbb.y0=lidx==0?Math.min(ltl.y,lrb.y,ltr.y,llb.y):Math.min(pbb.y0,ltl.y,lrb.y,ltr.y,llb.y);pbb.x1=lidx==0?Math.max(ltl.x,lrb.x,ltr.x,llb.x):Math.max(pbb.x1,ltl.x,lrb.x,ltr.x,llb.x);pbb.y1=lidx==0?Math.max(ltl.y,lrb.y,ltr.y,llb.y):Math.max(pbb.y1,ltl.y,lrb.y,ltr.y,llb.y);letter_info.push(lettertransform);letter_info.push(display_text[lidx]);letter_info.push(metrics.width);if(offset>=pathinfo.plen){subpath_ln_idx+=1;if(subpath_ln_idx>=path_segments_pixel_lenght.length){if((offset-letter_h_half)<pathinfo.plen){letters.push(letter_info);}
break;}
offset=offset-pathinfo.plen;pathinfo=path_segments_pixel_lenght[subpath_ln_idx];}
letters.push(letter_info);offset+=letter_spacing;}
var width=pbb.x1-pbb.x0;var height=pbb.y1-pbb.y0;_this.setSize(width,height);_this.bboxpos(pbb.x0,pbb.y0);var pvt={x:Math.floor(pbb.x0+width/2),y:Math.floor(pbb.y0+height/2)};_this.pivot(pvt);_this.center(pvt);}}
function calcPathLength(){path_pixel_lenght=0;path_segments_pixel_lenght.length=0;if(commands.length){var start=[0,0];var first=[0,0];for(var i=0;i<commands.length;i++){if(commands[i]['func']=='moveTo'){start=[commands[i]['args'][0],commands[i]['args'][1]];i++;first[0]=start[0];first[1]=start[1];}
var end=[start[0],start[1]];var cpoints=[];switch(commands[i]['func']){case'lineTo':end[0]=commands[i]['args'][0];end[1]=commands[i]['args'][1];break;case'quadraticCurveTo':end[0]=commands[i]['args'][2];end[1]=commands[i]['args'][3];cpoints.push([commands[i]['args'][0],commands[i]['args'][1]]);break;case'bezierCurveTo':end[0]=commands[i]['args'][4];end[1]=commands[i]['args'][5];cpoints.push([commands[i]['args'][0],commands[i]['args'][1]]);cpoints.push([commands[i]['args'][2],commands[i]['args'][3]]);break;case'closePath':end[0]=first[0];end[1]=first[1];break;}
var sum=0;var t=1;var z=t/2;var n=20;for(var xi=0;xi<n;xi++){var corrected_t=z*Tvalues[n][xi]+z;var derivp=getDerivPathPoint(corrected_t,start,end,cpoints);var combined=Math.sqrt(derivp[0]*derivp[0]+derivp[1]*derivp[1]);sum+=Cvalues[n][xi]*combined;}
sum*=z;var order=2+cpoints.length-1;var LUT_resolution=1+parseInt(400*Math.log(order)/Math.log(4));var LUT=[];var t_lut,r=parseFloat(LUT_resolution-1);for(var idx=0;idx<LUT_resolution;idx++){t_lut=idx/r;LUT.push({t:t_lut,d:getPathPartialLength(t_lut,start,end,cpoints)});}
path_segments_pixel_lenght.push({plen:sum,start:start,end:end,cpoints:cpoints,LUT:LUT});path_pixel_lenght+=sum;start=[end[0],end[1]];}}
return path_pixel_lenght;}
function getPathPartialLength(t,start,end,cpoints){var sum=0;var z=t/2;var n=20;for(var xi=0;xi<n;xi++){var corrected_t=z*Tvalues[n][xi]+z;var derivp=getDerivPathPoint(corrected_t,start,end,cpoints);var combined=Math.sqrt(derivp[0]*derivp[0]+derivp[1]*derivp[1]);sum+=Cvalues[n][xi]*combined;}
sum*=z;return sum;}
function getPathPoint(t,start,end,control_points){var point=[0,0];if(!(control_points instanceof Array)){control_points=[];}
var points=[start];for(var cpi=0;cpi<control_points.length;cpi++){points.push(control_points[cpi]);}
points.push(end);if(t){t=t>1?1:(t<0?0:t);}else{t=0;}
var n=points.length-1;var t1=1-t;var coefs=[1];for(var ni=0;ni<n;ni++){coefs.push(coefs[ni]*(n-ni)/(ni+1));}
for(var ci=0;ci<=n;ci++){var tmp_term=Math.pow(t1,n-ci)*Math.pow(t,ci)*coefs[ci];point[0]+=points[ci][0]*tmp_term;point[1]+=points[ci][1]*tmp_term;}
return point;}
function getDerivPathPoint(t,start,end,control_points){var point=[0,0];if(!(control_points instanceof Array)){control_points=[];}
var points=[start];for(var cpi=0;cpi<control_points.length;cpi++){points.push(control_points[cpi]);}
points.push(end);if(t){t=t>1?1:(t<0?0:t);}else{t=0;}
var n=points.length-1;var k=n-1;var t1=1-t;var coefs=[1];for(var ni=0;ni<k;ni++){coefs.push(coefs[ni]*(k-ni)/(ni+1));}
for(var ci=0;ci<=k;ci++){var tmp_term=Math.pow(t1,k-ci)*Math.pow(t,ci)*coefs[ci]*n;point[0]+=(points[ci+1][0]-points[ci][0])*tmp_term;point[1]+=(points[ci+1][1]-points[ci][1])*tmp_term;}
return point;}
function getTangentAndNormal(t,start,end,control_points){var point=getPathPoint.apply(null,arguments);var dpoint=getDerivPathPoint.apply(null,arguments);var d=Math.sqrt(dpoint[0]*dpoint[0]+dpoint[1]*dpoint[1]);var normalize_tangent=[dpoint[0]/d,dpoint[1]/d];var normal=[-normalize_tangent[1],normalize_tangent[0]];return{point:point,tangent:dpoint,normalized_tangent:normalize_tangent,normal:normal};}
function parseSvgPath(){SVGPath2Cnvs.parse(data,commands);updatePathVertexCache();}
function getTforDistLUT(offset,pathinfo){var t=offset/pathinfo.plen;for(var i=0;i<pathinfo.LUT.length;i++){if(offset<=pathinfo.LUT[i]['d']){if(offset==pathinfo.LUT[i]['d']){return pathinfo.LUT[i]['t'];}
return(pathinfo.LUT[i]['t']+pathinfo.LUT[i-1]['t'])/2;}}
return t;}
function updatePathVertexCache(){if(commands.length){while(path_vertexes.length){path_vertexes.pop();}
while(cp_lines.length){cp_lines.pop();}
var control_points=[];for(var i=0;i<commands.length;i++){var pvertex={x:0,y:0,links:[],type:'v'};var vertex_ok=false;switch(commands[i]['func']){case'moveTo':case'lineTo':vertex_ok=true;pvertex.x=commands[i]['args'][0];pvertex.y=commands[i]['args'][1];pvertex.cmd_p_idx=0;break;case'bezierCurveTo':var c1={x:commands[i]['args'][0],y:commands[i]['args'][1],links:[path_vertexes.length-1],type:'c',cmd_p_idx:0,cmd_idx:i};var c2={x:commands[i]['args'][2],y:commands[i]['args'][3],links:[path_vertexes.length],type:'c',cmd_p_idx:2,cmd_idx:i};control_points.push(c1);control_points.push(c2);pvertex.x=commands[i]['args'][4];pvertex.y=commands[i]['args'][5];pvertex.cmd_p_idx=4;vertex_ok=true;break;case'quadraticCurveTo':vertex_ok=true;var c={x:commands[i]['args'][0],y:commands[i]['args'][1],links:[path_vertexes.length-1,path_vertexes.length],type:'c',cmd_p_idx:0,cmd_idx:i};control_points.push(c);pvertex.x=commands[i]['args'][2];pvertex.y=commands[i]['args'][3];pvertex.cmd_p_idx=2;break;case'closePath':}
if(vertex_ok){pvertex.cmd_idx=i;path_vertexes.push(pvertex);}}
while(control_points.length){var tmp_cp=control_points.shift();for(var link_idx=0;link_idx<tmp_cp.links.length;link_idx++){cp_lines.push([path_vertexes.length,tmp_cp.links[link_idx]]);}
path_vertexes.push(tmp_cp);}}}
this.setPathStr=function(svgpath){data=svgpath;parseSvgPath();calcPathLength();updateLetters();};this.setText=function(){setText_org.apply(this,arguments);text=this.getText();updateLetters();};this.setFontFamily=function(){setFontFamily_org.apply(this,arguments);font_family=this.getFontFamily();if(txt_dy){txt_dy=Math.ceil(this.getFontSize()*0.75);}
updateLetters();};this.setFontSize=function(){fontsize=setFontSize_org.apply(this,arguments);if(txt_dy){txt_dy=Math.ceil(this.getFontSize()*0.75);}
updateLetters();return fontsize};this.setColor=function(){setColor_org.apply(this,arguments);color=this.getColor();};this.setStroke=function(){setStroke_org.apply(this,arguments);stroke=this.getStroke();};this.setStrokeWidth=function(){setStrokeWidth_org.apply(this,arguments);stroke_width=this.getStrokeWidth();};this.setColorAllChild=function(){this.setColor.apply(this,arguments)};this.setFontStyle=function(){setFontStyle_org.apply(this,arguments);fontstyle=this.getFontStyle();updateLetters();};this.default_text=function(dstr){default_text=default_text_org.apply(this,arguments);return default_text;};this.letter_spacing=function(ltrsp){ltrsp=parseInt(ltrsp,10);if(!isNaN(ltrsp)){letter_spacing=ltrsp;updateLetters();}
return letter_spacing;};this.get_letters=function(){return letters.slice(0);};this.render=function(ctx,cctx,timedelta){ctx.save();ctx.font=fontstyle+' '+fontsize+'px '+font_family;ctx.fillStyle=color;if(stroke){ctx.strokeStyle=stroke;if(stroke_width)ctx.lineWidth=stroke_width;}
this.transformsApply(ctx);if(commands.length&&use_path){if(!(this.for_preview&&(text==default_text))){for(var lidx=0;lidx<letters.length;lidx++){ctx.save();ctx.transform.apply(ctx,letters[lidx][0]);if(txt_dy){ctx.translate(0,txt_dy);}
ctx.fillText(letters[lidx][1],0,0);if(stroke){ctx.strokeText(letters[lidx][1],0,0);}
ctx.restore();}}}else{ctx.fillText(this.for_preview&&text==default_text?'':text,0,0);if(stroke){ctx.strokeText(this.for_preview&&text==default_text?'':text,0,0);}}
ctx.restore();this.drawControls(cctx);};this.pointInBbox=function(point){var actv=this.getActive();var extrapx=actv?this.bboxpad():0;var sz=this.getSize();var bbpos=this.bboxpos();var zoom=this.editor().zoom();var vpoint=this.editor().viewtopleft();var _point={x:point.x-vpoint.x,y:point.y-vpoint.y};FLSUtil.unTransformPoint([zoom,0,0,zoom,0,0],_point,true);FLSUtil.unTransformPoint(this.getMatrix(),_point,true);return(_point.x>=(bbpos.x-extrapx))&&(_point.x<=(bbpos.x+sz.width+extrapx))&&(_point.y>=(bbpos.y-extrapx))&&(_point.y<=(bbpos.y+sz.height+extrapx));};this.containsPoint=function(point){if(!this.selectable())return false;if((!commands.length||this.getActive())&&(enable_path_edit===false)||!use_path){return this.pointInBbox(point);}else{var zoom=this.editor().zoom();var vpoint=this.editor().viewtopleft();var _point={x:point.x-vpoint.x,y:(point.y-vpoint.y)};FLSUtil.unTransformPoint([zoom,0,0,zoom,0,0],_point,true);FLSUtil.unTransformPoint(this.getMatrix(),_point,true);for(var i=0;i<letters.length;i++){var tpoint=FLSUtil.unTransformPoint(letters[i][0],_point);tpoint.y-=txt_dy;var ltl={x:0,y:-fontsize};var lrb={x:letters[i][2],y:0};if((tpoint.x>=ltl.x)&&(tpoint.x<=lrb.x)&&(tpoint.y>=ltl.y)&&(tpoint.y<=lrb.y)){return true;}}
return false;}};this.getProperties=function(){var props={tmatrix:this.getMatrix().slice(0),color:color,text:text,default_text:default_text,fontsize:fontsize,font_family:this.getFontFamily(),hastextedit:this.hastextedit(),fonticons:this.fonticons(),bold:this.bold(),italic:this.italic(),data:SVGPath2Cnvs.commandsDataStr(commands),letter_spacing:letter_spacing,use_path:use_path,txt_dy:txt_dy,alluppercase:this.alluppercase?true:false,alllowercase:this.alllowercase?true:false,};if(this.align_point){props.align_point=this.align_point;}
return props;};this.setProperties=function(props){var call_measurements=true;if(typeof(props.alllowercase)!='undefined'){this.alllowercase=props.alllowercase;}
if(typeof(props.alluppercase)!='undefined'){this.alluppercase=props.alluppercase;}
if(typeof(props.align_point)!='undefined'){this.align_point=props.align_point;}
if(typeof(props.txt_dy)!='undefined'){txt_dy=props.txt_dy;}
if(typeof(props.tmatrix)!='undefined'){this.setMatrix(props.tmatrix);}
if(typeof(props.default_text)!='undefined'){this.default_text(props.default_text);}
if(typeof(props.text)!='undefined'){this.setText(props.text);call_measurements=false;}
if(typeof(props.fontsize)!='undefined'){this.setFontSize(props.fontsize);call_measurements=false;}
if(typeof(props.font_family)!='undefined'){this.setFontFamily(props.font_family);call_measurements=false;}
if(typeof(props.letter_spacing)!='undefined'){this.letter_spacing(props.letter_spacing);call_measurements=false;}
if(typeof(props.data)!='undefined'){this.setPathStr(props.data);call_measurements=false;}
if(typeof(props.color)!='undefined'){this.setColor(props.color);}
if(typeof(props.hastextedit)!='undefined'){this.hastextedit(props.hastextedit);}
if(typeof(props.fonticons)!='undefined'){this.fonticons(props.fonticons);}
if(typeof(props.use_path)!='undefined'){this.use_path(props.use_path);call_measurements=false;}
if(call_measurements)this.updateMeasurements();};this.use_path=function(_use_pth){if((typeof(_use_pth)=='boolean')&&commands.length){use_path=_use_pth;if(use_path){updateLetters();}else{this.updateMeasurements();}}
return use_path;};this.has_path=function(){return use_path&&(commands.length>0);};this.enable_path_edit=function(enable_pth_ed){if(typeof(enable_pth_ed)=='boolean'){enable_path_edit=enable_pth_ed;}
return enable_path_edit;};this.drawControls=function(ctx){if(ctx&&(!enable_path_edit||!use_path||!commands.length)){drawControls_org.apply(this,arguments);if(this.getActive()&&this.has_path()){var use_pivot=this.use_pivot();var pivot=this.pivot();var px=use_pivot?pivot.x:0,py=use_pivot?pivot.y:0,zoom=this.editor().zoom();var _bboxpad=this.bboxpad();var bboxpos=this.bboxpos();var objrotation=-_this.getRotation();var size=this.getSize();var rb={x:(size.width)+(bboxpos.x-px)+_bboxpad,y:(bboxpos.y-py)+(size.height)+_bboxpad};var lb={x:(bboxpos.x-px-_bboxpad),y:(bboxpos.y-py)+(size.height)+_bboxpad};var lt={x:(bboxpos.x-_bboxpad-px),y:(bboxpos.y-_bboxpad-py)};var rt={x:size.width+bboxpos.x-px+_bboxpad,y:bboxpos.y-py-_bboxpad};var sb={x:(rb.x+lb.x)/2,y:((rb.y+lb.y)/2)};var sb_top={x:(rt.x+lt.x)/2,y:((rt.y+lt.y)/2)};this.applyTransformMatrixToPoint(sb);this.applyTransformMatrixToPoint(sb_top);sb.x+=px;sb.y+=py;sb_top.x+=px;sb_top.y+=py;if(zoom!=1){FLSUtil.transformPoint([zoom,0,0,zoom,0,0],sb,true);FLSUtil.transformPoint([zoom,0,0,zoom,0,0],sb_top,true);}
for(var oci in other_controls.normal){switch(oci){case'path_scale_bottom':case'path_scale_top':var ctrl=(oci=='path_scale_bottom')?sb:sb_top
ctx.save();ctx.fillStyle=current_other_control==oci?'rgba(64, 125, 181,0.95)':fonticonprops[oci]['bg_color'];ctx.strokeStyle='#000';ctx.translate(ctrl.x,ctrl.y);ctx.rotate(objrotation);ctx.beginPath();ctx.arc(0,0,otherControlSize,0,2*Math.PI);ctx.closePath();ctx.fill();ctx.stroke();ctx.font=fonticonprops[oci]['size']+'px FlsObjectEditIcons';ctx.fillStyle=current_other_control==oci?'rgb(255,255,255)':fonticonprops[oci]['color'];var text=fonticonprops[oci]['glyph'];ctx.fillText(text,fonticontextpos[oci]['x'],fonticontextpos[oci]['y']);ctx.restore();other_controls.normal[oci]=ctrl;break;}}}}else{if(ctx&&this.getActive()&&commands.length){ctx.save();ctx.strokeStyle='rgb(255,0,0)';ctx.lineWidth=1.5;ctx.beginPath();for(var cidx=0;cidx<commands.length;cidx++){var cmd=commands[cidx];var newargs=[];for(var arg_idx=0;arg_idx<cmd.args.length;arg_idx+=2){var cp={x:cmd.args[arg_idx],y:cmd.args[arg_idx+1]};this.applyTransformMatrixToPoint(cp);newargs.push(cp.x);newargs.push(cp.y);}
ctx[cmd['func']].apply(ctx,newargs);}
ctx.stroke();ctx.restore();ctx.save();ctx.strokeStyle='rgb(0,0, 255)';ctx.lineWidth=1;for(var vli=0;vli<cp_lines.length;vli++){ctx.beginPath();var s={x:path_vertexes[cp_lines[vli][0]].x,y:path_vertexes[cp_lines[vli][0]].y,};var e={x:path_vertexes[cp_lines[vli][1]].x,y:path_vertexes[cp_lines[vli][1]].y,};this.applyTransformMatrixToPoint(s);this.applyTransformMatrixToPoint(e);ctx.moveTo(s.x,s.y);ctx.lineTo(e.x,e.y);ctx.stroke();}
ctx.restore();ctx.save();ctx.strokeStyle='rgb(255,255,255)';ctx.shadowColor='rgba(0,0,0,0.8)';ctx.shadowBlur=3;ctx.shadowOffsetX=1;ctx.shadowOffsetY=1;ctx.lineWidth=1;for(var cpli=0;cpli<path_vertexes.length;cpli++){var pv={x:path_vertexes[cpli].x,y:path_vertexes[cpli].y,};this.applyTransformMatrixToPoint(pv);ctx.fillStyle=path_vertexes[cpli].type=='v'?'rgb(255,0,0)':'rgb(0,0,255)';if(current_control==path_vertexes[cpli])ctx.fillStyle='rgb(0,255,0)';ctx.beginPath();ctx.arc(pv.x,pv.y,vertex_cntrl_radius,0,2*Math.PI);ctx.closePath();ctx.fill();ctx.stroke();}
ctx.restore();ctx.save();var use_pivot=this.use_pivot();var pivot=this.pivot();var px=use_pivot?pivot.x:0,py=use_pivot?pivot.y:0,zoom=this.editor().zoom();var objrotation=-_this.getRotation();for(var oci in other_controls.path_edit){switch(oci){case'path_scale':var pbbox=SVGPath2Cnvs.bbox(commands)
var pszize={width:(pbbox.x1-pbbox.x0),height:(pbbox.y1-pbbox.y0)};var sb={x:(pszize.width/2)+(pbbox.x0-px),y:(pbbox.y0-py)+(pszize.height/2)};this.applyTransformMatrixToPoint(sb);sb.x+=px;sb.y+=py;if(zoom!=1){FLSUtil.transformPoint([zoom,0,0,zoom,0,0],sb,true);}
ctx.save();ctx.fillStyle=current_other_control==oci?'rgba(64, 125, 181,0.95)':fonticonprops[oci]['bg_color'];ctx.strokeStyle='#000';ctx.translate(sb.x,sb.y);ctx.rotate(objrotation);ctx.beginPath();ctx.arc(0,0,otherControlSize,0,2*Math.PI);ctx.closePath();ctx.fill();ctx.stroke();ctx.font=fonticonprops[oci]['size']+'px FlsObjectEditIcons';ctx.fillStyle=current_other_control==oci?'rgb(255,255,255)':fonticonprops[oci]['color'];var text=fonticonprops[oci]['glyph'];ctx.fillText(text,fonticontextpos[oci]['x'],fonticontextpos[oci]['y']);ctx.restore();other_controls.path_edit[oci]=sb;break;}}
ctx.restore();}}};this.whichControl=function(mousepos,mousepos2){var op='op:none';current_other_control='none';current_control=false;var tmp=this.editor().viewtopleft();var mpos={x:mousepos.x-tmp.x,y:mousepos.y-tmp.y}
if(this.getActive()){if(!enable_path_edit||!commands.length){for(var oci in other_controls.normal){var cpos={x:other_controls.normal[oci].x,y:other_controls.normal[oci].y};if(FLSUtil.pointInCircle(cpos,otherControlSize,mpos)){current_other_control=oci;op='op:'+oci;break;}}
if(op=='op:none'){op=whichControl_org.apply(this,arguments)}}else{var tmp=this.editor().viewtopleft();var mpos={x:mousepos.x-tmp.x,y:mousepos.y-tmp.y}
for(var ci in path_vertexes){var cpos={x:path_vertexes[ci].x,y:path_vertexes[ci].y};this.applyTransformMatrixToPoint(cpos);if(FLSUtil.pointInCircle(cpos,controlSize,mpos)){op='op:vertex_move';current_control=path_vertexes[ci];break;}}
if(op=='op:none'){for(var oci in other_controls.path_edit){var cpos={x:other_controls.path_edit[oci].x,y:other_controls.path_edit[oci].y};if(FLSUtil.pointInCircle(cpos,otherControlSize,mpos)){current_other_control=oci;op='op:'+oci;break;}}}
if(op=='op:none'){var check=this.containsPoint(mousepos,true);if(check){op='op:translate';}}}}
return op;};this.mvertex_move=function(from,to){if(current_control){var zoom=this.editor().zoom();var _from,_to,cfrom={x:from.x,y:from.y},cto={x:to.x,y:to.y};if(zoom!=1){FLSUtil.unTransformPoint([zoom,0,0,zoom,0,0],cfrom,true);FLSUtil.unTransformPoint([zoom,0,0,zoom,0,0],cto,true);}
_from=this.transformPoint(cfrom);_to=this.transformPoint(cto);var dx=_to.x-_from.x;var dy=_to.y-_from.y;current_control.x+=dx;current_control.y+=dy;commands[current_control.cmd_idx].args[current_control.cmd_p_idx]+=dx;commands[current_control.cmd_idx].args[current_control.cmd_p_idx+1]+=dy;calcPathLength();updateLetters();}};this.mpath_scale=function(from,to,origin,op_type){var pos=this.getPosition();var zoom=this.editor().zoom();var pivot=this.pivot();var grow_scale=false;var path_bbox;var current_center={x:pivot.x,y:pivot.y};FLSUtil.unTransformPoint([zoom,0,0,zoom,0,0],origin,true);var _from=FLSUtil.unTransformPoint([zoom,0,0,zoom,0,0],from);var _to=FLSUtil.unTransformPoint([zoom,0,0,zoom,0,0],to);var _pivot={x:pos.x,y:pos.y};_from.x-=origin.x;_from.y-=origin.y;_to.x-=origin.x;_to.y-=origin.y;if(enable_path_edit==false){var corners=[];var ocntr=this.objCenter(corners);_pivot.x=((corners[1].x+corners[0].x)/2);_pivot.y=((corners[1].y+corners[0].y)/2);switch(op_type){case'path_scale_top':grow_scale=true;break;default:case'path_scale_bottom':break;}}
var sizeold=FLSUtil.pointDistance(_pivot,_from);var sizenew=FLSUtil.pointDistance(_pivot,_to);var s=Math.abs(enable_path_edit||grow_scale?(sizenew/sizeold):(sizeold/sizenew));if(s<1){if(path_pixel_lenght<=(this.get_text_width()+10)){return false;}}else{var mysize=this.getSize();if(mysize.height<this.getFontSize()*1.2)return false;}
if(enable_path_edit){if((_to.x-_pivot.x)<0){return false;}}else{if(grow_scale){if((_pivot.y-_to.y)<0){return false;}}else{if((_to.y-_pivot.y)<0){return false;}}}
if(enable_path_edit){path_bbox=SVGPath2Cnvs.bbox(commands);current_center.x=(path_bbox.x1-path_bbox.x0)/2;current_center.y=(path_bbox.y1-path_bbox.y0)/2;}
var scale_mtrx=[1,0,0,1,0,0];FLSUtil.tmatrixScale(scale_mtrx,s,s);var commands_args_cpy=[];for(var cmd_idx=0;cmd_idx<commands.length;cmd_idx++){commands_args_cpy.push(commands[cmd_idx].args.slice(0));}
SVGPath2Cnvs.applyMatrix(commands,scale_mtrx);calcPathLength();if(s<1&&(path_pixel_lenght<=(this.get_text_width()+10))){for(var cmd_idx=0;cmd_idx<commands.length;cmd_idx++){commands[cmd_idx].args=commands_args_cpy[cmd_idx];}
calcPathLength();}else{updateLetters();updatePathVertexCache()
var new_center={x:0,y:0};if(enable_path_edit){path_bbox=SVGPath2Cnvs.bbox(commands);new_center.x=(path_bbox.x1-path_bbox.x0)/2;new_center.y=(path_bbox.y1-path_bbox.y0)/2;}else{new_center=pivot;}
var dx=current_center.x-new_center.x;var dy=current_center.y-new_center.y;this.translate(dx,dy);}};this.toSVG=function(svgparent){var tn=document.createElementNS('http://www.w3.org/2000/svg','text');if(color.indexOf('%')!=-1){var rgb=color.replace('rgb(','').replace(')','').replace(/%/ig,'').split(',');var r=(parseFloat(rgb[0],10)*2.55).toFixed(0);var g=(parseFloat(rgb[1],10)*2.55).toFixed(0);var b=(parseFloat(rgb[2],10)*2.55).toFixed(0);color='rgb('+r+','+g+','+b+')';}
var stroke_style=[];if(stroke){stroke_style.push('stroke:'+stroke);if(stroke_width)stroke_style.push('stroke-width:'+stroke_width);}
tn.setAttribute('style','fill:'+color+(stroke_style.length?';'+stroke_style.join(';'):''));tn.setAttribute('font-family',font_family.replace(/"/gi,''));tn.setAttribute('font-size',fontsize);tn.setAttribute('transform','matrix('+this.getMatrix().join(',')+')');if(this.bold()){tn.setAttribute('font-weight','bold');}
if(this.italic()){tn.setAttribute('font-style','italic');}
if(typeof(this.id)!='undefined'&&this.id){tn.setAttribute('id',this.id);}
tn.setAttribute('xml:space','preserve');if(typeof(this.logochild)!='undefined'&&this.logochild){tn.setAttribute('logochild',this.logochild);tn.setAttribute('type','logo');}
if(typeof(this.bcchild)!='undefined'&&this.bcchild){tn.setAttribute('type','bc');}
if(typeof(this.alluppercase)!='undefined'&&this.alluppercase){tn.setAttribute('data-alluppercase','1');}
if(typeof(this.alllowercase)!='undefined'&&this.alllowercase){tn.setAttribute('data-alllowercase','1');}
var cdata_txt=new DOMParser().parseFromString('<xml></xml>','application/xml').createCDATASection((text!=default_text||this.for_bc_tpl)?text:'');if(commands.length&&use_path){data=SVGPath2Cnvs.commandsDataStr(commands);var pathDefId='flsTextPath'+((typeof(this.id)!='undefined'&&this.id)?this.id:Math.floor(Math.random()*1000)+1);var txtPathDef=document.createElementNS('http://www.w3.org/2000/svg','defs');var txtPathDefPath=document.createElementNS('http://www.w3.org/2000/svg','path');txtPathDefPath.setAttribute('id',pathDefId);txtPathDefPath.setAttribute('d',data);txtPathDef.appendChild(txtPathDefPath);if(txt_dy){tn.setAttribute('dy',txt_dy);}
var tnTxtPAth=document.createElementNS('http://www.w3.org/2000/svg','textPath');tnTxtPAth.setAttribute('xlink:href','#'+pathDefId);tnTxtPAth.appendChild(cdata_txt);if(center_text_on_path){tn.setAttribute('text-anchor','middle');tnTxtPAth.setAttribute('startOffset','50%');}
if(letter_spacing){tn.setAttribute('letter-spacing',letter_spacing);}
tn.appendChild(tnTxtPAth);if(typeof(svgparent)!='undefined'){svgparent.appendChild(document.createTextNode('\n    '));svgparent.appendChild(txtPathDef);}}else{tn.appendChild(cdata_txt);}
if(typeof(svgparent)!='undefined'){svgparent.appendChild(document.createTextNode('\n    '));svgparent.appendChild(tn);}
return tn;};this.txt_dy=function(_dy){_dy=parseInt(_dy);if(!isNaN(_dy)){txt_dy=_dy;updateLetters();}
return txt_dy;};this.center_text_on_path=function(_center){if(typeof(_center)=='boolean'){center_text_on_path=_center;updateLetters();}
return center_text_on_path;};this.get_text_width=function(){var ctx=document.createElement('canvas').getContext('2d');ctx.font=fontstyle+' '+fontsize+'px '+font_family;return ctx.measureText(text).width;};this.calculateBoundingBox=function(){if(commands.length&&use_path&&letters.length){var pbb={x0:0,y0:-fontsize,x1:1,y1:0};for(var lidx=0;lidx<letters.length;lidx++){var letter_info=letters[lidx];var ltl={x:0,y:-fontsize+txt_dy};var ltr={x:letter_info[2],y:-fontsize+txt_dy};var lrb={x:letter_info[2],y:0+txt_dy};var llb={x:0,y:0+txt_dy};var lettertransform=letter_info[0];FLSUtil.transformPoint(lettertransform,ltl,true);FLSUtil.transformPoint(lettertransform,ltr,true);FLSUtil.transformPoint(lettertransform,lrb,true);FLSUtil.transformPoint(lettertransform,llb,true);pbb.x0=lidx==0?Math.min(ltl.x,lrb.x,ltr.x,llb.x):Math.min(pbb.x0,ltl.x,lrb.x,ltr.x,llb.x);pbb.y0=lidx==0?Math.min(ltl.y,lrb.y,ltr.y,llb.y):Math.min(pbb.y0,ltl.y,lrb.y,ltr.y,llb.y);pbb.x1=lidx==0?Math.max(ltl.x,lrb.x,ltr.x,llb.x):Math.max(pbb.x1,ltl.x,lrb.x,ltr.x,llb.x);pbb.y1=lidx==0?Math.max(ltl.y,lrb.y,ltr.y,llb.y):Math.max(pbb.y1,ltl.y,lrb.y,ltr.y,llb.y);}
var width=pbb.x1-pbb.x0;var height=pbb.y1-pbb.y0;_this.setSize(width,height);_this.bboxpos(pbb.x0,pbb.y0);var pvt={x:Math.floor(pbb.x0+width/2),y:Math.floor(pbb.y0+height/2)};_this.pivot(pvt);_this.center(pvt);}else{this.setText(this.getText());}}};FLSEditorCore.CPathText.prototype=new FLSEditorCore.CText;FLSEditorCore.CSelectionGroup=function(x,y){FLSEditorCore.CObject.apply(this,arguments);var resize_controls={'resize_x':{x:0,y:0},'resize_xs':{x:0,y:0}};var current_control=false;var current_resize_control='none';var otherControlSize=10;var _this=this;this.removable(false);this.hasrotate(false);this.setSize(0,0);this.setPosition(x,y);this.bboxpad(2);this.pivot({x:0,y:0});this.center(this.pivot());var sbox={x1:0,y1:0,x2:0,y2:0};var sl_wdth=0;var elements=[];var move_org=this.move;var mscale_org=this.mscale;var setSize_org=this.setSize;var drawControls_org=this.drawControls;var whichControl_org=this.whichControl;this.updateBox=function(){sbox.x1=0;sbox.y1=0;sbox.x2=0;sbox.y2=0;for(var i=0;i<elements.length;i++){var _bboxpos=elements[i].bboxpos();var omtrx=elements[i].getMatrix();var _size=elements[i].getSize();var lt={x:_bboxpos.x,y:_bboxpos.y};var rt={x:_size.width+_bboxpos.x,y:_bboxpos.y};var rb={x:_size.width+_bboxpos.x,y:_bboxpos.y+_size.height};var lb={x:_bboxpos.x,y:_bboxpos.y+_size.height};FLSUtil.transformPoint(omtrx,lt,true);FLSUtil.transformPoint(omtrx,rt,true);FLSUtil.transformPoint(omtrx,rb,true);FLSUtil.transformPoint(omtrx,lb,true);var min_x=Math.min(lt.x,rt.x,rb.x,lb.x);var max_x=Math.max(lt.x,rt.x,rb.x,lb.x);var min_y=Math.min(lt.y,rt.y,rb.y,lb.y);var max_y=Math.max(lt.y,rt.y,rb.y,lb.y);sbox.x1=i>0?Math.min(sbox.x1,min_x):min_x;sbox.y1=i>0?Math.min(sbox.y1,min_y):min_y;sbox.x2=i>0?Math.max(sbox.x2,max_x):max_x;sbox.y2=i>0?Math.max(sbox.y2,max_y):max_y;}
this.setPosition(sbox.x1,sbox.y1);var w=sbox.x2-sbox.x1;var h=sbox.y2-sbox.y1;this.setSize(w,h);};this.addElement=function(elmnt){if((elmnt!=this)&&(elmnt instanceof FLSEditorCore.CObject)&&(elements.indexOf(elmnt)==-1)){elmnt.in_selection=true;elements.push(elmnt);this.updateBox();return true;}
return false;};this.clear=function(){while(elements.length){var elm=elements.shift();elm.in_selection=false;}};this.setElements=function(spoint,epoint){this.clear();var sx=Math.min(spoint.x,epoint.x);var sy=Math.min(spoint.y,epoint.y);var ex=Math.max(spoint.x,epoint.x);var ey=Math.max(spoint.y,epoint.y);spoint.x=sx;spoint.y=sy;epoint.x=ex;epoint.y=ey;this.setSize(0,0);this.setPosition(0,0);this.setActive(false);if(this.editor()){this.setMatrix([1,0,0,1,0,0]);var objs;if(this.only_layout_zones===true){objs=this.editor().getLayoutObjects();}else{objs=this.editor().getObjects().concat(this.editor().getLayoutObjects());}
var zoom=this.editor().zoom();var vwt_pos=this.editor().viewtopleft();for(var i=0;i<objs.length;i++){var _size=objs[i].getSize();if(!objs[i].fixed()&&_size.width&&objs[i].selectable()){var _bboxpos=objs[i].bboxpos();var omtrx=objs[i].getMatrix();var lt={x:_bboxpos.x,y:_bboxpos.y};var rt={x:_size.width+_bboxpos.x,y:_bboxpos.y};var rb={x:_size.width+_bboxpos.x,y:_bboxpos.y+_size.height};var lb={x:_bboxpos.x,y:_bboxpos.y+_size.height};FLSUtil.transformPoint(omtrx,lt,true);FLSUtil.transformPoint(omtrx,rt,true);FLSUtil.transformPoint(omtrx,rb,true);FLSUtil.transformPoint(omtrx,lb,true);if(zoom!=1){FLSUtil.transformPoint([zoom,0,0,zoom,0,0],lt,true);FLSUtil.transformPoint([zoom,0,0,zoom,0,0],rt,true);FLSUtil.transformPoint([zoom,0,0,zoom,0,0],rb,true);FLSUtil.transformPoint([zoom,0,0,zoom,0,0],lb,true);}
var min_x=Math.min(lt.x,rt.x,rb.x,lb.x)+vwt_pos.x;var max_x=Math.max(lt.x,rt.x,rb.x,lb.x)+vwt_pos.x;var min_y=Math.min(lt.y,rt.y,rb.y,lb.y)+vwt_pos.y;var max_y=Math.max(lt.y,rt.y,rb.y,lb.y)+vwt_pos.y;if((min_x>=spoint.x)&&(min_y>=spoint.y)&&(max_x<=epoint.x)&&(max_y<=epoint.y)){sbox.x1=elements.length?Math.min(sbox.x1,min_x):min_x;sbox.y1=elements.length?Math.min(sbox.y1,min_y):min_y;sbox.x2=elements.length?Math.max(sbox.x2,max_x):max_x;sbox.y2=elements.length?Math.max(sbox.y2,max_y):max_y;objs[i].in_selection=true;elements.push(objs[i]);}}}
this.setPosition((sbox.x1-vwt_pos.x)/zoom,(sbox.y1-vwt_pos.y)/zoom);var w=sbox.x2-sbox.x1;var h=sbox.y2-sbox.y1;this.setSize(w/zoom,h/zoom);}
return elements;};this.setSize=function(width,height){setSize_org.apply(this,arguments);};this.setColor=function(_color){for(var i=0;i<elements.length;i++){if(elements[i].colorEditable()){elements[i].setColor(_color);}}};this.setColorAllChild=function(_color){for(var i=0;i<elements.length;i++){if(elements[i].colorEditable()){elements[i].setColorAllChild(_color);}}};this.getColor=function(){if(elements.length){for(var i=0;i<elements.length;i++){if(elements[i].colorEditable()){return elements[i].getColor();}}}
return'transparent';};this.setFontFamily=function(_ff){for(var i=0;i<elements.length;i++){if(elements[i]instanceof FLSEditorCore.CText){elements[i].setFontFamily(_ff);}}
this.updateBox();};this.getFontFamily=function(){if(elements.length){for(var i=0;i<elements.length;i++){if(elements[i]instanceof FLSEditorCore.CText){return elements[i].getFontFamily();}}}
return false;};this.setFontSize=function(_fs){for(var i=0;i<elements.length;i++){if(elements[i]instanceof FLSEditorCore.CText){elements[i].setFontSize(_fs);}}
this.updateBox();};this.getFontSize=function(){if(elements.length){for(var i=0;i<elements.length;i++){if(elements[i]instanceof FLSEditorCore.CText){return elements[i].getFontSize();}}}
return false;};this.bold=function(bold){var set=typeof(bold)==='boolean';if(elements.length){for(var i=0;i<elements.length;i++){if(elements[i]instanceof FLSEditorCore.CText){if(set){elements[i].bold(bold);}else{return elements[i].bold();}}}}
return bold;};this.italic=function(italic){var set=typeof(italic)==='boolean';if(elements.length){for(var i=0;i<elements.length;i++){if(elements[i]instanceof FLSEditorCore.CText){if(set){elements[i].italic(italic);}else{return elements[i].italic();}}}}
return italic;};this.move=function(){move_org.apply(this,arguments);for(var i=0;i<elements.length;i++){elements[i].move.apply(elements[i],arguments);}};this.mscale=function(){mscale_org.apply(this,arguments);var smatrx=[].concat(this.getMatrix());FLSUtil.tmatrixTranslate(smatrx,-smatrx[4],-smatrx[5]);for(var i=0;i<elements.length;i++){var tmtrx=elements[i].getMatrix();var mulmtrx=FLSUtil.tmatrixMultiply(tmtrx,smatrx);elements[i].setMatrix(mulmtrx);}
var obj_sz=this.getSize();var obj_scale=this.getScaleX();var normalized_size={width:obj_sz.width*obj_scale,height:obj_sz.height*obj_scale};this.setSize(normalized_size.width,normalized_size.height);var scale_delta=obj_sz.width/(obj_sz.width*obj_scale);this.scaleUniform(scale_delta);};this.render=function(ctx,cctx,timedelta){if(!this.getActive()){sl_wdth=sl_wdth?sl_wdth:0.5/this.editor().zoom();var sze=this.getSize();ctx.save();ctx.lineWidth=sl_wdth;ctx.strokeStyle='rgb(41, 243, 35)';ctx.fillStyle='rgba(41, 243, 35,0.05)';this.transformsApply(ctx);ctx.fillRect(0,0,sze.width,sze.height);ctx.strokeRect(0,0,sze.width,sze.height);ctx.restore();}
if(elements.length){this.drawControls(cctx);}};this.stranslate=function(dx,dy){var scl=this.getScaleX();var zoom=this.editor().zoom();for(var i=0;i<elements.length;i++){elements[i].move.apply(elements[i],[{x:0,y:0},{x:dx/scl*zoom,y:dy/scl*zoom}]);}};this.getElements=function(){return elements;};this.drawControls=function(ctx){drawControls_org.apply(this,arguments);if(this.only_layout_zones===true){if(ctx){var highlight=this.highlight()
var use_pivot=this.use_pivot();var pivot=this.pivot();var bboxpad=this.bboxpad();var bboxpos=this.bboxpos();var size=this.getSize();var px=use_pivot?pivot.x:0,py=use_pivot?pivot.y:0,zoom=this.editor().zoom();var _bboxpad=bboxpad;var lt={x:(bboxpos.x-_bboxpad-px),y:(bboxpos.y-_bboxpad-py)};var rt={x:size.width+bboxpos.x-px+_bboxpad,y:bboxpos.y-py-_bboxpad};var rb={x:(size.width)+(bboxpos.x-px)+_bboxpad,y:(bboxpos.y-py)+(size.height)+_bboxpad};var lb={x:(bboxpos.x-px-_bboxpad),y:(bboxpos.y-py)+(size.height)+_bboxpad};this.applyTransformMatrixToPoint(lt);this.applyTransformMatrixToPoint(rt);this.applyTransformMatrixToPoint(rb);this.applyTransformMatrixToPoint(lb);lt.x+=px;lt.y+=py;rt.x+=px;rt.y+=py;rb.x+=px;rb.y+=py;lb.x+=px;lb.y+=py;if(zoom!=1){FLSUtil.transformPoint([zoom,0,0,zoom,0,0],lt,true);FLSUtil.transformPoint([zoom,0,0,zoom,0,0],rt,true);FLSUtil.transformPoint([zoom,0,0,zoom,0,0],rb,true);FLSUtil.transformPoint([zoom,0,0,zoom,0,0],lb,true);}
if(this.getActive()||highlight){if(highlight===false){var cntrl_radius=otherControlSize/2;var ilinewidth=4.5;ctx.save();ctx.strokeStyle='rgb(255,255,255)';ctx.shadowColor='rgba(0,0,0,0.8)';ctx.shadowBlur=3;ctx.shadowOffsetX=1;ctx.shadowOffsetY=1;var objrotation=-_this.getRotation();ctx.lineCap='round';for(var ci in resize_controls){switch(ci){case'resize_x':resize_controls[ci]={x:rt.x,y:(rt.y+rb.y)/2};ctx.fillStyle=current_resize_control==ci?'rgb(255,255,255)':'rgb(101,152,19)';break;case'resize_y':resize_controls[ci]={x:(lb.x+rb.x)/2,y:rb.y};ctx.fillStyle=current_resize_control==ci?'rgb(255,255,255)':'rgb(101,152,19)';break;case'resize_xs':resize_controls[ci]={x:lt.x,y:(rt.y+rb.y)/2};ctx.fillStyle=current_resize_control==ci?'rgb(255,255,255)':'rgb(101,152,19)';break;}
ctx.beginPath();ctx.arc(resize_controls[ci].x,resize_controls[ci].y,cntrl_radius,0,2*Math.PI);ctx.closePath();ctx.fill();ctx.stroke();}
ctx.restore();}}}}};this.whichControl=function(mousepos,mousepos2){var op='op:none';current_resize_control='none';current_control=false;var tmp=this.editor().viewtopleft();var mpos={x:mousepos.x-tmp.x,y:mousepos.y-tmp.y}
if(this.getActive()){if(this.only_layout_zones===true){for(var oci in resize_controls){var cpos={x:resize_controls[oci].x,y:resize_controls[oci].y};if(FLSUtil.pointInCircle(cpos,otherControlSize,mpos)){current_resize_control=oci;op='op:'+oci;break;}}}
if(op=='op:none'){op=whichControl_org.apply(this,arguments)}}
return op;};this.mresize_x=function(from,to,origin){if(this.only_layout_zones===true){var zoom=this.editor().zoom();var _to=FLSUtil.unTransformPoint([zoom,0,0,zoom,0,0],to);var _from=FLSUtil.unTransformPoint([zoom,0,0,zoom,0,0],from);var dx=_to.x-_from.x;var shortest_zone_w=0;for(var i=0;i<elements.length;i++){if(elements[i]instanceof FLSEditorCore.CLayoutZone){var z_w=elements[i].getSize().width;if((shortest_zone_w==0)||(z_w<shortest_zone_w)){shortest_zone_w=z_w;}}}
if((shortest_zone_w<=20)&&((shortest_zone_w+dx)<20)&&(dx<0))return false;for(var i=0;i<elements.length;i++){if(elements[i]instanceof FLSEditorCore.CLayoutZone){var lz_sz=elements[i].getSize();var lz_new_width=lz_sz.width+dx;elements[i].setSize(lz_new_width,lz_sz.height);}}
this.updateBox();}};this.mresize_xs=function(from,to,origin){if(this.only_layout_zones===true){var zoom=this.editor().zoom();var _to=FLSUtil.unTransformPoint([zoom,0,0,zoom,0,0],to);var _from=FLSUtil.unTransformPoint([zoom,0,0,zoom,0,0],from);var dx=_to.x-_from.x;var shortest_zone_w=0;for(var i=0;i<elements.length;i++){if(elements[i]instanceof FLSEditorCore.CLayoutZone){var z_w=elements[i].getSize().width;if((shortest_zone_w==0)||(z_w<shortest_zone_w)){shortest_zone_w=z_w;}}}
if((shortest_zone_w<=20)&&((shortest_zone_w-dx)<20)&&(dx>0))return false;for(var i=0;i<elements.length;i++){if(elements[i]instanceof FLSEditorCore.CLayoutZone){var lz_sz=elements[i].getSize();var lz_new_width=lz_sz.width-dx;elements[i].setSize(lz_new_width,lz_sz.height);elements[i].translateX(dx);}}
this.updateBox();}};this.kbresize=function(x,y,keep_right){y=0;if((this.only_layout_zones===true)&&x&&!y){if(typeof(keep_right)!=='boolean'){keep_right=false;}
x=parseFloat(x);y=parseFloat(y);x=isNaN(x)?0:x;y=isNaN(y)?0:y;var _x=keep_right?x*-1:x;var _y=keep_right?y*-1:y;var shortest_zone_w=0;for(var i=0;i<elements.length;i++){if(elements[i]instanceof FLSEditorCore.CLayoutZone){var z_w=elements[i].getSize().width;if((shortest_zone_w==0)||(z_w<shortest_zone_w)){shortest_zone_w=z_w;}}}
if((shortest_zone_w<=20)&&((shortest_zone_w+_x)<20))return false;for(var i=0;i<elements.length;i++){if(elements[i]instanceof FLSEditorCore.CLayoutZone){var lz_sz=elements[i].getSize();var lz_new_width=lz_sz.width+_x;if((keep_right==true)&&(lz_new_width!=lz_sz.width)){elements[i].translateX(x);}
elements[i].setSize(lz_new_width,lz_sz.height);}}
this.updateBox();}};};FLSEditorCore.CSelectionGroup.prototype=new FLSEditorCore.CObject;var FLSUtil={tmatrixMultiply:function(tmatr1,tmatr2,invmtr){var a=FLSUtil.tmatrix2matrix(tmatr1),b=FLSUtil.tmatrix2matrix(tmatr2),out=[1,0,0,0,1,0,0,0,1];var a00=a[0],a01=a[1],a02=a[2],a10=a[3],a11=a[4],a12=a[5],a20=a[6],a21=a[7],a22=a[8],b00=b[0],b01=b[1],b02=b[2],b10=b[3],b11=b[4],b12=b[5],b20=b[6],b21=b[7],b22=b[8];out[0]=b00*a00+b01*a10+b02*a20;out[1]=b00*a01+b01*a11+b02*a21;out[2]=b00*a02+b01*a12+b02*a22;out[3]=b10*a00+b11*a10+b12*a20;out[4]=b10*a01+b11*a11+b12*a21;out[5]=b10*a02+b11*a12+b12*a22;out[6]=b20*a00+b21*a10+b22*a20;out[7]=b20*a01+b21*a11+b22*a21;out[8]=b20*a02+b21*a12+b22*a22;if(typeof(invmtr)==='boolean'&&invmtr===true){return FLSUtil.inversMtrx(out);}
return FLSUtil.matrix2tmatrix(out);},tmatrixTranslate:function(tmtrx,dx,dy){tmtrx[4]+=tmtrx[0]*dx+tmtrx[2]*dy;tmtrx[5]+=tmtrx[1]*dx+tmtrx[3]*dy;},tmatrixRotate:function(tmtrx,rads){var c=Math.cos(rads);var s=Math.sin(rads);var m11=tmtrx[0]*c+tmtrx[1]*-s;var m12=tmtrx[0]*s+tmtrx[1]*c;var m21=tmtrx[2]*c+tmtrx[3]*-s;var m22=tmtrx[2]*s+tmtrx[3]*c;tmtrx[0]=m11;tmtrx[1]=m12;tmtrx[2]=m21;tmtrx[3]=m22;},tmatrixScale:function(tmtrx,sx,sy){tmtrx[0]*=sx;tmtrx[1]*=sx;tmtrx[2]*=sy;tmtrx[3]*=sy;},tmatrix2matrix:function(tmtrx){var mtrx=[1,0,0,0,1,0,0,0,1];mtrx[0]=tmtrx[0];mtrx[1]=tmtrx[2];mtrx[2]=tmtrx[4];mtrx[3]=tmtrx[1];mtrx[4]=tmtrx[3];mtrx[5]=tmtrx[5];return mtrx;},matrix2tmatrix:function(mtrx){var tmtrx=[1,0,0,1,0,0];tmtrx[0]=mtrx[0];tmtrx[2]=mtrx[1];tmtrx[4]=mtrx[2];tmtrx[1]=mtrx[3];tmtrx[3]=mtrx[4];tmtrx[5]=mtrx[5];return tmtrx;},inversMtrx:function(mtrx){var a00=mtrx[0],a01=mtrx[1],a02=mtrx[2],a10=mtrx[3],a11=mtrx[4],a12=mtrx[5],a20=mtrx[6],a21=mtrx[7],a22=mtrx[8],b01=a22*a11-a12*a21,b11=-a22*a10+a12*a20,b21=a21*a10-a11*a20,det=a00*b01+a01*b11+a02*b21;if(!det){return null;}
det=1.0/det;var invmtrx=[];invmtrx[0]=b01*det;invmtrx[1]=(-a22*a01+a02*a21)*det;invmtrx[2]=(a12*a01-a02*a11)*det;invmtrx[3]=b11*det;invmtrx[4]=(a22*a00-a02*a20)*det;invmtrx[5]=(-a12*a00+a02*a10)*det;invmtrx[6]=b21*det;invmtrx[7]=(-a21*a00+a01*a20)*det;invmtrx[8]=(a11*a00-a01*a10)*det;return invmtrx;},transformPoint:function(tmtrx,point,_ref){var px=0,py=0;px=tmtrx[0]*point.x+tmtrx[2]*point.y+tmtrx[4];py=tmtrx[1]*point.x+tmtrx[3]*point.y+tmtrx[5];if(typeof(_ref)=='boolean'&&_ref==true){point.x=px;point.y=py;}else{return{x:px,y:py};}},unTransformPoint:function(tmtrx,point,_ref){var invrs=FLSUtil.inversMtrx(FLSUtil.tmatrix2matrix(tmtrx));if(invrs){var newpoint={};newpoint.x=invrs[0]*point.x+invrs[1]*point.y+invrs[2];newpoint.y=invrs[3]*point.x+invrs[4]*point.y+invrs[5];if(typeof(_ref)=='boolean'&&_ref==true){point.x=newpoint.x;point.y=newpoint.y;}else{return newpoint;}}
return point;},isFontAvailable:function(fontname){var baseFonts=['monospace','sans-serif','serif'];var testString="mmmmmmmmmmlwwli";var testSize='72px';var tspan=document.createElement('span');var body=document.getElementsByTagName('body')[0];var detected=false;tspan.style.position='absolute';tspan.style.top='-100px';tspan.style.right='100px';tspan.style.fontSize=testSize;tspan.innerHTML=testString;for(var index in baseFonts){tspan.style.fontFamily=baseFonts[index];body.appendChild(tspan);var testWidth=tspan.offsetWidth;var testHeight=tspan.offsetHeight;tspan.style.fontFamily='"'+fontname+'",'+baseFonts[index];var matched=(tspan.offsetWidth!=testWidth||tspan.offsetHeight!=testHeight);body.removeChild(tspan);detected=detected||matched;}
tspan=null;return detected;},fontSize:function(text,tw,cfsize){var span=jQuery('<span style="position:absolute; right: 100%; display:inline; text-align:center; line-height: 37px;font-size: '+cfsize+'px; white-space: nowrap; font-family:arial,verdana,sans-serif;font-weight:bold;padding:0">'+text+'<\/span>');jQuery('body').append(span);var w=parseInt(span.width(),10);if(w>tw){cfsize=Math.floor((tw/w)*cfsize);}
span.remove();return cfsize;},measureText:function(text,font,size,bold,italic){var hasdescending=/[qgpyj]/g.test(text);var _text=document.createElement('span');_text.innerHTML='Hga';_text.style.fontFamily=font;_text.style.fontSize=size+'px';_text.style.fontWeight=bold?'bold':'normal';_text.style.fontStyle=italic?'italic':'normal';_text.style.padding='0px';_text.style.lineHeight='1em';_text.style.whiteSpace='nowrap';var block=document.createElement("div");block.style['display']='inline-block';block.style['width']='1px';block.style['height']='0px';var div=document.createElement('div');div.appendChild(_text);div.appendChild(block);var body=document.body;body.appendChild(div);var ascent=-1;var descent=-1;var height=-1;var tw=200;try{block.style.verticalAlign='baseline';ascent=block.offsetTop-_text.offsetTop;block.style.verticalAlign='bottom';height=block.offsetTop-_text.offsetTop;descent=height-ascent;if(!hasdescending){height-=descent;descent=0;}}finally{_text.innerHTML=text;tw=_text.offsetWidth;document.body.removeChild(div);}
var top_y=0;var bottom_y=0;if(size>0){var txtcnvs=document.createElement('canvas');txtcnvs.width=tw+1;txtcnvs.height=Math.ceil(size*2.2);var ctx=txtcnvs.getContext('2d');var fontstyle=[];if(bold){fontstyle.push('bold');};if(italic){fontstyle.push('italic');};fontstyle=fontstyle.join(' ');ctx.font=fontstyle+' '+size+'px '+font;var base=Math.floor(size+(size/2))
ctx.fillText(text,0,base);var idata=ctx.getImageData(0,0,txtcnvs.width,txtcnvs.height);var foundcolor=false;for(var y=0;y<idata.height;y++){foundcolor=false;for(var x=0;x<idata.width;x++){if(idata.data[((idata.width*y)+x)*4+3]){top_y=y;foundcolor=true;break;}}
if(foundcolor)break;}
for(var y=idata.height-1;y>0;y--){foundcolor=false;for(var x=0;x<idata.width;x++){if(idata.data[((idata.width*y)+x)*4+3]){bottom_y=y;foundcolor=true;break;}}
if(foundcolor)break;}}
bottom_y=bottom_y<base?base:bottom_y;var measurements={ascent:ascent,descent:descent,height:height,pixel_height:Math.ceil(bottom_y-top_y),pixel_ascent:Math.ceil(base-top_y),pixel_descent:Math.abs(Math.ceil(bottom_y-base))};return measurements;},parseUri:function(str){var o=FLSUtil.parseUriOptions,m=o.parser[o.strictMode?"strict":"loose"].exec(str),uri={},i=14;while(i--)uri[o.key[i]]=m[i]||"";uri[o.q.name]={};uri[o.key[12]].replace(o.q.parser,function($0,$1,$2){if($1)uri[o.q.name][$1]=$2;});return uri;},parseUriOptions:{strictMode:false,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},pointInCircle:function(center,radius,point){var dx=center.x-point.x;var dy=center.y-point.y;dx*=dx;dy*=dy;var distanceSquared=dx+dy;var radiusSquared=radius*radius;return distanceSquared<=radiusSquared;},pointOnLine:function(start,end,point){var dx=end.x-start.x;if(dx){var a=(end.y-start.y)/dx;var b=start.y-a*start.x;if(Math.abs(point.y-(a*point.x+b))<0.001)
{return true;}}else{return point.x==start.x;}
return false;},pointDistance:function(point1,point2){var dx=point2.x-point1.x;var dy=point2.y-point1.y;return Math.sqrt(dx*dx+dy*dy);},mirrorPoint:function(p1,p2){var dx=p2.x-p1.x;var dy=p2.y-p1.y;var mp={x:p1.x+(2*dx),y:p1.y+(2*dy)};return mp;},lineAngleRad:function(intersection,point1,point2){var dx1=point1.x-intersection.x;var dy1=point1.y-intersection.y;var dx2=point2.x-intersection.x;var dy2=point2.y-intersection.y;var rad1=Math.atan2(dy1,dx1);var rad2=Math.atan2(dy2,dx2);return rad2-rad1;},colorLuma:function(color){return(0.2126*color[0]+0.7152*color[1]+0.0722*color[2]);},hexdec2rgb:function(hexdec){var R=(hexdec&0xFF0000)>>16;var G=(hexdec&0x00FF00)>>8;var B=(hexdec&0x0000FF);return[R,G,B];},normalizeCssColor:function(csscolorstr){var colorint=0;if(!csscolorstr){return{css:"rgb(0,0,0)","uint":0};}
csscolorstr=csscolorstr.toString().replace(/\s/ig,'');var newcssclsstr='';if(/#/ig.test(csscolorstr)){csscolorstr=csscolorstr.replace('#','');if(csscolorstr.length==3){newcssclsstr+=csscolorstr[0]+csscolorstr[0];newcssclsstr+=(csscolorstr[1]+csscolorstr[1]);newcssclsstr+=(csscolorstr[2]+csscolorstr[2]);colorint=parseInt(newcssclsstr,16);}else{colorint=parseInt(csscolorstr,16);}
newcssclsstr='rgb('+FLSUtil.hexdec2rgb(colorint).join(',')+')';}else{var colors=csscolorstr.replace(/rgb(a?)\(/ig,'').replace(')','').split(',');for(var i=0;i<colors.length;i++){colors[i]=/%/i.test(colors[i])?Math.round(parseFloat(colors[i],10)*255/100):(i<3?parseInt(colors[i],10):parseFloat(colors[i],10));}
colorint=colors[0]<<16;colorint+=colors[1]<<8;colorint+=colors[2];newcssclsstr=colors.length==4?'rgba(':'rgb(';newcssclsstr+=FLSUtil.hexdec2rgb(colorint).join(',')+(colors.length==4?','+colors[3]:'')+')';}
var css_hex='#'+(0x1000000|colorint).toString(16).substring(1);return{css:newcssclsstr,uint:colorint,css_hex:css_hex};},Point:function(x,y){this.x=x||0;this.y=y||0;},MD5:function(string){function RotateLeft(lValue,iShiftBits){return(lValue<<iShiftBits)|(lValue>>>(32-iShiftBits));}
function AddUnsigned(lX,lY){var lX4,lY4,lX8,lY8,lResult;lX8=(lX&0x80000000);lY8=(lY&0x80000000);lX4=(lX&0x40000000);lY4=(lY&0x40000000);lResult=(lX&0x3FFFFFFF)+(lY&0x3FFFFFFF);if(lX4&lY4){return(lResult^0x80000000^lX8^lY8);}
if(lX4|lY4){if(lResult&0x40000000){return(lResult^0xC0000000^lX8^lY8);}else{return(lResult^0x40000000^lX8^lY8);}}else{return(lResult^lX8^lY8);}};function F(x,y,z){return(x&y)|((~x)&z);};function G(x,y,z){return(x&z)|(y&(~z));};function H(x,y,z){return(x^y^z);};function I(x,y,z){return(y^(x|(~z)));};function FF(a,b,c,d,x,s,ac){a=AddUnsigned(a,AddUnsigned(AddUnsigned(F(b,c,d),x),ac));return AddUnsigned(RotateLeft(a,s),b);};function GG(a,b,c,d,x,s,ac){a=AddUnsigned(a,AddUnsigned(AddUnsigned(G(b,c,d),x),ac));return AddUnsigned(RotateLeft(a,s),b);};function HH(a,b,c,d,x,s,ac){a=AddUnsigned(a,AddUnsigned(AddUnsigned(H(b,c,d),x),ac));return AddUnsigned(RotateLeft(a,s),b);};function II(a,b,c,d,x,s,ac){a=AddUnsigned(a,AddUnsigned(AddUnsigned(I(b,c,d),x),ac));return AddUnsigned(RotateLeft(a,s),b);};function ConvertToWordArray(string){var lWordCount;var lMessageLength=string.length;var lNumberOfWords_temp1=lMessageLength+8;var lNumberOfWords_temp2=(lNumberOfWords_temp1-(lNumberOfWords_temp1%64))/64;var lNumberOfWords=(lNumberOfWords_temp2+1)*16;var lWordArray=Array(lNumberOfWords-1);var lBytePosition=0;var lByteCount=0;while(lByteCount<lMessageLength){lWordCount=(lByteCount-(lByteCount%4))/4;lBytePosition=(lByteCount%4)*8;lWordArray[lWordCount]=(lWordArray[lWordCount]|(string.charCodeAt(lByteCount)<<lBytePosition));lByteCount++;}
lWordCount=(lByteCount-(lByteCount%4))/4;lBytePosition=(lByteCount%4)*8;lWordArray[lWordCount]=lWordArray[lWordCount]|(0x80<<lBytePosition);lWordArray[lNumberOfWords-2]=lMessageLength<<3;lWordArray[lNumberOfWords-1]=lMessageLength>>>29;return lWordArray;};function WordToHex(lValue){var WordToHexValue="",WordToHexValue_temp="",lByte,lCount;for(lCount=0;lCount<=3;lCount++){lByte=(lValue>>>(lCount*8))&255;WordToHexValue_temp="0"+lByte.toString(16);WordToHexValue=WordToHexValue+WordToHexValue_temp.substr(WordToHexValue_temp.length-2,2);}
return WordToHexValue;};function Utf8Encode(string){string=string.replace(/\r\n/g,"\n");var utftext="";for(var n=0;n<string.length;n++){var c=string.charCodeAt(n);if(c<128){utftext+=String.fromCharCode(c);}
else if((c>127)&&(c<2048)){utftext+=String.fromCharCode((c>>6)|192);utftext+=String.fromCharCode((c&63)|128);}
else{utftext+=String.fromCharCode((c>>12)|224);utftext+=String.fromCharCode(((c>>6)&63)|128);utftext+=String.fromCharCode((c&63)|128);}}
return utftext;};var x=Array();var k,AA,BB,CC,DD,a,b,c,d;var S11=7,S12=12,S13=17,S14=22;var S21=5,S22=9,S23=14,S24=20;var S31=4,S32=11,S33=16,S34=23;var S41=6,S42=10,S43=15,S44=21;string=Utf8Encode(string);x=ConvertToWordArray(string);a=0x67452301;b=0xEFCDAB89;c=0x98BADCFE;d=0x10325476;for(k=0;k<x.length;k+=16){AA=a;BB=b;CC=c;DD=d;a=FF(a,b,c,d,x[k+0],S11,0xD76AA478);d=FF(d,a,b,c,x[k+1],S12,0xE8C7B756);c=FF(c,d,a,b,x[k+2],S13,0x242070DB);b=FF(b,c,d,a,x[k+3],S14,0xC1BDCEEE);a=FF(a,b,c,d,x[k+4],S11,0xF57C0FAF);d=FF(d,a,b,c,x[k+5],S12,0x4787C62A);c=FF(c,d,a,b,x[k+6],S13,0xA8304613);b=FF(b,c,d,a,x[k+7],S14,0xFD469501);a=FF(a,b,c,d,x[k+8],S11,0x698098D8);d=FF(d,a,b,c,x[k+9],S12,0x8B44F7AF);c=FF(c,d,a,b,x[k+10],S13,0xFFFF5BB1);b=FF(b,c,d,a,x[k+11],S14,0x895CD7BE);a=FF(a,b,c,d,x[k+12],S11,0x6B901122);d=FF(d,a,b,c,x[k+13],S12,0xFD987193);c=FF(c,d,a,b,x[k+14],S13,0xA679438E);b=FF(b,c,d,a,x[k+15],S14,0x49B40821);a=GG(a,b,c,d,x[k+1],S21,0xF61E2562);d=GG(d,a,b,c,x[k+6],S22,0xC040B340);c=GG(c,d,a,b,x[k+11],S23,0x265E5A51);b=GG(b,c,d,a,x[k+0],S24,0xE9B6C7AA);a=GG(a,b,c,d,x[k+5],S21,0xD62F105D);d=GG(d,a,b,c,x[k+10],S22,0x2441453);c=GG(c,d,a,b,x[k+15],S23,0xD8A1E681);b=GG(b,c,d,a,x[k+4],S24,0xE7D3FBC8);a=GG(a,b,c,d,x[k+9],S21,0x21E1CDE6);d=GG(d,a,b,c,x[k+14],S22,0xC33707D6);c=GG(c,d,a,b,x[k+3],S23,0xF4D50D87);b=GG(b,c,d,a,x[k+8],S24,0x455A14ED);a=GG(a,b,c,d,x[k+13],S21,0xA9E3E905);d=GG(d,a,b,c,x[k+2],S22,0xFCEFA3F8);c=GG(c,d,a,b,x[k+7],S23,0x676F02D9);b=GG(b,c,d,a,x[k+12],S24,0x8D2A4C8A);a=HH(a,b,c,d,x[k+5],S31,0xFFFA3942);d=HH(d,a,b,c,x[k+8],S32,0x8771F681);c=HH(c,d,a,b,x[k+11],S33,0x6D9D6122);b=HH(b,c,d,a,x[k+14],S34,0xFDE5380C);a=HH(a,b,c,d,x[k+1],S31,0xA4BEEA44);d=HH(d,a,b,c,x[k+4],S32,0x4BDECFA9);c=HH(c,d,a,b,x[k+7],S33,0xF6BB4B60);b=HH(b,c,d,a,x[k+10],S34,0xBEBFBC70);a=HH(a,b,c,d,x[k+13],S31,0x289B7EC6);d=HH(d,a,b,c,x[k+0],S32,0xEAA127FA);c=HH(c,d,a,b,x[k+3],S33,0xD4EF3085);b=HH(b,c,d,a,x[k+6],S34,0x4881D05);a=HH(a,b,c,d,x[k+9],S31,0xD9D4D039);d=HH(d,a,b,c,x[k+12],S32,0xE6DB99E5);c=HH(c,d,a,b,x[k+15],S33,0x1FA27CF8);b=HH(b,c,d,a,x[k+2],S34,0xC4AC5665);a=II(a,b,c,d,x[k+0],S41,0xF4292244);d=II(d,a,b,c,x[k+7],S42,0x432AFF97);c=II(c,d,a,b,x[k+14],S43,0xAB9423A7);b=II(b,c,d,a,x[k+5],S44,0xFC93A039);a=II(a,b,c,d,x[k+12],S41,0x655B59C3);d=II(d,a,b,c,x[k+3],S42,0x8F0CCC92);c=II(c,d,a,b,x[k+10],S43,0xFFEFF47D);b=II(b,c,d,a,x[k+1],S44,0x85845DD1);a=II(a,b,c,d,x[k+8],S41,0x6FA87E4F);d=II(d,a,b,c,x[k+15],S42,0xFE2CE6E0);c=II(c,d,a,b,x[k+6],S43,0xA3014314);b=II(b,c,d,a,x[k+13],S44,0x4E0811A1);a=II(a,b,c,d,x[k+4],S41,0xF7537E82);d=II(d,a,b,c,x[k+11],S42,0xBD3AF235);c=II(c,d,a,b,x[k+2],S43,0x2AD7D2BB);b=II(b,c,d,a,x[k+9],S44,0xEB86D391);a=AddUnsigned(a,AA);b=AddUnsigned(b,BB);c=AddUnsigned(c,CC);d=AddUnsigned(d,DD);}
var temp=WordToHex(a)+WordToHex(b)+WordToHex(c)+WordToHex(d);return temp.toLowerCase();},mobile:function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|PlayBook|BB10|IEMobile|Windows Phone/i.test(navigator.userAgent);},wp_mobile:function(){return/IEMobile/i.test(navigator.userAgent);},invertImage:function(canvas){if(canvas){var context=canvas.getContext('2d');var imageData=context.getImageData(0,0,canvas.width,canvas.height);var data=imageData.data;for(var i=0;i<data.length;i+=4){data[i]=255-data[i];data[i+1]=255-data[i+1];data[i+2]=255-data[i+2];}
context.putImageData(imageData,0,0);}},grayscaleAlphaImage:function(editor_objects,svg_size,raster_size){var svg_aspect=svg_size.width/svg_size.height;var zoom;if(svg_aspect>=1){zoom=raster_size.width/svg_size.width;raster_size.height=Math.round(svg_size.height*zoom);}else{zoom=raster_size.height/svg_size.height;raster_size.width=Math.round(svg_size.width*zoom);}
var canvas=document.createElement('canvas');canvas.width=raster_size.width;canvas.height=raster_size.height;var ctx=canvas.getContext('2d');ctx.setTransform(zoom,0,0,zoom,0,0);for(var i=0;i<editor_objects.length;i++){if(editor_objects[i]instanceof FLSEditorCore.CLayoutZone)continue;if(editor_objects[i]instanceof FLSEditorCore.CObject){editor_objects[i].render(ctx);}}
var pixeldata=ctx.getImageData(0,0,canvas.width,canvas.height);for(var px_idx=0;px_idx<pixeldata.data.length;px_idx+=4){var r=pixeldata.data[px_idx];var g=pixeldata.data[px_idx+1];var b=pixeldata.data[px_idx+2];var a=pixeldata.data[px_idx+3];if(a>0){var luminosity=Math.round(FLSUtil.colorLuma([r,g,b]));pixeldata.data[px_idx]=pixeldata.data[px_idx+1]=pixeldata.data[px_idx+2]=luminosity;if(luminosity>0){pixeldata.data[px_idx]=pixeldata.data[px_idx+1]=pixeldata.data[px_idx+2]=0;pixeldata.data[px_idx+3]=255-luminosity;}}}
ctx.putImageData(pixeldata,0,0);},rgb2hsl:function(color){var R=color[0]/255;var G=color[1]/255;var B=color[2]/255;var Min=Math.min(R,G,B);var Max=Math.max(R,G,B);var del_Max=Max-Min;var H=0,S,L=(Max+Min)/2;if(del_Max==0){H=0;S=0;}else{if(L<0.5){S=del_Max/(Max+Min);}else{S=del_Max/(2-Max-Min);}
var del_R=(((Max-R)/6)+(del_Max/2))/del_Max;var del_G=(((Max-G)/6)+(del_Max/2))/del_Max;var del_B=(((Max-B)/6)+(del_Max/2))/del_Max;if(R==Max){H=del_B-del_G;}else if(G==Max){H=(1/3)+del_R-del_B;}else if(B==Max){H=(2/3)+del_G-del_R;}
if(H<0){H+=1;}
if(H>1){H-=1;}}
return{H:H,S:S,L:L};},hsl2rgb:function(h,s,l){var r,g,b;if(s==0){r=g=b=l;}else{var q=l<0.5?l*(1+s):l+s-l*s;var p=2*l-q;r=hue2rgb(p,q,h+1/3);g=hue2rgb(p,q,h);b=hue2rgb(p,q,h-1/3);}
return[Math.round(r*255),Math.round(g*255),Math.round(b*255)];},hue2rgb:function(p,q,t){if(t<0)t+=1;if(t>1)t-=1;if(t<1/6)return p+(q-p)*6*t;if(t<1/2)return q;if(t<2/3)return p+(q-p)*(2/3-t)*6;return p;},roundToNumber:function(num){var _num=parseFloat(num,10);if(!isNaN(_num)){return+(Math.round(_num+"e+5")+"e-5");}
return num;},pSize:function(data){var dlength=0;for(var key in data){if((data[key]instanceof Array)||(data[key]instanceof Object)){dlength+=FLSUtil.pSize(data[key]);}else if((data[key]!='undefined')&&(data[key]!=undefined)){if(data[key].length){dlength+=data[key].length;}else{dlength+=data[key].toString().length;}}}
return dlength;},fixLocalCommaFormattedNumbers:function(subject){var result_path=subject.match(/(d="M.*?[^"]")/g);if(result_path&&result_path[0]&&(/\d\,\d/g.test(result_path[0])===true)&&(/\d\.\d/g.test(result_path[0])===false)){for(var i in result_path){var tmp=result_path[i].replace(/(\d)[,](\d)/g,'$1.$2');subject=subject.replace(result_path[i],tmp);}
var result_matrix=subject.match(/(matrix[(].*[^)][)])/g);if(result_matrix&&result_matrix[0]&&(/\./g.test(result_matrix[0])===false)){for(var i in result_matrix){if(['matrix(1 0 0 1 0 0)','matrix(1,0,0,1,0,0)'].indexOf(result_matrix[i])==-1){var tmp=result_matrix[i].replace(/(\d)[,](\d)/g,'$1.$2');subject=subject.replace(result_matrix[i],tmp);}}}}
return subject;},getExtendedCharsFromString:function(str){return str.match(/[^\u0000-\u007F]/g)},setMulticfgText:function(multicfg,txt){if(multicfg.length>1){var words=txt.split(' ');var replacement_txt=[];if(multicfg.length<=words.length){var cfg_idx=0;do{if(cfg_idx<(multicfg.length-1)){replacement_txt.push(words.shift()+' ');}else{replacement_txt.push(words.join(' '));words.length=0;}
cfg_idx++;}while(words.length)}else{var substr_ln=Math.ceil(txt.length/multicfg.length);var used_ln=0;while(used_ln<txt.length){var substr=txt.substr(used_ln,substr_ln);replacement_txt.push(substr);used_ln+=substr.length;}}
for(var cfg_idx=0;cfg_idx<multicfg.length;cfg_idx++){multicfg[cfg_idx]['text']=replacement_txt[cfg_idx]||'';}}},setMultilineAttribs:function(to,tn){function getMultistyleCfg(){var tspans=tn.childNodes;var styl_cfg=[];for(var i=0;i<tspans.length;i++){var _cfg={text:tspans[i].textContent||tspans[i].innerText||''}
for(var j=0;j<tspans[i].attributes.length;j++){switch(tspans[i].attributes[j].name){case'font-family':_cfg['font_family']=tspans[i].attributes[j].value;break;}}
var clr=tspans[i].style.fill||'';if(clr.length){_cfg['color']=clr;}
styl_cfg.push(_cfg);}
to.multistyle_cfg(styl_cfg);}
var attrbs=tn.attributes;for(var attr in attrbs){var attr_val=attrbs[attr].value;switch(attrbs[attr].name){case'data-fill_zone_width':to.fill_zone_width(!!attr_val);break;case'data-multiline_on':to.multiline_on(!!attr_val);break;case'data-multistyle_on':to.multistyle_on(!!attr_val);getMultistyleCfg();break;case'data-max_lines':attr_val=parseInt(attr_val,10);if(!isNaN(attr_val)){to.max_lines(Math.abs(attr_val));}
break;case'data-align_point':if(['left','right','center'].indexOf(attr_val)>-1){to.align_point=attr_val;}
break;}}
to.updateMeasurements();}};var FLSPlugin=function(){var name='BasePlugin';var editor=false;this.init=function(_editor,_settings,_canvas){console.warn('Implement "init" method in your plugin: ',this.name());};this.eventCallback=function(evt,mouseCoords,edit_operation){console.warn('No event handling defined in your plugin. Implement "eventCallback" method in: ',this.name());};this.onBeforeRender=function(ctx){};this.onObjectAdded=function(_new_obj){};this.onViewframeChange=function(_settings){};this.onMisc=function(){};this.editor=function(_editor){if(_editor instanceof FLSEditorCore){editor=_editor;}
return editor;};this.name=function(_name){if(typeof(_name)!='undefined'){if(typeof(_name)=='string'&&name.length){name=_name;}else{console.warn('Invalid name specified');}}
return name;};};var FLSEditorGuideLines=function(){FLSPlugin.apply(this,arguments);var _this=this;var match_corners=true;var kb_evt_tmr=null;this.name('FLSEditorGuideLines');var guidecvs=null,glctx=null,view_topleft={x:0,y:0},settings={},guidePoints=[];function buildGuidePoints(skipobj){var framesize=settings.viewFrame;guidePoints.length=0;guidePoints.push({x:Math.floor(framesize.width/2),y:Math.floor(framesize.height/2)});var fls_objects=_this.editor().getObjects().slice(0).concat(_this.editor().getLayoutObjects());if(fls_objects.length){for(var i=0;i<fls_objects.length;i++){fls_objects[i].highlight(false);if(fls_objects[i]==skipobj||!fls_objects[i].selectable()||fls_objects[i].fixed()||fls_objects[i].in_selection)continue;var corners=[];var tmp=fls_objects[i].objCenter(match_corners?corners:null);tmp['obj']=fls_objects[i];guidePoints.push(tmp);for(var j=0;j<corners.length;j++){var ctmp={x:corners[j].x,y:corners[j].y,'obj':fls_objects[i]};guidePoints.push(ctmp);}}}}
function drawGuidelines(currentObj,edit_operation){glctx.clearRect(-view_topleft.x,-view_topleft.y,guidecvs.width+view_topleft.x,guidecvs.height+view_topleft.y);if(!glctx.setLineDash){glctx.setLineDash=function(){};}
if(currentObj instanceof FLSEditorCore.CObject&&edit_operation=="op:translate"){var alignpoints=[];var intersections=[];var matchX=false;var matchY=false;var intpoint={};alignpoints.unshift(currentObj.objCenter(match_corners?alignpoints:null));for(var i=0;i<guidePoints.length;i++){for(var j=0;j<alignpoints.length;j++){var obcntr=alignpoints[j];matchX=guidePoints[i].x==obcntr.x;matchY=guidePoints[i].y==obcntr.y;if(i>0){guidePoints[i]['obj'].highlight(false);}
if(matchX||matchY){intpoint={};if(matchX){intpoint.x=guidePoints[i].x;intpoint.y=-60;intersections.push([intpoint,{x:obcntr.x,y:obcntr.y+180},i]);}
intpoint={};if(matchY){intpoint.x=-60;intpoint.y=guidePoints[i].y;intersections.push([intpoint,{x:obcntr.x+180,y:obcntr.y},i]);}}}}
if(intersections.length){glctx.lineWidth=2.0;for(var i=0;i<intersections.length;i++){var jdx=intersections[i][2];glctx.strokeStyle=(jdx==0)?'rgb(237, 32, 36)':'#006699';glctx.beginPath();glctx.setLineDash([8,6]);glctx.mozDash=[8,6];glctx.webkitLineDash=[8,6];if(jdx>0){guidePoints[jdx]['obj'].highlight(true);}
glctx.lineCap='round';glctx.moveTo(intersections[i][0].x,intersections[i][0].y);glctx.lineTo(intersections[i][1].x,intersections[i][1].y);glctx.stroke();}}}}
this.init=function(_editor,_settings,_canvas){if(this.editor(_editor)){settings=_settings;var framesize=_settings.viewFrame;if(!guidecvs){guidecvs=document.createElement('canvas');_canvas.parentNode.insertBefore(guidecvs,_canvas);}
guidecvs.width=_settings['width'];guidecvs.height=_settings['height'];guidecvs.style.position='absolute';guidecvs.style.display='block';guidecvs.style.zIndex='2';var frametopX=(guidecvs.width-framesize.width)/2;var frametopY=(guidecvs.height-framesize.height)/2;frametopX+=framesize.offcenter;glctx=guidecvs.getContext('2d');if(!glctx.setLineDash){glctx.setLineDash=function(){};glctx.setLineDash([11.1,8]);glctx.mozDash=[11.1,8];glctx.webkitLineDash=[11.1,8];}
glctx.setTransform(1,0,0,1,0,0);glctx.translate(frametopX,frametopY);buildGuidePoints();view_topleft.x=frametopX;view_topleft.y=frametopY;}};this.onViewframeChange=function(_settings){if(this.editor()){settings=_settings;var framesize=_settings.viewFrame;guidecvs.width=_settings['width'];guidecvs.height=_settings['height'];var frametopX=(guidecvs.width-framesize.width)/2;var frametopY=(guidecvs.height-framesize.height)/2;frametopX+=framesize.offcenter;glctx.setTransform(1,0,0,1,0,0);glctx.translate(frametopX,frametopY);buildGuidePoints();view_topleft.x=frametopX;view_topleft.y=frametopY;}};this.eventCallback=function(evt,mouseCoords,edit_operation){var currentObj=this.editor().getCurrentObject();switch(evt.type){case'mousedown':case'touchstart':buildGuidePoints(currentObj);drawGuidelines(currentObj,edit_operation);break;case'mousemove':case'touchmove':case'keydown':if(currentObj&&edit_operation!='op:none'){switch(edit_operation){case'op:translate':drawGuidelines(currentObj,edit_operation);break;}}
break;case'mouseup':case'touchend':case'touchcancel':case'mouseout':buildGuidePoints(currentObj);drawGuidelines(currentObj,edit_operation);break;case'keyup':clearTimeout(kb_evt_tmr);kb_evt_tmr=setTimeout(function(){buildGuidePoints(currentObj);drawGuidelines(currentObj,edit_operation);},1000);break;}};this.onObjectAdded=function(fls_obj){buildGuidePoints(fls_obj);};};FLSEditorGuideLines.prototype=new FLSPlugin;var FLSSwitchSideControl=function(){FLSPlugin.apply(this,arguments);this.name('FLSSwitchSideControl');var _this=this;var side='front';var ghostcvs=null;var view_topleft={x:0,y:0},settings={},psettings={'front':'Front','back':'Back'};var cimg=new Image();cimg.src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAABXCAYAAABGBhZYAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAeuSURBVHic1Zx/bBtnGcc/j3+1JSttpG5SLJgooA2mqjQ5ByhFpayjA7Zp6kaBqgxFVewLCp0o0qhgtFto+dlBNg2S+Jy1EVRjJawFhDbouqljgqia46Q0Fdpox2CILoy1KVVTJ07u4Y86lRec2Hc+O85HipR73/d5/Hzz3N1797yvI6qKE1Kp1BdUdSdwCjglIkO2bZ8SkZcMw8g4cuYhAZc2N2R/NqoqIgKQ6e/v/yswBLwoIr9qaGg47V2osyMuMtKkqvuLHD4EHPL5fIfq6+tPOI7OAeUWksvfgEOqejgSifQBtgsfM1JJIbmcBR5Jp9Mda9asuViiLwB8XjhxQR3wvYULF/49lUo9cPLkydpSHc6VkClqVfXB8fHxV/r7+1sAcetoroVMsRToTCaTf0wmkyvcOKgWIQCIyGoRSSWTyfud2laVkCxBEdmTTCaf6OvrW1SsUTUKAUBEPhcMBv8wMDAQLmZ81QoBEJGIbdt9x48ff0ehsVUtJMv1gUDg6cHBwaWzDZoPQgBWTExM/Pr06dMLZhowX4QgImsvXLjw2Ez980ZIli3JZPJT+TrmmxBE5NFjx44tnN4+74QA71m8ePHXpzc6FmLbtt+beEpiRyqVem9ug5uMvN2jYEphgaq25za4EfIUMOZNPCVxW+5E6VhIJBJ5SVU/oKp7VfUQkMLjt70ikWAwuPnqgdM3xHwMDg4unZycXCci61V1PfD+kp0WxwnDMFaBR0KmMzAwEFbVm7OibgEKPiu5xbbtFY2NjafKImQ6qVTqZtu2W0XkTsDru953DcP4RkXmkYaGhucikcjdtm0vV9XvAG945du27Y9AhSfExsbG1yKRyP1Llix5p4jcAxwv1WcmkxmDMl0jThgYGIjYtv1tYIMb+5GRkSNnzpy5fc4fUerr65OGYdwqIncBrzq1Hx0dDQLL5lzIFA0NDYfHx8dvAnYDk8XapdPpa3w+37VVIwRg9erVlw3D2GXb9nquVCMLkk6nl1FNGcmlsbHx+WAwuEpVny0wVNPpdFhVq1MIwMqVK/8diUQ2AB0zjVHV11R1gapW16mVB9swjFbgkXydY2Nj/8z+Wr0ZycUwjK8AD01vHxkZmbopzA8hAIZh3AckctvOnTs39QxX9afWW7h48eK9wJ8BJiYmhi5fvrw82zV/MgKwbt26tKp+Frg0PDx8IadrfmUErrzYjY2NtQ4PDxs5zcvcrOrOOUNDQ3cAuSWhpRXNSHd3t1F41OxYltUM3D29vWIZsSzr+6q6AOh366Ozs/NGv9+fb06xK5IRy7J2Al8rxUdvb2/I7/f/HHhbnu7yC7EsazvwrVL9nD9/fi9QP0P3ZFmFWJYVA35Uqp94PL4XuHeWIXbZrpFEIrEF6CzFR1tbm6+urq5TRGIFhpZHSCKR2KiqPZRQE2hrawuEw+GfqurmwqPJeC4kkUjcqqpPUMIdsb29fVFdXd1BVb2jSJM3PL1G4vH4WlU9DITc+rAsq6GmpqYfKFYEqvq6Zxnp6ur6oM/n+y1Q9Np4Lm1tbb5wOLwDaAOCTmxFxBsh3d3dK30+3++AxS7tl4fD4Z+p6ho39p4Iyc62zwCOd/i0t7cvqqmp+TKwE5d/BPDg1Orq6nqX3+8/ClznxM6yrCDQXFNT802gqJ0NsyEir7uuNO7bty88MTHxAvBuBx/4KPCiqj7oxK4Qtm1/1JWQ/fv3X5vJZJ7H+TrIJN5X4y+PjY3VOr799vT0LM1kMkdwt5hTjoXUF7Zt2zbm6Brp6Oi4xu/3Py0iq8oQkFuOgoPZt6enZ2EgEPgN8OGyheQCEXkGihRiWVZQRJ4EPl7WqJzzbDQaHYQiHup6e3v9IvK4qn66/HE5YhLYPnVQKCMyMjKyT1U/U96YnCMiiWg0enLqeFYhlmX9BPhi2aNyzvnsFw2uMqMQy7J+AHyp7CE5Z1JENkej0f/kNua9RhKJxC7gvoqE5Zwd0Wj099Mb/29mj8fjXxWRH1YsLGcciMVi9+TreEtGLMuKVasIVX0uFApFZ+q/KsSLYkEZOTo6Onp7U1NTeqYBoqpTxYJfUMHKowOOhEKhO2cTAeCvq6v7JPAkDl8vK8TjoVBocyERAAERuYXqy8R/VbXVNM0DxRqIqhKPxyMi0glEyhhcsfzJtu0tLS0trzox8gGYppk8e/bsh0SkFRgpR3RFMCEiD9TW1q51KgLyzCNdXV3X+Xy+h4C89+syYKvqL1V1d0tLy5BbJzO+6iYSiY+pagdwk1vnBZgEDvp8vj3Nzc1/KdXZrO/s2WrHdmAXUFPqh+VwQER2R6PRl71yWFTxwbKs61X1YRHZ6MWHhkKh2qamJk+vxaKKD7FY7B+mad6lqrcBr3gZgFc4qqKYpvnUpUuXVojIHqpjE/NVXBfoEonEDcCPVfUTTm3n7NTKRzQafTkajW5Q1c8D//IwJleUvD5imubBQCDwPuBhHGzh8xpPFnq2bt16MRaLbVdVA+jzwqdTPF2xMk3zRCwWW6OqzcCbXvouRDmWp9U0zccymcyNQDdQkY3FZVtnb21tfTMWi0Wzq1Bl/e8CUIEt5aZp9tXW1hpcedTx5Ev4+ajIXpRNmzZNxmKxh7N3t4Pj4+Oen27/A+/P5f/ZIS8iAAAAAElFTkSuQmCC';function c_side(){return side;};function detectControl(mouseCoords){var gctx=ghostcvs.getContext('2d');var zoom=_this.editor().zoom();var vpoint=_this.editor().viewtopleft();gctx.save();gctx.setTransform(1,0,0,1,0,0);gctx.clearRect(0,0,ghostcvs.width,ghostcvs.height);gctx.setTransform(zoom,0,0,zoom,vpoint.x,vpoint.y);_this.onBeforeRender(gctx);var clr=gctx.getImageData(mouseCoords.x,mouseCoords.y,1,1).data;gctx.restore();return clr[3]>0;}
this.init=function(_editor,_settings,_canvas){if(this.editor(_editor)){this.onViewframeChange(_settings);}};this.onViewframeChange=function(_settings){if(this.editor()){settings=_settings;var framesize=_settings.viewFrame;var frametopX=(settings.width-framesize.width)/2;var frametopY=(settings.height-framesize.height)/2;view_topleft.x=frametopX;view_topleft.y=frametopY;if(settings.pluginparams[this.name()]){if(settings.pluginparams[this.name()]['front']){psettings.front=settings.pluginparams[this.name()]['front'];}
if(settings.pluginparams[this.name()]['back']){psettings.back=settings.pluginparams[this.name()]['back'];}
if(typeof(settings.pluginparams[this.name()]['ui_cb'])=='function'){c_side=settings.pluginparams[this.name()]['ui_cb'];}}
ghostcvs=this.editor().ghostcanvas();}};this.eventCallback=function(evt,mouseCoords,edit_operation){switch(evt.type){case'mousedown':case'touchstart':if(detectControl(mouseCoords)){side=c_side();}
break;case'mousemove':case'touchmove':if(detectControl(mouseCoords)){document.body.style.cursor='pointer';}else{document.body.style.cursor='default';}
break;case'mouseup':case'touchend':case'touchcancel':case'mouseout':break;}};this.onBeforeRender=function(ctx){var zoom=this.editor().zoom();var framesize=settings.viewFrame;ctx.save();var dx=framesize.width/zoom;var dy=framesize.height/zoom;var cw=cimg.width/zoom;var ch=cimg.height/zoom;dx=dx-cw/3;dy=dy-ch/2.1;ctx.translate(dx,dy);ctx.drawImage(cimg,0,0,cimg.width,cimg.height,0,0,cw,ch);ctx.restore();ctx.save();dy=framesize.height/zoom;dy+=((cimg.height/2)/zoom)-5;var fs=15/zoom;ctx.font='bold '+fs+'px '+framesize.message_font;ctx.fillStyle='rgb(130,130,131)';ctx.textAlign='end';ctx.translate(dx-5,dy);ctx.fillText(psettings[side],0,0);ctx.restore();};this.onMisc=function(nside){if(psettings[nside]){side=nside;}};};FLSSwitchSideControl.prototype=new FLSPlugin;FLSUtil.DisplacementMapFilter=function(mapBitmap,componentX,componentY,mapPoint,scaleX,scaleY,mode,color,alpha){if(!(this instanceof FLSUtil.DisplacementMapFilter)){throw"FLSUtil.DisplacementMapFilter is a constructor. use it with the new keyword";}
if(!(mapBitmap instanceof HTMLCanvasElement)){throw"First argument needs to be a canvas element";}
var ColorChannel={RED:0,GREEN:1,BLUE:2,ALPHA:3};mapPoint=mapPoint||{x:0,y:0};scaleX=scaleX||0;scaleY=scaleY||0;if(componentX!=0&&componentX!=1&&componentX!=2&&componentX!=3)componentX=ColorChannel.RED;if(componentY!=0&&componentY!=1&&componentY!=2&&componentY!=3)componentY=ColorChannel.RED;var mapCtx=mapBitmap.getContext('2d');function setPixels(target,pos,source,i){target.data[i*4]=source.data[pos*4];target.data[i*4+1]=source.data[pos*4+1];target.data[i*4+2]=source.data[pos*4+2];target.data[i*4+3]=source.data[pos*4+3];}
this.applyFilter=function(sourceCanvas,destinationCanvas){if(typeof destinationCanvas=='undefined'){destinationCanvas=sourceCanvas;}
if(!(sourceCanvas instanceof HTMLCanvasElement)||!(destinationCanvas instanceof HTMLCanvasElement)){throw"Source and destination needs to be a canvas element";}
var sourceCtx=sourceCanvas.getContext('2d');var targetCtx=destinationCanvas.getContext('2d');var sourceData=sourceCtx.getImageData(0,0,sourceCanvas.width,sourceCanvas.height);var targetDataX=targetCtx.getImageData(0,0,destinationCanvas.width,destinationCanvas.height);var targetDataY=targetCtx.getImageData(0,0,destinationCanvas.width,destinationCanvas.height);var mapData=mapCtx.getImageData(0,0,mapBitmap.width,mapBitmap.height);var pixelsLength=mapData.data.length/4;var colorValue,alphaValue,ratio,ratioWithAlpha,pixelShift,sourcePosition,targetPosition,x,y;var i=0;while(i<pixelsLength){x=((i%mapBitmap.width)+mapPoint.x)|0;y=(((i/mapBitmap.width)|0)+mapPoint.y)|0;colorValue=mapData.data[i*4+componentX];alphaValue=mapData.data[i*4+ColorChannel.ALPHA];ratio=(colorValue/0xFF*2)-1;ratioWithAlpha=ratio*(alphaValue/0xFF);pixelShift=(ratioWithAlpha*scaleX|0);sourcePosition=(sourceCanvas.width*y)+x;targetPosition=(destinationCanvas.width*y)+x+pixelShift;setPixels(targetDataX,targetPosition,sourceData,sourcePosition);i++;}
i=0;while(i<pixelsLength){x=((i%mapBitmap.width)+mapPoint.x)|0;y=(((i/mapBitmap.width)|0)+mapPoint.y)|0;colorValue=mapData.data[i*4+componentY];alphaValue=mapData.data[i*4+ColorChannel.ALPHA];ratio=(colorValue/0xFF*2)-1;ratioWithAlpha=ratio*(alphaValue/0xFF);pixelShift=(ratioWithAlpha*scaleY|0);sourcePosition=(sourceCanvas.width*y)+x;targetPosition=(destinationCanvas.width*(y+pixelShift))+x;setPixels(targetDataY,targetPosition,targetDataX,sourcePosition);i++;}
targetCtx.putImageData(targetDataY,0,0);};};var FLSTracker=function(GoogleTrackingID,_editor){if(typeof(GoogleTrackingID)=='undefined'){GoogleTrackingID='UA-10220601-4';}
if(typeof(_editor)=='undefined'){_editor='Logo';}
var GaTracker=false;if(typeof(ga)=='function'){try{ga('create',GoogleTrackingID,'auto',{'name':'FlsHTML5Tracker'});GaTracker=true;}catch(e){GaTracker=false;console.log(e);}}
this.track=!GaTracker?function(){console.log('tracker not found');}:function(_action,_label,_category,_value){if(typeof(_category)!='string'){_category='Custom';}
_value=typeof(_value)=='number'?parseInt(_value,10):1;var action=_action;if(_action instanceof FLSEditorCore.CObject){action='path';if((_action instanceof FLSEditorCore.CPathGroup)&&_action.unlocked()&&(typeof(_action.getCurrentPath().stringdata!='undefined'))){action='text';}
if(_action instanceof FLSEditorCore.CText){action=((_action instanceof FLSEditorCore.CPathText)&&_action.has_path())?'arc_text':'text';}
if(_action instanceof FLSEditorCore.CImage){action='image';}
if(_action instanceof FLSEditorCore.CRect){action='background';}
if(_action instanceof FLSEditorCore.CLogoObjectGroup){action='logo';}}else if(!action||(action==null)){return false;}
try{ga('FlsHTML5Tracker.send','event','HTML5'+_editor+_category,action,_label);if(typeof(this.ga_callback)=='function'){this.ga_callback({editor:_editor,category:_category,action:action,label:_label,});}}catch(e){console.log(e);}};};var SVGPath2Cnvs={parse:function(pathstr,_commands){var commands=(_commands instanceof Array)?_commands:[];var pathfuncs={'M':['moveTo',2],'m':['moveTo',2],'L':['lineTo',2],'l':['lineTo',2],'A':['ellipse',7],'a':['ellipse',7],'Q':['quadraticCurveTo',4],'q':['quadraticCurveTo',4],'C':['bezierCurveTo',6],'c':['bezierCurveTo',6],'Z':['closePath',0],'z':['closePath',0]};var specialpathfuncs=['S','s','T','t','H','h','V','v'];var relativepathfuncs=['m','l','a','q','c','h','v','s','t'];while(commands.length){commands.pop();}
var tmp=pathstr.replace(/[\,]/g,' ').replace(/([A-Za-z])/g,' $1 ').replace(/-/g,' -').replace(/\s{2,}/g,' ').trim().split(' ');if(!tmp.length||!pathstr.trim().length){return commands;}
var current_command=tmp[0];var last_svg_command=current_command;var pen=[parseFloat(tmp[1]),parseFloat(tmp[2])];var first=[pen[0],pen[1]];var cur_cmd_type=relativepathfuncs.indexOf(current_command)>-1?'relative':'absolute';if(['M','m'].indexOf(current_command)==-1||isNaN(pen[0])||isNaN(pen[1])){throw'Soemthing is wrong with the given path. ('+pathstr+')';}
var specialCommand=function(_drawcmd,i){var pcmd=commands[commands.length-1];var argcount=0;var tmp_command='';var pstart=tmp[i]==current_command?1:0;switch(current_command){case'S':case's':tmp_command='C';argcount=pathfuncs[tmp_command][1]-2;if(pcmd.func!='bezierCurveTo'){_drawcmd.args.push(pen[0]);_drawcmd.args.push(pen[1]);}else{var pargs=pcmd.args;var endp={x:pen[0],y:pen[1]};var lcp={x:pargs[pargs.length-4],y:pargs[pargs.length-3]};var cp_mr=FLSUtil.mirrorPoint(lcp,endp);_drawcmd.args.push(cp_mr.x);_drawcmd.args.push(cp_mr.y);}
for(var x=0;x<argcount;x++){var coord=parseFloat(tmp[i+pstart]);var pen_i=x%2;coord+=((cur_cmd_type=='relative')&&i2)?pen[pen_i]:0;drawcmd.args.push(coord);i++;}
pen[0]=drawcmd.args[argcount-2];pen[1]=drawcmd.args[argcount-1];break;case'T':case't':tmp_command='Q';argcount=pathfuncs[tmp_command][1]-2;if(pcmd.func!='quadraticCurveTo'){_drawcmd.args.push(pen[0]);_drawcmd.args.push(pen[1]);}else{var pargs=pcmd.args;var endp={x:pen[0],y:pen[1]};var lcp={x:pargs[pargs.length-4],y:pargs[pargs.length-3]};var cp_mr=FLSUtil.mirrorPoint(lcp,endp);_drawcmd.args.push(cp_mr.x);_drawcmd.args.push(cp_mr.y);}
for(var x=0;x<argcount;x++){var coord=parseFloat(tmp[i+pstart]);var pen_i=x%2;coord+=((cur_cmd_type=='relative')&&i2)?pen[pen_i]:0;drawcmd.args.push(coord);i++;}
pen[0]=drawcmd.args[argcount-2];pen[1]=drawcmd.args[argcount-1];break;case'V':case'v':tmp_command='L';argcount=pathfuncs['L'][1]-1;var coord=parseFloat(tmp[i+pstart]);coord+=cur_cmd_type=='relative'?pen[1]:0;_drawcmd.args.push(pen[0]);_drawcmd.args.push(coord);pen[1]=coord;break;case'H':case'h':tmp_command='L';argcount=pathfuncs['L'][1]-1;var coord=parseFloat(tmp[i+pstart]);coord+=cur_cmd_type=='relative'?pen[0]:0;_drawcmd.args.push(coord);_drawcmd.args.push(pen[1]);pen[0]=coord;break;}
_drawcmd.func=pathfuncs[tmp_command][0];return argcount;};for(var i=0;i<tmp.length;i++){var i2=i;var drawcmd={'func':'','args':[]};if(i>0){if(!isFinite(tmp[i])){if((typeof(pathfuncs[tmp[i]])!='undefined')||(specialpathfuncs.indexOf(tmp[i])>-1)){current_command=tmp[i];}else{throw"unknown path command encountered.";}
cur_cmd_type=relativepathfuncs.indexOf(current_command)>-1?'relative':'absolute';}else{}}
if(typeof(pathfuncs[tmp[i]])!='undefined'){drawcmd.func=pathfuncs[tmp[i]][0];var argcount=pathfuncs[tmp[i]][1];last_svg_command=tmp[i];if(argcount){for(var x=0;x<argcount;x++){var coord=parseFloat(tmp[i+1]);var pen_i=x%2;coord+=((cur_cmd_type=='relative')&&i2)?pen[pen_i]:0;drawcmd.args.push(coord);i++;}
pen[0]=drawcmd.args[argcount-2];pen[1]=drawcmd.args[argcount-1];}}else if(specialpathfuncs.indexOf(tmp[i])>-1){i+=specialCommand(drawcmd,i);last_svg_command=current_command;}else{var special=false;switch(last_svg_command){case'M':last_svg_command='L';break;case'm':last_svg_command='l';break;default:special=specialpathfuncs.indexOf(last_svg_command)>-1;}
if(!special){drawcmd.func=pathfuncs[last_svg_command][0];var argcount=pathfuncs[last_svg_command][1];if(argcount){for(var x=0;x<argcount;x++){var coord=parseFloat(tmp[i+x]);var pen_i=x%2;coord+=cur_cmd_type=='relative'?pen[pen_i]:0;drawcmd.args.push(coord);}
pen[0]=drawcmd.args[argcount-2];pen[1]=drawcmd.args[argcount-1];i+=argcount-1;}}else{i+=(specialCommand(drawcmd,i)-1);}}
if(drawcmd.func!='ellipse'){if(drawcmd.func=='closePath'){pen[0]=first[0];pen[1]=first[1];}else if(drawcmd.func=='moveTo'){first[0]=pen[0];first[1]=pen[1];}
commands.push(drawcmd);}else{console.log('svg elliptic arc command fond which is not really supported in this format in the canvas');}}
return commands;},normalize:function(pathstr){try{var commands=SVGPath2Cnvs.parse(pathstr);var ccmd2svgc={'moveTo':'M','lineTo':'L','ellipse':'A','quadraticCurveTo':'Q','bezierCurveTo':'C','closePath':'Z'};var d=[];while(commands.length){var tmp=commands.shift();d.push(ccmd2svgc[tmp.func]);for(var i=0;i<tmp.args.length;i++){tmp.args[i]=parseFloat(tmp.args[i].toFixed(6));}
d=d.concat(tmp.args);}
return d.join(' ');}catch(e){console.log(e);}},commandsDataStr:function(_commands){if(_commands instanceof Array){try{var commands=_commands.slice(0);var ccmd2svgc={'moveTo':'M','lineTo':'L','ellipse':'A','quadraticCurveTo':'Q','bezierCurveTo':'C','closePath':'Z'};var d=[];while(commands.length){var tmp=commands.shift();d.push(ccmd2svgc[tmp.func]);for(var i=0;i<tmp.args.length;i++){tmp.args[i]=parseFloat(tmp.args[i].toFixed(6));}
d=d.concat(tmp.args);}
return d.join(' ');}catch(e){console.log(e);}}
return'';},cbezier:function(strt,cntrl1,cntrl2,end,t){return(strt*Math.pow(1-t,3))+(3*cntrl1*t*Math.pow(1-t,2))+(3*cntrl2*(1-t)*Math.pow(t,2))+(Math.pow(t,3)*end);},qbezier:function(strt,cntrl,end,t){return(strt*Math.pow(1-t,2))+(2*cntrl*(1-t)*t)+(end*Math.pow(t,2));},nbezier:function(coords,t){if(coords instanceof Array){t=(t&&t>=0&&t<=1)?t:0;var order=coords.length-1;var res=0;var coefs=[1];for(var ni=0;ni<order;ni++){coefs.push(coefs[ni]*(order-ni)/(ni+1));}
for(var i=0;i<coords.length;i++){res+=(coefs[i]*coords[i]*Math.pow(1-t,order-i)*Math.pow(t,i));}
return res;}
return null;},bbox:function(pathinfo,tmatrix){if(!(tmatrix instanceof Array)||(tmatrix.length!=6)){tmatrix=[1,0,0,1,0,0];}
var tmtrx=tmatrix.slice(0);for(var tmi=0;tmi<6;tmi++){tmtrx[tmi]=parseFloat(tmtrx[tmi]);}
var qbezier=function(strt,cntrl,end,t){return(strt*Math.pow(1-t,2))+(2*cntrl*(1-t)*t)+(end*Math.pow(t,2));};var cbezier=function(strt,cntrl1,cntrl2,end,t){return(strt*Math.pow(1-t,3))+(3*cntrl1*t*Math.pow(1-t,2))+(3*cntrl2*(1-t)*Math.pow(t,2))+(Math.pow(t,3)*end);};try{var has_transform=(tmtrx[0]!=1)||(tmtrx[1]!=0)||(tmtrx[2]!=0)||(tmtrx[3]!=1)||(tmtrx[4]!=0)||(tmtrx[5]!=0);var segments=(pathinfo instanceof Array)?[].concat(pathinfo):SVGPath2Cnvs.parse(pathinfo);if(!segments.length){var ptmp={x:0,y:0};if(has_transform){ptmp=FLSUtil.transformPoint(tmtrx,{x:0,y:0});}
return{x0:ptmp.x,y0:ptmp.y,x1:ptmp.x,y1:ptmp.y};}
var tmp=segments.shift();var args=tmp.args.slice(0);var pen=[args[0],args[1]];if(has_transform){var ptmp=FLSUtil.transformPoint(tmtrx,{x:pen[0],y:pen[1]});pen[0]=ptmp.x;pen[1]=ptmp.y;}
var first=[pen[0],pen[1]];var bb={x0:pen[0],y0:pen[1],x1:pen[0],y1:pen[1]};while(segments.length){tmp=segments.shift();args=tmp.args.slice(0);if(has_transform){for(var argi=0;argi<args.length;argi+=2){var ptmp=FLSUtil.transformPoint(tmtrx,{x:args[argi],y:args[argi+1]});args[argi]=ptmp.x;args[argi+1]=ptmp.y;}}
if(tmp.func=='moveTo'){pen[0]=first[0]=args[0];pen[1]=first[1]=args[1];continue;}
if(tmp.func=='closePath'){args=[first[0],first[1]];}
var pcount=(args.length/2)+1;switch(pcount){case 2:bb.x0=Math.min(pen[0],args[0],bb.x0);bb.x1=Math.max(pen[0],args[0],bb.x1);bb.y0=Math.min(pen[1],args[1],bb.y0);bb.y1=Math.max(pen[1],args[1],bb.y1);break;case 3:var cx=args[0];var cy=args[1];var ex=args[2];var ey=args[3];if(!FLSUtil.pointOnLine({x:pen[0],y:pen[1]},{x:ex,y:ey},{x:cx,y:cy})){var tx_numerator=(pen[0]-cx);var tx_denominator=(pen[0]-(2*cx)+ex);var ty_numerator=(pen[1]-cy);var ty_denominator=(pen[1]-(2*cy)+ey);var x1,y1;if((tx_denominator!=0)&&(ty_denominator!=0)){var tx=tx_numerator==0?0:tx_numerator/tx_denominator;var ty=ty_numerator==0?0:ty_numerator/ty_denominator;tx=tx<0?0:(tx>1?1:tx);ty=ty<0?0:(ty>1?1:ty);x1=qbezier(pen[0],cx,ex,tx);y1=qbezier(pen[1],cy,ey,ty);}else{x1=cx;y1=cy;}
bb.x0=Math.min(pen[0],ex,x1,bb.x0);bb.y0=Math.min(pen[1],ey,y1,bb.y0);bb.x1=Math.max(pen[0],ex,x1,bb.x1);bb.y1=Math.max(pen[1],ey,y1,bb.y1);}else{bb.x0=Math.min(pen[0],ex,bb.x0);bb.x1=Math.max(pen[0],ex,bb.x1);bb.y0=Math.min(pen[1],ey,bb.y0);bb.y1=Math.max(pen[1],ey,bb.y1);}
break;case 4:var a=pen[0],b=pen[1],c=args[0],d=args[1],e=args[2],f=args[3],g=args[4],h=args[5];if(a>=bb.x0&&b>=bb.y0&&a<=bb.x1&&b<=bb.y1&&c>=bb.x0&&d>=bb.y0&&c<=bb.x1&&d<=bb.y1&&e>=bb.x0&&f>=bb.y0&&e<=bb.x1&&f<=bb.y1&&g>=bb.x0&&h>=bb.y0&&g<=bb.x1&&h<=bb.y1){break;}
var ux=a+(3*c)-(3*e)+g;var vx=-(2*a)-(4*c)+(2*e);var wx=(a+c);var uy=b+(3*d)-(3*f)+h;var vy=-(2*b)-(4*d)+(2*f);var wy=(b+d);var deltax=Math.sqrt((vx*vx)-(4*ux*wx));var deltay=Math.sqrt((vy*vy)-(4*uy*wy));var t1x=(-vx+deltax)/(2*ux);var t2x=(-vx-deltax)/(2*ux);var t1y=(-vy+deltay)/(2*uy);var t2y=(-vy-deltay)/(2*uy);var xs=[];var ys=[];for(var i=0.1;i<0.9;i+=0.1){xs.push(cbezier(pen[0],args[0],args[2],args[4],i));ys.push(cbezier(pen[1],args[1],args[3],args[5],i));}
if(t1x>0&&t1x<1){xs.push(cbezier(pen[0],args[0],args[2],args[4],t1x));}
if(t2x>0&&t2x<1){xs.push(cbezier(pen[0],args[0],args[2],args[4],t2x));}
if(t1y>0&&t1y<1){ys.push(cbezier(pen[1],args[1],args[3],args[5],t1y));}
if(t2y>0&&t2y<1){ys.push(cbezier(pen[1],args[1],args[3],args[5],t2y));}
bb.x0=Math.min.apply(null,xs.concat([pen[0],args[4],bb.x0]));bb.x1=Math.max.apply(null,xs.concat([pen[0],args[4],bb.x1]));bb.y0=Math.min.apply(null,ys.concat([pen[1],args[5],bb.y0]));bb.y1=Math.max.apply(null,ys.concat([pen[1],args[5],bb.y1]));break;}
pen[0]=args[args.length-2];pen[1]=args[args.length-1];}
return bb;}catch(e){console.log(e);}},applyMatrix:function(commands,matrix){if((commands instanceof Array)&&(matrix instanceof Array)&&matrix.length==6){if((matrix[0]+matrix[1]+matrix[2]+matrix[3]+matrix[4]+matrix[5])==2)return false;for(var i=0;i<commands.length;i++){var pvertex={x:0,y:0};switch(commands[i]['func']){case'moveTo':case'lineTo':case'bezierCurveTo':case'quadraticCurveTo':for(var c_idx=0;c_idx<commands[i]['args'].length;c_idx+=2){pvertex.x=commands[i]['args'][c_idx];pvertex.y=commands[i]['args'][c_idx+1];FLSUtil.transformPoint(matrix,pvertex,true);commands[i]['args'][c_idx]=pvertex.x;commands[i]['args'][c_idx+1]=pvertex.y;}}}}},getPathPoint:function(t,start,end,control_points){var point=[0,0];if(!(control_points instanceof Array)){control_points=[];}
var points=[start];for(var cpi=0;cpi<control_points.length;cpi++){points.push(control_points[cpi]);}
points.push(end);if(t){t=t>1?1:(t<0?0:t);}else{t=0;}
var n=points.length-1;var t1=1-t;var coefs=[1];for(var ni=0;ni<n;ni++){coefs.push(coefs[ni]*(n-ni)/(ni+1));}
for(var ci=0;ci<=n;ci++){var tmp_term=Math.pow(t1,n-ci)*Math.pow(t,ci)*coefs[ci];point[0]+=points[ci][0]*tmp_term;point[1]+=points[ci][1]*tmp_term;}
return point;},getDerivPathPoint:function(t,start,end,control_points){var point=[0,0];if(!(control_points instanceof Array)){control_points=[];}
var points=[start];for(var cpi=0;cpi<control_points.length;cpi++){points.push(control_points[cpi]);}
points.push(end);if(t){t=t>1?1:(t<0?0:t);}else{t=0;}
var n=points.length-1;var k=n-1;var t1=1-t;var coefs=[1];for(var ni=0;ni<k;ni++){coefs.push(coefs[ni]*(k-ni)/(ni+1));}
for(var ci=0;ci<=k;ci++){var tmp_term=Math.pow(t1,k-ci)*Math.pow(t,ci)*coefs[ci]*n;point[0]+=(points[ci+1][0]-points[ci][0])*tmp_term;point[1]+=(points[ci+1][1]-points[ci][1])*tmp_term;}
return point;},pathLength:function(commands){var path_pixel_lenght=0;if(commands.length){var Tvalues=0||[[],[],[-0.5773502691896257645091487805019574556476,0.5773502691896257645091487805019574556476],[0,-0.7745966692414833770358530799564799221665,0.7745966692414833770358530799564799221665],[-0.3399810435848562648026657591032446872005,0.3399810435848562648026657591032446872005,-0.8611363115940525752239464888928095050957,0.8611363115940525752239464888928095050957],[0,-0.5384693101056830910363144207002088049672,0.5384693101056830910363144207002088049672,-0.9061798459386639927976268782993929651256,0.9061798459386639927976268782993929651256],[0.6612093864662645136613995950199053470064,-0.6612093864662645136613995950199053470064,-0.2386191860831969086305017216807119354186,0.2386191860831969086305017216807119354186,-0.9324695142031520278123015544939946091347,0.9324695142031520278123015544939946091347],[0,0.4058451513773971669066064120769614633473,-0.4058451513773971669066064120769614633473,-0.7415311855993944398638647732807884070741,0.7415311855993944398638647732807884070741,-0.9491079123427585245261896840478512624007,0.9491079123427585245261896840478512624007],[-0.1834346424956498049394761423601839806667,0.1834346424956498049394761423601839806667,-0.5255324099163289858177390491892463490419,0.5255324099163289858177390491892463490419,-0.7966664774136267395915539364758304368371,0.7966664774136267395915539364758304368371,-0.9602898564975362316835608685694729904282,0.9602898564975362316835608685694729904282],[0,-0.8360311073266357942994297880697348765441,0.8360311073266357942994297880697348765441,-0.9681602395076260898355762029036728700494,0.9681602395076260898355762029036728700494,-0.3242534234038089290385380146433366085719,0.3242534234038089290385380146433366085719,-0.6133714327005903973087020393414741847857,0.6133714327005903973087020393414741847857],[-0.1488743389816312108848260011297199846175,0.1488743389816312108848260011297199846175,-0.4333953941292471907992659431657841622000,0.4333953941292471907992659431657841622000,-0.6794095682990244062343273651148735757692,0.6794095682990244062343273651148735757692,-0.8650633666889845107320966884234930485275,0.8650633666889845107320966884234930485275,-0.9739065285171717200779640120844520534282,0.9739065285171717200779640120844520534282],[0,-0.2695431559523449723315319854008615246796,0.2695431559523449723315319854008615246796,-0.5190961292068118159257256694586095544802,0.5190961292068118159257256694586095544802,-0.7301520055740493240934162520311534580496,0.7301520055740493240934162520311534580496,-0.8870625997680952990751577693039272666316,0.8870625997680952990751577693039272666316,-0.9782286581460569928039380011228573907714,0.9782286581460569928039380011228573907714],[-0.1252334085114689154724413694638531299833,0.1252334085114689154724413694638531299833,-0.3678314989981801937526915366437175612563,0.3678314989981801937526915366437175612563,-0.5873179542866174472967024189405342803690,0.5873179542866174472967024189405342803690,-0.7699026741943046870368938332128180759849,0.7699026741943046870368938332128180759849,-0.9041172563704748566784658661190961925375,0.9041172563704748566784658661190961925375,-0.9815606342467192506905490901492808229601,0.9815606342467192506905490901492808229601],[0,-0.2304583159551347940655281210979888352115,0.2304583159551347940655281210979888352115,-0.4484927510364468528779128521276398678019,0.4484927510364468528779128521276398678019,-0.6423493394403402206439846069955156500716,0.6423493394403402206439846069955156500716,-0.8015780907333099127942064895828598903056,0.8015780907333099127942064895828598903056,-0.9175983992229779652065478365007195123904,0.9175983992229779652065478365007195123904,-0.9841830547185881494728294488071096110649,0.9841830547185881494728294488071096110649],[-0.1080549487073436620662446502198347476119,0.1080549487073436620662446502198347476119,-0.3191123689278897604356718241684754668342,0.3191123689278897604356718241684754668342,-0.5152486363581540919652907185511886623088,0.5152486363581540919652907185511886623088,-0.6872929048116854701480198030193341375384,0.6872929048116854701480198030193341375384,-0.8272013150697649931897947426503949610397,0.8272013150697649931897947426503949610397,-0.9284348836635735173363911393778742644770,0.9284348836635735173363911393778742644770,-0.9862838086968123388415972667040528016760,0.9862838086968123388415972667040528016760],[0,-0.2011940939974345223006283033945962078128,0.2011940939974345223006283033945962078128,-0.3941513470775633698972073709810454683627,0.3941513470775633698972073709810454683627,-0.5709721726085388475372267372539106412383,0.5709721726085388475372267372539106412383,-0.7244177313601700474161860546139380096308,0.7244177313601700474161860546139380096308,-0.8482065834104272162006483207742168513662,0.8482065834104272162006483207742168513662,-0.9372733924007059043077589477102094712439,0.9372733924007059043077589477102094712439,-0.9879925180204854284895657185866125811469,0.9879925180204854284895657185866125811469],[-0.0950125098376374401853193354249580631303,0.0950125098376374401853193354249580631303,-0.2816035507792589132304605014604961064860,0.2816035507792589132304605014604961064860,-0.4580167776572273863424194429835775735400,0.4580167776572273863424194429835775735400,-0.6178762444026437484466717640487910189918,0.6178762444026437484466717640487910189918,-0.7554044083550030338951011948474422683538,0.7554044083550030338951011948474422683538,-0.8656312023878317438804678977123931323873,0.8656312023878317438804678977123931323873,-0.9445750230732325760779884155346083450911,0.9445750230732325760779884155346083450911,-0.9894009349916499325961541734503326274262,0.9894009349916499325961541734503326274262],[0,-0.1784841814958478558506774936540655574754,0.1784841814958478558506774936540655574754,-0.3512317634538763152971855170953460050405,0.3512317634538763152971855170953460050405,-0.5126905370864769678862465686295518745829,0.5126905370864769678862465686295518745829,-0.6576711592166907658503022166430023351478,0.6576711592166907658503022166430023351478,-0.7815140038968014069252300555204760502239,0.7815140038968014069252300555204760502239,-0.8802391537269859021229556944881556926234,0.8802391537269859021229556944881556926234,-0.9506755217687677612227169578958030214433,0.9506755217687677612227169578958030214433,-0.9905754753144173356754340199406652765077,0.9905754753144173356754340199406652765077],[-0.0847750130417353012422618529357838117333,0.0847750130417353012422618529357838117333,-0.2518862256915055095889728548779112301628,0.2518862256915055095889728548779112301628,-0.4117511614628426460359317938330516370789,0.4117511614628426460359317938330516370789,-0.5597708310739475346078715485253291369276,0.5597708310739475346078715485253291369276,-0.6916870430603532078748910812888483894522,0.6916870430603532078748910812888483894522,-0.8037049589725231156824174550145907971032,0.8037049589725231156824174550145907971032,-0.8926024664975557392060605911271455154078,0.8926024664975557392060605911271455154078,-0.9558239495713977551811958929297763099728,0.9558239495713977551811958929297763099728,-0.9915651684209309467300160047061507702525,0.9915651684209309467300160047061507702525],[0,-0.1603586456402253758680961157407435495048,0.1603586456402253758680961157407435495048,-0.3165640999636298319901173288498449178922,0.3165640999636298319901173288498449178922,-0.4645707413759609457172671481041023679762,0.4645707413759609457172671481041023679762,-0.6005453046616810234696381649462392798683,0.6005453046616810234696381649462392798683,-0.7209661773352293786170958608237816296571,0.7209661773352293786170958608237816296571,-0.8227146565371428249789224867127139017745,0.8227146565371428249789224867127139017745,-0.9031559036148179016426609285323124878093,0.9031559036148179016426609285323124878093,-0.9602081521348300308527788406876515266150,0.9602081521348300308527788406876515266150,-0.9924068438435844031890176702532604935893,0.9924068438435844031890176702532604935893],[-0.0765265211334973337546404093988382110047,0.0765265211334973337546404093988382110047,-0.2277858511416450780804961953685746247430,0.2277858511416450780804961953685746247430,-0.3737060887154195606725481770249272373957,0.3737060887154195606725481770249272373957,-0.5108670019508270980043640509552509984254,0.5108670019508270980043640509552509984254,-0.6360536807265150254528366962262859367433,0.6360536807265150254528366962262859367433,-0.7463319064601507926143050703556415903107,0.7463319064601507926143050703556415903107,-0.8391169718222188233945290617015206853296,0.8391169718222188233945290617015206853296,-0.9122344282513259058677524412032981130491,0.9122344282513259058677524412032981130491,-0.9639719272779137912676661311972772219120,0.9639719272779137912676661311972772219120,-0.9931285991850949247861223884713202782226,0.9931285991850949247861223884713202782226],[0,-0.1455618541608950909370309823386863301163,0.1455618541608950909370309823386863301163,-0.2880213168024010966007925160646003199090,0.2880213168024010966007925160646003199090,-0.4243421202074387835736688885437880520964,0.4243421202074387835736688885437880520964,-0.5516188358872198070590187967243132866220,0.5516188358872198070590187967243132866220,-0.6671388041974123193059666699903391625970,0.6671388041974123193059666699903391625970,-0.7684399634756779086158778513062280348209,0.7684399634756779086158778513062280348209,-0.8533633645833172836472506385875676702761,0.8533633645833172836472506385875676702761,-0.9200993341504008287901871337149688941591,0.9200993341504008287901871337149688941591,-0.9672268385663062943166222149076951614246,0.9672268385663062943166222149076951614246,-0.9937521706203895002602420359379409291933,0.9937521706203895002602420359379409291933],[-0.0697392733197222212138417961186280818222,0.0697392733197222212138417961186280818222,-0.2078604266882212854788465339195457342156,0.2078604266882212854788465339195457342156,-0.3419358208920842251581474204273796195591,0.3419358208920842251581474204273796195591,-0.4693558379867570264063307109664063460953,0.4693558379867570264063307109664063460953,-0.5876404035069115929588769276386473488776,0.5876404035069115929588769276386473488776,-0.6944872631866827800506898357622567712673,0.6944872631866827800506898357622567712673,-0.7878168059792081620042779554083515213881,0.7878168059792081620042779554083515213881,-0.8658125777203001365364256370193787290847,0.8658125777203001365364256370193787290847,-0.9269567721871740005206929392590531966353,0.9269567721871740005206929392590531966353,-0.9700604978354287271239509867652687108059,0.9700604978354287271239509867652687108059,-0.9942945854823992920730314211612989803930,0.9942945854823992920730314211612989803930],[0,-0.1332568242984661109317426822417661370104,0.1332568242984661109317426822417661370104,-0.2641356809703449305338695382833096029790,0.2641356809703449305338695382833096029790,-0.3903010380302908314214888728806054585780,0.3903010380302908314214888728806054585780,-0.5095014778460075496897930478668464305448,0.5095014778460075496897930478668464305448,-0.6196098757636461563850973116495956533871,0.6196098757636461563850973116495956533871,-0.7186613631319501944616244837486188483299,0.7186613631319501944616244837486188483299,-0.8048884016188398921511184069967785579414,0.8048884016188398921511184069967785579414,-0.8767523582704416673781568859341456716389,0.8767523582704416673781568859341456716389,-0.9329710868260161023491969890384229782357,0.9329710868260161023491969890384229782357,-0.9725424712181152319560240768207773751816,0.9725424712181152319560240768207773751816,-0.9947693349975521235239257154455743605736,0.9947693349975521235239257154455743605736],[-0.0640568928626056260850430826247450385909,0.0640568928626056260850430826247450385909,-0.1911188674736163091586398207570696318404,0.1911188674736163091586398207570696318404,-0.3150426796961633743867932913198102407864,0.3150426796961633743867932913198102407864,-0.4337935076260451384870842319133497124524,0.4337935076260451384870842319133497124524,-0.5454214713888395356583756172183723700107,0.5454214713888395356583756172183723700107,-0.6480936519369755692524957869107476266696,0.6480936519369755692524957869107476266696,-0.7401241915785543642438281030999784255232,0.7401241915785543642438281030999784255232,-0.8200019859739029219539498726697452080761,0.8200019859739029219539498726697452080761,-0.8864155270044010342131543419821967550873,0.8864155270044010342131543419821967550873,-0.9382745520027327585236490017087214496548,0.9382745520027327585236490017087214496548,-0.9747285559713094981983919930081690617411,0.9747285559713094981983919930081690617411,-0.9951872199970213601799974097007368118745,0.9951872199970213601799974097007368118745]];var Cvalues=0||[[],[],[1.0,1.0],[0.8888888888888888888888888888888888888888,0.5555555555555555555555555555555555555555,0.5555555555555555555555555555555555555555],[0.6521451548625461426269360507780005927646,0.6521451548625461426269360507780005927646,0.3478548451374538573730639492219994072353,0.3478548451374538573730639492219994072353],[0.5688888888888888888888888888888888888888,0.4786286704993664680412915148356381929122,0.4786286704993664680412915148356381929122,0.2369268850561890875142640407199173626432,0.2369268850561890875142640407199173626432],[0.3607615730481386075698335138377161116615,0.3607615730481386075698335138377161116615,0.4679139345726910473898703439895509948116,0.4679139345726910473898703439895509948116,0.1713244923791703450402961421727328935268,0.1713244923791703450402961421727328935268],[0.4179591836734693877551020408163265306122,0.3818300505051189449503697754889751338783,0.3818300505051189449503697754889751338783,0.2797053914892766679014677714237795824869,0.2797053914892766679014677714237795824869,0.1294849661688696932706114326790820183285,0.1294849661688696932706114326790820183285],[0.3626837833783619829651504492771956121941,0.3626837833783619829651504492771956121941,0.3137066458778872873379622019866013132603,0.3137066458778872873379622019866013132603,0.2223810344533744705443559944262408844301,0.2223810344533744705443559944262408844301,0.1012285362903762591525313543099621901153,0.1012285362903762591525313543099621901153],[0.3302393550012597631645250692869740488788,0.1806481606948574040584720312429128095143,0.1806481606948574040584720312429128095143,0.0812743883615744119718921581105236506756,0.0812743883615744119718921581105236506756,0.3123470770400028400686304065844436655987,0.3123470770400028400686304065844436655987,0.2606106964029354623187428694186328497718,0.2606106964029354623187428694186328497718],[0.2955242247147528701738929946513383294210,0.2955242247147528701738929946513383294210,0.2692667193099963550912269215694693528597,0.2692667193099963550912269215694693528597,0.2190863625159820439955349342281631924587,0.2190863625159820439955349342281631924587,0.1494513491505805931457763396576973324025,0.1494513491505805931457763396576973324025,0.0666713443086881375935688098933317928578,0.0666713443086881375935688098933317928578],[0.2729250867779006307144835283363421891560,0.2628045445102466621806888698905091953727,0.2628045445102466621806888698905091953727,0.2331937645919904799185237048431751394317,0.2331937645919904799185237048431751394317,0.1862902109277342514260976414316558916912,0.1862902109277342514260976414316558916912,0.1255803694649046246346942992239401001976,0.1255803694649046246346942992239401001976,0.0556685671161736664827537204425485787285,0.0556685671161736664827537204425485787285],[0.2491470458134027850005624360429512108304,0.2491470458134027850005624360429512108304,0.2334925365383548087608498989248780562594,0.2334925365383548087608498989248780562594,0.2031674267230659217490644558097983765065,0.2031674267230659217490644558097983765065,0.1600783285433462263346525295433590718720,0.1600783285433462263346525295433590718720,0.1069393259953184309602547181939962242145,0.1069393259953184309602547181939962242145,0.0471753363865118271946159614850170603170,0.0471753363865118271946159614850170603170],[0.2325515532308739101945895152688359481566,0.2262831802628972384120901860397766184347,0.2262831802628972384120901860397766184347,0.2078160475368885023125232193060527633865,0.2078160475368885023125232193060527633865,0.1781459807619457382800466919960979955128,0.1781459807619457382800466919960979955128,0.1388735102197872384636017768688714676218,0.1388735102197872384636017768688714676218,0.0921214998377284479144217759537971209236,0.0921214998377284479144217759537971209236,0.0404840047653158795200215922009860600419,0.0404840047653158795200215922009860600419],[0.2152638534631577901958764433162600352749,0.2152638534631577901958764433162600352749,0.2051984637212956039659240656612180557103,0.2051984637212956039659240656612180557103,0.1855383974779378137417165901251570362489,0.1855383974779378137417165901251570362489,0.1572031671581935345696019386238421566056,0.1572031671581935345696019386238421566056,0.1215185706879031846894148090724766259566,0.1215185706879031846894148090724766259566,0.0801580871597602098056332770628543095836,0.0801580871597602098056332770628543095836,0.0351194603317518630318328761381917806197,0.0351194603317518630318328761381917806197],[0.2025782419255612728806201999675193148386,0.1984314853271115764561183264438393248186,0.1984314853271115764561183264438393248186,0.1861610000155622110268005618664228245062,0.1861610000155622110268005618664228245062,0.1662692058169939335532008604812088111309,0.1662692058169939335532008604812088111309,0.1395706779261543144478047945110283225208,0.1395706779261543144478047945110283225208,0.1071592204671719350118695466858693034155,0.1071592204671719350118695466858693034155,0.0703660474881081247092674164506673384667,0.0703660474881081247092674164506673384667,0.0307532419961172683546283935772044177217,0.0307532419961172683546283935772044177217],[0.1894506104550684962853967232082831051469,0.1894506104550684962853967232082831051469,0.1826034150449235888667636679692199393835,0.1826034150449235888667636679692199393835,0.1691565193950025381893120790303599622116,0.1691565193950025381893120790303599622116,0.1495959888165767320815017305474785489704,0.1495959888165767320815017305474785489704,0.1246289712555338720524762821920164201448,0.1246289712555338720524762821920164201448,0.0951585116824927848099251076022462263552,0.0951585116824927848099251076022462263552,0.0622535239386478928628438369943776942749,0.0622535239386478928628438369943776942749,0.0271524594117540948517805724560181035122,0.0271524594117540948517805724560181035122],[0.1794464703562065254582656442618856214487,0.1765627053669926463252709901131972391509,0.1765627053669926463252709901131972391509,0.1680041021564500445099706637883231550211,0.1680041021564500445099706637883231550211,0.1540457610768102880814315948019586119404,0.1540457610768102880814315948019586119404,0.1351363684685254732863199817023501973721,0.1351363684685254732863199817023501973721,0.1118838471934039710947883856263559267358,0.1118838471934039710947883856263559267358,0.0850361483171791808835353701910620738504,0.0850361483171791808835353701910620738504,0.0554595293739872011294401653582446605128,0.0554595293739872011294401653582446605128,0.0241483028685479319601100262875653246916,0.0241483028685479319601100262875653246916],[0.1691423829631435918406564701349866103341,0.1691423829631435918406564701349866103341,0.1642764837458327229860537764659275904123,0.1642764837458327229860537764659275904123,0.1546846751262652449254180038363747721932,0.1546846751262652449254180038363747721932,0.1406429146706506512047313037519472280955,0.1406429146706506512047313037519472280955,0.1225552067114784601845191268002015552281,0.1225552067114784601845191268002015552281,0.1009420441062871655628139849248346070628,0.1009420441062871655628139849248346070628,0.0764257302548890565291296776166365256053,0.0764257302548890565291296776166365256053,0.0497145488949697964533349462026386416808,0.0497145488949697964533349462026386416808,0.0216160135264833103133427102664524693876,0.0216160135264833103133427102664524693876],[0.1610544498487836959791636253209167350399,0.1589688433939543476499564394650472016787,0.1589688433939543476499564394650472016787,0.1527660420658596667788554008976629984610,0.1527660420658596667788554008976629984610,0.1426067021736066117757461094419029724756,0.1426067021736066117757461094419029724756,0.1287539625393362276755157848568771170558,0.1287539625393362276755157848568771170558,0.1115666455473339947160239016817659974813,0.1115666455473339947160239016817659974813,0.0914900216224499994644620941238396526609,0.0914900216224499994644620941238396526609,0.0690445427376412265807082580060130449618,0.0690445427376412265807082580060130449618,0.0448142267656996003328381574019942119517,0.0448142267656996003328381574019942119517,0.0194617882297264770363120414644384357529,0.0194617882297264770363120414644384357529],[0.1527533871307258506980843319550975934919,0.1527533871307258506980843319550975934919,0.1491729864726037467878287370019694366926,0.1491729864726037467878287370019694366926,0.1420961093183820513292983250671649330345,0.1420961093183820513292983250671649330345,0.1316886384491766268984944997481631349161,0.1316886384491766268984944997481631349161,0.1181945319615184173123773777113822870050,0.1181945319615184173123773777113822870050,0.1019301198172404350367501354803498761666,0.1019301198172404350367501354803498761666,0.0832767415767047487247581432220462061001,0.0832767415767047487247581432220462061001,0.0626720483341090635695065351870416063516,0.0626720483341090635695065351870416063516,0.0406014298003869413310399522749321098790,0.0406014298003869413310399522749321098790,0.0176140071391521183118619623518528163621,0.0176140071391521183118619623518528163621],[0.1460811336496904271919851476833711882448,0.1445244039899700590638271665537525436099,0.1445244039899700590638271665537525436099,0.1398873947910731547221334238675831108927,0.1398873947910731547221334238675831108927,0.1322689386333374617810525744967756043290,0.1322689386333374617810525744967756043290,0.1218314160537285341953671771257335983563,0.1218314160537285341953671771257335983563,0.1087972991671483776634745780701056420336,0.1087972991671483776634745780701056420336,0.0934444234560338615532897411139320884835,0.0934444234560338615532897411139320884835,0.0761001136283793020170516533001831792261,0.0761001136283793020170516533001831792261,0.0571344254268572082836358264724479574912,0.0571344254268572082836358264724479574912,0.0369537897708524937999506682993296661889,0.0369537897708524937999506682993296661889,0.0160172282577743333242246168584710152658,0.0160172282577743333242246168584710152658],[0.1392518728556319933754102483418099578739,0.1392518728556319933754102483418099578739,0.1365414983460151713525738312315173965863,0.1365414983460151713525738312315173965863,0.1311735047870623707329649925303074458757,0.1311735047870623707329649925303074458757,0.1232523768105124242855609861548144719594,0.1232523768105124242855609861548144719594,0.1129322960805392183934006074217843191142,0.1129322960805392183934006074217843191142,0.1004141444428809649320788378305362823508,0.1004141444428809649320788378305362823508,0.0859416062170677274144436813727028661891,0.0859416062170677274144436813727028661891,0.0697964684245204880949614189302176573987,0.0697964684245204880949614189302176573987,0.0522933351526832859403120512732112561121,0.0522933351526832859403120512732112561121,0.0337749015848141547933022468659129013491,0.0337749015848141547933022468659129013491,0.0146279952982722006849910980471854451902,0.0146279952982722006849910980471854451902],[0.1336545721861061753514571105458443385831,0.1324620394046966173716424647033169258050,0.1324620394046966173716424647033169258050,0.1289057221880821499785953393997936532597,0.1289057221880821499785953393997936532597,0.1230490843067295304675784006720096548158,0.1230490843067295304675784006720096548158,0.1149966402224113649416435129339613014914,0.1149966402224113649416435129339613014914,0.1048920914645414100740861850147438548584,0.1048920914645414100740861850147438548584,0.0929157660600351474770186173697646486034,0.0929157660600351474770186173697646486034,0.0792814117767189549228925247420432269137,0.0792814117767189549228925247420432269137,0.0642324214085258521271696151589109980391,0.0642324214085258521271696151589109980391,0.0480376717310846685716410716320339965612,0.0480376717310846685716410716320339965612,0.0309880058569794443106942196418845053837,0.0309880058569794443106942196418845053837,0.0134118594871417720813094934586150649766,0.0134118594871417720813094934586150649766],[0.1279381953467521569740561652246953718517,0.1279381953467521569740561652246953718517,0.1258374563468282961213753825111836887264,0.1258374563468282961213753825111836887264,0.1216704729278033912044631534762624256070,0.1216704729278033912044631534762624256070,0.1155056680537256013533444839067835598622,0.1155056680537256013533444839067835598622,0.1074442701159656347825773424466062227946,0.1074442701159656347825773424466062227946,0.0976186521041138882698806644642471544279,0.0976186521041138882698806644642471544279,0.0861901615319532759171852029837426671850,0.0861901615319532759171852029837426671850,0.0733464814110803057340336152531165181193,0.0733464814110803057340336152531165181193,0.0592985849154367807463677585001085845412,0.0592985849154367807463677585001085845412,0.0442774388174198061686027482113382288593,0.0442774388174198061686027482113382288593,0.0285313886289336631813078159518782864491,0.0285313886289336631813078159518782864491,0.0123412297999871995468056670700372915759,0.0123412297999871995468056670700372915759]];var start=[0,0];var first=[0,0];for(var i=0;i<commands.length;i++){if(commands[i]['func']=='moveTo'){start=[commands[i]['args'][0],commands[i]['args'][1]];i++;first[0]=start[0];first[1]=start[1];}
var end=[start[0],start[1]];var cpoints=[];switch(commands[i]['func']){case'lineTo':end[0]=commands[i]['args'][0];end[1]=commands[i]['args'][1];break;case'quadraticCurveTo':end[0]=commands[i]['args'][2];end[1]=commands[i]['args'][3];cpoints.push([commands[i]['args'][0],commands[i]['args'][1]]);break;case'bezierCurveTo':end[0]=commands[i]['args'][4];end[1]=commands[i]['args'][5];cpoints.push([commands[i]['args'][0],commands[i]['args'][1]]);cpoints.push([commands[i]['args'][2],commands[i]['args'][3]]);break;case'closePath':end[0]=first[0];end[1]=first[1];break;}
var sum=0;var t=1;var z=t/2;var n=20;for(var xi=0;xi<n;xi++){var corrected_t=z*Tvalues[n][xi]+z;var derivp=SVGPath2Cnvs.getDerivPathPoint(corrected_t,start,end,cpoints);var combined=Math.sqrt(derivp[0]*derivp[0]+derivp[1]*derivp[1]);sum+=Cvalues[n][xi]*combined;}
sum*=z;path_pixel_lenght+=sum;start=[end[0],end[1]];}}
return path_pixel_lenght;},simplify:function(_path_commands,getcommands,samplecount){getcommands=typeof(getcommands)=='boolean'?getcommands:true;samplecount=parseInt(samplecount,10);samplecount=(isNaN(samplecount)||!samplecount)?20:samplecount;var t_step=1/samplecount;var commands;var simplified=[];if(_path_commands instanceof Array){commands=_path_commands.slice(0);}else{commands=SVGPath2Cnvs.parse(_path_commands);}
if(commands){var last_command=commands.shift();var current_command
if(last_command.func!='moveTo'){console.log('invalid path given');return false;}
var start_point=last_command.args.slice(0);simplified.push(last_command);while(commands.length){current_command=commands.shift();switch(current_command.func){case'quadraticCurveTo':for(var i=1;i<=samplecount;i++){var newcmd={func:'lineTo',args:[]};newcmd.args[0]=SVGPath2Cnvs.qbezier(start_point[0],current_command.args[0],current_command.args[2],t_step*i)
newcmd.args[1]=SVGPath2Cnvs.qbezier(start_point[1],current_command.args[1],current_command.args[3],t_step*i)
simplified.push(newcmd);}
start_point[0]=current_command.args[2]
start_point[1]=current_command.args[3]
break;case'bezierCurveTo':for(var i=1;i<=samplecount;i++){var newcmd={func:'lineTo',args:[]};newcmd.args[0]=SVGPath2Cnvs.cbezier(start_point[0],current_command.args[0],current_command.args[2],current_command.args[4],t_step*i)
newcmd.args[1]=SVGPath2Cnvs.cbezier(start_point[1],current_command.args[1],current_command.args[3],current_command.args[5],t_step*i)
simplified.push(newcmd);}
start_point[0]=current_command.args[4]
start_point[1]=current_command.args[5]
break;case'closePath':case'moveTo':case'lineTo':simplified.push(current_command);if(current_command.func!='closePath'){start_point[0]=current_command.args[0]
start_point[1]=current_command.args[1]}
break;}}
if(getcommands){return simplified;}else{var spathstr=SVGPath2Cnvs.commandsDataStr(simplified);while(simplified.length){simplified.pop();}
return spathstr;}}
return false;}};var FLSMultiselect=function(editor){var selection_start={x:0,y:0};var handle_multiselect=false;var selection_box=new FLSEditorCore.CSelectionGroup();var _this=this;if(handle_multiselect||selection_start){}
function _handleMultiSelect(evt,mouseCoords,edit_operation,lastSelectedObj){var objs=editor.getObjects().concat(editor.getLayoutObjects());switch(evt.type){case'mousedown':case'touchstart':handle_multiselect=false;if(edit_operation=='op:none'&&(evt.ctrlKey==false)){editor.deselect();handle_multiselect=true;if(objs.indexOf(selection_box)==-1){editor.addObject(selection_box);}
var zoom=editor.zoom();var ed_wt=editor.viewtopleft();selection_start.x=mouseCoords.x;selection_start.y=mouseCoords.y;selection_box.setPosition((selection_start.x-ed_wt.x)/zoom,(selection_start.y-ed_wt.y)/zoom);selection_box.setSize(0,0);selection_box.setActive(false);}else{if((lastSelectedObj!=selection_box)){if(!evt.ctrlKey||lastSelectedObj.fixed()||!lastSelectedObj.selectable()||((lastSelectedObj instanceof FLSEditorCore.CRect)&&lastSelectedObj.id=='backgroundColor')){_removeSelectionBox();}else{selection_box.addElement(lastSelectedObj);if(objs.indexOf(selection_box)==-1){editor.addObject(selection_box);}
lastSelectedObj=selection_box;editor.setCurrentObject(selection_box);}}}
break;case'mousemove':case'touchmove':if(handle_multiselect&&edit_operation=='op:none'){var zoom=editor.zoom();var w=mouseCoords.x-selection_start.x;var h=mouseCoords.y-selection_start.y;selection_box.setSize(w/zoom,h/zoom);if(typeof(evt.preventDefault)=='function'){evt.stopPropagation();evt.preventDefault();}else{evt.returnValue=false;};}
break;case'mouseup':case'touchend':if(handle_multiselect&&edit_operation=='op:none'){selection_box.only_layout_zones=_this.only_layout_zones===true?true:false;var elements=selection_box.setElements(selection_start,{x:mouseCoords.x,y:mouseCoords.y});if(!elements.length){_removeSelectionBox();}else{editor.deselect();if(lastSelectedObj){lastSelectedObj.setActive(false);}
if(elements.length==1){editor.setCurrentObject(elements[0]);_removeSelectionBox();}else{editor.setCurrentObject(selection_box);}
lastSelectedObj=editor.getCurrentObject();}}
handle_multiselect=false;}
return lastSelectedObj;}
function _removeSelectionBox(){selection_box.clear();editor.removeObject(selection_box);}
this.exec=_handleMultiSelect;this.hide=_removeSelectionBox;this.scalable=selection_box.scalable;};var SVGToCanvasLoader=function(svg_path,onLoadedCallback){var defs={};var elements=[];function handleLoadComplete(){if(typeof(onLoadedCallback)=='function'){onLoadedCallback(elements,defs);}}
function svgFilter(tofilter,ctype){tofilter=tofilter.replace(/(xmlns:ns[0-9]*?="")|(\sns[0-9]*?:)|(xmlns="http:\/\/www.w3.org\/2000\/svg"\s?)|(inkscape:[^=]+=[\s]?"[^"]+"\s?)/ig,'');return tofilter.replace(/(<svg\s)/i,'<svg xmlns="http://www.w3.org/2000/svg" ');}
function _parseStyles(svgnode,edobj){var styles=svgnode.attr('style');if(styles){styles=styles.trim().split(';');for(var i=0;i<styles.length;i++){var stmp=styles[i].split(':');if(stmp.length==2){switch(stmp[0]){case'fill':if(stmp[1]!='none'){edobj.setColor(stmp[1]);}
break;case'stroke':if(stmp[1]!='none'){edobj.setStroke(stmp[1]);}else{edobj.setStroke();}
break;case'stroke-width':if(stmp[1]!='none'){edobj.setStrokeWidth(stmp[1]);}else{edobj.setStrokeWidth();}
break;case'stroke-linecap':if(stmp[1]!='none'){edobj.setStrokeCap(stmp[1]);}else{edobj.setStrokeCap();}
break;case'stroke-miterlimit':if(stmp[1]!='none'){edobj.setStrokeMieter(stmp[1]);}else{edobj.setStrokeMieter();}
break;case'stroke-linejoin':if(stmp[1]!='none'){edobj.setStrokeJoin(stmp[1]);}else{edobj.setStrokeJoin();}
break;default:}}}}
var fillattr=(svgnode.attr('fill'));if(fillattr&&fillattr!='none'){var normcolor=FLSUtil.normalizeCssColor(fillattr);fillattr=normcolor.css;edobj.setColor(fillattr);}
if(edobj instanceof FLSEditorCore.CText){var ff=svgnode.attr('font-family');edobj.setFontFamily(ff);var fs=parseFloat(svgnode.attr('font-size'));edobj.setFontSize(fs);}
var ptransform={};if(svgnode.attr('transform')){var ptransforms=svgnode.attr('transform').trim().split(') ');if(ptransforms.length){for(var l=0;l<ptransforms.length;l++){var fn=ptransforms[l].split('(');if(fn.length==2){fn[1]=fn[1].replace(/\)/g,'').replace(/\s+/g,',').replace(/,+/g,',').split(',');ptransform[fn[0]]=[];if(fn[1].length){for(var fi=0;fi<fn[1].length;fi++){ptransform[fn[0]].push(parseFloat(fn[1][fi]));}}}}}
if(ptransform['matrix']){edobj.setMatrix(ptransform['matrix']);}
if(ptransform['translate']){edobj.translate(ptransform['translate'][0],ptransform['translate'][1]);}}
var id=svgnode.attr('id');if(id){edobj.id=id;}}
function parseDefs(svg){var definitions=jQuery('defs',svg);if(definitions.length){for(var di=0;di<definitions.length;di++){var cdefs=jQuery(definitions[di]).children();for(var cdefi=0;cdefi<cdefs.length;cdefi++){var defn=cdefs[cdefi];var $defn=jQuery(defn);switch(defn.nodeName){case'path':defs[$defn.attr('id')]=$defn.attr('d');break;default:console.log('def node not yet supported:',defn.nodeName);}}}}}
function handleTextNode(tn){var pathtxtx=false;var text=tn.text();var tpaths=tn.children('textPath');if(tpaths.length){text=tpaths.text();pathtxtx=true;}
var to=null;if(pathtxtx){to=new FLSEditorCore.CPathText(text);var defid=tpaths.attr('xlink:href').replace(/#/,'');to.setPathStr(defs[defid]);}else{to=new FLSEditorCore.CText(text);}
to.removable(true);_parseStyles(tn,to);return to;}
function handleImageNode(imn){}
function parseSVG(svg,pobj){svg.children().each(function(index){var snode=jQuery(this);switch(this.nodeName){case'text':elements.push(handleTextNode(snode));break;case'image':elements.push(handleImageNode(snode));break;case'g':var gid=snode.attr('id');switch(gid){case'surface4':parseSVG(snode,pobj);break;case'surface2':break;case'images':break;case'logo':break;default:console.log('generic group not yet supported');}
break;}});}
try{if(typeof(svg_path)=='string'){jQuery.ajax({url:svg_path,success:function(xml){var svg=jQuery('svg',xml);parseDefs(svg);parseSVG(svg,elements);handleLoadComplete();},contentType:'xml',data:{},dataFilter:svgFilter,error:function(resp,type,error){console.log(error.message);handleLoadComplete();}});}}catch(err){console.log(err);}};var FloatingWidget=function(title,container){var widget=jQuery(document.createElement('div'));var wdgt_ttl=jQuery('<h4 class=flt-wdgt-ttl><span class="wdgt-ttl-btn close">&times;</span><span class="wdgt-ttl">'+(title?title.toString():'Untitled')+'</span></h4>');var wdgt_content=jQuery(document.createElement('div'));widget.addClass('flt-wdgt-container');wdgt_content.addClass('flt-wdgt-content');widget.append(wdgt_ttl);widget.append(wdgt_content);container=container?jQuery(container):jQuery('body');container.append(widget);jQuery('style#FLS-HTML5-FloatingWidget-CSS').remove();var widget_css='<style type="text/css" id="FLS-HTML5-FloatingWidget-CSS">\n';widget_css+='.flt-wdgt-container{z-index:50;-moz-user-select: none; user-select:none;-webkit-user-select:none;position:absolute; left:0; top:0; box-shadow: 0 0 2px rgba(0, 0, 0, 0.5); width:170px;border:1px solid #C5C5C5;background-color:#e0e0e0;font-family:arial,verdana,sans-serif;color:#666;background-color:#e0e0e0;font-size:11px;font-weight:normal;}\n';widget_css+='.flt-wdgt-container .flt-wdgt-ttl{margin:0; padding:0;border:1px solid #FFF;line-height:1.5em; color:#FFF; background-color:#104d81;}\n';widget_css+='.flt-wdgt-container .wdgt-ttl{margin:0 5px; display:block;}\n';widget_css+='.flt-wdgt-container .flt-wdgt-content{margin:0; padding:0;border:1px solid #FFF;border-top-color:#C5C5C5;}\n';widget_css+='.flt-wdgt-container .wdgt-content{margin:5px;}\n';widget_css+='.flt-wdgt-container .wdgt-ttl-btn{cursor:pointer;-moz-user-select: none; user-select:none;color:#FFF;background-color:#e0e0e0;font-size:12px;font-weight:normal;width:11px; height:11px; display:block; text-align:center; line-height: 11px;border-radius:3px; float:right; margin:2px;}\n';widget_css+='.flt-wdgt-container .wdgt-ttl-btn.close{background-color:#F00;border:1px solid #FFF;}\n';widget_css+='.flt-wdgt-container .flt-wdgt-sldr-cntrl{display:block; position:relative;margin:10px 0 20px 5px;padding:0;}\n';widget_css+='.flt-wdgt-container .flt-wdgt-sldr-cntrl .flt-wdgt-sldr{box-shadow: 1px 1px 0 #fff;display:block; border-radius:10px;height:3px; border:1px solid #666;position:relative;}\n';widget_css+='.flt-wdgt-container .flt-wdgt-sldr-cntrl .flt-wdgt-sldr .flst-wdgt-sldr-cnob{cursor:pointer;background-color: #ccc;border: 1px solid #666;border-radius: 10px;display: block;height: 13px;left: -8px;margin-top: -8px;position: absolute;top: 50%;width: 13px;z-index: 10;box-shadow: 0 0 1px rgba(0,0,0,0.5);}\n';widget_css+='.flt-wdgt-container .flt-wdgt-sldr-cntrl .flst-wdgt-sldr-ticks{display: block;height:1em;margin:10px 0 0 0;position:relative;}\n';widget_css+='.flt-wdgt-container .flt-wdgt-sldr-cntrl .flst-wdgt-sldr-ticks .sldr-tick{position:absolute; color:#000; font-size:11px;text-align:left;left:0px;}\n';widget_css+='.flt-wdgt-container .flt-wdgt-sldr-cntrl .flst-wdgt-sldr-ticks .sldr-tick::AFTER{content:"";position:absolute; width:1px; height:5px; top:-5px; left:50%;border-left:1px solid #000;}\n';widget_css+='.flt-wdgt-container .flt-wdgt-sldr-cntrl .flst-wdgt-sldr-ticks .sldr-tick.first::AFTER{}\n';widget_css+='.flt-wdgt-container .flt-wdgt-sldr-cntrl .flst-wdgt-sldr-ticks .sldr-tick.last::AFTER{left:auto;right:0}\n';widget_css+='.flt-wdgt-container .flt-wdgt-sldr-cntrl .flst-wdgt-sldr-ticks .sldr-tick.last{left:auto !important;right:0 !important;}\n';widget_css+='.flt-wdgt-container fieldset.flt-wdgt-sldr-cntrl,.flt-wdgt-container fieldset.flt-wdgt-cntrl{margin:0;padding:5px 10px 10px 10px; border:1px solid #666;}\n';widget_css+='.flt-wdgt-container fieldset.flt-wdgt-cntrl.top-border{padding: 3px 0; border-width: 1px 0 0 0;}\n';widget_css+='.flt-wdgt-container fieldset.flt-wdgt-sldr-cntrl legend,.flt-wdgt-container fieldset.flt-wdgt-cntrl legend{color:#000;}\n';widget_css+='.flt-wdgt-container fieldset.flt-wdgt-cntrl.top-border legend{margin-left: 10px;}\n';widget_css+='.flt-wdgt-container .flt-wdgt-sqbtn{ border: 1px solid #666; box-shadow: 1px 1px 0 #fff;cursor: pointer; display: block; font-family: georgia,verdana,arial,sans-serif; font-size: 18px; height: 26px; line-height: 25px; margin: 3px 0; text-align: center; width: 26px;}\n';widget_css+='.flt-wdgt-container .flt-wdgt-sqbtn.active{color: #FFF; background-color: #4988BD;}\n';widget_css+='.flt-wdgt-container .flt-wdgt-sqbtn.disabled{color: #FFF; background-color: #CCC; cursor:default;}\n';widget_css+='</style>\n';jQuery(widget_css).appendTo('head');jQuery('.wdgt-ttl-btn.close',widget).on('click',function(evt){widget.hide();return false;});this.setContent=function(content){if(((content instanceof jQuery)||(typeof(content)==='string'))&&content.length){var cwrp=jQuery('<div class="wdgt-content"></div>');cwrp.append(content);wdgt_content.empty().append(cwrp);}};this.setTitle=function(ttl){if((typeof(ttl)==='string')&&ttl.trim().length){jQuery('span.wdgt-ttl',wdgt_ttl).html(ttl);}};this.getWidget=function(){return widget;};this.show=function(){widget.show();};this.hide=function(){widget.hide();};};FloatingWidget.prototype.createSliderControl=function(config){var mobile=FLSUtil.mobile();var wp_mobile=FLSUtil.wp_mobile();var mouseCoords=0||{x:0,y:0};var _this=this;config.unit=typeof(config.unit)=='string'?config.unit.trim():'';var _unit=config.unit;var ticks_cnt=5;var cntntname=typeof(config.clabel)==='string'&&config.clabel.trim().length?'fieldset':'span';var slider_cntrl=document.createElement(cntntname);if(cntntname==='fieldset'){var slider_cntrl_lbl=document.createElement('legend');slider_cntrl_lbl.innerHTML=config.clabel+(config.unit.length?'('+config.unit+')':'');slider_cntrl.appendChild(slider_cntrl_lbl);_unit='';}
var slider=document.createElement('span');var cnob=document.createElement('span');var ticks=document.createElement('span');slider.appendChild(cnob);slider_cntrl.appendChild(slider);slider_cntrl.appendChild(ticks);slider_cntrl.className='flt-wdgt-sldr-cntrl';slider.className='flt-wdgt-sldr';cnob.className='flst-wdgt-sldr-cnob';ticks.className='flst-wdgt-sldr-ticks';var dragstart=null;var cnb_w=0,cnb_w2=0,min_x=0,max_x=0;config.min=parseFloat(config.min,10);config.max=parseFloat(config.max,10);config.default_value=parseFloat(config.default_value);config.min=isNaN(config.min)?0:config.min;config.max=isNaN(config.max)?100:config.max;config.default_value=isNaN(config.default_value)?config.min:((config.default_value>=config.min)&&(config.default_value<=config.max))?config.default_value:config.min;var config_cp=JSON.parse(JSON.stringify(config));var value=config.default_value;var tick_step=(config.max-config.min)/(ticks_cnt-1);setTimeout(function(){cnb_w=cnob.clientWidth;cnb_w2=cnb_w/2;min_x=-Math.round(cnb_w2);max_x=Math.round(slider.clientWidth+min_x);slider.setAttribute('data-value',value);slider.setAttribute('data-name',config.cname);var range_diff=config.max-config.min;var x_diff=slider.clientWidth;var pos_scale=(Math.abs(config.min)+value)/range_diff;var newleft=(x_diff*pos_scale);cnob.style.left=(newleft-cnb_w2)+'px';var width_steps=ticks.clientWidth/(ticks_cnt-1);for(var i=0;i<ticks_cnt;i++){var tick=document.createElement('span');var tick_cls='sldr-tick';tick_cls+=(i==0)?' first':(i==ticks_cnt-1)?' last':'';tick.innerHTML=Math.round((i==ticks_cnt-1)?config.max:config.min+(tick_step*i))+_unit;tick.className=tick_cls;ticks.appendChild(tick);tick.style.left=((width_steps*i)-(tick.clientWidth/2))+'px';}},20);function onchange(newleft){var range_diff=config.max-config.min;var x_diff=slider.clientWidth;var pos_scale=parseFloat(((newleft+cnb_w2)/x_diff).toFixed(2));value=config.min+Math.round((range_diff*pos_scale));value=value<config.min?config.min:(value>config.max?config.max:value);slider.setAttribute('data-value',value);if(typeof(_this.onchange)=='function'){_this.onchange(value,config_cp);}}
function getMousePos(evt){var rect=slider.getBoundingClientRect();if(evt.type=='touchend')return mouseCoords;if(evt.touches){mouseCoords.x=evt.touches[0].clientX-rect.left;mouseCoords.y=evt.touches[0].clientY-rect.top;}else{mouseCoords.x=evt.clientX-rect.left;mouseCoords.y=evt.clientY-rect.top;}
return mouseCoords;}
function _handleSliderDrag(evt){getMousePos(evt);switch(evt.type){case'mousedown':case'touchstart':case'pointerdown':if([cnob,slider].indexOf(evt.target)>-1){dragstart={x:mouseCoords.x,y:mouseCoords.y};}
if(evt.target==slider){var dx=Math.round(mouseCoords.x-cnob.offsetLeft);var newleft=cnob.offsetLeft+dx+min_x;if(newleft>=min_x&&newleft<max_x){cnob.style.left=newleft+'px';onchange(newleft);}}
break;case'mousemove':case'touchmove':case'pointermove':if(dragstart){var dx=mouseCoords.x-dragstart.x;var newleft=cnob.offsetLeft+dx;if(newleft>=min_x&&newleft<=max_x){cnob.style.left=newleft+'px';onchange(newleft);}
dragstart.x=mouseCoords.x;dragstart.y=mouseCoords.y;}
break;case'mouseup':case'touchend':case'pointerup':dragstart=null;break;case'mouseout':case'touchcancel':case'pointercancel':if(evt.target===slider_cntrl&&evt.relatedTarget===slider_cntrl){dragstart=null;}
break;}
if(typeof(evt.preventDefault)=='function'){evt.stopPropagation();evt.preventDefault();}else{evt.returnValue=false;};return false;}
var mob_evtnts=wp_mobile?['pointerdown','pointermove','pointerup']:['touchstart','touchmove','touchend'];var events=mobile?mob_evtnts:['mousedown','mousemove','mouseup'];for(var i in events){if(document.addEventListener){slider_cntrl.addEventListener(events[i],_handleSliderDrag,false);}else if(document.attachEvent){slider_cntrl.attachEvent("on"+events[i],_handleSliderDrag);}}
this.value=function(val){val=parseFloat(val);if(!isNaN(val)&&(val>=config.min)&&(val<=config.max)){value=val;slider.setAttribute('data-value',value);var range_diff=config.max-config.min;var x_diff=slider.clientWidth;var pos_scale=(Math.abs(config.min)+value)/range_diff;var newleft=(x_diff*pos_scale);cnob.style.left=(newleft-cnb_w2)+'px';}
return value;};this.control=function(){return slider_cntrl;};};FloatingWidget.prototype.createColorPicker=function(config,canvas){var mobile=FLSUtil.mobile();var wp_mobile=FLSUtil.wp_mobile();var mouseCoords=0||{x:0,y:0};var _this=this;if(!canvas||!canvas.getContext){canvas=document.createElement('canvas');}
var cntntname=typeof(config.clabel)==='string'&&config.clabel.trim().length?'fieldset':'span';var picker_cntrl=document.createElement(cntntname);if(cntntname==='fieldset'){var picker_cntrl_lbl=document.createElement('legend');picker_cntrl_lbl.innerHTML=config.clabel;picker_cntrl.appendChild(picker_cntrl_lbl);picker_cntrl.className='flt-wdgt-cntrl top-border';}
var ctx=canvas.getContext('2d');config.width=parseInt(config.width);config.height=parseInt(config.height);var value='rgb(0,0,0)';canvas.setAttribute('data-name',config.cname);canvas.setAttribute('data-value',value);config.width=config.width&&!isNaN(config.width)?config.width:120;config.height=config.height&&!isNaN(config.height)?config.height:120;var config_cp=JSON.parse(JSON.stringify(config));canvas.width=config.width;canvas.height=config.height;canvas.style.cursor='crosshair';ctx.fillStyle='#FFF';ctx.fillRect(0,0,config.width,config.height);var gradient=ctx.createLinearGradient(0,0,config.width,0);gradient.addColorStop(0,"rgb(255,   0,   0)");gradient.addColorStop(0.15,"rgb(255,   0, 255)");gradient.addColorStop(0.33,"rgb(0,     0, 255)");gradient.addColorStop(0.49,"rgb(0,   255, 255)");gradient.addColorStop(0.67,"rgb(0,   255,   0)");gradient.addColorStop(0.84,"rgb(255, 255,   0)");gradient.addColorStop(1,"rgb(255,   0,   0)");ctx.fillStyle=gradient;ctx.fillRect(0,0,config.width,config.height);gradient=ctx.createLinearGradient(0,0,0,config.height);gradient.addColorStop(0,"rgba(255, 255, 255, 1)");gradient.addColorStop(0.5,"rgba(255, 255, 255, 0)");gradient.addColorStop(0.5,"rgba(0,     0,   0, 0)");gradient.addColorStop(1,"rgba(0,     0,   0, 1)");ctx.fillStyle=gradient;ctx.fillRect(0,0,config.width,config.height);picker_cntrl.appendChild(canvas);var dragstart=null;function onchange(mousep){if(mousep){var pxl=ctx.getImageData(mousep.x,mousep.y,1,1).data;value='rgb('+pxl[0]+','+pxl[1]+','+pxl[2]+')';}
canvas.setAttribute('data-value',value);if(typeof(_this.onchange)=='function'){_this.onchange(value,config_cp);}}
function getMousePos(evt){var rect=canvas.getBoundingClientRect();if(evt.type=='touchend')return mouseCoords;if(evt.touches){mouseCoords.x=evt.touches[0].clientX-rect.left;mouseCoords.y=evt.touches[0].clientY-rect.top;}else{mouseCoords.x=evt.clientX-rect.left;mouseCoords.y=evt.clientY-rect.top;}
return mouseCoords;}
function _handleColorDrag(evt){getMousePos(evt);switch(evt.type){case'mousedown':case'touchstart':case'pointerdown':dragstart={x:mouseCoords.x,y:mouseCoords.y};onchange(dragstart);break;case'mousemove':case'touchmove':case'pointermove':if(dragstart){dragstart.x=mouseCoords.x;dragstart.y=mouseCoords.y;onchange(dragstart);}
break;case'mouseup':case'touchend':case'pointerup':dragstart=null;break;}
if(typeof(evt.preventDefault)=='function'){evt.stopPropagation();evt.preventDefault();}else{evt.returnValue=false;};return false;}
var mob_evtnts=wp_mobile?['pointerdown','pointermove','pointerup']:['touchstart','touchmove','touchend'];var events=mobile?mob_evtnts:['mousedown','mousemove','mouseup'];for(var i in events){if(document.addEventListener){canvas.addEventListener(events[i],_handleColorDrag,false);}else if(document.attachEvent){canvas.attachEvent("on"+events[i],_handleColorDrag);}}
this.value=function(val){if(typeof(val)==='string'&&val.length){val=FLSUtil.normalizeCssColor(val);value=val.css;}
return value;};this.control=function(){return picker_cntrl;};};FloatingWidget.prototype.createCheckbox=function(config){var chck_cntrl=document.createElement('label');var value=config.default_value?true:false;var _this=this;var config_cp=JSON.parse(JSON.stringify(config));if(config.clabel){var chck_cntrl_lbl=document.createElement('span');chck_cntrl_lbl.innerHTML=config.clabel;chck_cntrl.appendChild(chck_cntrl_lbl);}
var control=document.createElement('input');control.type='checkbox';control.name=config.cname;control.checked=value;control.setAttribute('data-name',config.cname);control.setAttribute('data-value',value);chck_cntrl.appendChild(control);function onchange(){value=control.checked;control.setAttribute('data-value',value);if(typeof(_this.onchange)=='function'){_this.onchange(value,config_cp);}}
var events=['change'];for(var i in events){if(document.addEventListener){control.addEventListener(events[i],onchange,false);}else if(document.attachEvent){control.attachEvent("on"+events[i],onchange);}}
this.value=function(val){if(typeof(val)==='boolean'){value=val;control.checked=value;}
return control.checked;};this.control=function(){return chck_cntrl;};};var VettingToolWidget=function(editor,on_objects,container){this.show=function(){console.log('please override the "show" method');};this.hide=function(){console.log('please override the "hide" method');};this.update=function(){console.log('please override the "update" method');};this.validObject=function(obj){if(on_objects instanceof Array){for(var i=0;i<on_objects.length;i++){if(obj instanceof on_objects[i]){return true;}}
return false;}
return(obj instanceof FLSEditorCore.CObject);};};var DropShadowEditWidget=function(editor,on_objects,container){if(!editor)return false;var cur_obj=null;var cobj_shdw={color:'rgb(0,0,0)',offset:{x:0,y:0},blur:0,opacity:1};VettingToolWidget.apply(this,arguments);var wId='FLS-HTML5-Editor-DropShadow-Widget';var mobile=editor.mobile();var wp_mobile=editor.wp_mobile();var wgt=new FloatingWidget('Edit Drop-Shadow',container);var shadow_controls={shadow_color:{title:'color',type:'colorpicker',default_value:cobj_shdw.color},shadow_blur_radius:{title:'blur radius',type:'slider',min:0,max:10,default_value:cobj_shdw.blur,unit:'px'},shadow_opacity:{title:'shadow opacity',type:'slider',min:0,max:100,default_value:cobj_shdw.opacity,unit:'%'},shadow_x_offset:{title:'horizontal offset',type:'slider',min:-10,max:10,default_value:cobj_shdw.offset.x,unit:'px'},shadow_y_offset:{title:'vertical offset',type:'slider',min:-10,max:10,default_value:cobj_shdw.offset.y,unit:'px'},use_shadow:{title:'shadow active',type:'checkbox',default_value:0}};var $wgt=wgt.getWidget();$wgt.attr('id',wId);var w_width=$wgt.width();var content=jQuery(document.createElement('div'));for(var i in shadow_controls){var cntrl=shadow_controls[i];var $cntrl=null;switch(cntrl.type){case'colorpicker':var pckr=new wgt.createColorPicker({cname:i,width:w_width-12,height:80,clabel:cntrl.title});pckr.onchange=controlsCallback;$cntrl=pckr.control();cntrl.wdg_ctrl=pckr;break;case'slider':var sldr=new wgt.createSliderControl({cname:i,min:cntrl.min,max:cntrl.max,width:w_width-12,clabel:cntrl.title,unit:cntrl.unit,default_value:cntrl.default_value});sldr.onchange=controlsCallback;cntrl.wdg_ctrl=sldr;$cntrl=sldr.control();break;case'checkbox':var chck=new wgt.createCheckbox({cname:i,clabel:cntrl.title,default_value:cntrl.default_value});chck.onchange=controlsCallback;cntrl.wdg_ctrl=chck;$cntrl=chck.control();break;}
if($cntrl!==null){content.append($cntrl);}}
wgt.setContent(content);setTimeout(function(){wgt.hide();},100);function controlsCallback(value,cfg){if(cur_obj){switch(cfg.cname){case'use_shadow':cur_obj.use_shadow(value);break;case'shadow_x_offset':cobj_shdw.offset.x=value;break;case'shadow_y_offset':cobj_shdw.offset.y=value;break;case"shadow_blur_radius":cobj_shdw.blur=value;break;case"shadow_opacity":cobj_shdw.opacity=value/100;break;case"shadow_color":cobj_shdw.color=value;break;default:console.log(arguments);}
cur_obj.setDropShadow(cobj_shdw);cur_obj.use_shadow(shadow_controls.use_shadow.wdg_ctrl.value());}}
this.show=wgt.show;this.hide=wgt.hide;this.update=function(){wgt.hide();cur_obj=null;if(editor instanceof FLSEditorCore){var cobj=editor.getCurrentObject();if(this.validObject(cobj)){wgt.show();cur_obj=cobj;var obj_shadow=cobj.getDropShadow();shadow_controls.use_shadow.wdg_ctrl.value(cobj.use_shadow());if(obj_shadow){var clr=cobj_shdw.color;if(obj_shadow.color){clr=FLSUtil.normalizeCssColor(obj_shadow.color);clr='rgb('+FLSUtil.hexdec2rgb(clr.uint).join(',')+')';}
cobj_shdw.color=clr;cobj_shdw.opacity=obj_shadow.opacity?obj_shadow.opacity:1;cobj_shdw.offset.x=obj_shadow.offset_x?obj_shadow.offset_x:0;cobj_shdw.offset.y=obj_shadow.offset_y?obj_shadow.offset_y:0;cobj_shdw.blur=obj_shadow.blur?obj_shadow.blur:0;}
for(var i in cobj_shdw){switch(i){case'color':shadow_controls.shadow_color.wdg_ctrl.value(cobj_shdw.color);break;case'opacity':shadow_controls.shadow_opacity.wdg_ctrl.value(parseInt(cobj_shdw.opacity*100));break;case'offset':shadow_controls.shadow_x_offset.wdg_ctrl.value(cobj_shdw.offset.x);shadow_controls.shadow_y_offset.wdg_ctrl.value(cobj_shdw.offset.y);break;case'blur':shadow_controls.shadow_blur_radius.wdg_ctrl.value(cobj_shdw.blur);break;}}}}};};DropShadowEditWidget.prototype=new VettingToolWidget;var FontStyleEditWidget=function(editor,on_objects,container,extra,fontPathObj){if(!editor)return false;var cur_obj=null;VettingToolWidget.apply(this,arguments);var wId='FLS-HTML5-Editor-FontStyle-Widget';var _this=this;var mobile=editor.mobile();var wp_mobile=editor.wp_mobile();var cntnr=jQuery(container);var font_style_controls={bold:{icon:'B'},italic:{icon:'I'}};var content=jQuery(document.createElement('div'));var btn_tpl='<span class="flt-wdgt-sqbtn disabled" data-value="{FNT_STYLE}">{ICON}</span>';var mob_evtnts=wp_mobile?['pointerdown']:['touchstart'];var events=mobile?mob_evtnts:['mousedown'];for(var i in font_style_controls){var cntrl=font_style_controls[i];var $cntrl=jQuery(btn_tpl.replace(/{FNT_STYLE}/,i).replace(/{ICON}/,cntrl.icon));switch(i){case'bold':$cntrl.css({'font-weight':'bold','font-style':'normal'});break;case'italic':$cntrl.css({'font-weight':'normal','font-style':'italic'});break;}
font_style_controls[i]['cntrl']=$cntrl;for(var i in events){if(document.addEventListener){$cntrl.get(0).addEventListener(events[i],controlsCallback,false);}else if(document.attachEvent){$cntrl.get(0).attachEvent("on"+events[i],controlsCallback);}}
content.append($cntrl);}
cntnr.empty().append(content);var updateTimer=null;var measurements={};function controlsCallback(evt){var me=jQuery(this);var action=me.attr('data-value');var set=false;if(cur_obj&&_this.validObject(cur_obj)){var ff=cur_obj.getFontFamily();var fontinfo=extra.fonts[ff];var old_w=cur_obj.getSize().width;switch(action){case'bold':set=!cur_obj.bold()&&(fontinfo.bold_src.length>0);font_style_controls['bold']['cntrl'].toggleClass('active',cur_obj.bold(set));break;case'italic':set=!cur_obj.italic()&&(fontinfo.italic_src.length>0);font_style_controls['italic']['cntrl'].toggleClass('active',cur_obj.italic(set));break;default:console.log(arguments);}}
if((typeof(_this.on_control_callback)=='function')&&(['bold','italic'].indexOf(action)>-1)){_this.on_control_callback(cur_obj,old_w);}
clearTimeout(updateTimer);var mkey=cur_obj.bold()?1:0;mkey|=cur_obj.italic()?2:0;var mask=mkey==3?4:mkey;if(fontPathObj){fontPathObj.initFontProd(cur_obj,extra.fonts[cur_obj.getFontFamily()],function(){});}
if(measurements[ff]&mask){measurements[ff]^=mask;updateTimer=setTimeout(function(){cur_obj.updateMeasurements();},1000);}}
this.update=function(){cur_obj=null;if(editor instanceof FLSEditorCore){var cobj=editor.getCurrentObject();if(this.validObject(cobj)){cur_obj=cobj;var ff=cur_obj.getFontFamily();var fontinfo=extra.fonts[ff];font_style_controls['bold']['cntrl'].toggleClass('active',cur_obj.bold());font_style_controls['italic']['cntrl'].toggleClass('active',cur_obj.italic());if(typeof(measurements[ff])=='undefined'){measurements[ff]=0;if(fontinfo){measurements[ff]|=(fontinfo.bold_src.length==0)?0:1;measurements[ff]|=(fontinfo.italic_src.length==0)?0:2;measurements[ff]|=(fontinfo.bolditalic_src.length==0)?0:4;}}
if(fontinfo){font_style_controls['bold']['cntrl'].toggleClass('disabled',(fontinfo.bold_src.length==0));font_style_controls['italic']['cntrl'].toggleClass('disabled',(fontinfo.italic_src.length==0));}}else{font_style_controls['bold']['cntrl'].addClass('disabled');font_style_controls['italic']['cntrl'].addClass('disabled');}}};};FontStyleEditWidget.prototype=new VettingToolWidget;var FLSProductShowcaseBlock=function(editor,showcfg){var twidth=300;var theight=200;var thumbnails=[];if(showcfg&&(editor instanceof FLSEditorCore)){if((showcfg.items instanceof Array)&&showcfg.items.length){showcfg.twidth=parseInt(showcfg.twidth,10);showcfg.theight=parseInt(showcfg.theight,10);if(!isNaN(showcfg.twidth)&&!isNaN(showcfg.theight)){twidth=showcfg.twidth;theight=showcfg.theight;}}else{return false;}}else{return false;}
var block=jQuery('<div class="fls-product-showcase-container"></div>;');var addclasselement;if(showcfg.showcaseAfterElementID||showcfg.showcaseContainerID){var element_found=false;var afterelement,parentelement;if(showcfg.showcaseAfterElementID){afterelement=document.getElementById(showcfg.showcaseAfterElementID);addclasselement=afterelement;}
if(!afterelement&&showcfg.showcaseContainerID){parentelement=document.getElementById(showcfg.showcaseContainerID);addclasselement=parentelement;}
if(!afterelement&&!parentelement){afterelement=editor.getCanvasWrapper().parentNode;}
if(afterelement){block.insertAfter(afterelement);}else{jQuery(parentelement).append(block);addclasselement=parentelement;}}else{block.insertAfter(editor.getCanvasWrapper().parentNode);}
for(var i_idx=0;i_idx<showcfg.items.length;i_idx++){if(showcfg.items[i_idx].img&&showcfg.items[i_idx].layout){var thmbnail=jQuery('<div class="editor-showcase-thumb" style="display:inline-block;"><canvas class="editor-showcase-thumb-canvas" width="'+twidth+'" height="'+theight+'"></canvas></div>');var elements=[];var img=new FLSEditorCore.CImage(showcfg.items[i_idx].img);var lgroup=new FLSEditorCore.CLogoObjectGroup();img.editor(editor);img.targetdpi(75)
img.onload=function(me){var imgtag=me.getImageTag();me.setSize(imgtag.width,imgtag.height);var dx=Math.ceil((twidth-imgtag.width)/2);var dy=Math.ceil((theight-imgtag.height)/2);me.tctx.setTransform(1,0,0,1,dx,dy);delete me.tctx;_refreshThumbs();}
lgroup.editor(editor);elements.push(img);elements.push(lgroup);var tctx=thmbnail.find('canvas').get(0).getContext('2d');block.append(thmbnail);var tlayout=showcfg.items[i_idx].layout;thumbnails.push({ctx:tctx,elements:elements,layout:tlayout});img.tctx=tctx}}
function _refreshThumbs(){var logoElements;switch(editor.product){case'product':var edobj=editor.getObjects().slice(0);for(var oidx=0;oidx<edobj.length;oidx++){if(edobj[oidx]instanceof FLSEditorCore.CLogoObjectGroup){logoElements=edobj[oidx].getElements().slice(0);}else if((edobj[oidx]instanceof FLSEditorCore.CDIFMLogoSVGImg)&&edobj[oidx].xlinktype&&(edobj[oidx].xlinktype=='difm_logo')){}else if((edobj[oidx]instanceof FLSEditorCore.CImage)&&edobj[oidx].xlinktype&&(edobj[oidx].xlinktype=='image_logo')){}}
break;default:var lgobj=editor.getObjects().slice(0);logoElements=[];for(var i=0;i<lgobj.length;i++){if(lgobj[i]instanceof FLSEditorCore.CPathGroup){var npg=new FLSEditorCore.CPathGroup();npg.editor(editor);npg.setMatrix(lgobj[i].getMatrix().slice(0));var cpgp=lgobj[i].getPaths();for(var pi=0;pi<cpgp.length;pi++){npg.addPath(cpgp[pi]);}
npg.calculateBoundingBox();logoElements.unshift(npg);}else if(lgobj[i]instanceof FLSEditorCore.CText){var textClass=(lgobj[i]instanceof FLSEditorCore.CPathText)?FLSEditorCore.CPathText:FLSEditorCore.CText;textClass=(lgobj[i]instanceof FLSEditorCore.CMultiLineText)?FLSEditorCore.CMultiLineText:textClass;var ctxt=new textClass();ctxt.setProperties(lgobj[i].getProperties());if((ctxt instanceof FLSEditorCore.CMultiLineText)&&lgobj[i].multistyle_on()){ctxt.multistyle_on(true);ctxt.multistyle_cfg(lgobj[i].multistyle_cfg());}
logoElements.push(ctxt);}
if(logoElements.length>3)break;}}
for(var tidx=0;tidx<thumbnails.length;tidx++){var elements=thumbnails[tidx].elements;thumbnails[tidx].ctx.save();thumbnails[tidx].ctx.setTransform(1,0,0,1,0,0);thumbnails[tidx].ctx.clearRect(0,0,twidth,theight);thumbnails[tidx].ctx.restore();for(var eidx=0;eidx<elements.length;eidx++){if(elements[eidx]instanceof FLSEditorCore.CLogoObjectGroup){var lgobjs=elements[eidx].getElements();while(lgobjs.length){lgobjs.pop();}
if(logoElements&&logoElements.length){for(var nidx=0;nidx<logoElements.length;nidx++){elements[eidx].addElement(logoElements[nidx]);}}
elements[eidx].calculateBoundingBox();if(thumbnails[tidx].layout&&thumbnails[tidx].layout.logo){elements[eidx].setMatrix([1,0,0,1,0,0]);var logoarea=thumbnails[tidx].layout.logo
var logosize=elements[eidx].getSize();var area_center={x:(logoarea.w/2)+logoarea.x,y:(logoarea.h/2)+logoarea.y};var logocenter=elements[eidx].center();var tx=area_center.x-logocenter.x;var ty=area_center.y-logocenter.y;var scale=1;scale=Math.min(logoarea.w/logosize.width,logoarea.h/logosize.height);elements[eidx].translate(tx,ty);elements[eidx].use_pivot(true);elements[eidx].scaleUniform(scale);elements[eidx].use_pivot(false);}}else if((elements[eidx]instanceof FLSEditorCore.CImage)||(elements[eidx]instanceof FLSEditorCore.CDIFMLogoSVGImg)){}
elements[eidx].render(thumbnails[tidx].ctx);}}};jQuery(editor.getCanvasWrapper().parentNode).addClass('editor-has-product-showcase-block').on('mouseup touchend pointerup',_refreshThumbs);if(addclasselement){jQuery(addclasselement).addClass('editor-product-showcase-block-inserted');}
this.refreshThumbs=_refreshThumbs;this.editor=function(_editor){if(_editor instanceof FLSEditorCore){editor=_editor;}
return editor;};this.show=function(){block.show();};this.hide=function(){block.hide();};};var FLSArcTextButtonsBar=function(editor,buttoncallback,show_path_edit_btn){var keep_round=false;var _toolbar=jQuery(document.createElement('div'));show_path_edit_btn=typeof(show_path_edit_btn)=='boolean'?show_path_edit_btn:false
if(typeof(buttoncallback)!='function'){buttoncallback=function(type,keep_round){console.log(arguments);}}
function _handleButtons(evt){var me=jQuery(this);var action=me.attr('data-action');switch(action){case'toggle_keep_round':keep_round=!keep_round;jQuery('[data-action=toggle_keep_round]',_toolbar).toggleClass('switched-on',keep_round);break;default:buttoncallback(action,keep_round);}}
jQuery('style#ArcTextToolbar-CSS').remove();var toolbar_css='<style type="text/css" id="ArcTextToolbar-CSS">\n'+'.fls-arc-text-toolbar{position:absolute; top:10px; left:10px; border-radius:25px; width:49px; background-color:transparent;z-index:70;box-shadow: 0 0 3px rgba(0,0,0,0.5);}\n'+'.fls-arc-text-toolbar .action-button{position:relative; width: 39px; height:39px; background-color:#FFF; margin: 4px; border-radius:25px; '+'box-shadow:0 0 2px rgba(0,0,0,0.5); display:block;cursor:pointer;border:1px solid #CCC;\n'+'background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAFPCAYAAADDbafxAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAKTQAACk0BtZPkxgAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNXG'+'14zYAAAAWdEVYdENyZWF0aW9uIFRpbWUAMDQvMTEvMTfoMSlEAAAgAElEQVR4nO2dd3hVVdb/P+fclkoSSiihSxUICIKioqioFAsW7CLq2B1nLDM2lODYHV9ndPQVHBXBOlhQBGVsEVRUOlKVXgJJCEkgyU1y7zn798c6595zW3KDzLz8nifree5z7z'+'1l7+9Za+2111577X1QSpEk9QEmAn8D7gC8gA5oQAHgtv63BlzJFqqUQm/kGmdhzwMG8DrwgVVZigUiBRgBjAP+x/rvThaMO8HxFsjTrQLesipfBfiAfKADMMN+GGA68AawB7gbaAVUAtcBWcAzQLVVTgzF48SFwEpgIfClVaAPWA3cBvQCNhIWBcCxQ'+'G8LWCuEAwbCvRLgR+A8IDVendEHLgTaArcCN1sF6oAJLLcq/xjY7Lj3HGCsdf35FrBqoNbi0sXAH4FTgHOBtOh6o8XxIZAB5ADlwEjgfauwX4ABVoGpblj0O1gwHYabcK91zx8swKZ1z/XAN8BuRJeqLRABoC5Ua1Tr0C2WZSFsX4noQIsS6PE6vLAN'+'fq6DMhOCQag0IVgPJRXw47MwbTRMAPKAjsB3QFegP9DF4myG8+GVUmhKKTRNc+BAsz5u4Joh0K0QjkmDgZXw5eew6lXYsxCq/BDIAfNkaH0Z9DoBhraD48rhq6Hw6w5YZImuHtENv4NTYSYkshMFoB+EqQEoXQZPdYTjgOFIUxwODLaesC9wtPX7mAE'+'wagW8GoDyhTDV4mRbErTEhCAU+Ax4KwCrfg+jEN040aqoK9AGacapiE1IAdIRvegA9JoKl1RD0UZ4uyV0QoxbXBDxxIGCWfXQ5nS451spvA7YR3Z2Zf/Bo4/2+twjlaZ306CFQu3VNH2tUoEFK+a/tRPRKw+QOQF6TYeXSmBJb7gP2G+JpmEQCv5sws'+'XD4bqf5EmrgeIBoy7O93pTnlYwKN4TAQpNvWVo2j2rPpm522J/6rXQ+x8w53t4cRT8E2l1gYQgFPRQsPheGPeUPFE1UHTM6Ktu1nRtKlHt25WdgVFRFQ2mVCk1YcWns76xrk95FUZcCe9cCOfMhbWINTXjgjBhTjGsaA+fIBZv9+DRV96CrhdE15TSv'+'wtZl46g9LH3MGtqo0/XaqiRy+bP+hFpaWm74MUaSO0lYilCWkpkB6akHZ84Bj5CzO7+fqde3AtdfzAe7zPOHIyW4iX9pL7xTqcotDf7TZjglaLxz4dHu8OYgdAeyMTRuYVAmHBhNSxYKVpcA1T4Un0PE6cn1LxuvJ1bYyoDb4/28UAAHOWtSb3RLv4G'+'2FoLy6eI+W6BKG8kCAVn/yzGRQeq+px+fjvQTotXuuZ2g6ahDBPN44l3iVynuM7xN1gL84bC8Yjptt2AMAgder4NW5EmVJ3mzRjpLNDVKhMtzSeP5a/DOFADhkFgT1n4mpx09Kw05235+WdelWs/Zy0szRFz7rVA6GBZMSV/ct+X1hAA6jSNTk4z1ur'+'WcZDhw9hWSuU7i6j5fj2e4T2pWbyBlP5daHHeMLTsdGq/30jlh4tDzNB1VxfEZKNgpw9yrXp9FgjD5kS6AqPIYpsA0SIeqfrbdbh9PvROLcm+dhTVn6/i4LyfIGiQeeUI9JwMXG431d+tjxSJZoTKqYFyl+iDbgEJi0ODKkDrL7JSgELT9kSAKPyZmh'+'824klLg+xU3D3bUb+tGN8JvdF1F5hQ/uY3BEsqIkCYjnI6QBsTSq16Q06R3akoBcUnQ8s1sAvQlGkux2nOTUXF299Q9cUKfD3zCHpAeVzU7i3DePc76tbtwPRHWGSAcndxylb7Twq0N6CYsL9BiBMI/9ecLS6aDri0knWLgH3RpQZLD1D9/XqCO/Zhd'+'m5BcPEm/Ms2xQOAUny8bNn0gOPQcVWw3gJg2EBCIA7C3CHSTbsB77Jlyww09WhMyTb6yjqoD4KZcMhQ79bdDzsPaHD+D/C1BaDe4kgYxK/wSSsYOl76/lRAb1HtegmlLY8ufeTR8PpNQeadvoe/X23Sq10sAoV6Zsm8V7eE/9NXh66/g3UWgNoYECfA'+'3kp45xlxWDMAX2HhjDqXoY/XxH6ga3DR8SYXDzeprtfYvU/hccNtZ5kM6+HkiDZ7xbCjJkeC4pkieH6PWMpawo5wRAemvQPdL4Llf4Wb74WvEJ0IDjt/YqtgLa+icW4i3lvkV2iPrZj/+qM4FE/BGAUvD4JzVwuIXYiCBuP5E56f4eYecN/1cPEbMuC'+'pstk2eNyVI1D69cDZiBdl068K3jeU8cLqT9/cFcWBnsC3C+H2U2AHcAD5rgJUPPdOAzK2wMuVsP6P4kumE2fAMuz8ia3yz7mq2/AJE1ITsUVBTxM27ZLuewgwFOlFI7zteD6mKwPabISXa2Hvv2RAkxEPSENkiaDEAjAI6bi6IUofYn1D3rYHaPtvuK'+'cWSkphzjswEOl4NICN5F61krZvbKbVqKjK+5nwiQmbF8KlFgeOA46K9zANuvwWkNxjYdgKmB6Aimr4tgTuX0PLaWdyZQ0UqLs4o3wP6XcF4IEg/GDC3l1wfzdx9Y9Dxqnd4gGwQcT1tqOApAM5PSH3QTjhZDixnNxRg7k5S6HRhmqWMG1POgfm/gALr'+'4H1+4RjJqJ8+xGfsg7HoKcpILDQe60naQGkPUrasNb0nDqfPtlXsqzkbbbe8QFGKaEemFrgINIS/DhM9KGCsMlF2A9IvQxaj4Zuz8H2ZeGKbEtYa/0OJqr8UEHYpBHZFds3KyJH5EnFoUIg/q+pSW3/P0ZKqYaaaVzyk9r5S7ovfYoTdyyi83cKsn9L'+'/U0CoaCPAZPXkLs1lQcUFKi23K02k7PhIDyySQxTyHdMFkSj4lCgK5hkwjoFX1ZBrwCBbT0oUwD9KQ6WE9xUDj06wdx62FgEd5wbNcpqFEkiTigYZMLPBqxcBFd5pA8Y3gZGfETbdz+k25I5tHnZIyZ9EDD0Zbi1Etb6YUshjCFBxM5Zf0IQCs5XsG8'+'H3JkulZyA9IJ9kXFrW6AlEt/KRuJR7YHuHhj4KRQEoOIniWtm01ikJhqEgotN2LNAwoNDkB7waKAdYsY9CKttW2HbDduYZQGdn4FL/LD3R5higYwBEmEnHDGK4xV8/DZccoXYfpCxwv4ex42hRcvWl6JxJmhHK2irQ6WCzUrjC3fA9daSf7+20wLmAT'+'Lvh8EF8PZHcO8ECVFW4IjsxoBQ4FWwfhM82QuWWdcVA2WDR18xWtNdzykZSyaiGoX2eI/0msdnz55tWNxK/xIuOREePQXG/Ai/Iv2KigvCgD8F4VSfBEdTgL1A6eCxE+8BHiKq6aUO6Ip/7fY4br/6zJdee8Hi2bP9lpgySuDNvVCSD48gMfBaG4QzN'+'ODW4a4P4AVkOFgJ7B88duJERKYRADwdW5N1zemkj+gfhyHa6Prq1Fese0yg+nt45Gi4qL8obwbxgiTAaUHYcZmgDAD788+c0AaZ34ih9BOPRpkm6SP6xTuNgssGj5l4sfXXGA8r/bDqYTgVUdzYIIkJ5+4TN9+LyKza7Um9ExFLDHk6tkQZJu42LdC8'+'8WcsNB1nqKneD/OGhZ3n2CCJgiHfy3SCAVT36NHDQHExCUgFFZimDKXNGIdJrlH0O+bsKwfaf6vg61YSM/fhMGLOSE3778QTCgD+Fl2HdEcCGgD4+nQibVhv3C0z5bG27sE0Dep37EMFTfQ0HymDupM6vHcEEN1wnWD/3gc7vOEQsx0kCRsPDXK/FjG'+'Ii+bxRkTEvF1zST8jHyMQpHbRBqoXrcUzsBPVX6wgJb8rWZeehKlpGEXl+BdvDHNDIv4APA2l/4LUjuDbFZ4zixDHwZ7iQ5qAaSoVwePq79ZDvYHb5yPlpN64WmdR9sbX1P1SROZFJ6B5PbhTU6j+fGWkSByG6V+QosDYJQ8a2zoM2DtIJteE3O7dzs'+'LMgzWU/eMTAtuKcft8eId2x6ypI2VId/DoqEo/FTO+pG5DxCgQTVNF9u86yFNieyIoJA4Ttg+BzsASQF/5yYxNQ8ZO3KpkzABAYPd+9v19LnqLVGiVAake/MX7qP/rRxj7q0RJo0hT2heOyvrWw07C/mgkJ6ph/qBwkMQDaErxfkypgHnAj7m1FKNTJ'+'qr4IEbZwbgAUNryZZ++vtlx5PwiMQMm0gAiIzU/w7zWMPQ4GW2nArrC9RSirDHkc0OnYA05ZmyYKIQBNTn8mxQdxr4iU1JBHIMhZ9/hPgDvbYV9A+EphG3+IWOuHK80/X0n4POOVdw+2iQ7DQwTPlqm87f5GtXhqTU0xfPLPp15u/3fgLsDcGYKPGAB'+'2AEcUEqZTrNt/AQPHQ0XXRsevLqWffrGHA3uxNLyId0UnVvDnKU6MxbqzPpW54Afxhxjood7l3drM/x3O7jQRoM/vSWTtB7CU5YxnADwboPHcmDcKXDZSthk3aCGjJt4qlL8DRnoJqIShZqyYv6sadhdNXgUfFkJK3NkWlJZXCgHjHhOjZYDLTbCuwZ'+'4x8CNK0UsMqFRUKAP+XHrKKWpC5A50rYorRJN/YrS5tb5az5aWzg7NAujRMn/GYAObeGucuHuXqK68njunfsC6FIKCytgxZ3iX4Y6m2RJQY4JnwegcKyEB4Yj/qkdVqYhEAA+HZ79At6rh7L18NBZ4tQ2OqZQ4FJwnQm7N8Isl0zmj0Qexp5HD1/fyO'+'CnH/DF8fDOPljjhx174K9rYUS/cO5EiOphkAGTTdgQgOVj4R/I/Mm1FojOSKcVCbqRwc9mIPMH2Nkayu+F6eXQ6Sh452c4GITtAVhhwDYFfhfMK4dur8DTHiieL7agNaKABxB7E4hXUYy37aA7LORfW4XVAs8CO91gHg0bLoRf3oF+NfDv7VLRFOA5Y'+'Qx1wJnIZO2TSIuoISpkoJRKmMTRAcl3mIQo0i+ILPcBjwchdzWkrZagaC1wD/C/iDtfaj15DaIPsxBRlFjXxiZyJNCJtxBfsC/Q3QIyEonQ/xMxXgOswtsCF1mVXIIMB/MQZ9mHtIovkentNKIUO+7gx6LuCEtTCQe+bkUGQ/uQKYk5VsU1FphZiAju'+'Q/SpzHpqH9IyKqx7K2lo8OMgt/X0CrGY9UiqykwLVK0FqNICMRXpmPogQ8ffIYkbddaTpyLOrd+6PiJ1IZFOGIRHSTbqz63CU4ANSD8QdDzpdKviMkSnKqzzhgU6QFTuhE0NtY5o8iLyz7QKqkaaX50FpI1VaS3SSfkJ+6wJqTlw5qRmEDY1g7CpGYR'+'NzSBsStZ51ZFuOBXQ09u00XoOPL2P7vO0VIbhra2tqa2v3r9s85KFexG/I2KYd7hAAGh9T7ugc6ov/QE0bQKxkX1DoX0FPLJi/uuLkgXQJBCDx159MagZCDcaJqWmayWpt0WlLSSkpHRiyLiJV4N6JxqAr3dHsi48IfYGTbtBta19h4KCpMpvdCpg8L'+'irh6D4kOi4tKbR6sbReHq2p+7nHZhV/uhb+7bbXRHc++uqhY3V0RhSTSn1InHGC54OObhzs8FUpOZ3i3MraKgHB509qWfSIBT0UTIaD9GxZ08cqsGwuDdmStKQUiZ6VkI18boMM5TwpcCzhZbXbSV7knJw1g3wHZ1n3cigM1MImN+z5v0T2HkbgGFo4'+'zQtvpKbFdXybZiYFTUJn1JpjENi5Syky4I/ccYpbpT5OF9eCttGg0wtZX1N11OnMzj3OY5rt5x2Y6dZIV9NI5Tdp2el0eqO88i57gxS+nchsLecwO79YATxr9yMOzeLrItPotUfzyVtSARD+0yYMMGlION7OvX4iY7693Ryr6Bd36+taLEbODCEouIW'+'1OV5MOjGvtJx4k8GQYWieWZlDZoJvqM74e3dHtcny6l8bxF63/ag6eT8fiyax43b46Fi05dOEO5dB1pkabD/e7avP4VtHd0olc+uDadKw9DcGijFprMW8/LMFAJ9bqTyD4h7Xgtqv9OUVL73La1uOxs9xUvqKX2peWIDxsEqss86Ftw6bp+XA3N+wKi'+'sdoIILh7eqYIFMJydYz/g3RWbcS06jaoXkYf1uwE02LeLfX9sB99+J5bOJ4f1zU7DF9hdRulT75Nxcn/0jjm4jmqNcbAa06cTXLubysXrqd8UkagGsJWCAtvNd+Xg7/R3+KDKYR5CGtoRNtdB6V9hyK0ydnCZmvGRrvQ/O0s0yquo/OgHEVG7dMyOLa'+'h6tTB+CBFQmvZx6F4YZcLGN8N5OgFAOe2EWQ0fnw1nIZbRtzKt7sd4eVYhqjPQ6o2EAICAqdR0+48GV++BBYhpqMXKKnCCUK/Asx1g+GMyqE1n9mxNU+oPxBnAdMhR3DLUz7399nNS7/ggNMX/rJo/8xcABSdoMHyMjGENZPAUtMBFkHs7PJABZ/eAa'+'8phO1B1zLiJt2mK5wC8bsWNo+DKE03cDqO/Yhs88qHOtlJ7VlH7PKtm+9jCwsKgNcH3zTZ4rzt8i4hjJ9ZQM6YXbQ2Z6+BfVVDVXUIAJUDd4HFX34BSL7hduNPi5qJDwADJA9Rm+9JrrrYm4lAw0w+kwdOIqHdb5QbicQLAdTN0eQYWbIcvh8DUGlHU'+'+iHnTOqjDHMqEkCJ6U+ApSY8snL+zI+synXgCRNGDYdrfhLjtB9JmQ5FbRL5E96rYcCzML0eyv4Ct70A2yzk6rgxV7QIoJ+idK2rbiovmrYn4FKLV8+dtdUuQEFrBa8Z4BsP980TK3zQ4sJBEiy9cZIGnO+DuUslE6BsCzzyaDhbLKEzpCDLgAdMKN0'+'E093wHnA7sgrCzs+NqSwRuZEc69nD4fN3oH1HONYPi2rhSw22G7AnBZQb2uuQ54YzXTDiIPz7TNj7gyy1uQdR8J0WF6qJcv0aAqEBLwNLEQ5k9YeNk2DEaMjsAOkpkK2DCkJpDexdA2t/B4Etcn05Ess4GlHIbUi4KGZuIlGkBiRbLBsJIWYD5hq4+m'+'7w3C26EUDiU22QPIlXkezEcmAu4Zyrk5GY1hbiRGka4oQbKESCZUHCUZdXkFhmvXWNso6fhcg8D1l85EfiWbVAD+DvwBVIYD0mlpnIxxyJNKW1FvoyJDZ5FxK5O9kqbAnS3pciU1dZFucOIKyvss7bWetFxEl/S8QJHZFnK8KxqTTgbWAy4ansCsKrV'+'+YCa5C41sOIEvqtOjIQsdVa19c5udGYt11nPXE9EhQdbf0/iERzD1rXHGuBfhsJwB6DrIKzI3YG4Zw8+1ijnLDPaYRT2FxIqPBUJOX1n0jmcS0SyV+IcNCebrSf2tYBZ3pcTEXJkh0UbYmIwyAcvQfRBy8iArtSP8LFBoeETZrNIZwWac932NF82xtT'+'SGuy2W1zsUFqKggnmOhKErK7URDNwVSLmkHY1AzCpmYQNh0RIJpiMT2IqzYE6SWfQ1bAGMiq2jRk6lFHTHjMGs5DJWdX3x+Z8RuHZI11JJxxmo6sN2+DdOeXWEBcJBGca0gcw5EkznZWRb8iT12JrCt2xrL8yML3fyHDvB+R3rYVsi/BaTiWZSQDIhv'+'JPHwR+L31RPYMYCpwAzKS2kH4Sb2IL1mPJJPac6qVwNWIt/0yMkscs6wyGoSGuGYzEO/4ZMJL9Uxksfs8RCyVhNefz0Cc4CDi7tcjOhGwwO1CVuo/ZnEnYjQbT15fIGzfgMz8ziW8PqMjIu+TgNOGwYYUOLkcfgB+tq4ZgeRNHLCAz0Qyig4iS/7t4E'+'goAB9v3GEiLtl6RNmuAv42AepvgH2ZUN8P+qfJE4+xC6qDPaWw6AUomwkpe0WM1yEt5oBVV4UFNMLbasjb1oAMF3zwNXx2AtxgwoEtsPBNWP8eVK63CuwL3rMh70LI7w0npkCL9fC3oXCGAbcgulSBDB1sz6tREAAUQedWMCcAqZ/Ac5fKOMMOCdQTX'+'khiEs7d9r0EJ14GN+nAH+CeV6XlFCHDh/gZpPFIwbEm7N4DT6eInE9Hhoa9gbyMjIw2HQcOz8vrM6wV0lpSkVbUBujqhfyfYJofyl6FK5FWF9ckxOWEEo3+7heY3FuaXCpwoO1R+ar9UQMu11yuczUNZ4bwQWA+pnpt+WezvkAUPhXIngMTxsLk5+Hy'+'u8KhoobHHUra+A97YFYH+AxpTmUDz7j4PJcnZYr1tA3RVy70K5bMn1Fs3Zv1E9zaH665Ci54X1pdRHggHohn/NAhTdp0OlA66KwrbtNdrj9GX5s2vA+1q7bFW2G/PehSp1qRGzeQtQum+8HsCX9Css5CN0UmXsleAy/cCrcul6coHzjqkjEuj2dqdC3'+'u3Gxa3nAWrqw0an/eHn06W1faqW265c8q3ry6DgikwYrx8IQGy76R1PzQwDhCUUy4qRLefln+1nYfcLLP5fU9GV0DQNrxvVDKJG1wj0R52/kel2bnbQcfga37YOaVsl1IDgnytjUNLpoteqADlVl5nSeRYOLNlZuNaZjgcYXSqKNJadx+4rnX2ifrt8'+'OMrnCKR/QqtPpSB1hP68s+odePy2nfdgveVItVBzRdGx+3dIC6AMqUAJxZlzA7NdUfNMbYf66Dn3UIvCZ9UjqWxdYV5C7gqCfP4fKhx3N9yjDypgL+rv1GekHrbhfgG9CFzHHH4uvXGU3TqNtYhGkYBEsqMcqrcbXMJGPkADLOHYrmDktZU2owCKdfI'+'++Tq7mg3VLO/Ms82hVg5QK7gZQ9ZKYABNGpwecB6jLbt2njfCRNQcaoQRj19Rjb97P/5QV4jutG9dfrSR3YjaxLR2C6NcyiSqqCS5wi6WD97DaDQYPfJN8FpPal+ETYKyA02LGMda/lU3x5GnWqhOLpQL0yAzVOdahbu4PAtmK83dtjdswidXhvKt7/'+'Dr3UT8v7zke5ddxuN2XzlhBF9gTZrnH8UvoWA1q1pEZ1pqwEZxr9EIrugaIHEK1NA6or/J7y3BSC9jVKKfa/9BmZZw8ldWgv3PkdUb9swzOwC3qKF2P3fso/WRIz6aLQdgFoUF/DrlFf8VrBQcyahyl9ASus4DRWGmIbXFj9/eCxEz9HXLkY0rJSCHb'+'MQK+sRyuqSriywTT1YSs/m+Fkj0ZoZokAEIyY77CQ+QnlTao345YMqMpaVJoXqgMJAQAbVn42Y2n0rVY99qRL3F4tZNOPSq+dBdq6eKVnp8Gp2QcYlO0nUbKapsz7iB80iYjgNDruGDru2u6GCi7GWuvh0uGqk0yuP12RYrms63dr/OVDjY1FEdJ9av'+'n81+9prPykQAAMGj1pqK6bHwPtuudC99zYhzNM6fvrgxqa4vnuGf47rGVYhwcEQP6YKzq6NddjSHg4/nhFYxMmk5d/OvPdZMttEgibhp55TaegxxivK3WsQmsHWo3S2KyZ5vwW/p0LCwsLG8w6jAuiOXBmUTMIm5pB2NQMwqZmEDY1g7CpGYRNkuLUh'+'J04fszj/jVtuahFLfW9y5icX8wXjd8Vn0I9eFO6cgW5BaewmwIUBaj3+xIzyGgqiKS2foiigLdOgqG6Aq8Zm4ZwKNRQ6kIMadD77NW4PixlaQuT8h6VxARODomaII7OSEbIyYelYhyLnpIEkQGsQObEDxs1BYQLiWfHXe7/3wLxBBLfPuw2xQbRmGJe'+'j2zUe6KSxWdjkKDoD8BcLYlcqaTRJKCRwK4X4FQFXyj4RcGTCiYr+FbBAhW5xdgh1d2QOHoAuz+UCvcpuF45wo1KAjdPK/haJbsNTBNBZGuwbgF8oGCXkh1ZYgsQe/VvJTk2vx2EgowVtPvHEtq/NwT3t+/DYgXLlGOzggRAulic6pJ0xbIDZSj6EwL'+'xNd0+bsOflIuH1KscXadgTbLyVvCwgneSuE5bRJdXnuX4ra9wzLpVdLgsou8oJr19KekY6Kymswu4TpO0pmTocWRbmVMaua7XTPLH38HortdxXt+N5IRMvg7Qi5JXnuGDmif4vHYiK+drMqWYFGkSXioAnlINj/KLT2R7tQuTXKrJpTq8z6mtmArcKp'+'m1G3HIUtLvlWSyJromvwS98nNaly+n3XMKMpvadyQDJM9qTbdEHc9WMKUeii+SvKtWoXOHG4RVYQ8FK6yWNV3BZwpKDXipa5wO0AZxKButNQZERzZcykPChN9pMpc6AZlHCz31Ibl3h0gdkEzE3tEn/iPiSEBvA3G3Pf1vgRiLbB8Rt9X9N0CkIukOZ'+'ya64D8GYnk7Js7vwbev5bE53828hq79TzXR3L+czE4KUK6HUB/24IdkQBxul81X5ZUe0tTA5UpuXrxJ447GSIOdy9fwYs8yLmhTTV3+Pu5K6r7miK5FzSBsagZhUzMIm5pB2HREgIhdiXQY/c2GyNldHBGcOCJANNaVF1rfg5BczJXIKscZyJIqrN/Z'+'1qfA+i5EEv6i740fcrS9m0Y29S10/B5pVRbvmkEWqJEJ7o1b76GKY5JVeKH12z42A+FA3IoT0aF6VjOIz41DosOpmDOA8YhOjGzKjYfKiUmOimYQVsZtiPIVWucjX+aRgI4IHzMuJ7REGwwcRlIqnNmUyGz/d2y3RRGKuVdLH/s53Xe8wjErl9LhocN'+'d2TpaXzqXXvOX025tleYLp9c6jcan9FisMUVBgfozZ+xVstfZYSEFHR7l5J1QoFKYrP5N9y/iGqsgeigfRkel0pT05sYpZxtZWQC1uKnClx5G6ODEr2QfM5+e37xF/xVFZFYouOZwIVCQt4mWlS8wtPQNBqxbS9tzI8PKcfoNBT0VbFESn/xNY1YlW4'+'38oqwdOULHGwMBcDX0Ww9fKViummgFrcp9Cn6voNgvO8VFnk8GBLIK9rnj4MNi2XhxhVVojwYqdivIV1CgYMd38GMHWWhyfiIQERYzgWuXDnzugnUjgQWQZsAJXpmc22d9/Eh4KAfZ4WXnPPj2JsjeJeuDRiDrymNAAEmBuBdZBf06EpvMA6alw8aWk'+'Ho/fFgDnu8h9z34uBN03CVzJIuQ90+OQ6YiHk8EojFxtCT8ojKbJhK/1byA6M0chHs26cjikpi86mR1YipwedSxvyDrhZ9HkgFtSkGWc8eztJOIE3xPFsT9xPoc/0JyM/OQhc02eSkWjEkAAAiVSURBVID5yPRlWtQ9HmTVTMy2lMmAiEffEv8tFdcj'+'8euhiI/RaCf4W0DcjOwK+jphcXiB2Y6KxxEnlp0IxBHh1Px/MfgJUVPHqE3h8BHBiWYQNh0RIJLeuFWBOyizwOcAvXRZG9jShHITigzYdBDmvQuFtzvfMdxQmdG9aCIQCrwm3KLB5CAUbYGvFkPZOvD/AvWdIKcHpA+C9sfA8enQsgKefAJe+Kus92o'+'URIPWUsEJJmyuhk//LKslJwEXIDtvdEdW1bZC+pGewPBr4O5NsNwPO1bJFGTC/IoYsx1NBtxowt45cCPSk45C1v3ZO/ZEs04jvD9Fp+dhSg2UrxZ/JN4+Rw2DMOAmA7bcApchn26E32jjAbx/gwnToOIlqPwfAZqOeFsZiO/Q+j64oBJKPheHpiXS3f'+'ssoO6EIBSMMGHPLeFZXXu/IQ/hl5Om/S8smgZqGqgXZDlvK2Rf7jaOT9uH4JxqqHhaXjNuv0Q5HUiLO/ixvONZs+GhF4W1hcgku81qt/0xY8XhIfy2dvujPQxL58L918OUPHGQPQ6uArHL8u7ww8pLZMXSYiSRwwZgFxx6l4MDvHMXl+iPeSl8XANrn'+'hPvqoXjYSJBKHBrcOd9sup5D7LZTTwAbmTH+WhOhCp1fOxjgU/h8bFwRprsYxOx6D0EIggjg7DjOTm22ipEiwIQetVSQHbnAcCQNeamFBPzMQDzOlgVhN03wRmEV9/HiGPclvB68QrCa4KdQOz/GHKdzYJtURUHHB/7f7AcFpwrG4Pn4uBkCIQGAwpl'+'sfFOC71TFE5AACooaZE2lRNe1GxXbH/s48FSWN7TajVOEM4Xy7RfLjfsk4eLzwHrnOmH7XYOVFCyRAzCoQTTcb1u/Vd+2N4i/OqukF1wciLnFwFREz4U8ZotG4ACjLUSJrZBbCEsf3uJt+H4NoBgNZT6pHXY76yOBGHA/m4ylgw4zrmINNHKLvw9sR8'+'A3BvetcvZIqJbi9ELsg1rn0UniPB7PqG4t1gy284n4oJdsKFgoSbsTRTRcfYHKhPa1Yq4IzbWcjbRtcfJu+Yzogpy2oNoGwBJBkwBlQpDyoRrESvtQyAOwseDZWOLXMKKGC0K+1sBZq0MjCclAwBQKTD+PVHi0rgg3oVF6dDycklPssWU0CreDdmpMk'+'KfNC2JlxfWQT8NcguEc7YZiARxO9RVwNMPi/PSJg4AJxB6yM5eU6zPjMZAeOCp1TCtViovI17rAHgFXsyDds9LfCmuI+Kg7AS/YygI5ynoe5pslLGaqPd4RIC4Bw5ugeuuhzvvFadWJ1LDQ3pSKz3iN9YnYSa7gqN1eGUaPLpfytpCpK7F9axcq+HBC'+'iiZLDv6tUfMbC7iuGQh8Qd7qW9CN11BbxO2LoUHETF3se5LA1o05mP6voCnqqHiXdkFsKMFpA3C+gxEXPY7vWJ8TgVjTNi7VHJ4L0f2ufFZn3Qgu1FHF2j5JNxWASV7YOErkrTV3sEN27BFdPF1MMCEuQZs/odsD3M58pIa27dMQ3zQnJj4RJxxRwqQ'+'mQc9noE/jIexASjaDx9XwNo62OWHkk6QkwW5KdA/Bc7XoMNamHYSrKoUW/ATkgCoiHKOlFL7oOHBj806D5DZAvreAKPPhd7dIbsFZHsh3YADdVBSJrHLVQ9AabVUuBrJuwsQ7pF1BwiXUqqkMRBewk6p7db5EAXNJdwbughvjrMf2Rin1FE5hPugCCd'+'YKVXcGAgnABu9UwljOjRi+xWn6Xc6SBpADIj/SzoiQgNHBIikYphTYdxUGRIe9nobsxMAFEhLWIMo6YAC0f7DAsKmZMTxHGFz/dLhABBNDYKwRHCJ49C4guQ8qSZRQnE8Cm2toV7rqHsq3TBgcpyZnKZQUuIIwLQ4AACygvBqnAHxIVNcEFMlOnNeA/'+'eNmiq7dh0WihFHgQTD1uBYfZCADiCtZcehVNyYOKYnAQCkA3vtcIglAkSBuPDnNOH+06ZK0Ow3UUgcj2pap6B4w1lNLKPaBQMflLehJU1xxRGUTfdMErzKMwEdBOqNBKsWkqV4ink8EjRr/GYYNUX2tWsyOTnx2zPYC+iDvGOwcXLxBA+yNfrwbwehk'+'YfihqSuNXgNYkEcEf5EMwibmkHYFK91FCGv4myUlARUuxx2EAXSK94be2lC+s0gmvIaxzApNKayAAmWHwrNUVNUKNHn0HRCQyG+ZrILW51UjORahOjQFbOAIrQkzbWTNG6kgH2HBwTAFF5HEnmSpXeZwkfRB397E/VwC444dwNUjJdb45347SAeYA/J'+'9aI3cD9l8U4cHmNVwExkH+ZE9DYFfJzo5OGzmB5uJb5Y9uLl9w3devhAPMAetDhBVS2xGA4/CIApzCJSLG8xhbmN3Xb4O7CwWPbi5fbGLgeSC5I0maZyDQVclEy9zcleTmoGYVMzCJuaQdjUDMKmZhA2NYOwqRmETUcEiP/G7iyN1n9EcOKIBxEvrXF'+'k1P9CZD+8QuuebCRnZnyC+xPU1LhOOC8YSezS3GzC60RnEDtKb7CCUP5EE0HYa4QLCe8KaB+vIDa/plEQhxJW3kZ4/XCF45j9nWzyVySSxi5x/B5J/JXShRYw+zvR/fHrPwzi+CPCgWxkXbmyvpMGERJHGWl5RWTOqMbTtjXVr/eg/Bnr1KmOe1Yimm'+'+Tzfo51u+VyAo4p0hC92+g1aUm2u9dqA2Z1N3ZgarKEBKAr+g6vy13KxcPqSu5oETJtCQKWinI+Q2fllY54+/mjG1pPKCO4abAQrq8EcOJYjI7FJMJuNhLRhvgLQVvNcTKZMmWx0raU0MqK2jv3k2L/vb5EIgOVG7qS8mAreTo+RQXIVHd95DtwX5LB'+'6Mj4edr23HwMZ1AyzZUk0tV+M0Stjj2kdZqHbkzl5C3aCvZV/2GShPSOlr/aSGdVy6n/YJS0vLs+o+I0MD/A2xT7VEHaJHFAAAAAElFTkSuQmCC");\n'+'background-repeat:no-repeat; background-position: center 0;}\n'+'.fls-arc-text-toolbar .action-button:hover{background-color:#4D9BCE;}\n'+'.fls-arc-text-toolbar .action-button.switched-on{background-color:#e3bc34;}\n'+'.fls-arc-text-toolbar .action-button.around_top{background-position:center 1px;}\n'+'.fls-arc-text-toolbar .action-button.around_bottom{background-position:center -37px;}\n'+'.fls-arc-text-toolbar .action-button.arc_bottom{background-position:center -75px;}\n'+'.fls-arc-text-toolbar .action-button.arc_top{background-position:center -122px;}\n'+'.fls-arc-text-toolbar .action-button.line_path{background-position:center -310px;}\n'+'.fls-arc-text-toolbar .action-button.toggle_path_edit{background-position:center -161px;}\n'+'.fls-arc-text-toolbar .action-button.toggle_use_path{background-position:center -198px;}\n'+'.fls-arc-text-toolbar .action-button.toggle_keep_round{background-position:center -232px;}\n'+'.fls-arc-text-toolbar .action-button.switch_vertical_shift{background-position:center -268px;}\n'+'\n';toolbar_css+='</style>\n';jQuery(toolbar_css).appendTo('head');_toolbar.addClass('fls-arc-text-toolbar');var btns=['around_top','around_bottom','arc_top','arc_bottom','line_path','toggle_use_path','toggle_keep_round','switch_vertical_shift'];if(show_path_edit_btn){btns.push('toggle_path_edit');}
for(var i=0;i<btns.length;i++){var btn=jQuery(document.createElement('span'));btn.addClass('action-button '+btns[i]);btn.attr('data-action',btns[i]);btn.attr('title',btns[i].replace(/_/g,' '));_toolbar.append(btn);}
var events=FLSUtil.mobile()?(FLSUtil.wp_mobile()?['pointerdown']:['touchstart']):['mousedown'];var elements=jQuery('.action-button',_toolbar);for(var i=0;i<elements.length;i++){var where=elements[i];for(var j in events){if(document.addEventListener){where.addEventListener(events[j],_handleButtons,false);}else if(document.attachEvent){where.attachEvent("on"+events[j],_handleButtons);}}}
return _toolbar;}
var FLSMUltilineButtonsBar=function(editor,buttoncallback){var _toolbar=jQuery(document.createElement('div'));if(typeof(buttoncallback)!='function'){buttoncallback=function(type){console.log(arguments);}}
function _handleButtons(evt){var me=jQuery(this);var action=me.attr('data-action');switch(action){default:buttoncallback(action);}}
jQuery('style#MultilineToolbar-CSS').remove();var toolbar_css='<style type="text/css" id="MultilineToolbar-CSS">\n'+'.fls-multi-line-toolbar{position:absolute; top:10px; left:10px; border-radius:25px; width:49px; background-color:transparent;z-index:70;box-shadow: 0 0 3px rgba(0,0,0,0.5);}\n'+'.fls-multi-line-toolbar .action-button{position:relative; width: 39px; height:39px; background-color:#FFF; margin: 4px; border-radius:25px; '+'box-shadow:0 0 2px rgba(0,0,0,0.5); display:block;cursor:pointer;border:1px solid #CCC;\n'+'background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAABOCAYAAABFccTjAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAJ/wAACf8BB8w+RgAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzI'+'ENTNXG14zYAAAAWdEVYdENyZWF0aW9uIFRpbWUAMDUvMDgvMTcOLkTKAAAC/UlEQVRoge2ZP2hUMRzHP1d7RbA66KCg4hWtiC0UHaToUKyiIAg61M1RRKiuoouDFp0EETcR1EkQ/0wqIi7qIgdFhyJYi5yliqW0KGq1XhySK/dy7/deYq93b8'+'gXQrgkl9/nfi8vv+R3OaUUWVBLswEqCiC2AoitAGIrMyAopWoK8AFQHuUzkF+I3VZh3F1gm8e874A5H5BUskXa8juBIaq8VmOzASAbgRn0I3wG+ik0GqQATBFdT4+AJY0GKQJ/gZcG4pWpjzUaZLcpFwzAFuAosNb1rdmAXmCuGgNGY9qfm3q'+'PqcvA7bgJJJA3wAoPkN9AO/BH6E91swRyBO0VV00kQAA8BLqAj9KAXNyayOVyHgz/J9tuZmJNALGVGRDprTkIbPWYZxQdsSX1AmeBAWA2doSws1aClGuZJfk8ct6M2yzZlTzSBaxOmNjWJMn7SOp+IIF8MmWh2ocOehW1ACeBe8B4ZGSDou8L'+'mhx9C2TkPAL6hDZtIB7TpBNaRZ3AGRLOrFLQuwz0eRgqAsdxCPfVIDUNWbjXxHqkGcpMrAkgtgKIrQBiK4DYCiC2AoitAGIrgNgKILYyAyKd4sfwO8V/BZYmmNkFlIB1kl3pEn4L6Pb4PSXgV0J/t4EoIFzuJZBzHhB1kQSyEujwmGcGeB/TP'+'ohOzoyYz+3AHeAG8CQyUlgjb/FbI2VgUwzITdM/Yeovph50vfv2ofNerpoGrhNNygC0odMQ/VVtV4FTrnffeioPPEV74opkV/LIdnRew1Xj6GyQpFagB501mAeJ2BRAvgPLPEDKwHLgh+sXbLvSW9MLrPEAmUqBWA8cAq6hoePJFnmNFNDpT4'+'XOJrbE2ZUezX7gsIexSfTfqT+t9g7gNbCqqu0+MKCUir5hgkcqfwb67CM9MYDDpq9oxg0jpDclj+TRu6Cr5oBvMe0HTF8/cBqd398LPFBKlSIjG5RVvIT2xPzu6xp9LwI7PQyNACeQs4rpv65OWcW088gOdLBrk+yGrKKtAGIrgNj6B3MBB6j'+'jN0I5AAAAAElFTkSuQmCC");\n'+'background-repeat:no-repeat; background-position: center 0;}\n'+'.fls-multi-line-toolbar .action-button:hover{background-color:#4D9BCE;}\n'+'.fls-multi-line-toolbar .action-button.switched-on{background-color:#e3bc34;}\n'+'.fls-multi-line-toolbar .action-button.increase_distance{background-position:center -2px;}\n'+'.fls-multi-line-toolbar .action-button.decrease_distance{background-position:center -44px;}\n'+'\n';toolbar_css+='</style>\n';jQuery(toolbar_css).appendTo('head');_toolbar.addClass('fls-multi-line-toolbar');var btns=['increase_distance','decrease_distance'];for(var i=0;i<btns.length;i++){var btn=jQuery(document.createElement('span'));btn.addClass('action-button '+btns[i]);btn.attr('data-action',btns[i]);btn.attr('title',btns[i].replace(/_/g,' '));_toolbar.append(btn);}
var events=FLSUtil.mobile()?(FLSUtil.wp_mobile()?['pointerdown']:['touchstart']):['mousedown'];var elements=jQuery('.action-button',_toolbar);for(var i=0;i<elements.length;i++){var where=elements[i];for(var j in events){if(document.addEventListener){where.addEventListener(events[j],_handleButtons,false);}else if(document.attachEvent){where.attachEvent("on"+events[j],_handleButtons);}}}
return _toolbar;}
var FLSLaserEngraveButtonsBar=function(editor,buttoncallback){var _toolbar=jQuery(document.createElement('div'));if(typeof(buttoncallback)!='function'){buttoncallback=function(type){console.log(arguments);}}
function _handleButtons(evt){var me=jQuery(this);var action=me.attr('data-action');switch(action){default:buttoncallback(action);}}
jQuery('style#ArcTextToolbar-CSS').remove();var toolbar_css='<style type="text/css" id="ArcTextToolbar-CSS">\n'+'.fls-laser-engrave-toolbar{position:absolute; top:10px; left:10px; border-radius:25px; width:49px; background-color:transparent;z-index:70;box-shadow: 0 0 3px rgba(0,0,0,0.5);}\n'+'.fls-laser-engrave-toolbar .action-button{position:relative; width: 39px; height:39px; background-color:#FFF; margin: 4px; border-radius:25px; '+'box-shadow:0 0 2px rgba(0,0,0,0.5); display:block;cursor:pointer;border:1px solid #CCC;\n'+'background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAABOCAYAAABFccTjAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAKTQAACk0BtZPkxgAAABx0RVh0U29mdHdhcmUAQWRv'+'YmUgRmlyZXdvcmtzIENTNXG14zYAAAAWdEVYdENyZWF0aW9uIFRpbWUAMDUvMDgvMTcOLkTKAAAKC0lEQVRoge2aaXBb1RXHf/dJimRbi7U4UiQltmU7wcbZ'+'DA2FhCwMaxgaQmmaNB9amLCU9EMhLTOlU0Kgk4amA0PoNGGY0KG0mQGaAgEKTDtAKEkb4yw0Jt4SL7ItO5Z3W94kv9sPsh1HWLIUqNsP+c+8mXfvu+fcn95d'+'3nvnCC5osYKyT6D4BUo/aO5jhmVWUPYLlFGBIicdbYBuxigE4s0YgIkDNLfPIIjSFg9EQTkwYyCgPBQPJDpXyJgxEoHmaILh2ThTIABLBUpkahjx+kyCoKC8'+'EOeu9DEDwyMmnVsFShWQNUWjHSrqE8k6Pe31/nRQrzcB6FVVs6iubqeAUCIb7aTzLglPCnh+rPtPJfKtKCAmwAM0TwfRaDZf84err97eMHt2BoAuEuF+Ve2m'+'oWF3Ijvl4qL6AlArYQeofQJ2C3hMwiMC8cqX239Z9W73veMQAGGtlgaH49bp7GIdhyXqJgGbQdx28SWxBrQ3J3ImQed3OFYAaEdHcfT1jQJUer1Xt1qtxamA'+'ALQD+ZPKPQuQ785BfgRydiJnpz2ee8t8viKAJfX19dfW1JQCnHU6zbUu19ZUQWqBKoC7kW9EUOsrkLc3I6/tY/REImeNTucdIYMBgNxg8Ji7o+MjjaoCUGe3'+'r5QJnl1TjrlEvRXEkdeQVyqweKzaYITH4jnqtljyqufMuQ7AFgqN5rS0HFxQV7en2O9vASjLyyuscLu/nxIIUC8ZXQEci6nfIKFwKoMKp3NrpcdjBVhSV1ee'+'HwweNML5vLa2YwAhvV40OJ13pAoyrj/FlDXAb2IbSVAa7fbVkujGlN3efkSACuBrbT1kHBqSANUu13VdBkPOpYB8CHTE1K2VsGZyxdmsrLvKcnMXAvjOn+/L'+'DQb3jl8raG39Y0ldXSXAGa/XUePxTDlpE4IICAMHJ1VtB/4F7JWQNl5Z63Jt6DYatQCFzc2lrq6u8sk+5rW3HwGQQtDocKyRF+/o04OM6dVJ5+uJzpsFwA6A'+'PsiqdTqvh+gumhsMfhjrILe5+cW5HR0DAKV5eYvPud3rLgXkMNAydr4EGABGgWsAqn2+rZ/n5LgAlvj9jcUNDb+NdTC3t7e0uLHxOECX0aitdzi+mzKIiHa6'+'Cxgeq1oPHAJ6APx2+02qEnWTEwweFdA7lZ/sYPDw+J5Sm5W1sgdsKYGMwewBcoG9RIelBgi3OByrT+bmLgWwhkJqbjD4RjwfBcHgnuLGxjaAU7m57vrs7Adj'+'+khNEr4F/AioOVxUlHZgxYp7ANxdXUMFLS01UsR32WY2eyo9HhvA2hMnPr6zrGxi9WnjWsWRgEMyeicL/FlZE0sxYLUaAlbrwmT9/Dsn55pmv3+5p63tyCWB'+'jMG8+YXHs63M58sGMA0OhnOCwfZkbIMmk6nVajU22Wxp5+z2H/BVQADOuVy3DOmiz7AVlZVH7/zss/XJ2B1dsODXL69atQWgIStrlayo0AsYTmqyxqopM3NJ'+'hdf7TQBFVZkX3dK7kjlyAoHfezs7BwE+8/kKzni990OSqyZWdS7XlnNOpwmgqKkpuKCt7flkbT19fUcL/f5TAEOzZlE3e/baSwKRoGuy21ePl/Pa2kqNoVBr'+'Kj6yOzqOCCkBqPR4rm232wtTBjnncm0qzcsrBNCHw8ydYkufTvPb2/fODwR6AKrnzLHU2O33pTxZw4ry7aUNDfUA3vb2kYWNjS+m6iOzp6f2SHX1saz+/nwA'+'4+DgSiHHbtH/Wpc0Wf8bugwSq8sgsboMEqvLILG6DBKryyCxugwSq/8bkHEpoPmOQLwjUAYFmjJAP1Odj7+cFQiUz6dIBiT1nfK1gQiUk3FyNa/NNEhlnGTA'+'ANHQ98yAgGZtglzN975SB2BMASRRXk8cTOwivs5aLD8PpqW1yiRSLJO/JBYIlOE4uRpDqhDd6elXHZg///ybPp88Y7NN+2OklBP7SJWA56ZoYwTNhlRBao3G'+'X7/j882OKAqfeDyr2zIylkxnM7Ghqai/5ELQDqAyGrKSFlIIX0iYc9pmKwLQqCrvz5tna9frH00aBOiVsBPokbAN5BcSfihgj4KyPVmQRpNp06dut0tRVbRS'+'MqoonE9PL5jOLuaXqvslikbAr0BMBHQl/Ax4BaiezuGgRrPwfEYG1qEhxqOI/VqtVYIQEPf7NvZZM6hACReiyhI4BZwDzRXTQQBEtNo0CWilRDu2GgZ0ulmT'+'fCYFgor4O0AWnGlBPaSizldRTacYPZ4MyKxIpE8jJYqqohkDyQiHB0U0UJw8CIweELD7bdRyJ6wD0oE5i6MhzWllDIePZPf2qhopJ4bGMjIybaBvqteAURX1'+'0WUQ+7+ArRLsAG0Gw1M1FkvNYY/n4xNZWYcazObHJZgBXKHQX65vbm7SjA1NejjM7FBoIknQZTCsqrRaX/3E7X6/1OU63mEwVMcDGdd7QNeksgl4HEBVlPo3'+'8vJ8qhCrTjscd+wqKXniH2730Raz+TYBvcUdHaWmkRE0qsrG6uq6+T09T0gwVWRmvr6/sPCt/UVFGxDilnKbraQiM7MzIYiAEeDdSVXDwAMScp0DA6/P7+5u'+'eGbpUvwmEw+dPi0OFhRc+YHX+1JDRsaN2d3d29bV1jalRSJyUWfnX4G2zx2Ot3YtW3Z3fk+P5abGRn63cCEfer24hoaOTXdHACb/L+BBoB7YB/QVdXZ+ZBkZ'+'kaVOJ09fdRX3nDlDl17vqrdYnjNAsLizc1/W4OCgr7v7x+csll0vFxZe//DJkwSMRp5fvJiQTsfGmpqzed3dO5IB+YAL2YZdRJfyzcDagu7uhx85ceKkTlXp'+'0et5atkylgcC1FithXVm80+MIyOHFSlbAW2D2bzuwfJy7ds5ObyXnQ3AykCgc1Ew+IyAxEMzNjzDRFMiAE4upNWMAnoL+/vXby8t/efc/v7REUVhd0kJa5qa'+'RJ9We1cEdKoQmo60tNusQ0P5h91uSl0udKrKpqqqpvXV1Tvn9ffvndRXYklwEd1ZtxDNCXcBOwW8P3Zd6zeZnmzNyLi53GbLHtDp7JurqtSMcPju1vT0ZyOK'+'EhzWaL7xdm7u4KL29kBOb2+Fa2TkF9ZQ6NREH6kEFCXkSzghYZ+EL2Wgxto4JKzwG43H+3W6U00ZGY39Wm1oUKe7T8IVMs7DM+XIpgSbhGclbE7UbnjWrCJV'+'iNEOvX6gzmwum9bvpYRYJbiTeesqt9vPPF1SMuo3mbYlA3IpiaNAUg2lLDdFIllz+/riptcm62v/0pOgNBuNGw2RSNHyQCCjzmx+ZEivz5/OLuWcXiK1Go03'+'+I3G3X/Ozy+qsVgMEUUhPRzmhqam1pWBwKdXdHZuEWPZ0Yvgpfx6QCSYKm22l97NybnxsMeTOVWb9EiEzVVVVcXB4G5fX9/+rx1EwvIBrfbVL+x2pUuvH56u'+'/aL2dosxHP6bMRx+QED3OMh/AAtlEVIHt9deAAAAAElFTkSuQmCC");\n'+'background-repeat:no-repeat; background-position: center 0;}\n'+'.fls-laser-engrave-toolbar .action-button:hover{background-color:#4D9BCE;}\n'+'.fls-laser-engrave-toolbar .action-button.switched-on{background-color:#e3bc34;}\n'+'.fls-laser-engrave-toolbar .action-button.stroke_text{background-position:center 1px;}\n'+'.fls-laser-engrave-toolbar .action-button.stroke_logo{background-position:center -45px;}\n'+'\n';toolbar_css+='</style>\n';jQuery(toolbar_css).appendTo('head');_toolbar.addClass('fls-laser-engrave-toolbar');var btns=['stroke_text','stroke_logo'];for(var i=0;i<btns.length;i++){var btn=jQuery(document.createElement('span'));btn.addClass('action-button '+btns[i]);btn.attr('data-action',btns[i]);btn.attr('title',btns[i].replace(/_/g,' '));_toolbar.append(btn);}
var events=FLSUtil.mobile()?(FLSUtil.wp_mobile()?['pointerdown']:['touchstart']):['mousedown'];var elements=jQuery('.action-button',_toolbar);for(var i=0;i<elements.length;i++){var where=elements[i];for(var j in events){if(document.addEventListener){where.addEventListener(events[j],_handleButtons,false);}else if(document.attachEvent){where.attachEvent("on"+events[j],_handleButtons);}}}
return _toolbar;}
var FLSSVGGradient=function(gradientDefNode){var dom_def;var $defn;if(gradientDefNode instanceof jQuery){$defn=gradientDefNode;dom_def=gradientDefNode[0];}else{dom_def=gradientDefNode;$defn=jQuery(gradientDefNode);}
var cnvsGradient=[];var cnvsContexts=[];var id;var gradientTypes=['linearGradient','radialGradient'];var gradientType='';var gradientParams=[];var gradientTransforms={};var gradienColorStops=[];var stop_tmp;if(gradientTypes.indexOf(dom_def.nodeName)>-1){gradientType=dom_def.nodeName;id=$defn.attr('id').trim();switch(gradientType){case'linearGradient':var x1=parseFloat($defn.attr('x1'),10);var y1=parseFloat($defn.attr('y1'),10);var x2=parseFloat($defn.attr('x2'),10);var y2=parseFloat($defn.attr('y2'),10);x1=!isNaN(x1)?x1:0.00;y1=!isNaN(y1)?y1:0.00;x2=!isNaN(x2)?x2:0.00;y2=!isNaN(y2)?y2:0.00;gradientParams.push(x1);gradientParams.push(y1);gradientParams.push(x2);gradientParams.push(y2);break;case'radialGradient':var cx=parseFloat($defn.attr('cx'),10);var cy=parseFloat($defn.attr('cy'),10);var r=parseFloat($defn.attr('r'),10);var fx=parseFloat($defn.attr('fx'),10);var fy=parseFloat($defn.attr('fy'),10);var fr=parseFloat($defn.attr('fr'),10);cx=!isNaN(cx)?cx:0.00;cy=!isNaN(cy)?cy:0.00;r=!isNaN(r)?r:0.00;fx=!isNaN(fx)?fx:cx;fy=!isNaN(fy)?fy:cy;fr=!isNaN(fr)?fr:0.00;gradientParams.push(fx);gradientParams.push(fy);gradientParams.push(fr);gradientParams.push(cx);gradientParams.push(cy);gradientParams.push(r);break;}
_setGardientColorStopDef(dom_def);}
var transform={};var transforms=$defn.attr('gradientTransform');if(transforms){transforms=transforms.trim().split(') ');if(transforms.length){for(var l=0;l<transforms.length;l++){var fn=transforms[l].split('(');if(fn.length==2){fn[1]=fn[1].replace(/\)/g,'').replace(/\s+/g,',').replace(/,+/g,',').split(',');transform[fn[0]]=[];if(fn[1].length){for(var fi=0;fi<fn[1].length;fi++){transform[fn[0]].push(parseFloat(fn[1][fi]));}}}}}}
var grad_matrix=[1,0,0,1,0,0];if((transforms instanceof Array)&&transforms.length){if(transform['matrix']){grad_matrix=transform['matrix'];}
if(transform['translate']){FLSUtil.tmatrixTranslate(grad_matrix,transform['translate'][0],transform['translate'][1]);}
switch(gradientType){case'linearGradient':var x1y1={x:gradientParams[0],y:gradientParams[1]};var x2y2={x:gradientParams[2],y:gradientParams[3]};FLSUtil.transformPoint(grad_matrix,x1y1,true);FLSUtil.transformPoint(grad_matrix,x2y2,true);gradientParams[0]=x1y1.x;gradientParams[1]=x1y1.y;gradientParams[2]=x2y2.x;gradientParams[3]=x2y2.y;break;case'radialGradient':var cxcy={x:gradientParams[3],y:gradientParams[4]};var fxfy={x:gradientParams[1],y:gradientParams[1]};FLSUtil.transformPoint(grad_matrix,cxcy,true);FLSUtil.transformPoint(grad_matrix,fxfy,true);gradientParams[0]=fxfy.x;gradientParams[1]=fxfy.y;gradientParams[3]=cxcy.x;gradientParams[4]=cxcy.y;break;}}
function _setGardientColorStopDef(_dom_def){var $color_stops=jQuery('stop',jQuery(_dom_def));if($color_stops.length){while(gradienColorStops.length){gradienColorStops.pop();}
$color_stops.each(function(index){var snode=jQuery(this);var styles={};styles.offset=parseFloat(snode.attr('offset'),10);var stop_color=snode.attr('stop-color');var stop_opacity=snode.attr('stop-opacity');if(stop_color){styles['stop-color']=stop_color;}
if(stop_opacity){styles['stop-opacity']=stop_opacity;}
var _styles=snode.attr('style');_styles=_styles.split(';');while(_styles.length){var style=_styles.shift();style=style.split(':');switch(style[0]){case'stop-color':case'stop-opacity':styles[style[0]]=style[1];break;}}
if(styles['stop-color']){var ncolor=FLSUtil.normalizeCssColor(styles['stop-color']);if(typeof(styles['stop-opacity'])!='undefined'){var _opcty=parseFloat(styles['stop-opacity'],10);if(_opcty>1){_opcty=_opcty/255;}
if(_opcty<1){ncolor.css=ncolor.css.replace(/rgb\(/g,'rgba(');ncolor.css=ncolor.css.replace(/\)/g,','+_opcty+')');}}
styles.cnvs_clr=ncolor.css;gradienColorStops.push(styles);}});}}
this.setGardientColorStopDef=function(_dom_def){_setGardientColorStopDef(_dom_def);};this.valid=function(){return gradienColorStops.length;};this.id=function(_id){if(typeof(_id)=='string'&&!id){id=_id.toString().trim();}
return id;};this.getCanvasGradient=function(ctx){var cnvsgrd;if(ctx instanceof CanvasRenderingContext2D){var grad_idx=cnvsContexts.indexOf(ctx);if(grad_idx==-1){switch(gradientType){case'linearGradient':cnvsgrd=ctx.createLinearGradient.apply(ctx,gradientParams);break;case'radialGradient':cnvsgrd=ctx.createRadialGradient.apply(ctx,gradientParams);break;}
for(var cs_idx=0;cs_idx<gradienColorStops.length;cs_idx++){cnvsgrd.addColorStop(gradienColorStops[cs_idx]['offset'],gradienColorStops[cs_idx]['cnvs_clr']);}
cnvsContexts.push(ctx);cnvsGradient.push(cnvsgrd);}else{cnvsgrd=cnvsGradient[grad_idx];}}
return cnvsgrd;};this.getGradDomNode=function(){return dom_def;}};FLSEditorCore.prototype.textObjToPath=function(s3FontPathBase){if(typeof(window.opentype)=='undefined'){throw'opentype library not loaded';}
var loadedFonts={};var triedfontsrc=[];this.initFont=function(font_family,fontinfo,callback){if(typeof(window.opentype)=='object'){var fnt_key_idx='ttf_src';if(!loadedFonts[font_family]){loadedFonts[font_family]={};}
if(typeof(loadedFonts[font_family][fnt_key_idx])=='undefined'){try{window.opentype.load(s3FontPathBase+'html5/'+fontinfo[fnt_key_idx],function(err,font){if(err){console.warn(err);loadedFonts[font_family][fnt_key_idx]=err;}else{loadedFonts[font_family][fnt_key_idx]=font;}
if(font){callback(true);}else{callback(false,err);}});}catch(e){callback(false,e);}}else{callback(loadedFonts[font_family][fnt_key_idx]instanceof opentype.Font);}}else{callback(false,'opentype.js not loaded');}};this.initFontProd=function(txtobj,fontinfo,callback){if(typeof(window.opentype)=='object'){var tp=txtobj.getProperties();var font_family=tp.font_family
var fnt_key_idx=[];if(tp.bold){fnt_key_idx.push('bold');}
if(tp.italic){fnt_key_idx.push('italic');}
fnt_key_idx=fnt_key_idx.join('');fnt_key_idx=fnt_key_idx.length?fnt_key_idx+'_src':'ttf_src';if(!loadedFonts[font_family]){loadedFonts[font_family]={};}
var tried=font_family+fnt_key_idx;if((typeof(loadedFonts[font_family][fnt_key_idx])=='undefined')&&(triedfontsrc.indexOf(tried)==-1)){try{triedfontsrc.push(tried)
window.opentype.load(s3FontPathBase+'html5/'+fontinfo[fnt_key_idx],function(err,font){if(err){console.warn(err);loadedFonts[font_family][fnt_key_idx]=err;}else{loadedFonts[font_family][fnt_key_idx]=font;}
if(font){callback(true);}else{callback(false,err);}});}catch(e){callback(false,e);}}else{callback(loadedFonts[font_family][fnt_key_idx]instanceof opentype.Font);}}else{callback(false,'opentype.js not loaded');}};this.get=function(txtobj,fontinfo,callback,ccallback){var ldfont=null;var tp=null;function _handleGetMultiline(){var lines_info=txtobj.getTextLines();var pth_str=[];while(lines_info.length){var tmp_ln_inf=lines_info.shift();var sub_pth_str=ldfont.getPath(tmp_ln_inf.text,0,0,tmp_ln_inf.fontsize).toPathData(6);if(tmp_ln_inf.dx||tmp_ln_inf.dy){var cmds=SVGPath2Cnvs.parse(sub_pth_str);SVGPath2Cnvs.applyMatrix(cmds,[1,0,0,1,tmp_ln_inf.dx,tmp_ln_inf.dy]);sub_pth_str=SVGPath2Cnvs.commandsDataStr(cmds);}
pth_str.push(sub_pth_str);}
callback(txtobj,pth_str.join(' '),ccallback);}
function _handleGetPathText(){var lines_info=txtobj.get_letters();var pth_str=[];var txt_dy=txtobj.txt_dy();while(lines_info.length){var tmp_ln_inf=lines_info.shift();var sub_pth_str=ldfont.getPath(tmp_ln_inf[1],0,0,tp.fontsize).toPathData(6);var cmds=SVGPath2Cnvs.parse(sub_pth_str);var mtrx=tmp_ln_inf[0].slice(0);if(txt_dy){FLSUtil.tmatrixTranslate(mtrx,0,txt_dy);}
SVGPath2Cnvs.applyMatrix(cmds,mtrx);sub_pth_str=SVGPath2Cnvs.commandsDataStr(cmds);pth_str.push(sub_pth_str);}
callback(txtobj,pth_str.join(' '),ccallback);}
if((typeof(window.opentype)=='object')&&(txtobj instanceof FLSEditorCore.CText)&&(typeof(callback)=='function')){tp=txtobj.getProperties();var fnt_key_idx=[];if(tp.bold){fnt_key_idx.push('bold');}
if(tp.italic){fnt_key_idx.push('italic');}
fnt_key_idx=fnt_key_idx.join('');fnt_key_idx=fnt_key_idx.length?fnt_key_idx+'_src':'ttf_src';if(!loadedFonts[tp.font_family]){loadedFonts[tp.font_family]={};}
var is_multiline=txtobj instanceof FLSEditorCore.CMultiLineText;var is_pathtext=(txtobj instanceof FLSEditorCore.CPathText)&&txtobj.has_path();if(typeof(loadedFonts[tp.font_family][fnt_key_idx])=='undefined'){window.opentype.load(s3FontPathBase+'html5/'+fontinfo[fnt_key_idx],function(err,font){if(err){console.warn('could not load font');loadedFonts[tp.font_family][fnt_key_idx]=err;}else{loadedFonts[tp.font_family][fnt_key_idx]=ldfont=font;}
if(ldfont){if(is_multiline){_handleGetMultiline();}else if(is_pathtext){_handleGetPathText();}else{callback(txtobj,ldfont.getPath(tp.text,0,0,tp.fontsize).toPathData(6),ccallback);}}});}else{ldfont=loadedFonts[tp.font_family][fnt_key_idx]
if(is_multiline){_handleGetMultiline();}else if(is_pathtext){_handleGetPathText();}else{callback(txtobj,ldfont.getPath(tp.text,0,0,tp.fontsize).toPathData(6),ccallback);}}}else{callback(txtobj,false,ccallback);}};this.get_direct=function(tp,fontinfo,multiline){if((typeof(window.opentype)=='object')&&tp.text&&tp.font_family&&tp.fontsize){var fnt_key_idx=[];if(tp.bold){fnt_key_idx.push('bold');}
if(tp.italic){fnt_key_idx.push('italic');}
fnt_key_idx=fnt_key_idx.join('');fnt_key_idx=fnt_key_idx.length?fnt_key_idx+'_src':'ttf_src';if(typeof(loadedFonts[tp.font_family][fnt_key_idx])!='undefined'){var ldfont=loadedFonts[tp.font_family][fnt_key_idx]
if((multiline instanceof Array)&&multiline.length){var pth_str=[];while(multiline.length){var tmp_ln_inf=multiline.shift();var sub_pth_str=ldfont.getPath(tmp_ln_inf.text,0,0,tmp_ln_inf.fontsize).toPathData(6);if(tmp_ln_inf.dx||tmp_ln_inf.dy){var cmds=SVGPath2Cnvs.parse(sub_pth_str);SVGPath2Cnvs.applyMatrix(cmds,[1,0,0,1,tmp_ln_inf.dx,tmp_ln_inf.dy]);sub_pth_str=SVGPath2Cnvs.commandsDataStr(cmds);}
pth_str.push(sub_pth_str);}
return pth_str.join(' ');}
return ldfont.getPath(tp.text,0,0,tp.fontsize).toPathData(6);}}
return false;};this.loadFont=function(font_family,fontinfo){if(typeof(window.opentype)=='object'){var srcs=['ttf_src'];if(fontinfo['italic_src']){srcs.push('italic_src');}
if(fontinfo['bold_src']){srcs.push('bold_src');}
if(fontinfo['bolditalic_src']){srcs.push('bolditalic_src');}
var fnt_key_idx='ttf_src';if(!loadedFonts[font_family]){loadedFonts[font_family]={};}
while(srcs.length){fnt_key_idx=srcs.shift();if(typeof(loadedFonts[font_family][fnt_key_idx])=='undefined'){try{window.opentype.load(s3FontPathBase+'html5/'+fontinfo[fnt_key_idx],function(err,font){if(err){console.warn(err);loadedFonts[font_family][fnt_key_idx]=err;}else{loadedFonts[font_family][fnt_key_idx]=font;}});}catch(e){console.warn(e);}}else{}}}else{console.log('opentype.js not loaded');}};this.charUnSupported=function(char_arr,font_family,bold,italic){var unsupported=[];if(typeof(window.opentype)=='object'){var fnt_key_idx=[];if(bold==true){fnt_key_idx.push('bold');}
if(italic==true){fnt_key_idx.push('italic');}
fnt_key_idx=fnt_key_idx.join('');fnt_key_idx=fnt_key_idx.length?fnt_key_idx+'_src':'ttf_src';if(loadedFonts[font_family]&&(loadedFonts[font_family][fnt_key_idx]instanceof opentype.Font)){var ldfont=loadedFonts[font_family][fnt_key_idx];if(typeof(char_arr)=='string'){char_arr=char_arr.replace(/\s/g,'').split('');}
if(char_arr instanceof Array){for(var ch_idx=0;ch_idx<char_arr.length;ch_idx++){var glph=ldfont.charToGlyph(char_arr[ch_idx]);if(!glph.unicode||(glph.unicodes.length>1)){unsupported.push(char_arr[ch_idx]);}}}}}
return unsupported;};};var FLSColorPicker=function(curcolor,container,size_overrides){var scr_wdth=Math.min(window.screen.width,window.screen.height);var sliderHeight=Math.floor(scr_wdth*0.36762);sliderHeight=sliderHeight>150?150:sliderHeight;var sliderMargin=Math.ceil(scr_wdth*0.02181);sliderMargin=sliderMargin>10?10:sliderMargin;var sliderWidth=10;var colorDragTile,colorGragKnob;var colorSlideBar,colorSlideKnob;var dragKnobRadius=3;var sampleColorNew,sampleColorStart;var sampleColorNewTxt,sampleColorStartTxt;var _this=this;if(size_overrides&&size_overrides.height){sliderHeight=size_overrides.height;}
if(size_overrides&&size_overrides.margin){sliderMargin=size_overrides.margin;}
var r=0,g=0,b=0,a=1;var h,s,v;var normalclr=normalizeCssColor(curcolor);var RGB=hexdec2rgb(normalclr.uint);r=RGB[0];g=RGB[1];b=RGB[2];h=getHue();var flat_rgb=flatColor();buildUI();function buildUI(){var pickerContainer=document.createElement('div');pickerContainer.style.overflow='hidden';pickerContainer.style.display='block';pickerContainer.style.position='relative';pickerContainer.className='fls-mobile-color-picker-container';colorDragTile=document.createElement('div');colorDragTile.style.width=sliderHeight+'px';colorDragTile.style.height=sliderHeight+'px';colorDragTile.style.display='block';colorDragTile.style.position='relative';colorDragTile.className='fls-mobile-color-picker-color';colorDragTile.style['float']='left';colorDragTile.style.margin=sliderMargin+'px';var saturationDiv=document.createElement('div');saturationDiv.style.width=sliderHeight+'px';saturationDiv.style.height=sliderHeight+'px';saturationDiv.style.display='block';saturationDiv.style.position='relative';saturationDiv.className='fls-mobile-color-picker-saturation';saturationDiv.style.backgroundImage='linear-gradient(to right, #fff, rgba(204, 154, 129, 0))';colorDragTile.appendChild(saturationDiv);var valueDiv=document.createElement('div');valueDiv.style.width=sliderHeight+'px';valueDiv.style.height=sliderHeight+'px';valueDiv.style.display='block';valueDiv.style.position='relative';valueDiv.className='fls-mobile-color-picker-value';valueDiv.style.backgroundImage='linear-gradient(to top, #000, rgba(204, 154, 129, 0))';saturationDiv.appendChild(valueDiv);colorGragKnob=document.createElement('div');colorGragKnob.style.position='absolute'
colorGragKnob.style.border=dragKnobRadius+'px solid #FFF';colorGragKnob.style.width=(dragKnobRadius*2)+'px';colorGragKnob.style.height=(dragKnobRadius*2)+'px';colorGragKnob.style.borderRadius=(dragKnobRadius*2)+'px'
colorGragKnob.style.boxShadow='0 0 3px rgba(0,0,0,0.8)';colorGragKnob.style.cursor='pointer';valueDiv.appendChild(colorGragKnob);var colorSlidebarContainer=document.createElement('div');colorSlidebarContainer.style.position='relative';colorSlidebarContainer.style.pdisplay='block';colorSlidebarContainer.style['float']='left';colorSlidebarContainer.className='fls-mobile-color-picker-hue';colorSlidebarContainer.style.margin=sliderMargin+'px 0';colorSlidebarContainer.style.padding='0 '+sliderWidth+'px';colorSlideBar=document.createElement('canvas');colorSlideBar.width=sliderWidth;colorSlideBar.height=sliderHeight;var sl_ctx=colorSlideBar.getContext('2d');var color_step=1/6;var gradient=sl_ctx.createLinearGradient(0,0,0,sliderHeight);gradient.addColorStop(0,"#ff0000");gradient.addColorStop(color_step,"#ffff00");gradient.addColorStop(color_step*2,"#00ff00");gradient.addColorStop(color_step*3,"#00ffff");gradient.addColorStop(color_step*4,"#0000ff");gradient.addColorStop(color_step*5,"#ff00ff");gradient.addColorStop(1,"#ff0000");sl_ctx.fillStyle=gradient;sl_ctx.fillRect(0,0,sliderWidth,sliderHeight);var knob_left=((3*sliderWidth)-(sliderWidth+10))/2;colorSlideKnob=document.createElement('div');colorSlideKnob.style.position='absolute'
colorSlideKnob.style.border='5px solid #FFF';colorSlideKnob.style.width=sliderWidth+'px';colorSlideKnob.style.height='1px';colorSlideKnob.style.left=knob_left+'px';colorSlideKnob.style.borderRadius='5px'
colorSlideKnob.style.boxShadow='0 0 3px rgba(0,0,0,0.8)';colorSlideKnob.style.cursor='pointer';colorSlidebarContainer.appendChild(colorSlideBar);colorSlidebarContainer.appendChild(colorSlideKnob);pickerContainer.appendChild(colorDragTile);pickerContainer.appendChild(colorSlidebarContainer);var pickerparent;if(typeof(container)=='string'){pickerparent=document.querySelector(container);}else if(container instanceof HTMLElement){pickerparent=container;}
if(pickerparent){pickerparent.appendChild(pickerContainer);updatePickerUI();var events=['touchstart','touchmove','mousedown','mousemove'];colorDragTile.setAttribute('data-pickerdata','saturation-value');colorSlidebarContainer.setAttribute('data-pickerdata','hue');_setupEvents(events,colorDragTile);_setupEvents(events,colorSlidebarContainer);}}
function _setupEvents(_events,_domobj){for(var i=0;i<_events.length;i++){if(document.addEventListener){_domobj.addEventListener(_events[i],_handleUserColorChoice,false);}else if(_domobj.attachEvent){_domobj.attachEvent("on"+events[i],_handleUserColorChoice);}}}
function flatColor(){return hsv2rgb(true);}
function hexdec2rgb(hexdec){var R=(hexdec&0xFF0000)>>16;var G=(hexdec&0x00FF00)>>8;var B=(hexdec&0x0000FF);return[R,G,B];}
function normalizeCssColor(csscolorstr){var colorint=0;if(!csscolorstr){return{css:"rgb(255,0,0)","uint":0,css_hex:'#FF0000'};}
csscolorstr=csscolorstr.toString().replace(/\s/ig,'');var newcssclsstr='';if(/#/ig.test(csscolorstr)){csscolorstr=csscolorstr.replace('#','');if(csscolorstr.length==3){newcssclsstr+=csscolorstr[0]+csscolorstr[0];newcssclsstr+=(csscolorstr[1]+csscolorstr[1]);newcssclsstr+=(csscolorstr[2]+csscolorstr[2]);colorint=parseInt(newcssclsstr,16);}else{colorint=parseInt(csscolorstr,16);}
newcssclsstr='rgb('+hexdec2rgb(colorint).join(',')+')';}else{var colors=csscolorstr.replace(/rgb(a?)\(/ig,'').replace(')','').split(',');for(var i=0;i<colors.length;i++){colors[i]=/%/i.test(colors[i])?Math.round(parseFloat(colors[i],10)*255/100):(i<3?parseInt(colors[i],10):parseFloat(colors[i],10));}
colorint=colors[0]<<16;colorint+=colors[1]<<8;colorint+=colors[2];newcssclsstr=colors.length==4?'rgba(':'rgb(';newcssclsstr+=hexdec2rgb(colorint).join(',')+(colors.length==4?','+colors[3]:'')+')';}
var css_hex='#'+(0x1000000|colorint).toString(16).substring(1);return{css:newcssclsstr,uint:colorint,css_hex:css_hex};}
function getHue(){var R,G,B,H;R=r/255;G=g/255;B=b/255;var MIN=Math.min(R,G,B);var MAX=Math.max(R,G,B);var delta=MAX-MIN;if(MIN==MAX){H=0;}else{if(MAX==R){H=(G-B)/delta;}else if(MAX==G){H=2.0+(B-R)/delta;}else{H=4.0+(R-G)/delta}}
H*=60;H=H>0?H:H+360;v=MAX;s=MAX==0?0:delta/MAX;return H;}
function hsv2rgb(flatcolor){var rgb={r:0,g:0,b:0};;if(h==undefined){return rgb;}
var _v=v,_s=s;if(flatcolor===true){_v=1;_s=1;}
var pre_rgb={r:0,g:0,b:0};var Hp=h/60;var C=_v*_s;var X=C*(1-Math.abs((Hp%2)-1));var m=_v-C;if(Hp>=0&&Hp<=1){pre_rgb.r=C;pre_rgb.g=X;pre_rgb.b=0;}else if(Hp>=1&&Hp<=2){pre_rgb.r=X;pre_rgb.g=C;pre_rgb.b=0;}else if(Hp>=2&&Hp<=3){pre_rgb.r=0;pre_rgb.g=C;pre_rgb.b=X;}else if(Hp>=3&&Hp<=4){pre_rgb.r=0;pre_rgb.g=X;pre_rgb.b=C;}else if(Hp>=4&&Hp<=5){pre_rgb.r=X;pre_rgb.g=0;pre_rgb.b=C;}else if(Hp>=5&&Hp<=6){pre_rgb.r=C;pre_rgb.g=0;pre_rgb.b=X;}
rgb.r=Math.ceil((pre_rgb.r+m)*255);rgb.g=Math.ceil((pre_rgb.g+m)*255);rgb.b=Math.ceil((pre_rgb.b+m)*255);return rgb;}
function cssColor(){var _rgb=hsv2rgb();var colorint=_rgb.r<<16;colorint+=_rgb.g<<8;colorint+=_rgb.b;var flat=hsv2rgb(true);return{'css_hex':'#'+(0x1000000|colorint).toString(16).substring(1),'css_rgb':'rgb('+_rgb.r+','+_rgb.g+','+_rgb.b+')','flat_css_rgb':'rgb('+flat.r+','+flat.g+','+flat.b+')','initial_rgb_css':normalclr.css,'rgb':[_rgb.r,_rgb.g,_rgb.b],'initial_rgb':FLSUtil.hexdec2rgb(normalclr.uint),}}
function updatePickerUI(evt_type){var css_clr=cssColor();colorGragKnob.style.top=(((1-v)*sliderHeight)-(dragKnobRadius*2))+'px';colorGragKnob.style.left=((s*sliderHeight)-(dragKnobRadius*2))+'px';colorSlideKnob.style.top=(((h/360)*sliderHeight)-6)+'px';colorDragTile.style.backgroundColor=css_clr.flat_css_rgb;if(sampleColorNew instanceof HTMLElement){sampleColorNew.style.backgroundColor=css_clr.css_rgb;}
if(sampleColorStart instanceof HTMLElement){sampleColorStart.style.backgroundColor=css_clr.initial_rgb_css;}
if((sampleColorStartTxt instanceof HTMLElement)&&(sampleColorStartTxt.nodeName.toLowerCase()=='input')&&(sampleColorStartTxt.type=='text')){sampleColorStartTxt.value=normalclr.css_hex;}
if((sampleColorNewTxt instanceof HTMLElement)&&(sampleColorNewTxt.nodeName.toLowerCase()=='input')&&(sampleColorNewTxt.type=='text')){sampleColorNewTxt.value=css_clr.css_hex;}
if(typeof(_this.onColorChange)=='function'){_this.onColorChange(css_clr,normalclr,evt_type);}}
function _handleUserColorChoice(evt){if(evt.touches||evt.buttons){var clientrect=this.getBoundingClientRect();var x,y;if(evt.touches){x=evt.touches[0].clientX-clientrect.left;y=evt.touches[0].clientY-clientrect.top;}else{x=evt.clientX-clientrect.left;y=evt.clientY-clientrect.top;}
var what=this.getAttribute('data-pickerdata');y=y>0?y:0;y=y<sliderHeight?y:sliderHeight;x=x>0?x:0;x=x<sliderHeight?x:sliderHeight;switch(what){case'saturation-value':s=x/sliderHeight;v=1-(y/sliderHeight);break;case'hue':h=(y/sliderHeight)*360;break;}
updatePickerUI(evt.type);}
evt.stopPropagation();evt.preventDefault();};this.set=function(newcolor){if(newcolor&&typeof(newcolor)=='string'){normalclr=normalizeCssColor(newcolor);curcolor=normalclr.css;RGB=hexdec2rgb(normalclr.uint);r=RGB[0];g=RGB[1];b=RGB[2];h=getHue();flat_rgb=flatColor();}
updatePickerUI();};this.get=function(){return cssColor();};this.setColorSampleNewElement=function(sampledomnode){if(sampledomnode instanceof HTMLElement){sampleColorNew=sampledomnode;}};this.setColorSampleStartElement=function(sampledomnode){if(sampledomnode instanceof HTMLElement){sampleColorStart=sampledomnode;}};this.setSampleColorNewTxtElement=function(sampledomnode){if(sampledomnode instanceof HTMLElement){sampleColorNewTxt=sampledomnode;}};this.setColorSampleStartTxtElement=function(sampledomnode){if(sampledomnode instanceof HTMLElement){sampleColorStartTxt=sampledomnode;}};};var FLSFontSizeSlider=function(cfg,container){var min=cfg.min?parseInt(cfg.min):7;var max=cfg.max?parseInt(cfg.max):70;var unit=(typeof(cfg.unit)=='string')&&(cfg.unit.length)?cfg.unit:'px';var _label=(typeof(cfg.label)=='string')&&(cfg.label.length)?cfg.label:'Font Size';var _this=this;var current_value=cfg.value?parseInt(cfg.value,10):min;if((current_value<min)||(current_value>max)){current_value=min;}
var sliderDom=null;var sliderStrip=null;var sliderStripLineKnob=null;var sliderValueLabel=null
_BuildUI();function _setupEvents(_events,_domobj){for(var i=0;i<_events.length;i++){if(document.addEventListener){_domobj.addEventListener(_events[i],_handleSliderEvents,false);}else if(_domobj.attachEvent){_domobj.attachEvent("on"+events[i],_handleSliderEvents);}}}
function _BuildUI(){sliderDom=document.createElement('div');sliderDom.className='font-size-slider-control-wrapper';var sliderControl=document.createElement('div');sliderControl.className='font-size-slider-controls';sliderStrip=document.createElement('div');sliderStripLineKnob=document.createElement('div');var decrementCntrl=document.createElement('div');var incrementCntrl=document.createElement('div');var sliderStripLine=document.createElement('div');var sliderStripLineKnobinner=document.createElement('div');sliderStrip.className='font-size-slider-strip';decrementCntrl.className='font-size-slider-btn slider-decrement';incrementCntrl.className='font-size-slider-btn slider-increment';sliderStripLine.className='font-size-slider-strip-line';sliderStripLineKnob.className='font-size-slider-knob';sliderStripLineKnobinner.className='font-size-slider-knob-inner';sliderStripLineKnob.appendChild(sliderStripLineKnobinner);sliderStripLine.appendChild(sliderStripLineKnob);sliderStrip.appendChild(sliderStripLine);sliderControl.appendChild(decrementCntrl);sliderControl.appendChild(sliderStrip);sliderControl.appendChild(incrementCntrl);var sliderLabel=document.createElement('div');sliderLabel.style.width='100%';sliderLabel.style.position='relative';sliderLabel.style.textAlign='center';sliderLabel.className='font-size-slider-label';sliderLabel.appendChild(document.createTextNode(_label));sliderDom.appendChild(sliderLabel);sliderDom.appendChild(sliderControl);sliderStrip.setAttribute('data-slidercntrl','drag-line');decrementCntrl.setAttribute('data-slidercntrl','down-value');incrementCntrl.setAttribute('data-slidercntrl','up-value');var sliderparent;if(typeof(container)=='string'){sliderparent=document.querySelector(container);}else if(container instanceof HTMLElement){sliderparent=container;}
if(sliderparent){sliderparent.appendChild(sliderDom);updateSliderUI();_setupEvents(['touchstart','touchmove','mousedown','mousemove'],sliderStrip);_setupEvents(['touchstart','mousedown'],incrementCntrl);_setupEvents(['touchstart','mousedown'],decrementCntrl);}}
function _handleSliderEvents(evt){if(evt&&(evt.buttons||evt.touches)){var action=this.getAttribute('data-slidercntrl');switch(action){case'drag-line':var clientrect=this.getBoundingClientRect();var x,y;if(evt.touches){x=evt.touches[0].clientX-clientrect.left;y=evt.touches[0].clientY-clientrect.top;}else{x=evt.clientX-clientrect.left;y=evt.clientY-clientrect.top;}
var rawval=(x*(max-min)/this.clientWidth);var decimals=rawval-Math.floor(rawval);if(decimals>0.5){rawval=Math.ceil(rawval);}else{rawval=Math.floor(rawval);}
current_value=rawval+min;current_value=current_value>max?max:current_value;current_value=current_value<min?min:current_value;break;case'down-value':current_value-=1;current_value=min>current_value?min:current_value;break
case'up-value':current_value+=1;current_value=max<current_value?max:current_value;break;}
if(typeof(_this.onSizeChange)=='function'){_this.onSizeChange(current_value,evt.type);}
updateSliderUI();if(evt.preventDefault){evt.preventDefault();}else{evt.returnValue=false;}
return false;}}
function updateSliderUI(){var slidestep=sliderStrip.clientWidth/(max-min);var newpos=Math.ceil(slidestep*(current_value-min)-(sliderStripLineKnob.clientWidth/2));sliderStripLineKnob.style.left=newpos+'px';}
this.set=function(new_val){new_val=parseInt(new_val,10);if(!isNaN(new_val)){if((min<=new_val)&&(max>=new_val)){current_value=new_val;}}
updateSliderUI();};};var FLSMultiStyleTextEditDlg=function(cfg){var _this=this;var KEYS={DEL:8,BACKSPACE:46,LEFT:37,RIGHT:39,HOME:36,END:35};var styleWithCss=false;var has_touch_evt=window.TouchEvent!='undefined';var has_mouse_evt=window.MouseEvent!='undefined';var has_pointer_evt=window.PointerEvent!='undefined';var mobile=FLSUtil.mobile();var windows_mobile=FLSUtil.wp_mobile();var fontsOptions={};var fontsOrder=[];var editAreaContainer=null,editArea=null,toolsContainer=null,editDlg=null,editOverlay=null,fontsSelectOptions=null,fontColorSample=null,fontNameLabel=null,fontSizeControl=null;var txtObj=null;var toolbar_cfg=[{action:'set_font_family',active:true},{action:'toggle_font_weight',active:false},{action:'toggle_font_style',active:false},{action:'undo',active:true},{action:'redo',active:true},{action:'clear_format',active:true},{action:'reset',active:true},{action:'show_color_picker',active:true}];_buildDlg();function SortFontByName(){while(fontsOrder.lenght){fontsOrder.shift();}
for(var fontname in fontsOptions){fontsOrder.push(fontname);}
fontsOrder.sort(function(a,b){var _a=a.toLowerCase();var _b=b.toLowerCase();return _a<_b?-1:1;});}
function _updateToolbar(){var current_node=document.getSelection().anchorNode;if(current_node){current_node=(current_node.nodeType==3?current_node.parentNode:current_node);var font_name=current_node.style.fontFamily;var _stop=font_name.length>0;var curclr=current_node.style.color;while(!_stop){current_node=current_node.parentNode;if(current_node){if(current_node==editArea){_stop=true;}
if(current_node.style){font_name=current_node.style.fontFamily;}
_stop=font_name.length>0;}else{_stop=true;}}
fontColorSample.set(curclr);fontSizeControl.set(editArea.style.fontSize.replace(/px/,''));fontNameLabel.html(font_name.replace(/"/g,''));}}
function _handleEditAreaEvnets(evt){var prevent=false;switch(evt.type){case'paste':var clipdata=evt.clipboardData||window.clopboardData;var pasted=clipdata.getData('text');prevent=true;break;case'keydown':var plain_text=editArea.innerText;var selection=window.getSelection().toString().length>0;if((evt.keyCode==13)||((plain_text.length>=30)&&!selection&&([KEYS.DEL,KEYS.BACKSPACE,KEYS.LEFT,KEYS.RIGHT,KEYS.HOME,KEYS.END]).indexOf(evt.keyCode)==-1)){prevent=true;}
break;case'mouseup':case'touchend':case'pointerup':case'keyup':_updateToolbar();break;default:prevent:false;}
if(prevent){evt.preventDefault();evt.stopPropagation();return false;}}
function _handleWysywigUiEvents(evt){var me=jQuery(evt.target);var action=me.attr('data-action');switch(action){case'undo':case'redo':document.execCommand(action,false);break;case'show_fonts_list':fontsSelectOptions.toggle();break;case'toggle_font_weight':document.execCommand('bold',false);break;case'toggle_font_style':document.execCommand('italic',false);break;case'clear_format':document.execCommand('removeFormat',false);break;case'set_font_family':var selection=window.getSelection().toString();var font_name=me.attr('data-fontfamily');if(font_name){if(selection.length){document.execCommand('fontName',false,font_name);}else{var current_node=document.getSelection().anchorNode;if(current_node){current_node=(current_node.nodeType==3?current_node.parentNode:current_node);current_node.style.fontFamily=font_name;}else{editArea.style.fontFamily=font_name;}}
fontNameLabel.html(font_name);}
fontsSelectOptions.hide();break;case'reset':if(txtObj instanceof FLSEditorCore.CMultiLineText){_resetContent()}else{editArea.style.fontSize='20px';editArea.style.fontFamily='Helvetica';editArea.style.color='rgb(0,0,0)';editArea.innerText='PlayHard';}
_updateToolbar();break;default:}
evt.preventDefault();evt.stopPropagation();return false;}
function _handleFontSizeSlider(newsize,evttype){editArea.style.fontSize=newsize+'px';}
function _handleColorPickerChange(css_clr,normalclr,evt_type){if(!evt_type)return false;var selection=window.getSelection().toString();if(selection.length){document.execCommand('foreColor',false,css_clr.css_rgb);}else{var current_node=document.getSelection().anchorNode;if(current_node){current_node=(current_node.nodeType==3?current_node.parentNode:current_node);if(current_node&&current_node.style){current_node.style.color=css_clr.css_rgb;}else{editArea.style.color=css_clr.css_rgb;}}else{editArea.style.color=css_clr.css_rgb;}}}
function _handleBottomButtons(evt){var me=jQuery(evt.target);var action=me.attr('data-action');switch(action){case'apply':var styles=_mergeStylesInfo(_getStylesInfo(editArea));if((txtObj instanceof FLSEditorCore.CMultiLineText)&&txtObj.multistyle_on()){var old_w=txtObj.getSize().width;txtObj.setFontSize(editArea.style.fontSize.replace(/px/g,''));txtObj.setFontFamily(editArea.style.fontFamily);txtObj.setColor(editArea.style.color);txtObj.multistyle_cfg(styles);if(typeof(_this.onApply)=='function'){_this.onApply(txtObj,old_w);}}
_hideDlg();break;case'cancel':_hideDlg();break;default:}}
function _getStylesInfo(node){var rootNodes=node.childNodes;var styles=[];for(var node_idx=0;node_idx<rootNodes.length;node_idx++){var node=rootNodes[node_idx];if(node.nodeType==3){var ff=node.parentNode.style.fontFamily;ff=ff?ff:(node.parentNode.getAttribute('face')||'');var clr=node.parentNode.style.color;clr=clr?clr:(node.parentNode.getAttribute('color')||'');var pnode=node.parentNode;var clr_pnode=node.parentNode;while(!ff.length){ff=pnode.style.fontFamily;ff=ff?ff:(pnode.getAttribute('face')||'');pnode=pnode.parentNode;}
while(!clr.length){clr=clr_pnode.style.color;clr=clr?clr:(clr_pnode.getAttribute('color')||'');clr_pnode=clr_pnode.parentNode;}
styles.push({text:node.nodeValue,font_family:ff,color:clr});}else{styles=styles.concat(_getStylesInfo(node))}}
return styles;}
function _mergeStylesInfo(styles){var merged=[styles.shift()];while(styles.length){var str_style=styles.shift();var mrg_style=merged[merged.length-1];if((str_style.font_family==mrg_style.font_family)&&(str_style.color==mrg_style.color)){mrg_style.text+=str_style.text;}else{merged.push(str_style);}}
return merged;}
function _buildDlg(){_addMLCss();editAreaContainer=document.createElement('div');editAreaContainer.style.width='100%';editAreaContainer.style.height='112px';editAreaContainer.style.border='1px solid #CCC';editAreaContainer.style.lineHeight='100px';editAreaContainer.style.overflow='auto hidden';editAreaContainer.style.backgroundColor='#FFF';editArea=document.createElement('div');editArea.contentEditable=true;editArea.className='fls-mst-edit-area';editArea.style.lineHeight='100px';editArea.style.height='100px';editArea.style.textAlign='center';editArea.style.whiteSpace='nowrap';editArea.style.outline='0';editArea.spellcheck=false;editArea.style.fontSize='20px';editArea.style.fontFamily='Helvetica';editArea.style.color='rgb(0,0,0)';editArea.innerText='PlayHard';editAreaContainer.appendChild(editArea);toolsContainer=document.createElement('div');toolsContainer.style.margin='0';toolsContainer.style.position='relative';var toolsLeft=jQuery('<div class="mst-tools-left"><\/div>').get(0);var toolsRight=jQuery('<div class="mst-tools-right"><\/div>').get(0);var bottomButtons=jQuery('<div class="mst-buttons-container"><span class="fls-button fls-bluebutton" data-action="apply">'+cfg.btn_labels.apply+'<\/span><span class="fls-button fls-orangebutton" data-action="cancel">'+cfg.btn_labels.cancel+'<\/span><\/div>').get(0);toolsContainer.appendChild(toolsLeft)
toolsContainer.appendChild(toolsRight)
for(var i=0;i<toolbar_cfg.length;i++){var cntrl=toolbar_cfg[i]['action'];var activebtn=toolbar_cfg[i]['active'];switch(cntrl){case'set_font_family':toolsLeft.appendChild(_buildFontsSelector());break;case'toggle_font_weight':case'toggle_font_style':case'undo':case'redo':case'clear_format':case'reset':if(activebtn){var btn=jQuery('<span class="mst-btn mst-'+cntrl+'" data-action="'+cntrl+'">&nbsp;<\/span>');toolsLeft.appendChild(btn.get(0));}
break;case'show_color_picker':var cnt_wdth=120;var left_prcnt=Math.floor((1-((120+40)/cfg.view.width))*100);toolsLeft.style.width=left_prcnt+'%';toolsRight.style.width=(100-left_prcnt)+'%';fontColorSample=new FLSColorPicker('rgb(0,0,0',toolsRight,{height:Math.min(120,cnt_wdth),margin:5});fontColorSample.onColorChange=_handleColorPickerChange;break;default:console.log(cntrl);}}
editDlg=jQuery(document.createElement('div'));editDlg.addClass('mst-edit-dlg');editDlg.append(toolsContainer);editDlg.append(editAreaContainer);editDlg.append(bottomButtons);editDlg.css({width:((cfg.view&&cfg.view.width)?cfg.view.width:482)+'px'});editArea.addEventListener('keydown',_handleEditAreaEvnets,false);editArea.addEventListener('keyup',_handleEditAreaEvnets,false);editArea.addEventListener('paste',_handleEditAreaEvnets,false);toolsContainer.appendChild(fontsSelectOptions.get(0));fontSizeControl=new FLSFontSizeSlider({min:7,max:70},toolsLeft);fontSizeControl.onSizeChange=_handleFontSizeSlider;if(mobile){if(windows_mobile){toolsContainer.addEventListener('pointerdown',_handleWysywigUiEvents,false);editArea.addEventListener('pointerup',_handleEditAreaEvnets,false);bottomButtons.addEventListener('pointerdown',_handleBottomButtons,false);}else{toolsContainer.addEventListener('touchstart',_handleWysywigUiEvents,false);editArea.addEventListener('touchend',_handleEditAreaEvnets,false);bottomButtons.addEventListener('touchstart',_handleBottomButtons,false);}}else{toolsContainer.addEventListener('mousedown',_handleWysywigUiEvents,false);editArea.addEventListener('mouseup',_handleEditAreaEvnets,false);bottomButtons.addEventListener('mousedown',_handleBottomButtons,false);}}
function _addMLCss(){jQuery('style#FLSMultyStyleDLGCss').remove();jQuery('<style type="text/css" id="FLSMultyStyleDLGCss">\n'+'.fls-mst-edit-area span, .fls-mst-edit-area font{font-size:1em;font-family:inherit;}\n'+'.mst-edit-dlg{background-color:#F1F2F2;padding: 5px 5px 10px 5px;position:relative;margin: 0 auto 0 auto;}\n'+'.mst-font-selector-drop{border-bottom: 1px solid #CACACA;font-size: 12px;text-decoration: none;font-family: verdana, arial,sans-serif;color: #666;display: inline-block;text-overflow: ellipsis;white-space: nowrap;overflow: hidden;position: relative;cursor: pointer; margin: 0;width:100%;}'+'.mst-font-selector-drop .mst-font-name{padding:0;display:block;width:100%;text-overflow:ellipsis;overflow:hidden;height:19px;line-height:19px}'+'.mst-font-selector-drop .mst-down-arrow{padding:0; line-height:25px;display:block;width:25px;height:100%;position:absolute;right: 0;top: 0;font-size: 18px;color:#666;text-align:center;}'+'span.mst-font-selector-drop .mst-down-arrow:after{position: absolute; top:5px; left:0px; content:""; width:100%; height: 14px; background-position: center 0; background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAYCAYAAADKx8xXAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNXG14zYAAAAWdEVYdENyZWF0aW9uIFRpbWUAMDMvMjcvMTWhU1PqAAAApklEQVQ4je3TsQ3CQAyF4T8kg2SDWyNlFjjrxqBjFFBYgjEIG9AxAlSPhqAcuYRTSsRrLNn6XFhy4c1qYEd+HsC2APBmAdhnovbYdacS4NL3Z+fcFWhzEEA5dL/gCEVwAU/QBCZwEi3GmwVv1szNC0nZy8bZrFJ/+DOwAmpWPDKSkBSUl7ukRhIDzMFv9AmXcIRSMIUnaA6OcRJJopq53OFVb0Dy+5/9/ClmjINyVAAAAABJRU5ErkJggg=="); background-repeat:no-repeat; }\n'+'#mst-fontselector-list {display:none; padding: 0; margin:0; box-shadow: 0px 2px 2px rgba(0,0,0,0.5); background-color: #FFF; min-width: 140px; max-height: 215px;overflow-x:hidden; overflow-y: auto;}\n'+'#mst-fontselector-list span.mst-font-item{white-space: nowrap;cursor:pointer;display:block; padding:2px 3px; font-size: 18px; text-decoration: none; border: 2px solid #FFF; color: #000; width: 215px; overflow: hidden;text-align:left;}\n'+'#mst-fontselector-list span.mst-font-item.active{border-color: #CCC;}\n'+'#mst-fontselector-list span.mst-font-item:HOVER{border-color: #000;}\n'+'.mst-font-selector-drop.disabled .mst-font-name{background-color:#f6f6f6; color:#aaa;}'+'.mst-font-selector-drop.disabled{cursor:default;}'+'.mst-btn{position:relative;cursor:pointer; display:inline-block; width:18px; height:18px; line-height:20px; border:1px solid #CCC;text-align:center;margin:5px 10px 5px 0;}\n'+'.mst-btn:after{content:"";position:absolute; left:0; top:0; width:100%; height:100%; background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAB9CAYAAACrmePlAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAOnAAADpwBB5RT3QAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNXG14zYAAAXUSURBVFiF7dl7jF9FFQfwz9iHbdmypF2g4opUEkXxUUEhJmJTnyGh4isRQyj4h/GdYEx8RiU+4ism2piQaBCNJsYABnm1VbSJGlRAKVofQbFQCpai0tJud7HbHf84c/c3v7v3t3SbGE3dSW5+986c+d5zz5z5njPnJ+cMn8Ik9uFAucYwXn7343e4GAtyzppLAViHnyNX1yNl0t+qvil8Aov7AArIS4pAI/xprMIrcFPV/y+c28xbqNfGi0Aqzw/lnHdjd0ppR9FyGRaVX/CkCuDJ+ttkdf+8SvYB3N8M1Bqo3g5npJTOwdn4MJbgYbwDO6alKhucq9+I4/gnDlV9N2GkXoX6E9rtdmzEN7Cn9K3DT1NKrz8SDd5Zjb0Su6qxXVjTpUGu7o+rXnIrbqjGnoo30b8Kky2A8Rb4qtbzcvpXYUr/KoyklIbxFGzA+dXY49jUqAcvxs36bbAbv8E9+j30H3iXsicagCuKULOJDpS3TJVrHL/Hl3FW8+Kcs1QAjrrN5gf/LwDqjdFy3WYT7cdBTOgt5VVdhFK3B/Fd4Twjpe8wfoJf4/uzalBp8tXqrTdgYVvmiWzw9Or+lpzzZFtgIEBK6TS8qDzuFZ44o82mwRoMl/ud2DZXgJdhabnfnnPef8QAKaWEc8rjIWwd9JZBGpyJ1eX+MdwxV4A1gkiI779nrgBn6bHTbTnnNr0NBkgpLcXaquuuQZPRR+svwMewWbht44HbRaA9o9NbK4Cv6I9KY+XKgrEv7AKYp7RjAqCTE1NKQxgVGyrhPuzMOR+YIVz84ITyO4TX4jqRHzYeubv0rceSrkTzm3g5rtYfobuujVjeBsgiGteC+3Gn2Bu3iTypGfsMxYsLwFg1eEjw/4Zig2GR0lyI6yuZtW0N6us9A+LEkmKLjC11ZPohFpT7RTg5pXR8zvmxlsEnUkqX44V4Fb1lvEjPJxYLNj48Y8kC5IGU0vbyeQGQc360S3iWNoVfcvSeOIovHBVASmmDWKXNcwZIKY2IDPbKhqnnRGkppWdiLOf84HTfPCfOA/xPAMyg9civDOFUnCbYZwd2DaT1FmWt16P1KZEbPIRrcAGOK7LDNScSx7iNZqf0KVwlTrBX1wBJUHUjuAe/wBaRnR9oAU2E8j2AtXrng+sFhY/iBDwDl4lksz6Ij9UAW0rndcUOM2yL97Y/qab1V+OvuDznPNE3M1ZlOU7Gz4oWNKxdBZYfVKtRrwxBY6fjFHGCGcGKWoNfFQtLKelgqTHc2/Fp0574RTxtxocXsFmORNMAm7A1pXRJzrn57i5NBmpwEFdiKKW0ck5M3QiXt45iWc55YHo/EOBo23+fD+baFom60l6RzU1nJUc6+UviYH4NnqO/aPOE7S3C5TeJvfE5UZDpbCN4I55bnpfj1gJwUNTU7sfXBgGcV4S34fmiylOfoyaF43W2dbi0TMrCYHuriZvw5q6JC/F2UQK8Wxz931q99VF8CCu7Jp+kv9iQRRbW0NlhcQRe3TV5veDBfSI/rrP0O0RsuEwUY+8Sx+K+thl/wLXCMHfqUXgWhcnV+Gx5vqienITFV4slW1DssEe4eVMC+aNwop1Fi7+3tVhWkG/HjeIUe29ljzH95+np1rjyIRG+Fotj77CIjSvL5HeLcuFUF0jdji/CP8JvC/DnzW3POBEfEIXX72HFbMJdyAdL/7NEIL17NoBjgNLmAf4TNVXBTGcL/t8nEqqbBZ0vGlhHqgAuFptmQvxNtK0AZbFLVwwEEKnMBfgxPiJ44lS8ThBPxncw1FXJOlPUD1YNyEaGRETKOK9dPzgFt5TBbykVjQ6QDxaZbzcgzcB6QdtNMJlReBOxsYlOGVe0NXhfGfj6LEnVpUVmK05v22AUfxH/ZK3tmHxi+X0/nt1lxIRLyhsewSdFkeGl+Cj+jI+LHGrgMi7AG/AnEVweFnX2x0XQeVvb+ToZKaV0El5TfGKpOO7fiPtyzn2VjXlKmwc4RgD+DUXE7EqoP+WxAAAAAElFTkSuQmCC");background-repeat:no-repeat;background-position:center 0;display:block;}\n'+'.mst-btn.mst-toggle_font_weight:after{background-position:center 2px;}\n'+'.mst-btn.mst-toggle_font_style:after{background-position:center -17px;}\n'+'.mst-btn.mst-undo:after{background-position:center -37px;}\n'+'.mst-btn.mst-redo:after{background-position:center -60px;}\n'+'.mst-btn.mst-clear_format:after{background-position:center -78px;}\n'+'.mst-btn.mst-reset:after{background-position:center -99px;}\n'+'.mst-btn.mst-color-sample:after{background-image:none;}\n'+'.mst-tools-left{width: 65%;padding:10px 0; text-align:left;}\n'+'.mst-tools-right{width: 35%;height: 100%;position: absolute;top: 0;right: -5px;}\n'+'.mst-tools-left .font-size-slider-control-wrapper{margin:0;}\n'+'.mst-tools-left .font-size-slider-control-wrapper .font-size-slider-controls{margin:5px 0;}\n'+'.fls-mst-edit-area{text-align:center;}\n'+'.mst-buttons-container{text-align:center;margin:10px 0 0 0;}\n'+'</style>').appendTo('head');}
function _buildFontsSelector(){if(cfg.fonts){fontsSelectOptions=jQuery(document.createElement('ul'))
fontsSelectOptions.css({position:'absolute',zIndex:100,left:'0px',top:'30px',listStyle:'none'});fontsSelectOptions.attr('id','mst-fontselector-list');for(var fnt_nm in cfg.fonts){fontsOptions[fnt_nm]={'bold':cfg.fonts[fnt_nm]['bold_src'].length>1,'italic':cfg.fonts[fnt_nm]['italic_src'].length>1,}}
SortFontByName();var fontitems='';for(var fi=0;fi<fontsOrder.length;fi++){var fontname=fontsOrder[fi];fontitems+='<li><span data-fontfamily="'+fontname+'" style="font-family: \''+fontname+'\';" class="mst-font-item" data-action="set_font_family">'+fontname+'</span></li>';}
fontsSelectOptions.append(jQuery(fontitems));var selector=jQuery('<span data-action="show_fonts_list"><\/span>');selector.addClass('mst-font-selector-drop');fontNameLabel=jQuery('<span class="mst-font-name" data-action="show_fonts_list">&nbsp;</span>');selector.append(fontNameLabel);var downarrow=jQuery('<span class="mst-down-arrow" data-action="show_fonts_list">&nbsp;</span>');selector.append(downarrow);return selector.get(0);}}
function _showDlg(){if(!editOverlay){editOverlay=jQuery(document.createElement('div'));editOverlay.css({position:'absolute',width:'100%',height:'100%',backgroundColor:'rgba(0,0,0,0.7)',top:0,left:0,'z-index':120});if(cfg.container){jQuery('#'+cfg.container).append(editOverlay);}else{jQuery('body').append(editOverlay);}
editOverlay.append(editDlg);var ed_h=editDlg.height();editDlg.css({top:(ed_h/2)+'px'});}else{editOverlay.show();}
styleWithCss=document.execCommand('styleWithCSS',false,true);editArea.focus();_updateToolbar();}
function _hideDlg(){if(editOverlay instanceof jQuery){editOverlay.hide();}}
function _resetContent(){editArea.innerHTML='';if((txtObj instanceof FLSEditorCore.CMultiLineText)&&txtObj.multistyle_on()){editArea.style.fontFamily=txtObj.getFontFamily();editArea.style.fontSize=txtObj.getFontSize()+'px';editArea.style.color=txtObj.getColor();var styles=txtObj.multistyle_cfg();if(styles.length){for(var i=0;i<styles.length;i++){var spn=document.createElement('span');spn.innerHTML=styles[i].text;if(styles[i].font_family){spn.style.fontFamily=styles[i].font_family;}
if(styles[i].color){spn.style.color=styles[i].color;}
editArea.appendChild(spn);}}else{editArea.innerHTML=txtObj.getText();}}}
this.editTextObj=function(to){editArea.innerHTML='';txtObj=null;if((to instanceof FLSEditorCore.CMultiLineText)&&to.multistyle_on()){txtObj=to;_resetContent();editArea.focus();_updateToolbar();}};this.show=function(){_showDlg();};this.hide=function(){_hideDlg();};this.getMultistyleText=function(){var plain_text=editArea.innerText;console.log(editArea.childNodes,plain_text);};};;"use strict";var _LogoStep2BcSuggest=function(){var bc_sizes={'businessCardStandard':{zoom:1.9,w:[259,263],h:[151,155],trim:[3.5,2.0],editor_version:54},'businessCardStandardEU':{zoom:1.9,w:[250,254],h:[165,169],trim:[3.15,1.97],editor_version:56},};var logoCfg=null,active_bc_key='businessCardStandard',backDesignDlgID,container,body,bc_suggest_ids,valid_cfg=false,apiroot,logourl,layoutUrl,apiUrl={},texts_url,properties_url,selector_wrap,canvasID='FLSBcSuggestLogoStep2Canvas',editorID,ovrly,_logoFontsCssAdded=[],fonts_base_url='',uiTexts={suggestions:{heading:'Would You Like Matching Business Cards?',save:'No Thanks, Just Save My Logo!',select:'Select Card Design',}};var loadSteps=[];var dom_port='';if(document.location.port.length){dom_port=':'+document.location.port;}
var apiRoot=document.location.protocol.replace(':','')+'://'+(document.domain+dom_port)+'/';var _apiRoot=apiRoot;var bc_ws={width:(bc_sizes[active_bc_key]['w'][0]+bc_sizes[active_bc_key]['w'][1])/2,height:(bc_sizes[active_bc_key]['h'][0]+bc_sizes[active_bc_key]['h'][1])/2};var preview_sz={'businessCardStandard':{w:250,h:147},'businessCardStandardEU':{w:250,h:166}};var preview_zoom={'businessCardStandard':preview_sz['businessCardStandard']['w']/((bc_sizes['businessCardStandard']['w'][0]+bc_sizes['businessCardStandard']['w'][1])/2),'businessCardStandardEU':preview_sz['businessCardStandardEU']['w']/((bc_sizes['businessCardStandardEU']['w'][0]+bc_sizes['businessCardStandardEU']['w'][1])/2)};var loading=false;var logo_copy=null;var l_ids;var editor=false;var logo_colors=[];var logo_colors_uint=[];var choiceCallback=function(saveparams){console.log(saveparams);};var loadCompleteCallback=function(){console.log('Load Complete');};var beforeSuggestDlgShowCallback=function(){console.log('Before suggest dlg show callback');};var evt_bound=false;var bcfonts={};var GoogleWebFonts={api_base:'//fonts.googleapis.com/css?family=',api_protocol:window.location.protocol.replace(':','')+':',fonts:{},faces:{normal:'400',italic:'400italic',bold:'700',bolditalic:'700italic'}};var mobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|PlayBook|BB10|IEMobile|Windows Phone/i.test(navigator.userAgent);var wp_mobile=/IEMobile/i.test(navigator.userAgent);var _this=this;var langparam='';var designs=[];var design_ids=[];var layouts={};var svg_defs={paths:{}};function _bindEvents(events,elements,callback){if(!(elements instanceof jQuery)){elements=jQuery(elements);}
if(mobile&&wp_mobile){var evtmap={touchstrat:'pointerdown',touchmove:'pointermove',touchend:'pointerup',touchcancel:'pointercancel'};for(var ei=0;ei<events.length;ei++){if(evtmap[events[ei]]){events[ei]=evtmap[events[ei]];}}}
elements.each(function(){for(var i in events){if(document.addEventListener){this.addEventListener(events[i],callback,false);}else if(document.attachEvent){this.attachEvent("on"+events[i],callback);}}});}
function svgFilter(tofilter,ctype){tofilter=tofilter.replace(/(xmlns:ns[0-9]*?="")|(\sns[0-9]*?:)|(xmlns="http:\/\/www.w3.org\/2000\/svg"\s?)|(inkscape:connector-curvature="0")/ig,'');return tofilter.replace(/(<svg\s)/i,'<svg xmlns="http://www.w3.org/2000/svg" ');}
function updateEuBcLayout(scl_x,scl_y,target_w,target_h,width,height,bcid){var zoom=editor.zoom();var new_pw=target_w*zoom;var new_ph=target_h*zoom;var new_scale_xml=target_w/new_pw;var lx=jQuery('layout',layouts[bcid]['xml']);var max_scale=Math.max(scl_x,scl_y)
if(lx.length){lx.attr('previewWidth',new_pw);lx.attr('previewHeight',new_ph);lx.attr('width',target_w);lx.attr('height',target_h);lx.attr('scale',new_scale_xml);jQuery('areas area',lx).each(function(index){var area=jQuery(this);var a_name=area.attr('name').toLowerCase();var ax=parseFloat(area.attr('x'));var ay=parseFloat(area.attr('y'));var aw=parseFloat(area.attr('w'));var ah=parseFloat(area.attr('h'));switch(a_name){case'area_logo':ay*=scl_y;ax*=scl_x;aw*=scl_x;ah*=scl_y;break;default:ax*=scl_x;ay*=scl_y;aw*=scl_x;ah*=scl_y;}
layouts[bcid].areas[a_name]['x']=Math.ceil(ax);layouts[bcid].areas[a_name]['y']=Math.ceil(ay);layouts[bcid].areas[a_name]['w']=Math.ceil(aw);layouts[bcid].areas[a_name]['h']=Math.ceil(ah);area.attr({x:layouts[bcid].areas[a_name]['x'],y:layouts[bcid].areas[a_name]['y'],w:layouts[bcid].areas[a_name]['w'],h:layouts[bcid].areas[a_name]['h']})});}}
function setEuBCSize(bcid,cw,ch){var w,h,wfsz,scl_x,scl_y,tw,th;function copy_and_crop_bg_image(img_obj){img_obj.onload=null;var dpi_mul=300/72;var target_w=tw*dpi_mul;var target_h=th*dpi_mul;var img_sz=img_obj.getImgSize();var min_ratio=Math.min(img_sz.width/target_w,img_sz.height/target_h)
target_w=Math.round(target_w*min_ratio);target_h=Math.round(target_h*min_ratio);var top_x=Math.round((img_sz.width-target_w)/2);var top_y=Math.round((img_sz.height-target_h)/2);var crop_canvas=document.createElement('canvas');crop_canvas.width=target_w;crop_canvas.height=target_h;var cc_ctx=crop_canvas.getContext('2d');var img=img_obj.getImageTag();var oldsrc=img.src;var old_xlinkhref=img_obj.xlinkhref;var isjpeg=/(data:image\/jpeg;base64,)|(\.(jpg|jpeg))/i.test(old_xlinkhref)
img_obj.mimetype=isjpeg?'image/jpeg':'image/png'
cc_ctx.fillStyle='#FFF';cc_ctx.fillRect(0,0,target_w,target_h);cc_ctx.drawImage(img,top_x,top_y,target_w,target_h,0,0,target_w,target_h);var new_src=crop_canvas.toDataURL(img_obj.mimetype,1);img_obj.is_new(true);img_obj.setSize(tw,th);img_obj.setMatrix([1,0,0,1,0,0]);img_obj.base64src=true;img_obj.xlinkhref=img_obj.xlinkhref.replace(/\.(jpg|jpeg|png)/i,'_cropped.$1');img_obj.src(new_src);}
if(logoCfg.card_type&&(logoCfg.card_type=='EU')){w=bc_sizes['businessCardStandardEU']['w'];h=bc_sizes['businessCardStandardEU']['h'];if(!(cw>=w[0]&&cw<=w[1]&&ch>=h[0]&&ch<=h[1])){var imageDesign=false;tw=(w[0]+w[1])/2;th=(h[0]+h[1])/2;scl_x=tw/cw;scl_y=th/ch;updateEuBcLayout(scl_x,scl_y,tw,th,cw,ch,bcid);var design_idx=design_ids.indexOf(bcid);if(design_idx==-1)return false;var objs=designs[design_idx];var breakme=0;for(var oi=0;oi<objs.length;oi++){if((objs[oi]instanceof FLSEditorCore.CRect)&&objs[oi].id=='backgroundColor'){objs[oi].setSize(tw,th);}else if((objs[oi]instanceof FLSEditorCore.CPathGroup)&&objs[oi].getPaths().length){objs[oi].scale(scl_x,scl_y);}else if((objs[oi]instanceof FLSEditorCore.CImage)&&objs[oi].xlinktype=='templateBackground'){if(logoCfg.backgr_keep_ratio){var max_scl=Math.max(scl_x,scl_y);objs[oi].scaleUniform(max_scl);old_bg_xlinkhref[sc]=objs[oi].xlinkhref;if(objs[oi].loaded()){copy_and_crop_bg_image(objs[oi]);}else{if(typeof(objs[oi].onload)=='function'){var onload_org=objs[oi].onload;objs[oi].onload=function(){onload_org.apply(null,arguments)
copy_and_crop_bg_image.apply(null,arguments);}}else{objs[oi].onload=copy_and_crop_bg_image;}}
imageDesign=true;}else{objs[oi].scale(scl_x,scl_y);}}else{if(objs[oi]instanceof Array){for(var ti=0;ti<objs[oi].length;ti++){var opos=objs[oi][ti].getPosition();var new_x=opos.x*scl_x;var new_y=opos.y*scl_y;objs[oi][ti].setPosition(new_x,new_y);}}else{var opos=objs[oi].getPosition();var new_x=opos.x*scl_x;var new_y=opos.y*scl_y;objs[oi].setPosition(new_x,new_y);}}
if(breakme==3){break;}}}}}
function _choiceToRaster(bc_design){var rcanvas=document.createElement('canvas');rcanvas.width=bc_ws.width*bc_sizes[active_bc_key]['zoom'];rcanvas.height=bc_ws.height*bc_sizes[active_bc_key]['zoom'];var rctx=rcanvas.getContext('2d');rctx.setTransform(1,0,0,1,0,0)
rctx.fillStyle='#FFF';rctx.fillRect(0,0,rcanvas.width,rcanvas.height);rctx.setTransform(bc_sizes[active_bc_key]['zoom'],0,0,bc_sizes[active_bc_key]['zoom'],0,0);rctx.save();for(var i=0;i<bc_design.length;i++){if(bc_design[i]instanceof FLSEditorCore.CObject){bc_design[i].for_preview=true;bc_design[i].render(rctx);bc_design[i].for_preview=false;}else{if(bc_design[i]instanceof Array){for(var j=0;j<bc_design[i].length;j++){bc_design[i][j].for_preview=true;bc_design[i][j].render(rctx);bc_design[i][j].for_preview=false;}}}}
rctx.restore();return rcanvas.toDataURL().replace(/data:image\/png;base64,/ig,'');}
function _choiceToSvg(bc_design){var svg=document.createElementNS('http://www.w3.org/2000/svg','svg');var logolayer=document.createElementNS('http://www.w3.org/2000/svg','g');var textlayer=document.createElementNS('http://www.w3.org/2000/svg','g');logolayer.setAttribute('id','surface2');textlayer.setAttribute('id','surface4');svg.setAttribute('width',bc_ws.width+'pt');svg.setAttribute('height',bc_ws.height+'pt');svg.setAttribute('viewBox','0 0 '+bc_ws.width+' '+bc_ws.height);svg.setAttribute('version','1.1');svg.setAttribute('xmlns','http://www.w3.org/2000/svg');svg.setAttribute('xmlns:xlink','http://www.w3.org/1999/xlink');svg.appendChild(document.createTextNode('\n  '));svg.appendChild(logolayer);svg.appendChild(document.createTextNode('\n  '));svg.appendChild(textlayer);svg.appendChild(document.createTextNode('\n'));if(bc_design[0]instanceof FLSEditorCore.CPathGroup){bc_design[0].toSVG(logolayer);}
var telements=bc_design[1];for(var i=0;i<telements.length;i++){if(telements[i]instanceof FLSEditorCore.CText&&telements[i].getText()!=telements[i].default_text()){telements[i].toSVG(textlayer);}}
if(bc_design[2]instanceof FLSEditorCore.CLogoObjectGroup){var embedlogo=document.createElementNS('http://www.w3.org/2000/svg','g');embedlogo.setAttribute('id','logo');svg.appendChild(document.createTextNode('\n  '));svg.appendChild(embedlogo);bc_design[2].toSVG(embedlogo);}
textlayer.appendChild(document.createTextNode('\n  '));logolayer.appendChild(document.createTextNode('\n  '));var svgstr=new XMLSerializer().serializeToString(svg);return svgstr;}
function colorDistOk(color1,color2){var c1=FLSUtil.hexdec2rgb(color1);var c2=FLSUtil.hexdec2rgb(color2);var mr=(c1[0]+c2[0])/2;var dr=c1[0]-c2[0];var dg=c1[1]-c2[1];var db=c1[2]-c2[2];var _dr=((512+mr)*dr*dr)>>8;var _dg=4*dg*dg;var _db=((767-mr)*db*db)>>8;var color_dist=Math.sqrt(_dr+_dg+_db);return color_dist>60;}
function _findLogoColors(){while(logo_colors.length){logo_colors.pop();logo_colors_uint.pop();}
var eobjs=editor.getObjects();for(var li=0;li<eobjs.length;li++){if(eobjs[li]instanceof FLSEditorCore.CPathGroup){var lpaths=eobjs[li].getPaths();for(var pi=0;pi<lpaths.length;pi++){var colortmp=lpaths[pi].getColor();if(!colortmp)continue;var badclr=/rgb\(\s*?(100(\.\d+)?%|255)\s*?,\s*?(100(\.\d+)?%|255)\s*?,\s*?(100(\.\d+)?%|255)\s*?\)|rgba\(\s*?(0)s*?,\s*?(0)\s*?,\s*?(0)\s*?,\s*?(0)\s*?\)/i.test(colortmp);var colortmp_n=FLSUtil.normalizeCssColor(colortmp);if((logo_colors.indexOf(colortmp)==-1)&&!badclr&&colortmp_n.uint<16770000){for(var uidx=0;uidx<logo_colors_uint.length;uidx++){if(!colorDistOk(logo_colors_uint[uidx],colortmp_n.uint)){badclr=true;break;}}
if(!badclr){logo_colors.push(colortmp);logo_colors_uint.push(colortmp_n.uint);}}}}else{if(logo_colors.length<2){var colortmp=eobjs[li].getColor();if(!colortmp)continue;var badclr=/rgb\(\s*?(100(\.\d+)?%|255)\s*?,\s*?(100(\.\d+)?%|255)\s*?,\s*?(100(\.\d+)?%|255)\s*?\)|rgba\(\s*?(0)s*?,\s*?(0)\s*?,\s*?(0)\s*?,\s*?(0)\s*?\)/i.test(colortmp);var colortmp_n=FLSUtil.normalizeCssColor(colortmp);if((logo_colors.indexOf(colortmp)==-1)&&!badclr&&colortmp_n.uint<16770000){for(var uidx=0;uidx<logo_colors_uint.length;uidx++){if(!colorDistOk(logo_colors_uint[uidx],colortmp_n.uint)){badclr=true;break;}}
if(!badclr){logo_colors.push(colortmp);logo_colors_uint.push(colortmp_n.uint);}}}}}}
function _setupSuggestDLG(callback){var selectorcss='<style type="text/css" id="'+backDesignDlgID+'-CSS">\n'+'#'+backDesignDlgID+' .selector-title{font-size:26px;font-family: arial,verdana,sans-serif; margin: 15px; color:#f3793a; color:#005596; text-align:center; padding:0;}\n'+'#'+backDesignDlgID+' .selector-dlg-wrapper{padding:0;background-color: #F1F2F2;display: block;position: relative;width: 925px; height: 506px;overflow:hidden;}'+'#'+backDesignDlgID+' .selector-dlg-wrapper.eu-preview{height: 540px;}\n'+'#'+backDesignDlgID+' .selector-dlg-wrapper .inner-wrapper{padding:0; margin:20px; position: relative; height: 360px; background-color:#FFF;}\n'+'#'+backDesignDlgID+' .selector-dlg-wrapper.eu-preview .inner-wrapper{height: 400px;}\n'+'#'+backDesignDlgID+' .selector-dlg-wrapper .logo-choices{margin-right:0; border-right: 2px solid #666; width: 285px;}\n'+'#'+backDesignDlgID+' .selector-close-dlg-btn{cursor:pointer; user-select:none; -moz-user-select:none;color:#256CA2; border-radius:20px;text-align:center; line-height:27px;position:absolute; z-index:2; font-size:25px; font-family: verdana,arial,sans-serif; width:30px; height:30px; font-weight:bold; top:-16px; right:-16px; background-color:#fff; border:3px solid #9F9F9F;}\n'+'#'+backDesignDlgID+' .selector-close-dlg-btn:active, selector-close-dlg-btn:hover{background-color:#256CA2; border:3px solid #052856; color: #FFF;}\n'+'#'+backDesignDlgID+' .selector-carousel{width:auto; margin:0 40px; height:100%;position:relative}\n'+'#'+backDesignDlgID+' .selector-carousel .selector-slider{position:absolute; left:0; top:0; height: 100%; -webkit-transition: left 0.3s;transition: left 0.3s; -webkit-transform: translate3d(0,0,0); transform: translate3d(0,0,0);}\n'+'#'+backDesignDlgID+' .selector-carousel .selector-slider .design-item{padding:0; float:left; display:inline-block; width: '+preview_sz[active_bc_key]['w']+'px; height:'+preview_sz[active_bc_key]['h']+'px; margin: 20px 20px 0 3px;position:relative;}\n'+'#'+backDesignDlgID+' .selector-carousel .selector-slider .design-item canvas{cursor:pointer; width: '+preview_sz[active_bc_key]['w']+'px; height:'+preview_sz[active_bc_key]['h']+'px; box-shadow: 0px 0px 3px rgba(0,0,0,0.5); background-color: #FFF; position: absolute;}\n'+'#'+backDesignDlgID+' .selector-carousel .selector-slider .design-item .inner-bc-suggest{position:absolute; width: '+(preview_sz[active_bc_key]['w']+12)+'px; height:'+(preview_sz[active_bc_key]['h']+12)+'px; left:-5px; top:-5px; border:1px solid transparent;}\n'+'#'+backDesignDlgID+' .selector-carousel .selector-slider .design-item .choose-this-button{display:none;cursor:pointer; background-color:#eb772a; box-shadow: 0 2px 3px -1px rgba(0, 0, 0, 0.3); color: #FFF; font-size:15px; font-weight:normal; line-height:1.3em; padding:7px 20px; white-space:nowrap;text-align:center; margin:0 20px;font-family:arial,verdana,sans-serif}\n'+'#'+backDesignDlgID+' .selector-carousel .selector-slider .design-item:HOVER .choose-this-button{display:block;}\n'+'#'+backDesignDlgID+' .selector-carousel .selector-slider .design-item .choose-this-button:HOVER{background-color:#F5A742;}\n'+'#'+backDesignDlgID+' .selector-carousel .selector-slider .design-item:HOVER .inner-bc-suggest{height:'+(preview_sz[active_bc_key]['h']+65)+'px;border:1px solid #BABABA; background-color:#DADADA;z-index:100; border-radius:4px;}\n'+'#'+backDesignDlgID+' .selector-navigate{background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD8AAAAeCAYAAACbr8ZMAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAA9wAAAPcBuQ9IfwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAYKSURBVFiF3ZlbbFTXFYa/tcd4xuZSY1Kw26cWSCJ7TFJwFKBIXFM1DeIBQtQUj9OqiRHmYptGXEKjgHKlpDDjJFZrSAAPyYuNqqDQqrlgXKG2EpCCPYOqphFVlICJExeTYI/Bc1YfsNuxM2fOOWNXqvq/7b3W+tf6z9776Ox1RFVxwvzNzXlfJhOLgR+oyN2oFgNFQBK0U5FOkNNgvRVIJE6d+XXVTUdSjyhf2zguEQgsALMc9B5Bi0CKAB/QichlUT0H/HaCL9D6x72r+5w4JZP44OZXC8Xyb0N1PZDvss5uEfZMMIGImwKcENzVnGu6+zYosgModBnWC0QSal74oH7NNTsnW/HB2qZqQZ5D+Zr3kgH4REWqY+GKY1nGU1Z3ZBGWHgCmZ0UgfCpQ1x4OvZHWPFJ8cFdzrnT3vQLyaFYJh0OBJzsioWe9Bs6qOVKl6CtAzqiLEN0dj1RuV2WY2GHiB8/V7wRZOtqEw5Owv70+VOXWv6wm+gywYyxrAI76E30Pp76PTKq1Py//pbEWDqDCY8FN0Vo3vmW10Z8y9sIBViUCeS+nTvx75YO10cdEacyW2WfMpaSlU0D9Ni5JRe+LRSpb7TiCtdEFopwAxqWzj/MZJubn0v1FItsyVcXcGwuvOQ2DK/+dukMFouzOlrGoYPzpk888mIdofwY3nyAvP/RQsy+dUXbtMgIN2AgHCOTm0LJlOffMmJZtqSKarBdBYFD8gOXbAkzOgmxg1byZbW/vXFleMN7vJr7kQnH/T9IZSru/FUIpcyL4+qQ8Dmy4j3Xfn4UR8VwwyNxgTdMaADNz00t+YKNXCp8xlxqrl/115w/nLhx6kq5So9tsLE+45TAiVN9/F43Vy7htUp7bsP9kUnaXr23MN35TsAiY4CV4aJvPu6M46DkzTC/dfLg0dSK46fUSgdu9Et17exEtW5Yz745iT3GKfOOmP3+OEeUBD3EDK+fO8LLN08IkzYphY2OtsPN1wpSJAX61bikbH7gbY9wfA0u0NAeR2bj4vvcZc6lh7ZLP599ZvDDbQlMwJ3WgSvloyIwIVd8rY870qWw5fIpPe3odYwSCBtUiJ8dpBfmnW59eFZh/Z7HjC8kVRIoyjrPEnOnTaNm6nAUl33T0VaXUcOt2ZoeBlXNntL2zc1X55AkBt5cKZ4x84C4WwC0mj/fTULWEuhWz8WU6BnJLfEY4H4j/Tbg5/QbozGDP+c2f/75w6c6jZ7u/THSPUV0g0plxPApcvd7Phv0n2HvsfZJWhqVT4sZN4q6rveWLf95yoy3+8fkxqVC1M+M4S5y72MXqXxznD/FPHH1FiBtU33dDbKkWbWhsDW6LnjppqVqjKVKEMyOmzo6GTxUOvhfnx/W/p/PqdZcxEjeo9ZaHPL7jZy4uWvJky7mua31d2ZUKlmWGNTgsn5V1w6Ont5+N+1udt/kIiEnGTYJrbYBtqycdPv8iMXvZU0f13fMf/cVrsQp/i9WvuZA6F9/7SBz40CvX+X908eDu47TFP/YaekXGmbPmg/qN/YpEvEZblk6te63trp8dbPN4DPS5tLPIC64ZFA6duMAjEffbPBWCbD+/J3TdAPSrvAh85pkFzNvnPlq0cEdz+5We3isusnbECy9G05lKLvsPAhfS2VIxtM1/+eZZT9s8pYYzHfUVh2BYM+NIpage9s42yGnkM7V0EpBr43JThSWxcOiUHUewpmmxIO9wqx39FeTm+JgyMcDlf3pf7UGoGP1u+77KP0FKGysWrmgCfTFrVktvw144COsyCQeIRSpbVXnczn5jIDka4ahweEg4jOjhxQovbgWas2a3x7Md4dCrbhxj9aGwKPv/CzW0Xu9Jrkud+ErrWgQprWl6XlS2jkHCAUHWt0cqPPcGy2qiO4Cncfel6gA9oIV562NPrb6ROmv702JWbfRHCvtQpmaZ8UOMPNqxr+JklvEEa4+sENUGwPmalg5Cj6JPxMKVDenMtheb9nDojYRlZgLPc+v3j1t0IzyuhYGS0QgHiIUrjk30BWaKsB3wcrfoRWSPmhvfthMODv/qhvD/+qPyXxAMbIiZoSQeAAAAAElFTkSuQmCC");'+'background-repeat:no-repeat; width:30px; height:30px; dispaly:block;position:absolute; bottom:200px;cursor:pointer;}\n'+'#'+backDesignDlgID+' .selector-navigate.left{left:5px;}\n'+'#'+backDesignDlgID+' .selector-navigate.right{right:5px; background-position:-33px 0;}\n'+'#'+backDesignDlgID+' .selector-dlg-wrapper .selector-action{border-radius:20px;font-weight:bold;display:inline-block;cursor:pointer;}\n'+'#'+backDesignDlgID+' .selector-dlg-wrapper.no-navigation{width:880px;}\n'+'#'+backDesignDlgID+' .no-navigation .selector-navigate{display:none;}\n'+'#'+backDesignDlgID+' .no-navigation .selector-carousel{margin:0 20px;}\n'+'#'+backDesignDlgID+' .selector-slider .top{background:none;}\n'+'#'+backDesignDlgID+' .selector-slider .bottom{background:none;}\n'+'#'+backDesignDlgID+' .selector-dlg-wrapper .close-suggest-dlg{font-family:arial,verdana,sans-serif;text-transform:uppercase;cursor:pointer;position:absolute; right:0;top:0; font-size:16px; font-weight:normal;color:#005598;background-color:#E0E0E0; padding:5px 10px;margin:0;}\n'+'#'+backDesignDlgID+' .selector-dlg-wrapper .close-suggest-dlg:active, .close-suggest-dlg:hover{background-color:#d6d6d6;}\n'+'#'+backDesignDlgID+' .selector-carousel .selector-slider .design-item .select-item-button-container{display:none; position:absolute; width: 100%; height:37px; left:0px; bottom:0px; background-color:rgba(192,192,192,0.8);text-align:center;}\n'+'#'+backDesignDlgID+' .selector-carousel .selector-slider .design-item:HOVER .select-item-button-container{display:block;}\n'+'#'+backDesignDlgID+' .selector-carousel .selector-slider .design-item  .select-item-button-container .choose-this-button{position: relative; box-shadow: none; font-size:12px;line-height:1.2em; padding:5px 20px; margin:8px auto;-moz-border-radius:3px;-webkit-border-radius:3px;-ms-border-radius:3px;-o-border-radius:3px;border-radius:3px;}\n'+'#'+backDesignDlgID+' .selector-carousel .selector-slider .design-item:HOVER  .select-item-button-container .choose-this-button{display:inline-block;}\n'+'</style>\n';jQuery(selectorcss).appendTo('head');ovrly=jQuery(document.createElement('div'));ovrly.attr('id',backDesignDlgID);ovrly.css({'background-color':'rgba(0,0,0,0.7)','display':'none','position':'fixed','z-index':150,'width':'100%','height':'100%'});body.prepend(ovrly);selector_wrap=jQuery('<div class="selector-dlg-wrapper no-navigation">'+'<span class="close-suggest-dlg" data-action="remove-cancel">X</span>'+'<h2 class="selector-title">'+uiTexts.suggestions.heading+'<\/h2>'+'<div class="inner-wrapper">'+'<span class="selector-navigate left" data-action="left">&nbsp;</span>'+'<span class="selector-navigate right" data-action="right">&nbsp;</span>'+'<div class="selector-carousel" id="BackDesignSelectorCarousel">'+'<div class="selector-slider"><div class="top"></div><div class="bottom"></div></div>'+'</div>'+'</div>'+'<div style="text-align:center;"><span class="fls-button fls-orangebutton selector-action" data-action="remove-cancel">'+uiTexts.suggestions.save+'</span></div>'+'<\/div>');if(active_bc_key=='businessCardStandardEU'){selector_wrap.addClass('eu-preview');}
var cntpos=container.offset();ovrly.append(selector_wrap);var cntw=container.width();var left=cntpos.left+((cntw-selector_wrap.width())/2);var top=cntpos.top+97;selector_wrap.css({left:left+'px',top:top+'px'});if(typeof(callback)=='function'){callback();}}
var do_slide=true;function _handleSlideEnd(){do_slide=true;}
function _handleDlgChoice(evt){var me=jQuery(this);var action=me.attr('data-action');switch(action){case'left':case'right':if(do_slide){var slider=jQuery('#BackDesignSelectorCarousel .selector-slider',selector_wrap);var cw=jQuery('#BackDesignSelectorCarousel',selector_wrap).width();var csw=slider.width();if(csw>cw){var pos=slider.position();var left=pos.left;if(action=='left'){left+=preview_sz[active_bc_key]['w']+20;}else{left-=preview_sz[active_bc_key]['w']+20;}
var diff=left+csw;if(left<=0&&diff>=cw){do_slide=false;slider.css('left',left+'px');}}}
break;case'remove-cancel':default:action=parseInt(action,10);var bc_choice={};if(!isNaN(action)&&designs[action]){var bcid=me.attr('data-bcid');bc_choice.bc_parent_id=bcid;bc_choice.bc_layout=new XMLSerializer().serializeToString(layouts[bcid]['xml']);bc_choice.bc_svg=_choiceToSvg(designs[action]);bc_choice.bc_raster=_choiceToRaster(designs[action]);}
choiceCallback(bc_choice);_hideDlg();}}
function displayDesignItem(bc_data,bcid){var idx=designs.indexOf(bc_data);var dsgn_data=bc_data[0];var item=jQuery('.design-item canvas[data-action='+idx+']');bcid=parseInt(bcid,10);if(isNaN(bcid)){bcid=design_ids[idx];}
if(!item.length){item=jQuery('<canvas data-action="'+idx+'" data-bcid="'+bcid+'" width="'+preview_sz[active_bc_key]['w']+'" height="'+preview_sz[active_bc_key]['h']+'"></canvas>');var div=jQuery('<div class="design-item"><div class="select-item-button-container"><span class="choose-this-button" data-action="'+idx+'" data-bcid="'+bcid+'">'+(uiTexts.suggestions.select)+'</span></div></div>');var stripe=idx%2?'.bottom':'.top';var slider=jQuery('#BackDesignSelectorCarousel .selector-slider',selector_wrap);div.prepend(item);jQuery(stripe,slider).append(div);var total_side_margins=23;slider.css({width:(Math.ceil(designs.length/2)*(preview_sz[active_bc_key]['w']+total_side_margins))+'px'});_bindEvents(mobile?['touchend']:['mouseup'],jQuery('canvas, .choose-this-button, img',div),_handleDlgChoice);}
var cnvs=item.get(0);var ctx=cnvs.getContext('2d');ctx.setTransform(1,0,0,1,0,0);ctx.clearRect(0,0,cnvs.width,cnvs.height);ctx.setTransform(preview_zoom[active_bc_key],0,0,preview_zoom[active_bc_key],0,0);var design_paths=dsgn_data.getPaths();var to=Math.min(logo_colors.length,design_paths.length);var last_color=null;var color_maps={};var cclridx=0;for(var i=0;i<to;i++){var pcolor=design_paths[i].getColor();if(!color_maps[pcolor]){color_maps[pcolor]=logo_colors[cclridx];cclridx++;}
last_color=color_maps[pcolor];design_paths[i].setColor(color_maps[pcolor]);}
if(i<design_paths.length&&last_color){for(var i=to;i<design_paths.length;i++){var pcolor=design_paths[i].getColor();if(pcolor){if(!color_maps[pcolor]){color_maps[pcolor]=logo_colors[cclridx]?logo_colors[cclridx]:(logo_colors[i]?logo_colors[i]:last_color);cclridx++;}
design_paths[i].setColor(color_maps[pcolor]);}}}
dsgn_data.render(ctx);var tos=bc_data[1];for(var ti=0;ti<tos.length;ti++){tos[ti].render(ctx);}
bc_data[2]=_getLogoEmbed(bcid);bc_data[2].render(ctx);}
function _hideDlg(){ovrly.hide();}
function _displayDlg(){logo_copy=null;ovrly.show();for(var i=0;i<designs.length;i++){displayDesignItem(designs[i]);}}
function _getLogoEmbed(lid){var copied=logo_copy!=null;var nlogo=new FLSEditorCore.CLogoObjectGroup();nlogo.id='logo';var edobjcts=editor.getObjects();for(var nlid=0;nlid<edobjcts.length;nlid++){if(edobjcts[nlid]instanceof FLSEditorCore.CPathGroup){var cpg=new FLSEditorCore.CPathGroup();cpg.setMatrix(edobjcts[nlid].getMatrix().slice(0));var cpgp=edobjcts[nlid].getPaths();for(var pi=0;pi<cpgp.length;pi++){cpg.addPath(cpgp[pi]);}
nlogo.addElement(cpg);}
if(edobjcts[nlid]instanceof FLSEditorCore.CText){var ctxt=(edobjcts[nlid]instanceof FLSEditorCore.CPathText)?new FLSEditorCore.CPathText():new FLSEditorCore.CText();ctxt.setProperties(edobjcts[nlid].getProperties());nlogo.addElement(ctxt);}}
nlogo.editor(editor);if(!copied){nlogo.calculateBoundingBox();logo_copy=nlogo;}else{var bbpos=logo_copy.bboxpos();var sz=logo_copy.getSize();var pivot=logo_copy.pivot();nlogo.bboxpos(bbpos.x,bbpos.y);nlogo.setSize(sz.width,sz.height);nlogo.pivot(pivot);nlogo.center(pivot);}
LayoutBCLogo(lid,nlogo);return nlogo;}
function _loadDesigns(callback){if(l_ids.length){var lid=l_ids.shift();LoadLayout(lid,function(lid){jQuery.get(logourl+lid,function(xml){_loadDesigns(callback);var svg=jQuery('svg',xml);var surface2=jQuery('>#surface2',svg);if(surface2.length){var pg=parseLogoImage(surface2);var tos=parseBCTextObjects(jQuery('>#surface4 text',svg),lid);var bc_data=0||[pg,tos];designs.push(bc_data);design_ids.push(lid);if(logoCfg.card_type=='EU'){var cl_sz=svg.attr('viewBox').split(' ');setEuBCSize(lid,parseFloat(cl_sz[2],10),parseFloat(cl_sz[3],10));}
LayoutBCTexts(lid,tos);displayDesignItem(bc_data,lid);}},'xml').fail(function(resp,type,error){console.log(arguments);_loadDesigns(callback);});});}else{if(typeof(callback)=='function'){callback();}}}
function _show(_choiceCallback){_findLogoColors();if(typeof(_choiceCallback)=='function'){choiceCallback=_choiceCallback;}
if(!designs.length){_loadDesigns();}
if(!evt_bound){_bindEvents(mobile?['touchend']:['mouseup'],jQuery('.selector-close-dlg-btn',selector_wrap),function(){choiceCallback(false);_hideDlg();});_bindEvents(mobile?['touchend']:['mouseup'],jQuery('.selector-action, .selector-navigate, .close-suggest-dlg',selector_wrap),_handleDlgChoice);_bindEvents(['transitionend','webkitTransitionEnd','oTransitionEnd','otransitionend','MSTransitionEnd'],jQuery('.selector-slider',selector_wrap),_handleSlideEnd);evt_bound=true;}
beforeSuggestDlgShowCallback();_displayDlg();return false;};function LoadLayout(bc_id,donecallback){var parsed=FLSUtil.parseUri(layoutUrl);var url=layoutUrl+bc_id;var data={};if(parsed.host!=document.domain){url='resources.php';data.url=logoCfg.config;}
jQuery.ajax({url:url,data:data,dataType:'xml',success:function(xml){layouts[bc_id]={areas:{},groups:{}},jQuery('layout >areas area',xml).each(function(index){var area=jQuery(this);layouts[bc_id].areas[area.attr('name').toLowerCase()]={x:parseFloat(area.attr('x')),y:parseFloat(area.attr('y')),w:parseFloat(area.attr('w')),h:parseFloat(area.attr('h')),type:area.attr('type'),align:area.attr('align')};});jQuery('layout >groups',xml).children().each(function(index){var gn=jQuery(this);layouts[bc_id].groups[this.nodeName.toLowerCase()]={type:gn.attr('type'),group:gn.attr('group')};});layouts[bc_id]['xml']=xml;if(typeof(donecallback)=='function'){donecallback(bc_id);}},error:function(resp){}});}
function parseLogoImage(logoimage){var cpg=new FLSEditorCore.CPathGroup();logoimage.find('path').each(function(index){var pn=jQuery(this);var pth=new FLSEditorCore.CPath();pth.setPathStr(pn.attr('d'));pth.inGroup(true);pth.editor(editor);var styles=pn.attr('style').trim().split(';');for(var i=0;i<styles.length;i++){var stmp=styles[i].split(':');if(stmp.length==2){switch(stmp[0]){case'fill':if(stmp[1]!='none'){pth.setColor(stmp[1]);}
break;case'stroke':if(stmp[1]!='none'){pth.setStroke(stmp[1]);}else{pth.setStroke();}
break;case'stroke-width':if(stmp[1]!='none'){pth.setStrokeWidth(stmp[1]);}else{pth.setStrokeWidth();}
break;case'stroke-linecap':if(stmp[1]!='none'){pth.setStrokeCap(stmp[1]);}else{pth.setStrokeCap();}
break;case'stroke-miterlimit':if(stmp[1]!='none'){pth.setStrokeMieter(stmp[1]);}else{pth.setStrokeMieter();}
break;case'stroke-linejoin':if(stmp[1]!='none'){pth.setStrokeJoin(stmp[1]);}else{pth.setStrokeJoin();}
break;case'fill-opacity':stmp[1]=parseFloat(stmp[1]);if(!isNaN(stmp[1])&&stmp[1]<1){pth.setFillOpacity(stmp[1]);}
break;default:}}}
var ptransform={};if(pn.attr('transform')){var ptransforms=pn.attr('transform').trim().split(') ');if(ptransforms.length){for(var l=0;l<ptransforms.length;l++){var fn=ptransforms[l].split('(');if(fn.length==2){fn[1]=fn[1].replace(/\)/g,'').replace(/\s+/g,',').replace(/,+/g,',').split(',');ptransform[fn[0]]=[];if(fn[1].length){for(var fi=0;fi<fn[1].length;fi++){ptransform[fn[0]].push(parseFloat(fn[1][fi]));}}}}}
if(ptransform['matrix']){pth.setMatrix(ptransform['matrix']);}}
cpg.addPath(pth);});var transform={};if(logoimage.attr('transform')){var transforms=logoimage.attr('transform').trim().split(') ');if(transforms.length){for(var l=0;l<transforms.length;l++){var fn=transforms[l].split('(');if(fn.length==2){fn[1]=fn[1].replace(/\)/g,'').replace(/\s+/g,',').replace(/,+/g,',').split(',');transform[fn[0]]=[];if(fn[1].length){for(var fi=0;fi<fn[1].length;fi++){transform[fn[0]].push(parseFloat(fn[1][fi]));}}}}}}
if(transform['matrix']){cpg.setMatrix(transform['matrix']);}
return cpg;}
function parseBCTextObjects(textnodes,bc_id){var tos=[];textnodes.each(function(index){var tn=jQuery(this);var txt=tn.text();var usrtxt='t'+tn.attr('id');var cfgkey=typeof(layouts[bc_id].groups[usrtxt])!=='undefined'?layouts[bc_id].groups[usrtxt]['type']:'';if(cfgkey=='name'){cfgkey='first_name';}
var scfgkey="suggested_"+cfgkey;if(cfgkey&&typeof(logoCfg[scfgkey])!=='undefined'){if(cfgkey=='first_name'){txt=decodeURIComponent(logoCfg[scfgkey].toString().replace(/\+/ig,'%20')).trim();txt+=' '+decodeURIComponent(logoCfg['suggested_last_name'].toString().replace(/\+/ig,'%20')).trim();txt=txt.trim();}else{txt=decodeURIComponent(logoCfg[scfgkey].toString().replace(/\+/ig,'%20')).trim();}}else{txt='';}
var to=new FLSEditorCore.CText(txt);var ff=tn.attr('font-family');to.setFontFamily(ff);var fs=parseFloat(tn.attr('font-size'));fs=fs<to.minscale()?to.minscale():fs;to.setFontSize(fs);var styles=tn.attr('style').trim().split(';');for(var i=0;i<styles.length;i++){var stmp=styles[i].split(':');if(stmp.length==2){switch(stmp[0]){case'fill':to.setColor(stmp[1]);break;default:}}}
var transform={};if(tn.attr('transform')){var transforms=tn.attr('transform').trim().split(') ');if(transforms.length){for(var l=0;l<transforms.length;l++){var fn=transforms[l].split('(');if(fn.length==2){fn[1]=fn[1].replace(/\)/g,'').replace(/\s+/g,',').replace(/,+/g,',').split(',');transform[fn[0]]=[];if(fn[1].length){for(var fi=0;fi<fn[1].length;fi++){transform[fn[0]].push(parseFloat(fn[1][fi]));}}}}}
if(transform['matrix']){to.setMatrix(transform['matrix']);}
if(transform['translate']){to.translate(transform['translate'][0],transform['translate'][1]);}
to.id=tn.attr('id');}
tos.push(to);});return tos;}
function LayoutBCTexts(bc_id,tos,vertical){for(var i=0;i<tos.length;i++){var id='t'+tos[i].id;if(layouts[bc_id].groups[id]){for(var lyi in layouts[bc_id].areas){if(layouts[bc_id].areas[lyi]['type']==layouts[bc_id].groups[id]['type']){var to=tos[i];_repositionTextObject(layouts[bc_id].areas[lyi],to,vertical);}}}}}
function AddGoogleFonts(){var api_link=window.location.protocol.replace(':','')+':'+GoogleWebFonts.api_base;var cnt=0;for(var fontfamily in bcfonts){if(!logoCfg.load_fonts.length||(logoCfg.load_fonts.length&&(logoCfg.load_fonts.indexOf(fontfamily)>-1))){var thisfont=bcfonts[fontfamily];if(thisfont.api==='google'){_logoFontsCssAdded.push(fontfamily);thisfont.img=false;var ff=fontfamily.replace(/\s/g,'+');var faces=[400];if(thisfont.bold_src)faces.push(GoogleWebFonts.faces.bold);if(thisfont.italic_src)faces.push(GoogleWebFonts.faces.italic);if(thisfont.bolditalic_src)faces.push(GoogleWebFonts.faces.bolditalic);ff+=faces.length>1?':'+faces.join(','):'';ff+='&subset=latin,latin-ext';var gf_style=document.createElement('link');gf_style.type='text/css';gf_style.rel='stylesheet';gf_style.href=api_link+ff;jQuery(gf_style).appendTo('head');cnt+=faces.length;}}}
return cnt;}
function _parseFontsDataS(xml){bcfonts={};jQuery('style#FLSEditorBcSuggestFonts').remove();var fontface_css='<style type="text/css" id="FLSEditorBcSuggestFonts">\n';var fontcount=0;var fonts_base_url=jQuery('TextFonts',xml).attr('base_path');fonts_base_url=fonts_base_url?fonts_base_url:'';var formats={'.ttf':'truetype','.otf':'opentype'};var ext,font_format;jQuery('font',xml).each(function(index){var me=jQuery(this);var fontfamily=me.attr('fontfamily');bcfonts[fontfamily]={ttf_src:me.attr('ttf_src'),};ext=bcfonts[fontfamily]['ttf_src'].match(/(\.ttf)|(.otf)/ig);ext=(ext instanceof Array)?ext[0].toLowerCase():'.ttf';font_format=formats[ext];var fonturl=(fonts_base_url+'html5/'+bcfonts[fontfamily]['ttf_src']);fontface_css+='@font-face{\n\t';fontface_css+='font-family: "'+fontfamily+'";\n\t';fontface_css+='src: url("'+fonturl+'") format("'+font_format+'") ;\n\t';fontface_css+='font-weight: normal;\n\t';fontface_css+='font-style: normal;\n\t';fontface_css+='}\n\n';fontcount+=1;});fontface_css+='</style>';jQuery(fontface_css).appendTo('head');return true;}
function _addExtraFontCss(extrafonts){if(!(extrafonts instanceof Array)||(extrafonts.length==0))return 0;var fontface_css='<style type="text/css" id="FLSEditorBcSuggestExtraFonts'+Math.floor(Math.random()*10000)+'">\n';;var fontcount=0;var api_link=window.location.protocol.replace(':','')+':'+GoogleWebFonts.api_base;var formats={'.ttf':'truetype','.otf':'opentype'};var ext,font_format;while(extrafonts.length){var fontfamily=extrafonts.shift();var thisfont=bcfonts[fontfamily];if(thisfont){if(_logoFontsCssAdded.indexOf(fontfamily)>-1)continue;_logoFontsCssAdded.push(fontfamily);if(!thisfont['api']){var fonturl=(fonts_base_url+'html5/'+thisfont['ttf_src']);ext=thisfont['ttf_src'].match(/(\.ttf)|(.otf)/ig);ext=(ext instanceof Array)?ext[0].toLowerCase():'.ttf';font_format=formats[ext];fontface_css+='@font-face{\n\t';fontface_css+='font-family: "'+fontfamily+'";\n\t';fontface_css+='src: url("'+fonturl+'") format("'+font_format+'") ;\n\t';fontface_css+='font-weight: normal;\n\t';fontface_css+='font-style: normal;\n\t';fontface_css+='}\n\n';fontcount+=1;if(thisfont.bold_src){fonturl=fonts_base_url+'html5/'+thisfont['bold_src']
fontface_css+='@font-face{\n\t';fontface_css+='font-family: "'+fontfamily+'";\n\t';fontface_css+='src: url("'+fonturl+'") format("'+font_format+'") ;\n\t';fontface_css+='font-weight: bold;\n\t';fontface_css+='font-style: normal;\n\t';fontface_css+='}\n\n';fontcount+=1;}
if(thisfont.italic_src){fonturl=fonts_base_url+'html5/'+thisfont['italic_src']
fontface_css+='@font-face{\n\t';fontface_css+='font-family: "'+fontfamily+'";\n\t';fontface_css+='src: url("'+fonturl+'") format("'+font_format+'") ;\n\t';fontface_css+='font-weight: normal;\n\t';fontface_css+='font-style: italic;\n\t';fontface_css+='}\n\n';fontcount+=1;}
if(thisfont.bolditalic_src){fonturl=fonts_base_url+'html5/'+thisfont['bolditalic_src']
fontface_css+='@font-face{\n\t';fontface_css+='font-family: "'+fontfamily+'";\n\t';fontface_css+='src: url("'+fonturl+'") format("'+font_format+'") ;\n\t';fontface_css+='font-weight: bold;\n\t';fontface_css+='font-style: italic;\n\t';fontface_css+='}\n\n';fontcount+=1;}}else{if(thisfont.api==='google'){thisfont.img=false;var ff=fontfamily.replace(/\s/g,'+');var faces=[400];if(thisfont.bold_src)faces.push(GoogleWebFonts.faces.bold);if(thisfont.italic_src)faces.push(GoogleWebFonts.faces.italic);if(thisfont.bolditalic_src)faces.push(GoogleWebFonts.faces.bolditalic);ff+=faces.length>1?':'+faces.join(','):'';ff+='&subset=latin,latin-ext';var gf_style=document.createElement('link');gf_style.type='text/css';gf_style.rel='stylesheet';gf_style.href=api_link+ff;jQuery(gf_style).appendTo('head');fontcount+=faces.length;}}}}
fontface_css+='</style>';if(fontcount){jQuery(fontface_css).appendTo('head');}
return fontcount;}
function _parseFontsData(xml){bcfonts={};jQuery('style#FLSEditorBcSuggestFonts').remove();var fontface_css='<style type="text/css" id="FLSEditorBcSuggestFonts">\n';var fontcount=0;fonts_base_url=jQuery('TextFonts',xml).attr('base_path');fonts_base_url=fonts_base_url?fonts_base_url:'';var formats={'.ttf':'truetype','.otf':'opentype'};var ext,font_format;jQuery('font',xml).each(function(index){var me=jQuery(this);var fontfamily=me.attr('fontfamily');bcfonts[fontfamily]={ttf_src:me.attr('ttf_src'),name:me.attr('name'),img:fonts_base_url+me.attr('img'),minSize:me.attr('minSize'),maxSize:me.attr('maxSize'),bold_src:me.attr('bold'),italic_src:me.attr('italic'),bolditalic_src:me.attr('bolditalic'),api:me.attr('api')};var thisfont=bcfonts[fontfamily];if(!logoCfg.load_fonts.length||(logoCfg.load_fonts.length&&(logoCfg.load_fonts.indexOf(fontfamily)>-1))){if(!thisfont['api']){_logoFontsCssAdded.push(fontfamily);var fonturl=(fonts_base_url+'html5/'+thisfont['ttf_src']);ext=thisfont['ttf_src'].match(/(\.ttf)|(.otf)/ig);ext=(ext instanceof Array)?ext[0].toLowerCase():'.ttf';font_format=formats[ext];fontface_css+='@font-face{\n\t';fontface_css+='font-family: "'+fontfamily+'";\n\t';fontface_css+='src: url("'+fonturl+'") format("'+font_format+'") ;\n\t';fontface_css+='font-weight: normal;\n\t';fontface_css+='font-style: normal;\n\t';fontface_css+='}\n\n';fontcount+=1;if(thisfont.bold_src){fonturl=fonts_base_url+'html5/'+thisfont['bold_src']
fontface_css+='@font-face{\n\t';fontface_css+='font-family: "'+fontfamily+'";\n\t';fontface_css+='src: url("'+fonturl+'") format("'+font_format+'") ;\n\t';fontface_css+='font-weight: bold;\n\t';fontface_css+='font-style: normal;\n\t';fontface_css+='}\n\n';fontcount+=1;}
if(thisfont.italic_src){fonturl=fonts_base_url+'html5/'+thisfont['italic_src']
fontface_css+='@font-face{\n\t';fontface_css+='font-family: "'+fontfamily+'";\n\t';fontface_css+='src: url("'+fonturl+'") format("'+font_format+'") ;\n\t';fontface_css+='font-weight: normal;\n\t';fontface_css+='font-style: italic;\n\t';fontface_css+='}\n\n';fontcount+=1;}
if(thisfont.bolditalic_src){fonturl=fonts_base_url+'html5/'+thisfont['bolditalic_src']
fontface_css+='@font-face{\n\t';fontface_css+='font-family: "'+fontfamily+'";\n\t';fontface_css+='src: url("'+fonturl+'") format("'+font_format+'") ;\n\t';fontface_css+='font-weight: bold;\n\t';fontface_css+='font-style: italic;\n\t';fontface_css+='}\n\n';fontcount+=1;}}}});fontface_css+='</style>';fontcount+=AddGoogleFonts();jQuery(fontface_css).appendTo('head');return true;}
function _repositionTextObject(cfg,to,vertical){if(typeof(vertical)!=='boolean'){vertical=false;}
if(!to)return false;to.setText(to.getText());to.resetScale();var sz=to.getSize();if(sz.width>cfg.w){var fs=to.getFontSize();fs=Math.ceil(fs*(cfg.w/sz.width));to.setFontSize(fs);sz=to.getSize();}
var pos=to.getPosition();var dx=0;var dy=vertical?cfg.y-pos.y+sz.height:0;switch(cfg.align){case'center':var tcx=sz.width/2;var acx=cfg.x+(cfg.w/2);dx=acx-(tcx+pos.x);break;case'right':var oldx=pos.x+sz.width;dx=cfg.x+cfg.w-oldx;break;case'left':dx=cfg.x-pos.x;default:}
to.translate(dx,dy);}
function LayoutBCLogo(bc_id,nlogo){if(nlogo instanceof FLSEditorCore.CLogoObjectGroup){nlogo.setMatrix([1,0,0,1,0,0]);var logoarea=layouts[bc_id].areas.area_logo?layouts[bc_id].areas.area_logo:{x:0,y:0,w:261,h:153};var logosize=nlogo.getSize();var area_center={x:(logoarea.w/2)+logoarea.x,y:(logoarea.h/2)+logoarea.y};var logocenter=nlogo.center();var tx=area_center.x-logocenter.x;var ty=area_center.y-logocenter.y;var scale=1;scale=Math.min(logoarea.w/logosize.width,logoarea.h/logosize.height);nlogo.translate(tx,ty);nlogo.use_pivot(true);nlogo.scaleUniform(scale);nlogo.use_pivot(false);}
return nlogo;};function parseDefs(svg){var definitions=jQuery('defs',svg);if(definitions.length){for(var di=0;di<definitions.length;di++){var cdefs=jQuery(definitions[di]).children();for(var cdefi=0;cdefi<cdefs.length;cdefi++){var defn=cdefs[cdefi];var $defn=jQuery(defn);switch(defn.nodeName){case'path':svg_defs.paths[$defn.attr('id')]=$defn.attr('d');break;default:console.log('def node not yet supported:',defn.nodeName);}}}}}
function execLoadSteps(){if(loadSteps.length){loading=true;var step=loadSteps.shift();if(typeof(step)=='function'){step(execLoadSteps);return true;}}else{loading=false;}
return false;}
function _loadConfig(callback){if(logoCfg.config){var parsed=FLSUtil.parseUri(logoCfg.config);var url=logoCfg.config;var data={};if(parsed.host!=document.domain){url='resources.php';data.url=logoCfg.config;}
jQuery.ajax({url:url,data:data,dataType:'xml',success:function(xml){var protocol=document.location.protocol.replace(':','')+'://';apiRoot=jQuery('apiUrl',xml).attr('root').replace('http://',protocol);jQuery('apiUrl',xml).children().each(function(idx){apiUrl[this.nodeName]=jQuery(this).text();});texts_url=jQuery('urls textsXML',xml).text().replace('http://',protocol);properties_url=texts_url.replace(/resources.xml/i,'properties.xml');texts_url=texts_url.replace(/.xml/i,'_'+logoCfg.lang+'.xml');properties_url=properties_url.replace(/.xml/i,'_'+logoCfg.lang+'.xml');apiroot=[apiRoot,_apiRoot];logourl=(apiroot[0]==apiroot[1]?apiroot[0]:apiroot[1])+'flashdata.php?method=svg&lid=';layoutUrl=logourl.replace('method=svg','method=layout');if(typeof(callback)=='function'){callback();}},error:function(resp){throw"Error loading configurations";}});}}
function _loadTexts(callback){var parsed=FLSUtil.parseUri(texts_url);var url=texts_url;var data={};if(parsed.host!=document.domain){url='resources.php';data.url=texts_url;}
jQuery.ajax({url:url,data:data,dataType:'xml',success:function(xml){var texts=jQuery('resources texts',xml);texts.children().each(function(idx){uiTexts[this.nodeName]=jQuery(this).text();});texts=jQuery('resources errors',xml);uiTexts['errors']={};texts.children().each(function(idx){uiTexts['errors'][this.nodeName]=jQuery(this).text();});texts=jQuery('properties ui suggestions',xml);texts.children().each(function(idx){uiTexts['suggestions'][this.nodeName]=jQuery(this).text();});xml=null;if(typeof(callback)=='function'){callback();}},error:function(resp){throw"Error loading configurations";}});}
function _loadPropertiesTexts(callback){var parsed=FLSUtil.parseUri(properties_url);var url=properties_url;var data={};if(parsed.host!=document.domain){url='resources.php';data.url=properties_url;}
jQuery.ajax({url:url,data:data,dataType:'xml',success:function(xml){var texts=jQuery('resources texts',xml);texts.children().each(function(idx){uiTexts[this.nodeName]=jQuery(this).text();});texts=jQuery('resources errors',xml);uiTexts['errors']={};texts.children().each(function(idx){uiTexts['errors'][this.nodeName]=jQuery(this).text();});texts=jQuery('properties ui suggestions',xml);texts.children().each(function(idx){uiTexts['suggestions'][this.nodeName]=jQuery(this).text();});xml=null;if(typeof(callback)=='function'){callback();}},error:function(resp){throw"Error loading configurations";}});}
function _loadFonts(callback){if(l_ids.length){var lid=l_ids[0];var product_type='&product_type=bussiness-cards';jQuery.get((apiroot[0]==apiroot[1]?apiroot[0]:apiroot[1])+apiUrl.fontsList+lid+product_type,function(xml){if(!_parseFontsData(xml)){throw"failed to parse fonts data";return false;}
var fontloader=document.createElement('div');fontloader.style.position='absolute';fontloader.style.right='110%';fontloader.style.top='-200px';fontloader.style.overflow='hidden';fontloader.style.display='block';fontloader.style.width='100px';fontloader.style.height='100px';document.body.appendChild(fontloader);var fontCnt=0;for(var fnt in bcfonts){var fontspan=document.createElement('span');fontspan.style.fontFamily='"'+fnt+'"';fontspan.innerHTML=fnt;fontloader.appendChild(fontspan);fontCnt++;}
if(typeof(callback)=='function'){setTimeout(function(){callback();},fontCnt*50);}},'xml');}else{throw"No suggest bc ids set";}}
function _loadComplete(callback){loadCompleteCallback();if(typeof(callback)=='function'){callback();}}
function _initEditor(callback){if(!editor){var canvas=document.getElementById(canvasID);if(!canvas){canvas=document.createElement('canvas');canvas.id=canvasID;document.body.insertBefore(canvas,document.body.firstChild);}
editor=new FLSEditorCore(canvasID);editorID=canvasID+'-EditorUI';var wrapper=editor.getCanvasWrapper();wrapper.style.position='absolute';wrapper.style.top='-2000px';wrapper.style.left='-2000px';document.body.insertBefore(wrapper,document.body.firstChild);editor.render();}
if(typeof(callback)=='function'){callback();}}
function _loadLogo(callback){if(logoCfg.logoID){jQuery.ajax({url:(apiRoot==_apiRoot?apiRoot:_apiRoot)+apiUrl.logoUrl+logoCfg.logoID,success:function(xml){parseSvgData(xml);if(typeof(callback)=='function'){callback();}},contentType:'xml',data:{},dataFilter:svgFilter});}else{if(typeof(callback)=='function'){callback();}}}
function parseSvgData(xml){editor.clearUndoStacks();editor.clearObjects();if(typeof(xml)=='string'){xml=jQuery.parseXML(xml);}
if(typeof(xml)=='undefined'||!xml){console.log(uiTexts['errors']['errJSTitle'],uiTexts['errors']['errLoad']);return false;}
var svgsource=(xml!==null)?jQuery('svg',xml):jQuery('nosvgreceived');var svgViewBox=svgsource.attr('viewBox').split(' ');editor.redrawViewFrame(svgViewBox[2],svgViewBox[3]);parseDefs(svgsource);addLogoImageObj(jQuery('#surface2',svgsource));if(addLogoTextObjects(jQuery('#surface4 text',svgsource))){return true;}
return false;}
function addLogoImageObj(logoimage){var cpg=new FLSEditorCore.CPathGroup();logoimage.find('path').each(function(index){var pn=jQuery(this);var pth=new FLSEditorCore.CPath();pth.setPathStr(pn.attr('d'));pth.inGroup(true);pth.editor(editor);var styles=pn.attr('style').trim().split(';');for(var i=0;i<styles.length;i++){var stmp=styles[i].split(':');if(stmp.length==2){switch(stmp[0]){case'fill':if(stmp[1]!='none'){pth.setFill(stmp[1]);}
break;case'stroke':if(stmp[1]!='none'){pth.setStroke(stmp[1]);}else{pth.setStroke();}
break;case'stroke-width':if(stmp[1]!='none'){pth.setStrokeWidth(stmp[1]);}else{pth.setStrokeWidth();}
break;case'stroke-linecap':if(stmp[1]!='none'){pth.setStrokeCap(stmp[1]);}else{pth.setStrokeCap();}
break;case'stroke-miterlimit':if(stmp[1]!='none'){pth.setStrokeMieter(stmp[1]);}else{pth.setStrokeMieter();}
break;case'stroke-linejoin':if(stmp[1]!='none'){pth.setStrokeJoin(stmp[1]);}else{pth.setStrokeJoin();}
break;case'fill-opacity':stmp[1]=parseFloat(stmp[1]);if(!isNaN(stmp[1])&&stmp[1]<1){pth.setFillOpacity(stmp[1]);}
break;default:}}}
var ptransform={};if(pn.attr('transform')){var ptransforms=pn.attr('transform').trim().split(') ');if(ptransforms.length){for(var l=0;l<ptransforms.length;l++){var fn=ptransforms[l].split('(');if(fn.length==2){fn[1]=fn[1].replace(/\)/g,'').replace(/\s+/g,',').replace(/,+/g,',').split(',');ptransform[fn[0]]=[];if(fn[1].length){for(var fi=0;fi<fn[1].length;fi++){ptransform[fn[0]].push(parseFloat(fn[1][fi]));}}}}}
if(ptransform['matrix']){pth.setMatrix(ptransform['matrix']);}}
cpg.addPath(pth);});var transform={};if(logoimage.attr('transform')){var transforms=logoimage.attr('transform').trim().split(') ');if(transforms.length){for(var l=0;l<transforms.length;l++){var fn=transforms[l].split('(');if(fn.length==2){fn[1]=fn[1].replace(/\)/g,'').replace(/\s+/g,',').replace(/,+/g,',').split(',');transform[fn[0]]=[];if(fn[1].length){for(var fi=0;fi<fn[1].length;fi++){transform[fn[0]].push(parseFloat(fn[1][fi]));}}}}}}
if(transform['matrix']){cpg.setMatrix(transform['matrix']);}
editor.addObject(cpg);}
function addLogoTextObjects(textnodes){var ok=true;var textlines=0;var last_text_pos={x:0,y:0};var last_text_color='rgb(0,0,0)';textnodes.each(function(index){var tn=jQuery(this);var txt=logoCfg['act']=='update'?tn.text():decodeURIComponent(logoCfg['line'+(index+1)].toString().replace(/\+/ig,'%20'));if(txt.trim().length){textlines++;var tpaths=tn.children('textPath');var pathtxt=tpaths.length>0;var to=editor.addObject(new FLSEditorCore.CPathText(txt));to.hastextedit(true);var ff=tn.attr('font-family');to.setFontFamily(ff);to.setFontSize(parseFloat(tn.attr('font-size')));to.removable(true);var fw=tn.attr('font-weight');var fst=tn.attr('font-style');to.bold(fw=='bold');to.italic(fst=='italic');var styles=tn.attr('style').trim().split(';');for(var i=0;i<styles.length;i++){var stmp=styles[i].split(':');if(stmp.length==2){switch(stmp[0]){case'fill':to.setColor(stmp[1]);last_text_color=stmp[1];break;default:}}}
var transform={};if(tn.attr('transform')){var transforms=tn.attr('transform').trim().split(') ');if(transforms.length){for(var l=0;l<transforms.length;l++){var fn=transforms[l].split('(');if(fn.length==2){fn[1]=fn[1].replace(/\)/g,'').replace(/\s+/g,',').replace(/,+/g,',').split(',');transform[fn[0]]=[];if(fn[1].length){for(var fi=0;fi<fn[1].length;fi++){transform[fn[0]].push(parseFloat(fn[1][fi]));}}}}}
if(transform['matrix']){to.setMatrix(transform['matrix']);}
if(transform['translate']){to.translate(transform['translate'][0],transform['translate'][1]);}
last_text_pos=to.getPosition();}
if(pathtxt){var path_id=tpaths.attr('xlink:href').replace(/#/,'');if(svg_defs.paths[path_id]){to.setPathStr(svg_defs.paths[path_id]);to.use_path(true);var ltrspcng=parseInt(tn.attr('letter-spacing'),10);var txt_anchr=tn.attr('text-anchor');var stroffst=tpaths.attr('startOffset');var txt_dy=parseInt(tn.attr('dy'),10);if(!isNaN(ltrspcng)){to.letter_spacing(ltrspcng);}
if(!isNaN(txt_dy)){to.txt_dy(txt_dy);}
to.center_text_on_path((txt_anchr=='middle')&&(stroffst=='50%'));}}}});if(textlines<2&&logoCfg['line2']&&logoCfg['line2'].trim().length&&logoCfg['act']!='update'){var to=editor.addObject(new FLSEditorCore.CText(logoCfg['line2'].trim().replace(/\+/ig,' ')));to.translate(last_text_pos.x,last_text_pos.y+22);for(var f in bcfonts){to.setFontFamily(f);to.setFontSize(22);to.setColor(last_text_color);break;}}
if(logoCfg.act!='update'){editor.centerResizeTexts(logoCfg.anchor1);}
if(!ok){console.warn('Loading svg texts failed')}
return ok;}
this.Init=function(_logodata){if(!_logodata.logoID){_logodata.logoID=0;}
if(typeof(_logodata.anonymous)!='undefined'){_logodata.anonymous=parseInt(_logodata.anonymous,10);if(isNaN(_logodata.anonymous)){_logodata.anonymous=0;}}
if(typeof(_logodata.create_logo_design)!='undefined'){_logodata.create_logo_design=parseInt(_logodata.create_logo_design,10);if(isNaN(_logodata.create_logo_design)){_logodata.create_logo_design=0;}}
if(typeof(_logodata.tid)!='undefined'){_logodata.tid=parseInt(_logodata.tid,10);if(isNaN(_logodata.tid)){_logodata.tid=0;}}
if(typeof(_logodata.choice_callback)=='function'){choiceCallback=_logodata.choice_callback;}
if(typeof(_logodata.load_complete_callback)=='function'){loadCompleteCallback=_logodata.load_complete_callback;}
if(typeof(_logodata.before_dlg_show_callback)=='function'){beforeSuggestDlgShowCallback=_logodata.before_dlg_show_callback;}
if(typeof(_logodata.load_fonts)!='undefined'){if(_logodata.load_fonts instanceof String){_logodata.load_fonts=[_logodata.load_fonts];}else if(!(_logodata.load_fonts instanceof Array)){_logodata.load_fonts=[];}}else{_logodata.load_fonts=[];}
_logodata.act='update';logoCfg=_logodata;canvasID='FLSBcSuggestLogoStep2Canvas';if(logoCfg.lang=='jp'||logoCfg.lang=='zh-hans'){langparam='&lang='+logoCfg.lang;}
active_bc_key=['eu','EU'].indexOf(logoCfg.card_type)>-1?'businessCardStandardEU':'businessCardStandard';bc_suggest_ids=logoCfg.bc_suggestion_ids;body=jQuery('body');backDesignDlgID=canvasID+'-BackDesignDlg';container=body;valid_cfg=true;apiroot=[apiRoot,_apiRoot];bc_ws.width=(bc_sizes[active_bc_key]['w'][0]+bc_sizes[active_bc_key]['w'][1])/2;bc_ws.height=(bc_sizes[active_bc_key]['h'][0]+bc_sizes[active_bc_key]['h'][1])/2;if(bc_suggest_ids){l_ids=decodeURI(bc_suggest_ids.toString()).split('|');for(var lidx=0;lidx<l_ids.length;lidx++){l_ids[lidx]=parseInt(l_ids[lidx],10).toString();}}else{valid_cfg=false;throw'No suggset bcs';}
loadSteps.push(_loadConfig);loadSteps.push(_loadTexts);loadSteps.push(_loadPropertiesTexts);loadSteps.push(_loadFonts);loadSteps.push(_initEditor);loadSteps.push(_setupSuggestDLG);loadSteps.push(_loadLogo);loadSteps.push(_loadDesigns);loadSteps.push(_loadComplete);execLoadSteps();};this.show=_show;this.setLogoId=function(logoId,_logoFonts){if(typeof(_logoFonts)!='undefined'){if(_logoFonts instanceof String){_logoFonts=[_logoFonts];}else if(!(_logoFonts instanceof Array)){_logoFonts=[];}}else{_logoFonts=[];}
logoId=parseInt(logoId);if(!isNaN(logoId)&&(logoId!=logoCfg.logoID)){logoCfg.logoID=logoId;setTimeout(function(){_loadLogo(_show);},_addExtraFontCss(_logoFonts)*1000)}else{_show();}};};var LogoStep2BcSuggest=new _LogoStep2BcSuggest();;var oneDom_domain;var oneDom_domain_obj;var currentSuggestedDomPos=0;var alertDisplayed=0;oneDom_domain='';websites_domain_allow_submit=false;$(document).ready(function(){if(Drupal.settings.load_weebly_preview_lightbox){WEEBLYPREVIEW.init(Drupal.settings.domain_in_cart);}
if($('body').hasClass('page-body-websites-domain'))
$(".page-body-websites-domain form").submit(function(){if(!websites_domain_allow_submit)
{var form=$(this);selected_website=$(this).find('.websites_domain_suggestion').attr("value");if(typeof CHECKOUTWEBSITEBUNDLE!='undefined'){CHECKOUTWEBSITEBUNDLE.init(form);CHECKOUTWEBSITEBUNDLE.setSelectedDomain(selected_website);return false;}}});$(".alreadyowndomv2").click(function(){fls_events_add('click_already_own_dom_link',1);if(typeof LOGOWEBV2!="undefined")LOGOWEBV2.hidePopUp();if(typeof BCWEB!="undefined")BCWEB.hidePopUp();DOMAINSERVICE_POPUP.init();});if(typeof Drupal.settings.skip_domains_init=='undefined'){websites_domain_init();websites_search_init();}
if(typeof Drupal.settings.domain_init!='undefined'){websites_domain_init();}
$(".allreadyOwnDomain .ownDomain").click(function(){fls_events_add('click_alreadyowndom_link');});$('#need_domain').click(function(){$('.need_domain_content').show();return false;});});function add_upsell_to_cart(domain,gotopage){lang="";if(Drupal.settings.lang!=''){lang=Drupal.settings.lang+"/";}
if(Drupal.settings.weebly_preview_v2_split_set){WEEBLYPREVIEW.hidePopUp();if(Drupal.settings.workflow!="business-cards"&&Drupal.settings.weebly_preview_v2_split_set){$("#FLSBcSuggestLogoStep2Canvas-BackDesignDlg .selector-title").html("Share your new email address on matching Business Cards");$("#FLSBcSuggestLogoStep2Canvas-BackDesignDlg .fls-orangebutton.selector-action").html("Not Right Now");}
Drupal.settings.websites_add_to_cart_status=0;show_loaded_color_bc_suggestion_lightbox();}
console.log('POST DOMAIN2')
var fields={pid:463,logo_websitesv2:1,google_apps:1,reduce_flow:"1",final_destination:gotopage,website_searched:domain,websites_domain_suggestion:domain,website_upsells:523};if(Drupal.settings.weebly_preview_v2_split_set){fields['json']=1;}
var fields_str='';for(var i in fields){fields_str+='<input type="hidden" name="'+i+'" value="'+fields[i]+'" />';}
if(Drupal.settings.weebly_preview_v2_split_set){Drupal.settings.websites_add_to_cart_status=0;$.post(Drupal.settings.baseUrl+'/'+lang+'websites/domain',fields).done(function(data){Drupal.settings.websites_add_to_cart_status=1;});}else{$('body').append('<form id="checkoutwebsitebundle_form" style="display:none;" action="'+Drupal.settings.baseUrl+'/'+lang+'websites/domain" method="post">'+fields_str+'</form>');$('#checkoutwebsitebundle_form').submit();}
return false;}
function add_email_to_upsell(domain,email,gotopage){lang="";if(Drupal.settings.lang!=''){lang=Drupal.settings.lang+"/";}
if(Drupal.settings.weebly_preview_v2_split_set){BUNDLEEMAIL.hidePopUp();if(Drupal.settings.workflow!="business-cards"){$("#FLSBcSuggestLogoStep2Canvas-BackDesignDlg .selector-title").html("Share your new email address on matching Business Cards");$("#FLSBcSuggestLogoStep2Canvas-BackDesignDlg .fls-orangebutton.selector-action").html("Not Right Now");if(Drupal.settings.workflow!="business-cards"){Drupal.settings.websites_add_to_cart_status=0;show_loaded_color_bc_suggestion_lightbox();}}}
console.log('POST DOMAIN3');var fields={pid:463,logo_websitesv2:1,google_apps:1,final_destination:gotopage,website_searched:domain,websites_domain_suggestion:domain,website_mailbox:1,website_upsells:523,websites_email_input:email};if(Drupal.settings.weebly_preview_v2_split_set){fields['json']=1;}
var fields_str='';for(var i in fields){fields_str+='<input type="hidden" name="'+i+'" value="'+fields[i]+'" />';}
if(Drupal.settings.workflow=="business-cards"&&Drupal.settings.weebly_preview_v2_split_set){bc_data["email"]=email+"@"+domain;bc_data["website"]=domain;FLSProductEditor.Init('FreelogoEditorCanvas',bc_data);}
Drupal.settings.websites_add_to_cart_status=0;$.post(Drupal.settings.baseUrl+'/'+lang+'websites/domain',fields).done(function(data){Drupal.settings.websites_add_to_cart_status=1;if(Drupal.settings.workflow!="business-cards"&&Drupal.settings.weebly_preview_v2_split_set)
return false;});return false;}
function website_select(obj){var selDomPos;if($("body[class*='page-body-step3'] .bcweb_popup.logowebv2").length){if(!Drupal.settings.freedomain_split_set){fls_events_add('accepted_paid_dom_logo_flow_lightbox');}else fls_events_add('accepted_free_dom_logo_flow');}
else if($(".page-body-step2 .bcweb_popup.logowebv2").length){if(!Drupal.settings.freedomain_split_set){fls_events_add('accepted_paid_dom_logo_flow_lightbox');}else fls_events_add('accepted_free_dom_logo_flow');}else if($(".bcweb_popup.bc_dom_lightbox").length){if(!Drupal.settings.freedomain_split_set){fls_events_add('accepted_paid_dom_bc_flow_lightbox');}else fls_events_add('accepted_free_dom_bc_flow');}else if($("#step-checkout1").length){fls_events_add('accept_freedom_from_checkout');}
if(Drupal.settings.domain_search_split_set&&$("input[name=source_split]").length&&!Drupal.settings.claim_domain_btn){parentForm=obj.parent('form').find('input[name=source_split]');parentForm.attr("value","domainsearch");fls_events_add('add_to_cart_from_search');}
selDomPos=$(".domain_available input[type='button']").index(obj);if(selDomPos!==-1){selDomPos=selDomPos*1+1*1;}
else{selDomPos=$(".websites_domain_suggestions_list input[type='button']").index(obj);if(selDomPos!==-1)
if($(".domain_available").css("display")=="none"){selDomPos=selDomPos*1+1*1;}else{selDomPos=selDomPos*1+2*1;}}
if(selDomPos!==-1)fls_events_add('pos_selected_dom',selDomPos);var form=$(obj).parent('form');var data=form.serializeArray();var selected_website=$(obj).parent('form').find('.websites_domain_suggestion').attr("value");if(typeof Drupal.settings.tlds_split_set!='undefined'){if(typeof Drupal.settings.websites_populate_data!='undefined'&&typeof Drupal.settings.websites_populate_data.available_tlds!='undefined'){for(var i in Drupal.settings.websites_populate_data.available_tlds){if(selected_website==Drupal.settings.websites_populate_data.available_tlds[i]['domain']){fls_events_add('last_selected_tld',Drupal.settings.websites_populate_data.available_tlds[i]['tld']);}}}}
if(typeof Drupal.settings.bcweb_latest_search_match!='undefined'){if(Drupal.settings.bcweb_latest_search_match['ga_action']&&Drupal.settings.bcweb_latest_search_match['ga_label']){ga('send','event','Website Select Match Type',Drupal.settings.bcweb_latest_search_match['ga_label']+'|'+Drupal.settings.bcweb_latest_search_match['ga_action'],selected_website);ga('send','event','Website Select Checked By',Drupal.settings.bcweb_latest_search_match['ga_country'],(Drupal.settings.bcweb_latest_search_match['ga_action']=='domainsbot')?'domainsbot':Drupal.settings.bcweb_latest_search_match['ga_checkedby']);}}
$.each(data,function(i,d){if(d.name=='websites_domain_suggestion'){$('.email_label').html('@'+d.value);$('.input_related_text span').each(function(){var text=$(this).text();text=text.replace('customerurl',d.value);$(this).text(text);});}
$('#'+d.name).val(d.value);});var isavailabeselect=$(obj).parents('div.domain_available');if(isavailabeselect.length>0)
ga('send','event','Website Save','search',$('#websites_domain_suggestion').val());else
ga('send','event','Website Save','recomended',$('#websites_domain_suggestion').val());if($('.bcweb_popup').length>0&&($('.overlay').length>0||$('#FLSPreviewOverlay').length)){if($('.logowebv2_popup_content').length>0&&$('.logowebv2_popup_content').html().length>0){}else if($('.gaweb_popup_content').length>0&&$('.gaweb_popup_content').html().length>0){fls_events_add('gaweb_email_lightbox');}else{fls_events_add('bc_web_email_lightbox');}}else{fls_events_add('email_domain_lightbox');}
if(typeof Drupal.settings.weblb_show_popup!='undefined'){fls_events_add('weblb_lightbox_fired');WEBLB.init($(obj).parent('form'));return false;}
if(typeof Drupal.settings.bcweb_popup!='undefined'){$("#bc_popup_right_mail .right_content").append($("#websites_domain_package_form"));$('#submit_mailbox').click(function(){submit_mailbox_on_click();});var d=$('#email_label').text();$(".email_suggestions h4").each(function(){var text=$(this).text();$(this).text(text+d);});if(Drupal.settings.weebly_preview_v2_split_set&&(Drupal.settings.workflow=='business-cards'||Drupal.settings.logo_id)){$(".bcweb_popup").hide();WEEBLYPREVIEW.init(selected_website);}else{$("#bc_popup_right_domain").hide().addClass('right_domain_hide');$('#submit_mailbox').text(Drupal.settings.mail_button);$('.bcweb_header').text(Drupal.settings.mail_header);$(".email_suggestions").show();$(".email_suggestions h3").show();$("#bc_popup_right_mail").show();}
if(bcweb_track_lightbox_data()){fls_events_add('business_email_lb_fired_from_all_pages');fls_events_add('lightbox_bcstep3em_views');}
Drupal.settings.onedomv2_google_popup_show=1;if($(".thankYouBox.bcweb_popup").hasClass("onedom_lb")){$(".thankYouBox.bcweb_popup").removeClass("onedom_lb");}
if(currentSuggestedDomPos!==0){alert(Drupal.settings.not_available_domain_msg);fls_events_add('fire_not_available_dom_box');alertDisplayed=1;$.cookie("onedom_alert_box",0);currentSuggestedDomPos=0;}
$(".allreadyOwnDomain, .ownDomain").hide();$(".website_popup_button").css('margin-top','50px');$("#website_template").val(Drupal.settings.default_template);}else if(typeof Drupal.settings.gaweb_popup_fire!='undefined'){$("#bc_popup_right_mail .right_content").append($("#websites_domain_package_form"));$('#submit_mailbox').click(function(){fls_events_add('clicked_continue_from_gaweb_lightbox');submit_mailbox_on_click();});var d=$('#email_label').text();$(".email_suggestions h4").each(function(){var text=$(this).text();$(this).text(text+d);});$("#bc_popup_right_domain").hide().addClass('right_domain_hide');$('#submit_mailbox').text(Drupal.settings.mail_button);$('.bcweb_header').text(Drupal.settings.mail_header);$(".email_suggestions").show();$(".email_suggestions h3").show();$("#bc_popup_right_mail").show();if(bcweb_track_lightbox_data()){fls_events_add('lightbox_bcstep3em_views');fls_events_add('business_email_lb_fired_from_all_pages');}
Drupal.settings.onedomv2_google_popup_show=1;$('input[name="website_template"]').val(Drupal.settings.default_template);}else{if($('.logowebv2_popup_content').length>0){if(currentSuggestedDomPos!==0&&alertDisplayed!==1){$.cookie("onedom_alert_box",1);}
if(typeof Drupal.settings.weebly_preview_split_set!='undefined'){LOGOWEBV2.hidePopUp();WEEBLYPREVIEW.init(selected_website);return false;}else
if(typeof Drupal.settings.gaupsell_split_set!='undefined'){fls_events_add('gaupsell_lightbox_fired');fls_events_add('business_email_lightbox_fired');var gaupsell_page_type='step2';if(typeof Drupal.settings.page_is_step2!='undefined'){gaupsell_page_type='step2';}else{gaupsell_page_type='step3';}
fls_events_add('business_email_lb_fired_from_all_pages');fls_events_add('lightbox_'+gaupsell_page_type+'em_views');$('.bcweb_popup.logowebv2 .close').mousedown(function(){fls_events_add('lightbox_'+gaupsell_page_type+'em_close');});$('.bcweb_popup.logowebv2 .orangeButton_close').mousedown(function(){fls_events_add('lightbox_'+gaupsell_page_type+'em_negativecta');});$("#logoweb_popup_right_mail .right_content").append($("#websites_domain_package_form"));$('#submit_mailbox').click(function(){fls_events_add('clicked_continue_from_gaupsell_lightbox');submit_mailbox_on_click();});var d=$('#email_label').text();$(".email_suggestions h4").each(function(){var text=$(this).text();$(this).text(text+d);});$("#logoweb_popup_domain").hide().addClass('right_domain_hide');$(".website_popup_button_container .free_domain_info").hide();$(".website_popup_button").css('display','block').css('margin-top','20px');$(".bcweb_popup h2").text(Drupal.settings.mail_header);$(".email_suggestions").show();$(".email_suggestions h3").show();$("#logoweb_popup_mail").show();Drupal.settings.onedomv2_google_popup_show=1;if(currentSuggestedDomPos!==0){alert(Drupal.settings.not_available_domain_msg);fls_events_add('fire_not_available_dom_box');alertDisplayed=1;$.cookie("onedom_alert_box",0);currentSuggestedDomPos=0;}
$(".allreadyOwnDomain").hide();$('input[name="website_template"]').val(Drupal.settings.default_template);$(".thankYouBox.bcweb_popup").removeClass("onedom_lb");}else{$(".website_template").val(Drupal.settings.default_template);$(obj).parent('form').submit();}}else{if(Drupal.settings.reduce_flow)
submit_mailbox_on_click(true);else $('.popup_css_mailbox').show();}}
return false;}
function websites_domain_init(){Drupal.settings.website_init_domain={domain:$('#websites_domain_search_input').val(),tld:$('#websites_domain_search_category').val(),event:0};$(".mailbox .closeBtn, .mailbox .close").click(function(e){$('#websites_domain_package_form').submit();});$('.websites_domain_search_button').click(function(e){e.preventDefault();$('#multisearch_domain_not_available').hide();$('#websites_domain_search_input_hidden').val($('#websites_domain_search_input').val());$(".domain_available .websites_domain_suggestions_form input[type='button']").addClass("orangeButton");$(".domain_available .websites_domain_suggestions_form input[type='button']").removeClass("disabled");$(".domain_available .websites_domain_suggestions_form input[type='button']").val(Drupal.settings.msg_select);if(Drupal.settings.domain_search_split_set)Drupal.settings.search_button_clicked=1;websites_domain_search_form();});$('.websites_domain_already_button').click(function(e){e.preventDefault();$(".gapps_unavailable_error").hide();if(!validate_domain($('#websites_domain_already_input').val())){$('.websites_domain_already_results_error').html(Drupal.settings.websites_domain_already_results_error);$('.websites_domain_already_results_error').slideDown();return false;}else $(".websites_domain_already_results_error").slideUp();$(this).hide();$('.websites_domain_search_button').hide();$('.websites_domain_already_form').submit();});$('#websites_domain_search_input').keyup(websites_domain_keyup);$('#websites_domain_already_input').keyup(websites_domain_clean);$('#websites_domain_search_input').change(function(){websites_domain_clean(this);});$('#websites_domain_already_input').change(function(){websites_domain_clean(this);$('#websites_domain_search_input_hidden').val($('#websites_domain_search_input').val());});$('input[name="manage_email_input"]').click(function(){if($(this).val()==1){$('.psw').hide();$('#websites_forward_email_input').show();}
else{$('.psw').show();$('#websites_forward_email_input').hide();}});$('input[type="button"]').click(function(){website_select(this)});$(".websites_domain_package_form").submit(function(){window.onbeforeunload=null;});$('#websites_email_input').each(function(){$(this).bind('keypress',function(e){var idform=fls_find_form(this);if(e.keyCode==13&&idform=='websites_domain_package_form'){return submit_mailbox_on_click();}});});$('#submit_mailbox').click(function(){if(typeof Drupal.settings.domain_lightbox_email_submit!='undefined')return false;window.onbeforeunload=null;submit_mailbox_on_click();});}
function submit_mailbox_on_click(skip_mailbox){var is_valid=true;if(skip_mailbox===undefined)skip_mailbox=false;if(!skip_mailbox){is_valid=validate_mailbox();}
if(is_valid){Drupal.settings.domain_lightbox_email_submit=1;if($('.bcweb_popup').length>0&&($('.overlay').length>0||$('#FLSPreviewOverlay').length)){if(!skip_mailbox){if($('.logowebv2_popup_content').length>0&&$('.logowebv2_popup_content').html().length>0){if(typeof Drupal.settings.gaupsell_split_set!='undefined'){fls_events_add('clicked_continue_from_gaupsell_lightbox');var gaupsell_page_type='step2';if(typeof Drupal.settings.page_is_step2!='undefined'){gaupsell_page_type='step2';}else{gaupsell_page_type='step3';}
fls_events_add('lightbox_'+gaupsell_page_type+'em_continue');}else{fls_events_add('logo_web_email_submit');}}else if($('.gaweb_popup_content').length>0&&$('.gaweb_popup_content').html().length>0){fls_events_add('clicked_continue_from_gaweb_lightbox');}else{fls_events_add('bc_web_email_submit');}}}
else{fls_events_add('completed_email_domain');}
$('#websites_domain_package_form').submit();}
return false;}
function websites_get_current_domain(){var domain=$('.websites_domain_search_form #websites_domain_search_input_hidden').val()+'.'+$('#websites_domain_search_category').val();return domain;}
function websites_domain_search_form(init,results){var dom_tld;dom_tld=$('#websites_domain_search_category option:selected').text().substring(1);if(Drupal.settings.domain_search_split_set){if($(".domainsearch_split_cont").length)
dom_tld=$('.domainsearch_split_cont #websites_domain_search_category option:selected').text().substring(1);}
var domain_name=$('.websites_domain_search_form #websites_domain_search_input_hidden').val().trim();if(!domain_name)return false;var domain_clean=domain_name.replace(/[^a-zA-Z0-9-]+/g,'');if(domain_clean!=domain_name){$('.websites_domain_results_error').slideDown();return false;}
var domain=domain_name+'.'+dom_tld;$(".websites_domain_search_button").attr("disabled",true);$(".websites_domain_search_button").addClass("disabled");$('.domain_available').hide();$('#domain_not_available').hide();var domain_text=domain;if(typeof Drupal.settings.bcweb_popup!='undefined'||typeof Drupal.settings.gaweb_popup_fire!='undefined'){domain_text=Drupal.settings.email_name_label+'@'+domain;}
$('.domain_available .websites_domain_suggestion').val(domain);$('.domain_available .websites_domain_suggestion_text').text(domain_text);$('#domain_not_available .websites_domain_suggestion_text').text(domain_text);$('.websites_domain_results').slideUp();$('.other_suggested_domain_names').hide();$('.suggested_domain_names').show();$('.websites_domain_results_error, .websites_domain_already_results_error, .websites_domain_results_error_noavailable').hide();$('.websites_domain_suggestions_loading').slideDown();var data={domain:domain};if(Drupal.settings.bcweb_popup||Drupal.settings.logowebv2_popup){data['source']='popup';}
$.ajax({type:"POST",url:Drupal.settings.websites_domain_search_api,data:data,cache:false,dataType:"json",success:function(response)
{$('.websites_domain_search_button').attr("disabled",false);$('.websites_domain_search_button').removeClass("disabled");if(Drupal.settings.domain_search_split_set)
response["after_search"]=1;domain_text=response["domain"];if(typeof Drupal.settings.bcweb_popup!='undefined'||typeof Drupal.settings.gaweb_popup_fire!='undefined'){domain_text=Drupal.settings.email_name_label+'@'+response["domain"];}
$('.domain_available .websites_domain_suggestion').val(response["domain"]);$('.domain_available .websites_domain_suggestion_text').text(domain_text);$('#domain_not_available .websites_domain_suggestion_text').text(domain_text);websites_domain_parse_search_results(response,init,results);var domain_name=response["domain"].split('.');$("#websites_domain_search_input").val(domain_name[0]);$('#websites_domain_search_input_hidden').val($('#websites_domain_search_input').val());websites_prepare_buttons();}});}
function websites_prepare_buttons(){if(typeof Drupal.settings.websites_populate_data!='undefined'&&typeof Drupal.settings.websites_populate_data['domain_match_type']&&Drupal.settings.websites_populate_data['domain_match_type']){fls_events_add('dom_lightbox_match_type',Drupal.settings.websites_populate_data['domain_match_type']);if(typeof Drupal.settings.websites_populate_data['tlds']!='undefined'){var first_tld_user_see='';if(typeof Drupal.settings.websites_populate_data['available_tlds'][0]!='undefined'){first_tld_user_see=Drupal.settings.websites_populate_data['available_tlds'][0]['tld'];var tld_priority=$.inArray(first_tld_user_see,Drupal.settings.websites_populate_data['tlds']);tld_priority++;fls_events_add('dom_lightbox_first_tld',tld_priority);}}}
if(typeof Drupal.settings.check_domain_cache=='undefined'){Drupal.settings.check_domain_cache={};if(typeof Drupal.settings.websites_populate_data!='undefined'&&typeof Drupal.settings.websites_populate_data['check_db']!='undefined'&&Drupal.settings.websites_populate_data['check_db']){if(typeof Drupal.settings.websites_populate_data['unavailable_tlds_db']!='undefined'&&Drupal.settings.websites_populate_data['unavailable_tlds_db']){for(var x in Drupal.settings.websites_populate_data['unavailable_tlds_db']){Drupal.settings.check_domain_cache[Drupal.settings.websites_populate_data['unavailable_tlds_db'][x]]=false;}}
if(typeof Drupal.settings.websites_populate_data['available']!='undefined'&&typeof Drupal.settings.websites_populate_data['domain']!='undefined'){Drupal.settings.check_domain_cache[Drupal.settings.websites_populate_data['domain']]=Drupal.settings.websites_populate_data['available'];}}}
websites_domain_is_sequential_check_error('init');$('.websites_domain_page input[type="button"]').unbind("click");$('.websites_domain_page input[type="button"]:not(.disabled)').click(function(){websites_domain_is_sequential_check_error('show_loading');var suggestedDomain=$(this).parent('form').find('.websites_domain_suggestion').attr("value");$('.websites_domain_results_error_noavailable').hide();if(typeof Drupal.settings.check_domain_on_dropdown_change!='undefined'&&Drupal.settings.check_domain_on_dropdown_change){if(typeof Drupal.settings.check_domain_cache!='undefined'&&typeof Drupal.settings.check_domain_cache[suggestedDomain]!='undefined'){websites_domain_is_sequential_check_error('hide_loading');if(!Drupal.settings.check_domain_cache[suggestedDomain])websites_domain_is_sequential_check_error();return false;}}
var myobj;myobj=$(this);if(myobj.hasClass("claim_domain")){oneDom_domain_obj.trigger('click');return false;}
$(".websites_domain_suggestions_list .fls-bluebutton:not(.disabled), .domain_available .fls-bluebutton:not(.disabled), .top_websites_domain_search_form .fls-bluebutton:not(.disabled)").attr("disabled",true);$('.websites_domain_suggestions_list input[type="button"]:not(.disabled), .domain_available input[type="button"]:not(.disabled), .top_websites_domain_search_form input[type="submit"]:not(.disabled)').removeClass("fls-bluebutton");$('.domain_available input[type="button"]:not(.disabled)').removeClass("orangeButton");$('.websites_domain_suggestions_list input[type="button"]:not(.disabled), .domain_available input[type="button"]:not(.disabled), .top_websites_domain_search_form input[type="submit"]:not(.disabled)').addClass("disabled_btn");$('.websites_domain_suggestions_loading').slideDown();if(typeof Drupal.settings.check_domain_cache!='undefined'&&typeof Drupal.settings.check_domain_cache[suggestedDomain]!='undefined'&&typeof Drupal.settings.websites_populate_data!='undefined'&&typeof Drupal.settings.websites_populate_data['check_db']!='undefined'&&Drupal.settings.websites_populate_data['check_db']){var resultData={available:Drupal.settings.check_domain_cache[suggestedDomain]};websites_domain_check_callback(suggestedDomain,myobj,resultData);}else{var source='';if(typeof Drupal.settings.websites_populate_data!='undefined'&&typeof Drupal.settings.websites_populate_data['check_db']!='undefined'&&Drupal.settings.websites_populate_data['check_db']){source='popup';}
var squential_domain_check='';if(typeof Drupal.settings.websites_populate_data!='undefined'&&typeof Drupal.settings.websites_populate_data['checked-by']!='undefined'){squential_domain_check=Drupal.settings.websites_populate_data['checked-by'];}
$.post(Drupal.settings.websites_domain_search_api,{domain:suggestedDomain,limit:"0",vendor:'gandi',source:source,checked_by:squential_domain_check},function res(data){websites_domain_check_callback(suggestedDomain,myobj,data);},"json");}});}
function websites_domain_check_callback(suggestedDomain,myobj,data){if(typeof data['domain']!='undefined'&&suggestedDomain!=data['domain'])data.available=false;if(typeof Drupal.settings.check_domain_cache!='undefined'&&typeof Drupal.settings.check_domain_cache[suggestedDomain]=='undefined')Drupal.settings.check_domain_cache[suggestedDomain]=data.available;if(!data.available){$('.websites_domain_suggestions_loading').slideUp();$('.websites_domain_suggestions_list input[type="button"]:not(.disabled), .domain_available input[type="button"]:not(.disabled), .top_websites_domain_search_form input[type="submit"]:not(.disabled)').attr("disabled",false);$('.websites_domain_suggestions_list input[type="button"]:not(.disabled), .domain_available input[type="button"]:not(.disabled), .top_websites_domain_search_form input[type="submit"]:not(.disabled)').removeClass("disabled_btn");$('.websites_domain_suggestions_list input[type="button"]:not(.disabled), .top_websites_domain_search_form input[type="submit"]:not(.disabled)').addClass("fls-bluebutton");$('.domain_available input[type="button"]:not(.disabled)').addClass("orangeButton");if(!$(".thankYouBox.bcweb_popup").hasClass("onedom_lb")||(typeof Drupal.settings.websites_populate_data!='undefined'&&Drupal.settings.websites_populate_data['domain_match_type']=='domainsbot')){myobj.removeClass("fls-bluebutton");myobj.addClass("disabled");myobj.val(Drupal.settings.msg_not_available);myobj.unbind("click");fls_events_add('onedom_dropdown_error_onchange');}
if(websites_domain_is_sequential_check_error())return false;return false;}else{if(typeof Drupal.settings.websites_populate_data!='undefined'&&typeof Drupal.settings.websites_populate_data['check_db']!='undefined'&&Drupal.settings.websites_populate_data['check_db']){var resultData={available:data.available};websites_domain_db_check_callback(suggestedDomain,myobj,resultData);}else{$.post(Drupal.settings.websites_domain_research_api,{domain:suggestedDomain},function result(resultData){websites_domain_db_check_callback(suggestedDomain,myobj,resultData);},"json");}}}
function websites_domain_db_check_callback(suggestedDomain,myobj,resultData){if(typeof Drupal.settings.check_domain_cache!='undefined')Drupal.settings.check_domain_cache[suggestedDomain]=resultData.available;if(resultData.available){if(typeof Drupal.settings.check_domain_on_dropdown_change=='undefined'||!Drupal.settings.check_domain_on_dropdown_change){website_select(myobj);}
websites_domain_is_sequential_check_error('hide_loading');}
else{$('.websites_domain_suggestions_loading').slideUp();if(typeof Drupal.settings.bc_logoweb_split_set=='undefined'){$('.websites_domain_suggestions_list input[type="button"]:not(.disabled), .domain_available input[type="button"]:not(.disabled), .top_websites_domain_search_form input[type="submit"]:not(.disabled)').attr("disabled",false);$('.websites_domain_suggestions_list input[type="button"]:not(.disabled), .domain_available input[type="button"]:not(.disabled), .top_websites_domain_search_form input[type="submit"]:not(.disabled)').removeClass("disabled_btn");$('.websites_domain_suggestions_list input[type="button"]:not(.disabled), .top_websites_domain_search_form input[type="submit"]:not(.disabled)').addClass("fls-bluebutton");$('.domain_available input[type="button"]:not(.disabled)').addClass("orangeButton");}
else{if(!resultData.available){$('.websites_domain_suggestions_list input[type="button"]:not(.disabled), .domain_available input[type="button"]:not(.disabled), .top_websites_domain_search_form input[type="submit"]:not(.disabled)').attr("disabled",false);$('.websites_domain_suggestions_list input[type="button"]:not(.disabled), .domain_available input[type="button"]:not(.disabled), .top_websites_domain_search_form input[type="submit"]:not(.disabled)').removeClass("disabled_btn");$('.websites_domain_suggestions_list input[type="button"]:not(.disabled), .top_websites_domain_search_form input[type="submit"]:not(.disabled)').addClass("fls-bluebutton");$('.domain_available input[type="button"]:not(.disabled)').addClass("orangeButton");}}
if(typeof Drupal.settings.websites_populate_data!='undefined'&&typeof Drupal.settings.websites_populate_data['sequential']=='undefined'){if($(".thankYouBox.bcweb_popup").hasClass("onedom_lb")&&typeof Drupal.settings.websites_populate_data!='undefined'&&Drupal.settings.websites_populate_data['domain_match_type']!='domainsbot'){currentSuggestedDomPos+=1;oneDom_domain=$('.websites_domain_suggestions_list .websites_domain_suggestions_form:nth-child('+currentSuggestedDomPos+') input[name="websites_domain_suggestion"]').val();oneDom_domain_obj=$('.websites_domain_suggestions_list .websites_domain_suggestions_form:nth-child('+currentSuggestedDomPos+') input[class="fls-bluebutton"]');if(oneDom_domain!==""){oneDom_domain_obj.trigger('click');}}}
if(!$(".thankYouBox.bcweb_popup").hasClass("onedom_lb")||(typeof Drupal.settings.websites_populate_data!='undefined'&&Drupal.settings.websites_populate_data['domain_match_type']=='domainsbot')){myobj.removeClass("fls-bluebutton");myobj.removeClass("orangeButton");myobj.addClass("disabled");myobj.val(Drupal.settings.msg_not_available);myobj.unbind("click");fls_events_add('onedom_dropdown_error_onchange');}
if(websites_domain_is_sequential_check_error())return false;return false;}}
function websites_domain_is_sequential_check_error(op){if(!$(".thankYouBox.bcweb_popup").hasClass("onedom_lb"))return false;if(typeof op=='undefined')op='error';if(typeof Drupal.settings.websites_populate_data!='undefined'&&typeof Drupal.settings.websites_populate_data['sequential']!='undefined'){if($('#one_domain_name .websites_domain_results_error_noavailable').length==0){$('.claim_domain').before($('.websites_domain_results_error_noavailable'));$('.websites_domain_results_error_noavailable').css({padding:'5px',margin:'5px',border:'0px none',color:'#000'});$('.claim_domain').after($('.websites_domain_suggestions_loading'));$('.claim_container').css({height:'37px'});$('.websites_domain_suggestions_loading').css({height:'37px',visibility:'hidden',display:'block'});}
if(op=='show_loading'){$('.claim_domain').hide();$('.websites_domain_suggestions_loading').show().css('visibility','visible');}
if(op!='show_loading'){$('.websites_domain_suggestions_loading').hide();$('.claim_domain').show();}
if(op=='error'){$('.websites_domain_results_error_noavailable').show();$('.claim_domain').hide();fls_events_add('onedom_dropdown_error_onchange');}
return true;}
return false;}
function websites_search_init(){if($("input[name='google_apps']").val()==1&&typeof Drupal.settings.gaweb_popup_fire=='undefined'){$(".website_popup_button .orangeButton").insertAfter(".websites_domain_page .right_content");$(".website_popup_button").css('margin-top','17px');}
if(Drupal.settings.skip_domain_result_population){if($(".thankYouBox.bcweb_popup").hasClass("onedom_lb")){$(".thankYouBox.bcweb_popup").removeClass("onedom_lb");$(".onedom_lb_container").remove();}
return false;}
if(typeof Drupal.settings.websites_populate_data!='undefined'){var domain=Drupal.settings.websites_populate_data["domain"];if(typeof Drupal.settings.websites_populate_data.domain_with_dash!='undefined'){fls_events_add('domain_contain_dash');}
if(typeof Drupal.settings.bcweb_popup!='undefined'||typeof Drupal.settings.gaweb_popup_fire!='undefined'){domain=Drupal.settings.email_name_label+'@'+Drupal.settings.websites_populate_data["domain"];}
$('.domain_available .websites_domain_suggestion').val(Drupal.settings.websites_populate_data["domain"]);$('.domain_available .websites_domain_suggestion_text').text(domain);$('#domain_not_available .websites_domain_suggestion_text').text(domain);websites_domain_parse_search_results(Drupal.settings.websites_populate_data);if(typeof Drupal.settings.tlds_split_set!='undefined'){fls_events_add('last_fired_dom_lightbox',1);onedomv2_close_trigger();}
onedomv2_create_dropdown();websites_prepare_buttons();if(typeof Drupal.settings.tlds_split_set!='undefined'){$('#websites_domain_search_input').val('');}
return;}
var domain=$('#websites_domain_search_input_hidden').val();if(typeof domain!='undefined'){if(domain.length>0){websites_domain_search_form(Drupal.settings.multisearch);return;}}}
function onedomv2_close_trigger(){if(typeof onedomv2_results2_rendered!='undefined')return;onedomv2_results2_rendered=true;$('.thankYouBox .close, .thankYouBox .closeBtn, .thankYouBox .orangeButton_close').click(function(){if(typeof Drupal.settings.onedomv2_google_popup_show=='undefined'){fls_events_add('last_click_close_btn',1);}});}
function onedomv2_create_dropdown(){if(typeof onedomv2_results_rendered!='undefined')return;onedomv2_results_rendered=true;var lightbox_type='list_tld';if(typeof Drupal.settings.tlds_split_set!='undefined'&&Drupal.settings.tlds_split_set==1&&typeof Drupal.settings.fls_onedom_split_set!='undefined'&&Drupal.settings.fls_onedom_split_set==1){lightbox_type='one_ltd';$("#one_domain_name").html(oneDom_domain);$('#one_domain_name').append($('.websites_domain_search_category_outer').not(".domainsearch_split_cont .websites_domain_search_category_outer").clone());$('#websites_domain_search_category').html('');var oneDom_dropdown_tlds='';var pos=0;for(var i in Drupal.settings.onedomv2_results){oneDom_dropdown_tlds+='<option value="'+pos+'">.'+Drupal.settings.onedomv2_results[i]['tld']+'</option>';pos++;}
$('#websites_domain_search_category').html(oneDom_dropdown_tlds);$('#websites_domain_search_category').change(function(){if(typeof Drupal.settings.tlds_split_set!='undefined'){fls_events_add('last_onedom_dropdown_interact',1);}
if(typeof Drupal.settings.websites_populate_data!='undefined'&&typeof Drupal.settings.websites_populate_data['sequential']!='undefined'){websites_domain_check_domain();}});setTimeout(function(){$('.claim_domain').unbind('click');$('.claim_domain').click(function(){Drupal.settings.check_domain_on_dropdown_change=0;$('.websites_domain_results_error_noavailable').hide();Drupal.settings.claim_domain_btn=1;if($(".page-body-checkout").length>0)fls_events_add('accept_freedom_from_checkout',1);var tld=$('#websites_domain_search_category option:selected').text().substring(1);$('.right_content .websites_domain_suggestions_form').each(function(){var domain_name=$(this).find('input[class="websites_domain_suggestion"]').val();if(domain_name){var domain=domain_name.split('.');domain.shift();var current_tld=domain.join('.');if(current_tld==tld){$(this).find('input[type="button"]').trigger('click');}}});});},500);}
fls_events_add('dom_lightbox_type',lightbox_type);}
function websites_domain_check_domain(){Drupal.settings.check_domain_on_dropdown_change=1;var tld=$('#websites_domain_search_category option:selected').text().substring(1);$('.right_content .websites_domain_suggestions_form').each(function(){var domain_name=$(this).find('input[class="websites_domain_suggestion"]').val();if(domain_name){var domain=domain_name.split('.');domain.shift();var current_tld=domain.join('.');if(current_tld==tld){$(this).find('input[type="button"]').trigger('click');}}});}
function websites_domain_identify_match(data){if(typeof data['domain_match_type']!=='undefined')
return data['domain_match_type'];return false;}
function websites_domain_parse_search_results(data,init,results){var error=false;if(typeof Drupal.settings.twolinesearch=='undefined'||(typeof Drupal.settings.twolinesearch!='undefined'&&!init)){if((error=websites_domain_parse_search_results_validate(data))!=false){websites_domain_search_error(error);if(Drupal.settings.domain_search_split_set&&data["after_search"]&&!$(".domain_search_err_div").length&&$(".onedom_lb_container").css("display")=="block"){var err_div;err_div=($('.websites_domain_results_error').clone()).addClass("domain_search_err_div");err_div.prependTo(".domainsearch_split_cont");}
return;}}
if(Drupal.settings.domain_search_split_set&&!$(".page-body-websites-domain").length&&Drupal.settings.search_button_clicked){fls_events_add('submit_search');}
if(Drupal.settings.domain_search_split_set&&data["after_search"]){var newButtonHref=$(".onedom_lb_container .closeBtn").attr("href");$(".onedom_lb_container .domainsearch_split_cont").remove();$('.onedom_lb_container').hide();$('.onedom_lb.bcweb_popup .right div.right_content .bottom_websites_domain_search_form').wrap('<div class="domainsearch_split_cont"></div>');$('.onedom_lb.bcweb_popup .right div.right_content').show();buttonClassName=$('#logoweb_popup_domain .right_content').next().attr("class");if(!buttonClassName||(buttonClassName&&buttonClassName.indexOf("website_popup_button")==-1)){if(buttonClassName)console.log(buttonClassName+"   "+buttonClassName.indexOf("website_popup_button"));var newButton=$(".website_popup_button:first").clone();$('#logoweb_popup_domain .right_content').after(newButton.addClass("dom_search_btn"));$(".dom_search_btn>a").attr("href",newButtonHref);$(".dom_search_btn").css('display','block').css('margin-top','20px').css("margin","0px auto");}}
if(init){if(!data['available']){if(typeof Drupal.settings.twolinesearch!='undefined'){$('#websites_domain_search_input_hidden').val(Drupal.settings.twolinesearch);var new_results=[];if(typeof data['suggest']!=='undefined'){if(data['suggest']!=null){new_results=data['suggest'].slice(0,5);}}
var domain=$('#websites_domain_search_input').val()+'.'+$('#websites_domain_search_category').val();if(typeof Drupal.settings.bcweb_popup!='undefined'||typeof Drupal.settings.gaweb_popup_fire!='undefined'){domain=Drupal.settings.email_name_label+'@'+domain;}
$('#multisearch_domain_not_available .websites_domain_suggestion_text').text(domain);$('#multisearch_domain_not_available').show();websites_domain_search_form(false,new_results);return;}}}
var ga_action=websites_domain_identify_match(data);var current_href=window.location.href;if(current_href.indexOf('business-cards/step3')>-1){ga_label='bc';}else if(current_href.indexOf('step2')>-1||current_href.indexOf('step3')>-1){ga_label='logo';}else if(current_href.indexOf('websites/domain')>-1){ga_label='DomainSearchLP';}else{var replace_base_url=Drupal.settings.baseUrl+'/';if(Drupal.settings.lang){replace_base_url+=Drupal.settings.lang;}
var current_path=current_href.replace(replace_base_url,'');var arr_current_path=current_path.split('/');ga_label=arr_current_path[0];}
ga('send','event','Website Type Search',ga_action,ga_label);Drupal.settings.bcweb_latest_search_match={ga_action:ga_action,ga_label:ga_label,ga_checkedby:data['checked-by'],ga_country:data['country']};if(typeof Drupal.settings.bcweb_initial_search_track=='undefined'){if(ga_action){ga('send','event','Website Initial Search',ga_action,ga_label);Drupal.settings.bcweb_initial_search_track=true;}}
if(typeof(data['available_tlds'])!='undefined'&&data['available_tlds'].length>0){Drupal.settings.onedomv2_results=data['available_tlds'];oneDom_domain='<span class="onedomv2_domain">'+Drupal.settings.onedomv2_results[0]['name']+'</span>';}else if(typeof(data['suggest'])!='undefined'&&data['suggest'].length>0){Drupal.settings.fls_onedom_split_set=0;$('.onedom_lb_container').hide();$('.onedom_lb.bcweb_popup .right div.right_content').show();if(!$('body').hasClass('mobile_view')){$('.onedom_lb.bcweb_popup:not(.logowebv2) .bcweb_popup_left').css('width','40%');$('.onedom_lb.bcweb_popup:not(.logowebv2) .bcweb_popup_right').css('width','59%');}}
if(typeof data['available']!=='undefined'){if(data['available']){if(Drupal.settings.tlds_split_set==1)
$('.search_header').show();ga('send','event','Website Search','Available',data['domain']);$('.suggested_domain_names').hide();$('.other_suggested_domain_names').show();oneDom_domain_obj=$('.domain_available .websites_domain_suggestions_form:first input[class="orangeButton"]');$('.domain_available').show();}else{if(typeof Drupal.settings.website_init_domain!='undefined'){if(!Drupal.settings.website_init_domain['event']){Drupal.settings.website_init_domain['event']=1;ga('send','event','Website Init Recommendation','Not Available',Drupal.settings.website_init_domain['domain']+'.'+Drupal.settings.website_init_domain['tld']);}}
if(Drupal.settings.tlds_split_set==1){$('#domain_not_available').hide();$('.search_header').hide();$('.other_suggested_domain_names').show();$('.suggested_domain_names').hide();}
else{$('.search_header').show();$('#domain_not_available').show();$('.suggested_domain_names').show();$('.other_suggested_domain_names').hide();}}}
if(typeof data['suggest']!=='undefined'){if(data['suggest']==null){$('.other_suggested_domain_names').hide();$('.suggested_domain_names').hide();}}
$('.websites_domain_results .websites_domain_results_container .websites_domain_suggestions_list').html('');if(typeof results=='undefined')results=[];if(data['suggest']!=null){results=$.merge(results,data['suggest']);results=results.slice(0,10);}
$.each(results,function(index,value){var default_entry=$('.websites_domain_results_container .template').html();$('.websites_domain_results .websites_domain_suggestions_list').append(default_entry);if(typeof Drupal.settings.bcweb_popup!='undefined'||typeof Drupal.settings.gaweb_popup_fire!='undefined'){$('.websites_domain_suggestions_list .websites_domain_suggestions_form:last .websites_domain_suggestion_text').text(Drupal.settings.email_name_label+'@'+value['domain']);}
else{$('.websites_domain_suggestions_list .websites_domain_suggestions_form:last .websites_domain_suggestion_text').text(value['domain']);}
$('.websites_domain_suggestions_list .websites_domain_suggestions_form:last .websites_domain_suggestion').val(value['domain']);$('.websites_domain_suggestions_list .websites_domain_suggestions_form:last').addClass('websites_domain_suggestion_'+index);});if(typeof data['domain']!='undefined'){$('.website_searched').val(data['domain']);}
$('.websites_domain_results').slideDown();$('.websites_domain_suggestions_loading').slideUp();if(oneDom_domain==""){oneDom_domain=$('.websites_domain_suggestions_list .websites_domain_suggestions_form:first input[name="websites_domain_suggestion"]').val();oneDom_domain_obj=$('.websites_domain_suggestions_list .websites_domain_suggestions_form:first input[class="fls-bluebutton"]');}
onedomv2_close_trigger();onedomv2_create_dropdown();}
function websites_domain_parse_search_results_validate(data){if(typeof data=='undefined')
return 101;if(data==false)
return 101;if(typeof data['isOk']=='undefined')
return 102;if(data['isOk']!=true)
return 103;if(typeof data['suggest']==false)
return 104;if((typeof data['available']=='undefined'||!data['available'])&&(typeof data.available_tlds=='undefined'||data.available_tlds.length==0)&&(typeof data.suggest=='undefined'||data.suggest.length==0)){return 105;}
return false;}
function websites_domain_search_error(error){if(error==105){$('.websites_domain_results_error_noavailable').slideDown();}else{$('.websites_domain_results_error').slideDown();}
$('.websites_domain_suggestions_loading').slideUp();}
function websites_domain_keyup(){websites_domain_clean();var domain=$('#websites_domain_search_input_hidden').val();$.each(Drupal.settings.tlds,function(index,value){if(value==domain.slice(domain.length-value.length)){$('#websites_domain_search_category').val(value);domain=domain.slice(0,-value.length);domain=domain.replace(/\./g,"");$('#websites_domain_search_input_hidden').val(domain);}});}
function websites_domain_clean(o){return false;var str=$(o).val();if(str){var str2=str.replace(/[^a-zA-Z0-9-.]+/g,'');if(str!=str2){$(o).val(str2);}}}
function validate_domain_tld(domain){if(!domain)return false;var dom_tld=domain.split(".").pop();if(dom_tld){if($.inArray(dom_tld,Drupal.settings.available_tlds)==-1)return false;return true;}else return false;return true;}
function validate_domain(domain){if(!domain)
return false;var re=new RegExp(/^(([a-zA-Z]{1})|([a-zA-Z]{1}[a-zA-Z]{1})|([a-zA-Z]{1}[0-9]{1})|([0-9]{1}[a-zA-Z]{1})|([a-zA-Z0-9][a-zA-Z0-9-_]{1,61}[a-zA-Z0-9]))\.([a-zA-Z]{2,6}|[a-zA-Z0-9-]{2,30}\.[a-zA-Z]{2,3})$/);return domain.match(re);};$(document).ready(function(){$('#weebly_editor').load(function(){$('#weebly_editor').css('visibility','visible');$('#weebly_container').css('visibility','visible');});});function validate_mailbox(){var global_err_messages=JSON.parse(Drupal.settings.global_error_messages);var websites_email_input=$('#websites_email_input').val();if(!websites_email_input){$('#error_msg').html(global_err_messages.email_required);$('#error_msg').show();return false;}
var test=new RegExp("^[a-zA-Z0-9]+([-._][a-zA-Z0-9]+)*$");if(!websites_email_input.match(test)){$('#error_msg').html(global_err_messages.email_restriction);$('#error_msg').show();return false;}
if($('#websites_email_pass_input').length){if($('#manage_email_input_0').is(":checked")&&!$('#websites_email_pass_input').val()){$('#error_msg').html(global_err_messages.pass_required);$('#error_msg').show();return false;}
if($('#manage_email_input_0').is(":checked")&&$('#websites_email_pass_input').val()!=$('#websites_email_pass_conf_input').val()){$('#error_msg').html(global_err_messages.pass_restriction);$('#error_msg').show();return false;}
if($('#manage_email_input_0').is(":checked")){var msg=validate_pass_strength($('#websites_email_pass_input').val());if(msg!=true){$('#error_msg').html(msg);$('#error_msg').show();return false;}}}
if($('#manage_email_input_1').is(":checked")&&!$('#websites_forward_email_input').val()){$('#error_msg').html(global_err_messages.fwd_email_required);$('#error_msg').show();return false;}
if($('#manage_email_input_1').is(":checked")&&!isValidEmail($('#websites_forward_email_input').val())){$('#error_msg').html(global_err_messages.fwd_email_restriction);$('#error_msg').show();return false;}
return true}
function validate_pass_strength(pass){var global_err_messages=JSON.parse(Drupal.settings.global_error_messages);var number_count=pass.replace(/\D/g,"").length;if(number_count&&number_count!=pass.length&&pass.length>=6){return true}
else{return global_err_messages.invalid_pass;}};$(document).ready(function(){$("#addToCartBtn").removeClass("custom");if(Drupal.settings.show_website_upsell_popup==1)
CHECKOUTWEBSITEBUNDLE.init();});var sel_domain;function website_upsell_check(){var types=new Array();if($(".website_upsell .add_to_cart_div>input[upsell_type='upsell_googlebundle']").is(":checked")){types=new Array('upsell_googlebundle');website_upsell_lightbox_disable_enable(types,'disable');}else if($(".website_upsell .add_to_cart_div>input[upsell_type='upsell_google']").is(":checked")){types=new Array('upsell_google','upsell_hosting','upsell_bundle','upsell_googlebundle');website_upsell_lightbox_disable_enable(types,'disable');}
else if($(".website_upsell .add_to_cart_div>input[upsell_type='upsell_bundle']").is(":checked")){types=new Array('upsell_bundle','upsell_google');website_upsell_lightbox_disable_enable(types,'disable');}else{types=new Array();website_upsell_lightbox_disable_enable(types,'enable');}}
function website_upsell_lightbox_disable_enable(not_type_arr,op){if(not_type_arr.length>0){var selected_upsells=new Array();$('.website_upsell .add_to_cart_div>input').each(function(){var type=$(this).attr('upsell_type');if($(this).is(":checked"))selected_upsells.push(type);});var google_upsell_status=$.inArray('upsell_google',selected_upsells);var bundle_upsell_status=$.inArray('upsell_bundle',selected_upsells);if(google_upsell_status>-1&&bundle_upsell_status>-1){var pos=$.inArray('upsell_hosting',not_type_arr);if(pos>-1)not_type_arr.splice(pos,1);}}
if(op=='disable'){$('.website_upsell .add_to_cart_div>input').each(function(){var type=$(this).attr('upsell_type');if(not_type_arr.length==0||$.inArray(type,not_type_arr)==-1){$(this).attr("disabled",true).attr("checked",false);}else{$(this).attr("disabled",false);}});}
if(op=='enable'){$('.website_upsell .add_to_cart_div>input').each(function(){var type=$(this).attr('upsell_type');if(not_type_arr.length==0||$.inArray(type,not_type_arr)==-1){$(this).attr("disabled",false);}});}}
var CHECKOUTWEBSITEBUNDLE={setSelectedDomain:function(selected_dom){sel_domain=selected_dom;},init:function(element){if(!Drupal.settings.custom_version)
fls_events_add('fired_website_checkout_saved_website');if($('.checkoutwebsitebundle_popup').length>0&&($('.overlay').length>0||$('#FLSPreviewOverlay').length)){$('#FLSPreviewOverlay, #FLS_PageLoadingOverlay').hide();$('.checkoutwebsitebundle_popup').addClass('initialized');CHECKOUTWEBSITEBUNDLE.placePopUp(element);if(Drupal.settings.custom_version){$(".checkoutwebsitebundle_popup").addClass("custom");$(".thankYouBox.checkoutwebsitebundle_popup.custom .upsells_new_check_logo.price_row .upsells_new_price").before(Drupal.settings.custom_text);$(".thankYouBox.checkoutwebsitebundle_popup.custom #addToCartBtn").appendTo(".thankYouBox.checkoutwebsitebundle_popup.custom .upsells_new_check_logo.price_row");$(".thankYouBox.checkoutwebsitebundle_popup.custom #addToCartBtn").addClass("custom");$("#addToCartBtn.custom").click(function(){lang="";if(Drupal.settings.lang!=''){lang=Drupal.settings.lang+"/";}
var fields={pid:463,reduce_flow:1,final_destination:(Drupal.settings.logged_in?"checkout":"websites/step4"),websites_domain_already_input:sel_domain,website_upsells:523};var fields_str='';for(var i in fields){fields_str+='<input type="hidden" name="'+i+'" value="'+fields[i]+'" />';}
$('body').append('<form id="checkoutwebsitebundle_form" style="display:none;" action="'+Drupal.settings.baseUrl+"/"+lang+'websites/domain" method="post">'+fields_str+'</form>');$('#checkoutwebsitebundle_form').submit();return false;});}
$("#addToCartBtn:not(.custom)").click(function(){console.log("addToCartBtn");oneChecked=0;checkedUpsells="";$('.website_upsell .add_to_cart_div input').each(function(){if($(this).is(":checked")){oneChecked=1;checkedUpsells=checkedUpsells+$(this).attr("id")+"|";}});lang="";if(Drupal.settings.lang!="")lang="/"+Drupal.settings.lang;if(oneChecked)
$.post(Drupal.settings.baseUrl+"/websites/prepareupsell",{site_id:Drupal.settings.site_id,upsell_ids:checkedUpsells},function response(data){if(data==1)
$('.website_upsell .add_to_cart_div input').each(function(){if($(this).is(":checked")){fls_events_add('ty_added_'+$(this).attr("id"));}});window.location=Drupal.settings.baseUrl+lang+"/checkout";});});$(".website_upsell .add_to_cart_div input[upsell_type='upsell_bundle'], .website_upsell .add_to_cart_div input[upsell_type='upsell_google'], .website_upsell .add_to_cart_div input[upsell_type='upsell_googlebundle']").click(function(){website_upsell_check();});$('.checkoutwebsitebundle_popup .close, .checkoutwebsitebundle_popup .no_thanks').click(function(e){if(Drupal.settings.custom_version){websites_domain_allow_submit=true;CHECKOUTWEBSITEBUNDLE.hidePopUp();element.submit();}else{e.preventDefault();CHECKOUTWEBSITEBUNDLE.hidePopUp();return false;}});$('html, body').animate({scrollTop:0},'fast');return false;}},placePopUp:function(element){var overlay=$('.overlay:first');var thankYouBox=$('.checkoutwebsitebundle_popup');$('.overlay, .checkoutwebsitebundle_popup').remove();var docH=$(document).height();var docW=$(document).width();overlay.css({"width":docW+"px","height":docH+"px"});thankYouBox.prependTo('body');overlay.prependTo('body');if($('#FLS_PageLoadingOverlay').length){$('#FLS_PageLoadingOverlay').show();$('.overlay').hide();}else{$('.overlay:first').show();}
thankYouBox.show();var bW=$('.checkoutwebsitebundle_popup').width();var bH=$('.checkoutwebsitebundle_popup').height();var wW=$(window).width();var wH=$(window).height();bW=wW/2-bW/2;bH=wH/2-bH/2;$('.checkoutwebsitebundle_popup').css({left:bW,top:bH>40?bH:40});setTimeout(function(){$('.thankYouBox.checkoutwebsitebundle_popup').css('visibility','visible')},1500);},hidePopUp:function(){$('.checkoutwebsitebundle_popup').hide();$(".checkoutwebsitebundle_popup .upsells_new_single").show();$('.overlay').hide();var types=new Array();website_upsell_lightbox_disable_enable(types,'enable');$('.website_upsell .add_to_cart_div>input').each(function(){$(this).attr('checked',false);})
return false;}};var LOGOWEBV2={logoweb_page_type:'other',init:function(element){if($('body').attr('class').indexOf('page-body-step2')>-1){LOGOWEBV2.logoweb_page_type='step2';}else if($('.inner_step3').length>0){LOGOWEBV2.logoweb_page_type='step3';}
$("#submit_mailbox").click(function(){fls_events_add('clicked_continue_from_logo_lightbox');});if(Drupal.settings.alreadyowndomv2_split_set){$(".alreadyowndomv2").show();fls_events_add('fired_free_dom_lightbox',1);}
fls_events_add('fired_dom_lightbox',1);fls_events_add('lightbox_'+LOGOWEBV2.logoweb_page_type+'dom_views');$(".websites_domain_search_button").click(function(){fls_events_add('last_searched_tld',$("#websites_domain_search_category").val());});fls_events_add('fire_onedomain_lb',Drupal.settings.fls_onedom_split_set);if(Drupal.settings.fls_onedom_split_set==1){$(".free_domain_info").insertAfter(".websites_domain_page .left");}
if(Drupal.settings.lbgooglebadge_split_set===true){$(".googleBadge").insertAfter(".websites_domain_page .left");$(".gfwork_partner").hide();$(".googleBadge").show();}
if($('.bcweb_popup').length>0&&($('.overlay').length>0||$('#FLSPreviewOverlay').length)){if($('body').hasClass('mobile_view')){Drupal.settings.old_metaviewport=$('#metaviewport').attr('content');console.log(Drupal.settings.old_metaviewport);$('#metaviewport').attr('content','width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0');$('.centerv2, .flsbottom').css('display','none');}
if($('.websites_domain_page .left img').attr('src')==""){if($('.websites_domain_page .left .descr').length==0)
$('.websites_domain_page .left').hide();else
$('.websites_domain_page .left .img').hide();}
if(Drupal.settings.logowebv2_ajax){logowebv2_ajax();}else{load_logowebsitev2();}
$('.domains_view_more_options a').click(function(event){event.preventDefault();var url=$(this).attr('rel');url+=$("#websites_domain_search_input").val()+'.'+$('#websites_domain_search_category').val();window.location=url;return false;});$('html, body').animate({scrollTop:0},'fast');$('.bcweb_popup .close').click(function(){fls_events_add('lightbox_'+LOGOWEBV2.logoweb_page_type+'dom_close');});$('.bcweb_popup .orangeButton_close').click(function(){fls_events_add('lightbox_'+LOGOWEBV2.logoweb_page_type+'dom_negativecta');});$('.bcweb_popup .close, .bcweb_popup .orangeButton_close').click(function(){if(typeof Drupal.settings.onedomv2_google_popup_show=='undefined'){fls_events_add('click_close_btn');}});$('.bcweb_popup .close, .bcweb_popup .orangeButton_close').click(function(){if(Drupal.settings.weebly_preview_v2_split_set){LOGOWEBV2.hidePopUp();$('#FLS_PageLoadingOverlay').remove();show_loaded_color_bc_suggestion_lightbox();return false;}
if(Drupal.settings.bc_logoweb_split_set||Drupal.settings.logowebpn_split_set||Drupal.settings.tlds_split_set){if(typeof(flash_promo_products_finish)=='function'){if(Drupal.settings.gaweb_popup!=undefined){LOGOWEBV2.hidePopUp();GAWEB.init();return false;}
else{if($('.right_domain_hide').length){fls_events_add('clicked_no_thanks_from_gaupsell_lightbox');if(Drupal.settings.autoadd_diy!=undefined&&Drupal.settings.autoadd_diy==1){$("#extra_google_apps").val(1);$("#extra_autoadd_diy").val(1);}else{$("#extra_google_apps").val(0);$("#extra_autoadd_diy").val(0);}
$("#websites_email_input").val('');submit_mailbox_on_click(true);return false;}else{flash_promo_products_finish();return true;}}}}
LOGOWEBV2.hidePopUp();if(Drupal.settings.gaweb_popup!=undefined){GAWEB.init();return false;}
else{if($('.right_domain_hide').length){fls_events_add('clicked_no_thanks_from_gaupsell_lightbox');$("#websites_email_input").val('');if(Drupal.settings.autoadd_diy!=undefined&&Drupal.settings.autoadd_diy==1){$("#extra_google_apps").val(1);$("#extra_autoadd_diy").val(1);}else{$("#extra_google_apps").val(0);$("#extra_autoadd_diy").val(0);}
submit_mailbox_on_click(true);return false;}else{$('.bcweb_popup').remove();return true;}}});}},changeWebsiteDomain:function(){if($("#websites_domain_search_input").val().trim().length==0)
$(".domains_view_more_options").hide();else $(".domains_view_more_options").show();},trackEvents:function(){if(!Drupal.settings.freedomain_split_set){fls_events_add('paid_dom_lightbox_logo_flow');}else fls_events_add('logo_web_init');$('.websites_domain_search_button').click(function(e){fls_events_add('logo_web_search');});},placePopUp:function(element){var overlay=$('.overlay:first');var thankYouBox=$('.bcweb_popup');$('.overlay, .logoweb_popup').remove();var docH=$(document).height();var docW=$(document).width();overlay.css({"width":docW+"px","height":docH+"px"});thankYouBox.prependTo('body');$('#TB_window').hide();if($('.TB_overlayBG').length==0){overlay.prependTo('body');$('.overlay:first').show();}else{$('.TB_overlayBG').addClass('overlay').removeClass('TB_overlayBG').attr('id','').show();}
thankYouBox.show();thankYouBox.addClass('thankYouBoxVisible');var bW=$('.bcweb_popup').width();var bH=$('.bcweb_popup').height();var wW=$(window).width();var wH=$(window).height();bW=wW/2-bW/2;bH=wH/2-bH/2;$('.bcweb_popup').css({left:bW,top:bH>40?bH:40});$('.thankYouBox.bcweb_popup').css('visibility','visible');},hidePopUp:function(){$('.bcweb_popup').hide().removeClass('thankYouBoxVisible');if(Drupal.settings.bc_suggestions_html5_start_loaded==undefined||Drupal.settings.bc_suggestions_html5_completed_loaded!=undefined)$('.overlay').hide();if(typeof Drupal.settings.old_metaviewport!='undefined'){$('#metaviewport').attr('content',Drupal.settings.old_metaviewport);$('.centerv2').css('display','');}
return false;}}
function logowebv2_ajax(){$.ajax({type:"POST",url:Drupal.settings.logowebv2_ajax,data:"",cache:false,dataType:"json",success:function(response)
{if(typeof response['website_popup']!='undefined'){if(response['website_popup']&&$('.logoweb_popup').length){$('.logoweb_popup .logoweb_images').html($(response['website_popup']).find('.logoweb_images'));}}
if(typeof response['website_popup_img']!='undefined'){$('.websites_domain_page .left img').attr('src',response['website_popup_img']);$('.thankYouBox.weeblypreview_popup .popup_content').css('background-image','url('+response['weebly_preview_popup_img']+')');$('.website_logo_id').val(response['website_logo_id']);$('#w_logo_id').val(response['website_logo_id']);Drupal.settings.onelinesearch=response['website_onelinesearch'];$('#websites_domain_search_input').val(response['website_onelinesearch']);$('#websites_domain_search_input_hidden').val(response['website_onelinesearch']);if(typeof response['website_twolinesearch']!='undefined'){Drupal.settings.twolinesearch=response['website_twolinesearch'];}
if(typeof response['website_multisearch']!='undefined')
Drupal.settings.multisearch=response['website_multisearch'];}
load_logowebsitev2();}});}
function load_logowebsitev2(){LOGOWEBV2.trackEvents();$('#FLSPreviewOverlay, #FLS_PageLoadingOverlay').hide();$('.bcweb_popup').addClass('initialized');LOGOWEBV2.placePopUp();websites_domain_init();websites_search_init();if($("#websites_domain_search_input").val().trim().length==0)$(".domains_view_more_options").hide();$('#websites_domain_search_input').keyup(LOGOWEBV2.changeWebsiteDomain);if($('.websites_domain_page .left img').attr('src')!=""){if($('.websites_domain_page .left .descr').length==0)
$('.websites_domain_page .left').show();else
$('.websites_domain_page .left .img').show();}};$(document).ready(function(){if((typeof Drupal.settings.difm_logos_mobile_split_set!='undefined'&&Drupal.settings.difm_logos_mobile_split_set)||(typeof Drupal.settings.deluxeaffiliatesv5_split_set!='undefined'&&Drupal.settings.deluxeaffiliatesv5_split_set)){if(typeof Drupal.settings.actPage!='undefined'&&Drupal.settings.actPage==2)
DELUXEAFFILIATES.init();}else if(typeof Drupal.settings.actPage!='undefined'&&Drupal.settings.actPage==5)
DELUXEAFFILIATES.init();$('.deluxeStartNow').click(function(e){if($(this).parent("div").attr("class").indexOf("difm_logos_split")!==-1){fls_events_add('show_popup_page5');}
DELUXEAFFILIATES.init();});});var DELUXEAFFILIATES={init:function(element){if($('.deluxeaffiliates_popup').length>0&&($('.overlay').length>0||$('#FLSPreviewOverlay').length)){fls_events_add('hit_DIFM_logoL_lightbox');$('#FLSPreviewOverlay, #FLS_PageLoadingOverlay').hide();$('html, body').animate({scrollTop:0},'fast');$('.deluxeaffiliates_popup').addClass('initialized');DELUXEAFFILIATES.placePopUp(element);$(".deluxeaffiliates_popup .close").click(function(){fls_events_add('deluxeaffiliate_lb_close');DELUXEAFFILIATES.hidePopUp();});$(".deluxeaffiliates_popup .learnMoreBtn").click(function(e){e.preventDefault();fls_events_add('deluxeaffiliate_lb_learn_more');window.location=$(this).attr('href');return false;});return false;}},placePopUp:function(element){var overlay=$('.overlay:first');var thankYouBox=$('.deluxeaffiliates_popup');$('.overlay, .deluxeaffiliates_popup').remove();var docH=$(document).height();var docW=$(document).width();overlay.css({"width":docW+"px","height":docH+"px"});thankYouBox.prependTo('body');overlay.prependTo('body');if($('#FLS_PageLoadingOverlay').length){$('#FLS_PageLoadingOverlay').show();$('.overlay').hide();}else{$('.overlay').show();}
thankYouBox.show();var bW=$('.deluxeaffiliates_popup').width();var bH=$('.deluxeaffiliates_popup').height();var wW=$(window).width();var wH=$(window).height();bW=wW/2-bW/2;bH=wH/2-bH/2;$('.activatedomain_popup').css({left:bW,top:bH>40?bH:40});setTimeout(function(){$('.thankYouBox.deluxeaffiliates_popup').css('visibility','visible')},1500);},hidePopUp:function(){$('.deluxeaffiliates_popup').hide();$('.overlay').hide();return false;}};var swfobject=function(){var D="undefined",r="object",S="Shockwave Flash",W="ShockwaveFlash.ShockwaveFlash",q="application/x-shockwave-flash",R="SWFObjectExprInst",x="onreadystatechange",O=window,j=document,t=navigator,T=false,U=[h],o=[],N=[],I=[],l,Q,E,B,J=false,a=false,n,G,m=true,M=function(){var aa=typeof j.getElementById!=D&&typeof j.getElementsByTagName!=D&&typeof j.createElement!=D,ah=t.userAgent.toLowerCase(),Y=t.platform.toLowerCase(),ae=Y?/win/.test(Y):/win/.test(ah),ac=Y?/mac/.test(Y):/mac/.test(ah),af=/webkit/.test(ah)?parseFloat(ah.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,X=!+"\v1",ag=[0,0,0],ab=null;if(typeof t.plugins!=D&&typeof t.plugins[S]==r){ab=t.plugins[S].description;if(ab&&!(typeof t.mimeTypes!=D&&t.mimeTypes[q]&&!t.mimeTypes[q].enabledPlugin)){T=true;X=false;ab=ab.replace(/^.*\s+(\S+\s+\S+$)/,"$1");ag[0]=parseInt(ab.replace(/^(.*)\..*$/,"$1"),10);ag[1]=parseInt(ab.replace(/^.*\.(.*)\s.*$/,"$1"),10);ag[2]=/[a-zA-Z]/.test(ab)?parseInt(ab.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}}else{if(typeof O.ActiveXObject!=D){try{var ad=new ActiveXObject(W);if(ad){ab=ad.GetVariable("$version");if(ab){X=true;ab=ab.split(" ")[1].split(",");ag=[parseInt(ab[0],10),parseInt(ab[1],10),parseInt(ab[2],10)]}}}catch(Z){}}}return{w3:aa,pv:ag,wk:af,ie:X,win:ae,mac:ac}}(),k=function(){if(!M.w3){return}if((typeof j.readyState!=D&&j.readyState=="complete")||(typeof j.readyState==D&&(j.getElementsByTagName("body")[0]||j.body))){f()}if(!J){if(typeof j.addEventListener!=D){j.addEventListener("DOMContentLoaded",f,false)}if(M.ie&&M.win){j.attachEvent(x,function(){if(j.readyState=="complete"){j.detachEvent(x,arguments.callee);f()}});if(O==top){(function(){if(J){return}try{j.documentElement.doScroll("left")}catch(X){setTimeout(arguments.callee,0);return}f()})()}}if(M.wk){(function(){if(J){return}if(!/loaded|complete/.test(j.readyState)){setTimeout(arguments.callee,0);return}f()})()}s(f)}}();function f(){if(J){return}try{var Z=j.getElementsByTagName("body")[0].appendChild(C("span"));Z.parentNode.removeChild(Z)}catch(aa){return}J=true;var X=U.length;for(var Y=0;Y<X;Y++){U[Y]()}}function K(X){if(J){X()}else{U[U.length]=X}}function s(Y){if(typeof O.addEventListener!=D){O.addEventListener("load",Y,false)}else{if(typeof j.addEventListener!=D){j.addEventListener("load",Y,false)}else{if(typeof O.attachEvent!=D){i(O,"onload",Y)}else{if(typeof O.onload=="function"){var X=O.onload;O.onload=function(){X();Y()}}else{O.onload=Y}}}}}function h(){if(T){V()}else{H()}}function V(){var X=j.getElementsByTagName("body")[0];var aa=C(r);aa.setAttribute("type",q);var Z=X.appendChild(aa);if(Z){var Y=0;(function(){if(typeof Z.GetVariable!=D){var ab=Z.GetVariable("$version");if(ab){ab=ab.split(" ")[1].split(",");M.pv=[parseInt(ab[0],10),parseInt(ab[1],10),parseInt(ab[2],10)]}}else{if(Y<10){Y++;setTimeout(arguments.callee,10);return}}X.removeChild(aa);Z=null;H()})()}else{H()}}function H(){var ag=o.length;if(ag>0){for(var af=0;af<ag;af++){var Y=o[af].id;var ab=o[af].callbackFn;var aa={success:false,id:Y};if(M.pv[0]>0){var ae=c(Y);if(ae){if(F(o[af].swfVersion)&&!(M.wk&&M.wk<312)){w(Y,true);if(ab){aa.success=true;aa.ref=z(Y);ab(aa)}}else{if(o[af].expressInstall&&A()){var ai={};ai.data=o[af].expressInstall;ai.width=ae.getAttribute("width")||"0";ai.height=ae.getAttribute("height")||"0";if(ae.getAttribute("class")){ai.styleclass=ae.getAttribute("class")}if(ae.getAttribute("align")){ai.align=ae.getAttribute("align")}var ah={};var X=ae.getElementsByTagName("param");var ac=X.length;for(var ad=0;ad<ac;ad++){if(X[ad].getAttribute("name").toLowerCase()!="movie"){ah[X[ad].getAttribute("name")]=X[ad].getAttribute("value")}}P(ai,ah,Y,ab)}else{p(ae);if(ab){ab(aa)}}}}}else{w(Y,true);if(ab){var Z=z(Y);if(Z&&typeof Z.SetVariable!=D){aa.success=true;aa.ref=Z}ab(aa)}}}}}function z(aa){var X=null;var Y=c(aa);if(Y&&Y.nodeName=="OBJECT"){if(typeof Y.SetVariable!=D){X=Y}else{var Z=Y.getElementsByTagName(r)[0];if(Z){X=Z}}}return X}function A(){return!a&&F("6.0.65")&&(M.win||M.mac)&&!(M.wk&&M.wk<312)}function P(aa,ab,X,Z){a=true;E=Z||null;B={success:false,id:X};var ae=c(X);if(ae){if(ae.nodeName=="OBJECT"){l=g(ae);Q=null}else{l=ae;Q=X}aa.id=R;if(typeof aa.width==D||(!/%$/.test(aa.width)&&parseInt(aa.width,10)<310)){aa.width="310"}if(typeof aa.height==D||(!/%$/.test(aa.height)&&parseInt(aa.height,10)<137)){aa.height="137"}j.title=j.title.slice(0,47)+" - Flash Player Installation";var ad=M.ie&&M.win?"ActiveX":"PlugIn",ac="MMredirectURL="+O.location.toString().replace(/&/g,"%26")+"&MMplayerType="+ad+"&MMdoctitle="+j.title;if(typeof ab.flashvars!=D){ab.flashvars+="&"+ac}else{ab.flashvars=ac}if(M.ie&&M.win&&ae.readyState!=4){var Y=C("div");X+="SWFObjectNew";Y.setAttribute("id",X);ae.parentNode.insertBefore(Y,ae);ae.style.display="none";(function(){if(ae.readyState==4){ae.parentNode.removeChild(ae)}else{setTimeout(arguments.callee,10)}})()}u(aa,ab,X)}}function p(Y){if(M.ie&&M.win&&Y.readyState!=4){var X=C("div");Y.parentNode.insertBefore(X,Y);X.parentNode.replaceChild(g(Y),X);Y.style.display="none";(function(){if(Y.readyState==4){Y.parentNode.removeChild(Y)}else{setTimeout(arguments.callee,10)}})()}else{Y.parentNode.replaceChild(g(Y),Y)}}function g(ab){var aa=C("div");if(M.win&&M.ie){aa.innerHTML=ab.innerHTML}else{var Y=ab.getElementsByTagName(r)[0];if(Y){var ad=Y.childNodes;if(ad){var X=ad.length;for(var Z=0;Z<X;Z++){if(!(ad[Z].nodeType==1&&ad[Z].nodeName=="PARAM")&&!(ad[Z].nodeType==8)){aa.appendChild(ad[Z].cloneNode(true))}}}}}return aa}function u(ai,ag,Y){var X,aa=c(Y);if(M.wk&&M.wk<312){return X}if(aa){if(typeof ai.id==D){ai.id=Y}if(M.ie&&M.win){var ah="";for(var ae in ai){if(ai[ae]!=Object.prototype[ae]){if(ae.toLowerCase()=="data"){ag.movie=ai[ae]}else{if(ae.toLowerCase()=="styleclass"){ah+=' class="'+ai[ae]+'"'}else{if(ae.toLowerCase()!="classid"){ah+=" "+ae+'="'+ai[ae]+'"'}}}}}var af="";for(var ad in ag){if(ag[ad]!=Object.prototype[ad]){af+='<param name="'+ad+'" value="'+ag[ad]+'" />'}}aa.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+ah+">"+af+"</object>";N[N.length]=ai.id;X=c(ai.id)}else{var Z=C(r);Z.setAttribute("type",q);for(var ac in ai){if(ai[ac]!=Object.prototype[ac]){if(ac.toLowerCase()=="styleclass"){Z.setAttribute("class",ai[ac])}else{if(ac.toLowerCase()!="classid"){Z.setAttribute(ac,ai[ac])}}}}for(var ab in ag){if(ag[ab]!=Object.prototype[ab]&&ab.toLowerCase()!="movie"){e(Z,ab,ag[ab])}}aa.parentNode.replaceChild(Z,aa);X=Z}}return X}function e(Z,X,Y){var aa=C("param");aa.setAttribute("name",X);aa.setAttribute("value",Y);Z.appendChild(aa)}function y(Y){var X=c(Y);if(X&&X.nodeName=="OBJECT"){if(M.ie&&M.win){X.style.display="none";(function(){if(X.readyState==4){b(Y)}else{setTimeout(arguments.callee,10)}})()}else{X.parentNode.removeChild(X)}}}function b(Z){var Y=c(Z);if(Y){for(var X in Y){if(typeof Y[X]=="function"){Y[X]=null}}Y.parentNode.removeChild(Y)}}function c(Z){var X=null;try{X=j.getElementById(Z)}catch(Y){}return X}function C(X){return j.createElement(X)}function i(Z,X,Y){Z.attachEvent(X,Y);I[I.length]=[Z,X,Y]}function F(Z){var Y=M.pv,X=Z.split(".");X[0]=parseInt(X[0],10);X[1]=parseInt(X[1],10)||0;X[2]=parseInt(X[2],10)||0;return(Y[0]>X[0]||(Y[0]==X[0]&&Y[1]>X[1])||(Y[0]==X[0]&&Y[1]==X[1]&&Y[2]>=X[2]))?true:false}function v(ac,Y,ad,ab){if(M.ie&&M.mac){return}var aa=j.getElementsByTagName("head")[0];if(!aa){return}var X=(ad&&typeof ad=="string")?ad:"screen";if(ab){n=null;G=null}if(!n||G!=X){var Z=C("style");Z.setAttribute("type","text/css");Z.setAttribute("media",X);n=aa.appendChild(Z);if(M.ie&&M.win&&typeof j.styleSheets!=D&&j.styleSheets.length>0){n=j.styleSheets[j.styleSheets.length-1]}G=X}if(M.ie&&M.win){if(n&&typeof n.addRule==r){n.addRule(ac,Y)}}else{if(n&&typeof j.createTextNode!=D){n.appendChild(j.createTextNode(ac+" {"+Y+"}"))}}}function w(Z,X){if(!m){return}var Y=X?"visible":"hidden";if(J&&c(Z)){c(Z).style.visibility=Y}else{v("#"+Z,"visibility:"+Y)}}function L(Y){var Z=/[\\\"<>\.;]/;var X=Z.exec(Y)!=null;return X&&typeof encodeURIComponent!=D?encodeURIComponent(Y):Y}var d=function(){if(M.ie&&M.win){window.attachEvent("onunload",function(){var ac=I.length;for(var ab=0;ab<ac;ab++){I[ab][0].detachEvent(I[ab][1],I[ab][2])}var Z=N.length;for(var aa=0;aa<Z;aa++){y(N[aa])}for(var Y in M){M[Y]=null}M=null;for(var X in swfobject){swfobject[X]=null}swfobject=null})}}();return{registerObject:function(ab,X,aa,Z){if(M.w3&&ab&&X){var Y={};Y.id=ab;Y.swfVersion=X;Y.expressInstall=aa;Y.callbackFn=Z;o[o.length]=Y;w(ab,false)}else{if(Z){Z({success:false,id:ab})}}},getObjectById:function(X){if(M.w3){return z(X)}},embedSWF:function(ab,ah,ae,ag,Y,aa,Z,ad,af,ac){var X={success:false,id:ah};if(M.w3&&!(M.wk&&M.wk<312)&&ab&&ah&&ae&&ag&&Y){w(ah,false);K(function(){ae+="";ag+="";var aj={};if(af&&typeof af===r){for(var al in af){aj[al]=af[al]}}aj.data=ab;aj.width=ae;aj.height=ag;var am={};if(ad&&typeof ad===r){for(var ak in ad){am[ak]=ad[ak]}}if(Z&&typeof Z===r){for(var ai in Z){if(typeof am.flashvars!=D){am.flashvars+="&"+ai+"="+Z[ai]}else{am.flashvars=ai+"="+Z[ai]}}}if(F(Y)){var an=u(aj,am,ah);if(aj.id==ah){w(ah,true)}X.success=true;X.ref=an}else{if(aa&&A()){aj.data=aa;P(aj,am,ah,ac);return}else{w(ah,true)}}if(ac){ac(X)}})}else{if(ac){ac(X)}}},switchOffAutoHideShow:function(){m=false},ua:M,getFlashPlayerVersion:function(){return{major:M.pv[0],minor:M.pv[1],release:M.pv[2]}},hasFlashPlayerVersion:F,createSWF:function(Z,Y,X){if(M.w3){return u(Z,Y,X)}else{return undefined}},showExpressInstall:function(Z,aa,X,Y){if(M.w3&&A()){P(Z,aa,X,Y)}},removeSWF:function(X){if(M.w3){y(X)}},createCSS:function(aa,Z,Y,X){if(M.w3){v(aa,Z,Y,X)}},addDomLoadEvent:K,addLoadEvent:s,getQueryParamValue:function(aa){var Z=j.location.search||j.location.hash;if(Z){if(/\?/.test(Z)){Z=Z.split("?")[1]}if(aa==null){return L(Z)}var Y=Z.split("&");for(var X=0;X<Y.length;X++){if(Y[X].substring(0,Y[X].indexOf("="))==aa){return L(Y[X].substring((Y[X].indexOf("=")+1)))}}}return""},expressInstallCallback:function(){if(a){var X=c(R);if(X&&l){X.parentNode.replaceChild(l,X);if(Q){w(Q,true);if(M.ie&&M.win){l.style.display="block"}}if(E){E(B)}}a=false}}}}();;;var WEEBLYPREVIEW={init:function(website,element){$("#website_preview_domain").attr("value",website);var goto_page='';if(typeof(Drupal.settings.notice_path!='undefined'))
goto_page=Drupal.settings.notice_path;else
goto_page=Drupal.settings.notice_url;$("#page_to_go").attr("value",goto_page);$('.FLS-Overlay-Message').hide();if($('.weeblypreview_popup').length>0&&($('.overlay').length>0||$('#FLSPreviewOverlay').length)){$('#FLSPreviewOverlay, #FLS_PageLoadingOverlay').hide();$('html, body').animate({scrollTop:0},'fast');$('.weeblypreview_popup').addClass('initialized');if(typeof Drupal.settings.weebly_preview_popup_img!='undefined'){$('.thankYouBox.weeblypreview_popup .popup_content').css('background-image','url('+Drupal.settings.weebly_preview_popup_img+')');}
WEEBLYPREVIEW.placePopUp(element);$(".weeblypreview_popup .close").click(function(){console.log('Close weebly');if(Drupal.settings.weebly_preview_v2_split_set){if(Drupal.settings.workflow=="business-cards")
FLSProductEditor.Init('FreelogoEditorCanvas',bc_data);else if(Drupal.settings.logo_id)
show_loaded_color_bc_suggestion_lightbox();}
if(typeof bc_data!='undefined'&&(!Drupal.settings.weebly_preview_v2_split_set||!Drupal.settings.logo_id)){window.location.href=Drupal.settings.notice_url;return false;}
if($(".website_preview_content").css("display")!=='none'){var goto_page=$("#page_to_go").val();}
if(!goto_page||goto_page=="#")
{goto_page=Drupal.settings.notice_path;}
lang="";if(Drupal.settings.lang!=''){lang=Drupal.settings.lang+"/";}
var fields={website_mailbox:"1",logo_websitesv2:"1",pid:'',reduce_flow:"",final_destination:goto_page,website_searched:website,websites_domain_suggestion:website};if(Drupal.settings.weebly_preview_v2_split_set){WEEBLYPREVIEW.hidePopUp();BUNDLEEMAIL.hidePopUp();Drupal.settings.websites_add_to_cart_status=0;show_loaded_color_bc_suggestion_lightbox();fields['json']=1;$.post(Drupal.settings.baseUrl+'/'+lang+'websites/domain',fields).done(function(data){Drupal.settings.websites_add_to_cart_status=1;});return false;}
var fields_str='';for(var i in fields){fields_str+='<input type="hidden" name="'+i+'" value="'+fields[i]+'" />';}
$('body').append('<form id="weeblypreview_form" style="display:none;" action="'+Drupal.settings.baseUrl+"/"+lang+'websites/domain" method="post">'+fields_str+'</form>');$('#weeblypreview_form').submit();return false;});$(".weeblypreview_popup .preview").click(function(e){if(typeof bc_data!='undefined'){fls_events_add('click_preview_website_btn_bc_flow');}else{fls_events_add('click_preview_website_btn_logo_flow');}
var goto_page='';if(typeof(Drupal.settings.notice_path!='undefined'))
goto_page=Drupal.settings.notice_path;else
goto_page=Drupal.settings.notice_url;$(".weeblypreview_popup").addClass("preview");$(".marketing_content").hide();$(".website_preview_content").show();$(".thankYouBox.weeblypreview_popup .bar-message").show();$(".website_preview_content iframe").attr("src",$(".website_preview_content iframe").attr("data")+"&dom="+website+"&goto="+encodeURIComponent(goto_page));$("body").css("overflow","hidden");$(".thankYouBox.bcweb_popup.logowebv2.initialized").css("top","0px !important");$(".thankYouBox.bcweb_popup.logowebv2.initialized").css("width","100%");$(".thankYouBox.bcweb_popup.logowebv2.initialized").css("height","100%");$(".thankYouBox.bcweb_popup.logowebv2.initialized").css("max-width","100%");$("body").css("overflow","hidden");fls_events_add('saw_weebly_preview');return false;});return false;}},placePopUp:function(element){var overlay=$('.overlay:first');var thankYouBox=$('.weeblypreview_popup');$('.overlay, .weeblypreview_popup').remove();var docH=$(document).height();var docW=$(document).width();overlay.css({"width":docW+"px","height":docH+"px"});thankYouBox.prependTo('body');overlay.prependTo('body');if($('#FLS_PageLoadingOverlay').length){$('#FLS_PageLoadingOverlay').show();$('.overlay').hide();}else{$('.overlay').show();}
thankYouBox.show();thankYouBox.addClass('thankYouBoxVisible');var bW=$('.weeblypreview_popup').width();var bH=$('.weeblypreview_popup').height();var wW=$(window).width();var wH=$(window).height();bW=wW/2-bW/2;bH=wH/2-bH/2;$('.activatedomain_popup').css({left:bW,top:bH>40?bH:40});setTimeout(function(){$('.thankYouBox.weeblypreview_popup').css('visibility','visible')},1500);},hidePopUp:function(){$('.weeblypreview_popup').hide().removeClass('thankYouBoxVisible');if(Drupal.settings.bc_suggestions_html5_start_loaded==undefined||Drupal.settings.bc_suggestions_html5_completed_loaded!=undefined)$('.overlay').hide();return false;}};jQuery.ui||(function(c){var i=c.fn.remove,d=c.browser.mozilla&&(parseFloat(c.browser.version)<1.9);c.ui={version:"1.7.2",plugin:{add:function(k,l,n){var m=c.ui[k].prototype;for(var j in n){m.plugins[j]=m.plugins[j]||[];m.plugins[j].push([l,n[j]])}},call:function(j,l,k){var n=j.plugins[l];if(!n||!j.element[0].parentNode){return}for(var m=0;m<n.length;m++){if(j.options[n[m][0]]){n[m][1].apply(j.element,k)}}}},contains:function(k,j){return document.compareDocumentPosition?k.compareDocumentPosition(j)&16:k!==j&&k.contains(j)},hasScroll:function(m,k){if(c(m).css("overflow")=="hidden"){return false}var j=(k&&k=="left")?"scrollLeft":"scrollTop",l=false;if(m[j]>0){return true}m[j]=1;l=(m[j]>0);m[j]=0;return l},isOverAxis:function(k,j,l){return(k>j)&&(k<(j+l))},isOver:function(o,k,n,m,j,l){return c.ui.isOverAxis(o,n,j)&&c.ui.isOverAxis(k,m,l)},keyCode:{BACKSPACE:8,CAPS_LOCK:20,COMMA:188,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38}};if(d){var f=c.attr,e=c.fn.removeAttr,h="http://www.w3.org/2005/07/aaa",a=/^aria-/,b=/^wairole:/;c.attr=function(k,j,l){var m=l!==undefined;return(j=="role"?(m?f.call(this,k,j,"wairole:"+l):(f.apply(this,arguments)||"").replace(b,"")):(a.test(j)?(m?k.setAttributeNS(h,j.replace(a,"aaa:"),l):f.call(this,k,j.replace(a,"aaa:"))):f.apply(this,arguments)))};c.fn.removeAttr=function(j){return(a.test(j)?this.each(function(){this.removeAttributeNS(h,j.replace(a,""))}):e.call(this,j))}}c.fn.extend({remove:function(){c("*",this).add(this).each(function(){c(this).triggerHandler("remove")});return i.apply(this,arguments)},enableSelection:function(){return this.attr("unselectable","off").css("MozUserSelect","").unbind("selectstart.ui")},disableSelection:function(){return this.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return false})},scrollParent:function(){var j;if((c.browser.msie&&(/(static|relative)/).test(this.css("position")))||(/absolute/).test(this.css("position"))){j=this.parents().filter(function(){return(/(relative|absolute|fixed)/).test(c.curCSS(this,"position",1))&&(/(auto|scroll)/).test(c.curCSS(this,"overflow",1)+c.curCSS(this,"overflow-y",1)+c.curCSS(this,"overflow-x",1))}).eq(0)}else{j=this.parents().filter(function(){return(/(auto|scroll)/).test(c.curCSS(this,"overflow",1)+c.curCSS(this,"overflow-y",1)+c.curCSS(this,"overflow-x",1))}).eq(0)}return(/fixed/).test(this.css("position"))||!j.length?c(document):j}});c.extend(c.expr[":"],{data:function(l,k,j){return!!c.data(l,j[3])},focusable:function(k){var l=k.nodeName.toLowerCase(),j=c.attr(k,"tabindex");return(/input|select|textarea|button|object/.test(l)?!k.disabled:"a"==l||"area"==l?k.href||!isNaN(j):!isNaN(j))&&!c(k)["area"==l?"parents":"closest"](":hidden").length},tabbable:function(k){var j=c.attr(k,"tabindex");return(isNaN(j)||j>=0)&&c(k).is(":focusable")}});function g(m,n,o,l){function k(q){var p=c[m][n][q]||[];return(typeof p=="string"?p.split(/,?\s+/):p)}var j=k("getter");if(l.length==1&&typeof l[0]=="string"){j=j.concat(k("getterSetter"))}return(c.inArray(o,j)!=-1)}c.widget=function(k,j){var l=k.split(".")[0];k=k.split(".")[1];c.fn[k]=function(p){var n=(typeof p=="string"),o=Array.prototype.slice.call(arguments,1);if(n&&p.substring(0,1)=="_"){return this}if(n&&g(l,k,p,o)){var m=c.data(this[0],k);return(m?m[p].apply(m,o):undefined)}return this.each(function(){var q=c.data(this,k);(!q&&!n&&c.data(this,k,new c[l][k](this,p))._init());(q&&n&&c.isFunction(q[p])&&q[p].apply(q,o))})};c[l]=c[l]||{};c[l][k]=function(o,n){var m=this;this.namespace=l;this.widgetName=k;this.widgetEventPrefix=c[l][k].eventPrefix||k;this.widgetBaseClass=l+"-"+k;this.options=c.extend({},c.widget.defaults,c[l][k].defaults,c.metadata&&c.metadata.get(o)[k],n);this.element=c(o).bind("setData."+k,function(q,p,r){if(q.target==o){return m._setData(p,r)}}).bind("getData."+k,function(q,p){if(q.target==o){return m._getData(p)}}).bind("remove",function(){return m.destroy()})};c[l][k].prototype=c.extend({},c.widget.prototype,j);c[l][k].getterSetter="option"};c.widget.prototype={_init:function(){},destroy:function(){this.element.removeData(this.widgetName).removeClass(this.widgetBaseClass+"-disabled "+this.namespace+"-state-disabled").removeAttr("aria-disabled")},option:function(l,m){var k=l,j=this;if(typeof l=="string"){if(m===undefined){return this._getData(l)}k={};k[l]=m}c.each(k,function(n,o){j._setData(n,o)})},_getData:function(j){return this.options[j]},_setData:function(j,k){this.options[j]=k;if(j=="disabled"){this.element[k?"addClass":"removeClass"](this.widgetBaseClass+"-disabled "+this.namespace+"-state-disabled").attr("aria-disabled",k)}},enable:function(){this._setData("disabled",false)},disable:function(){this._setData("disabled",true)},_trigger:function(l,m,n){var p=this.options[l],j=(l==this.widgetEventPrefix?l:this.widgetEventPrefix+l);m=c.Event(m);m.type=j;if(m.originalEvent){for(var k=c.event.props.length,o;k;){o=c.event.props[--k];m[o]=m.originalEvent[o]}}this.element.trigger(m,n);return!(c.isFunction(p)&&p.call(this.element[0],m,n)===false||m.isDefaultPrevented())}};c.widget.defaults={disabled:false};c.ui.mouse={_mouseInit:function(){var j=this;this.element.bind("mousedown."+this.widgetName,function(k){return j._mouseDown(k)}).bind("click."+this.widgetName,function(k){if(j._preventClickEvent){j._preventClickEvent=false;k.stopImmediatePropagation();return false}});if(c.browser.msie){this._mouseUnselectable=this.element.attr("unselectable");this.element.attr("unselectable","on")}this.started=false},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);(c.browser.msie&&this.element.attr("unselectable",this._mouseUnselectable))},_mouseDown:function(l){l.originalEvent=l.originalEvent||{};if(l.originalEvent.mouseHandled){return}(this._mouseStarted&&this._mouseUp(l));this._mouseDownEvent=l;var k=this,m=(l.which==1),j=(typeof this.options.cancel=="string"?c(l.target).parents().add(l.target).filter(this.options.cancel).length:false);if(!m||j||!this._mouseCapture(l)){return true}this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet){this._mouseDelayTimer=setTimeout(function(){k.mouseDelayMet=true},this.options.delay)}if(this._mouseDistanceMet(l)&&this._mouseDelayMet(l)){this._mouseStarted=(this._mouseStart(l)!==false);if(!this._mouseStarted){l.preventDefault();return true}}this._mouseMoveDelegate=function(n){return k._mouseMove(n)};this._mouseUpDelegate=function(n){return k._mouseUp(n)};c(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);(c.browser.safari||l.preventDefault());l.originalEvent.mouseHandled=true;return true},_mouseMove:function(j){if(c.browser.msie&&!j.button){return this._mouseUp(j)}if(this._mouseStarted){this._mouseDrag(j);return j.preventDefault()}if(this._mouseDistanceMet(j)&&this._mouseDelayMet(j)){this._mouseStarted=(this._mouseStart(this._mouseDownEvent,j)!==false);(this._mouseStarted?this._mouseDrag(j):this._mouseUp(j))}return!this._mouseStarted},_mouseUp:function(j){c(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;this._preventClickEvent=(j.target==this._mouseDownEvent.target);this._mouseStop(j)}return false},_mouseDistanceMet:function(j){return(Math.max(Math.abs(this._mouseDownEvent.pageX-j.pageX),Math.abs(this._mouseDownEvent.pageY-j.pageY))>=this.options.distance)},_mouseDelayMet:function(j){return this.mouseDelayMet},_mouseStart:function(j){},_mouseDrag:function(j){},_mouseStop:function(j){},_mouseCapture:function(j){return true}};c.ui.mouse.defaults={cancel:null,distance:1,delay:0}})(jQuery);;(function(a){a.widget("ui.draggable",a.extend({},a.ui.mouse,{_init:function(){if(this.options.helper=="original"&&!(/^(?:r|a|f)/).test(this.element.css("position"))){this.element[0].style.position="relative"}(this.options.addClasses&&this.element.addClass("ui-draggable"));(this.options.disabled&&this.element.addClass("ui-draggable-disabled"));this._mouseInit()},destroy:function(){if(!this.element.data("draggable")){return}this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._mouseDestroy()},_mouseCapture:function(b){var c=this.options;if(this.helper||c.disabled||a(b.target).is(".ui-resizable-handle")){return false}this.handle=this._getHandle(b);if(!this.handle){return false}return true},_mouseStart:function(b){var c=this.options;this.helper=this._createHelper(b);this._cacheHelperProportions();if(a.ui.ddmanager){a.ui.ddmanager.current=this}this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offset=this.element.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this._generatePosition(b);this.originalPageX=b.pageX;this.originalPageY=b.pageY;if(c.cursorAt){this._adjustOffsetFromHelper(c.cursorAt)}if(c.containment){this._setContainment()}this._trigger("start",b);this._cacheHelperProportions();if(a.ui.ddmanager&&!c.dropBehaviour){a.ui.ddmanager.prepareOffsets(this,b)}this.helper.addClass("ui-draggable-dragging");this._mouseDrag(b,true);return true},_mouseDrag:function(b,d){this.position=this._generatePosition(b);this.positionAbs=this._convertPositionTo("absolute");if(!d){var c=this._uiHash();this._trigger("drag",b,c);this.position=c.position}if(!this.options.axis||this.options.axis!="y"){this.helper[0].style.left=this.position.left+"px"}if(!this.options.axis||this.options.axis!="x"){this.helper[0].style.top=this.position.top+"px"}if(a.ui.ddmanager){a.ui.ddmanager.drag(this,b)}return false},_mouseStop:function(c){var d=false;if(a.ui.ddmanager&&!this.options.dropBehaviour){d=a.ui.ddmanager.drop(this,c)}if(this.dropped){d=this.dropped;this.dropped=false}if((this.options.revert=="invalid"&&!d)||(this.options.revert=="valid"&&d)||this.options.revert===true||(a.isFunction(this.options.revert)&&this.options.revert.call(this.element,d))){var b=this;a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){b._trigger("stop",c);b._clear()})}else{this._trigger("stop",c);this._clear()}return false},_getHandle:function(b){var c=!this.options.handle||!a(this.options.handle,this.element).length?true:false;a(this.options.handle,this.element).find("*").andSelf().each(function(){if(this==b.target){c=true}});return c},_createHelper:function(c){var d=this.options;var b=a.isFunction(d.helper)?a(d.helper.apply(this.element[0],[c])):(d.helper=="clone"?this.element.clone():this.element);if(!b.parents("body").length){b.appendTo((d.appendTo=="parent"?this.element[0].parentNode:d.appendTo))}if(b[0]!=this.element[0]&&!(/(fixed|absolute)/).test(b.css("position"))){b.css("position","absolute")}return b},_adjustOffsetFromHelper:function(b){if(b.left!=undefined){this.offset.click.left=b.left+this.margins.left}if(b.right!=undefined){this.offset.click.left=this.helperProportions.width-b.right+this.margins.left}if(b.top!=undefined){this.offset.click.top=b.top+this.margins.top}if(b.bottom!=undefined){this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top}},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();if(this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])){b.left+=this.scrollParent.scrollLeft();b.top+=this.scrollParent.scrollTop()}if((this.offsetParent[0]==document.body)||(this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&a.browser.msie)){b={top:0,left:0}}return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var b=this.element.position();return{top:b.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:b.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else{return{top:0,left:0}}},_cacheMargins:function(){this.margins={left:(parseInt(this.element.css("marginLeft"),10)||0),top:(parseInt(this.element.css("marginTop"),10)||0)}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e=this.options;if(e.containment=="parent"){e.containment=this.helper[0].parentNode}if(e.containment=="document"||e.containment=="window"){this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,a(e.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(a(e.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]}if(!(/^(document|window|parent)$/).test(e.containment)&&e.containment.constructor!=Array){var c=a(e.containment)[0];if(!c){return}var d=a(e.containment).offset();var b=(a(c).css("overflow")!="hidden");this.containment=[d.left+(parseInt(a(c).css("borderLeftWidth"),10)||0)+(parseInt(a(c).css("paddingLeft"),10)||0)-this.margins.left,d.top+(parseInt(a(c).css("borderTopWidth"),10)||0)+(parseInt(a(c).css("paddingTop"),10)||0)-this.margins.top,d.left+(b?Math.max(c.scrollWidth,c.offsetWidth):c.offsetWidth)-(parseInt(a(c).css("borderLeftWidth"),10)||0)-(parseInt(a(c).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,d.top+(b?Math.max(c.scrollHeight,c.offsetHeight):c.offsetHeight)-(parseInt(a(c).css("borderTopWidth"),10)||0)-(parseInt(a(c).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}else{if(e.containment.constructor==Array){this.containment=e.containment}}},_convertPositionTo:function(f,h){if(!h){h=this.position}var c=f=="absolute"?1:-1;var e=this.options,b=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,g=(/(html|body)/i).test(b[0].tagName);return{top:(h.top+this.offset.relative.top*c+this.offset.parent.top*c-(a.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():(g?0:b.scrollTop()))*c)),left:(h.left+this.offset.relative.left*c+this.offset.parent.left*c-(a.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():g?0:b.scrollLeft())*c))}},_generatePosition:function(e){var h=this.options,b=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,i=(/(html|body)/i).test(b[0].tagName);if(this.cssPosition=="relative"&&!(this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0])){this.offset.relative=this._getRelativeOffset()}var d=e.pageX;var c=e.pageY;if(this.originalPosition){if(this.containment){if(e.pageX-this.offset.click.left<this.containment[0]){d=this.containment[0]+this.offset.click.left}if(e.pageY-this.offset.click.top<this.containment[1]){c=this.containment[1]+this.offset.click.top}if(e.pageX-this.offset.click.left>this.containment[2]){d=this.containment[2]+this.offset.click.left}if(e.pageY-this.offset.click.top>this.containment[3]){c=this.containment[3]+this.offset.click.top}}if(h.grid){var g=this.originalPageY+Math.round((c-this.originalPageY)/h.grid[1])*h.grid[1];c=this.containment?(!(g-this.offset.click.top<this.containment[1]||g-this.offset.click.top>this.containment[3])?g:(!(g-this.offset.click.top<this.containment[1])?g-h.grid[1]:g+h.grid[1])):g;var f=this.originalPageX+Math.round((d-this.originalPageX)/h.grid[0])*h.grid[0];d=this.containment?(!(f-this.offset.click.left<this.containment[0]||f-this.offset.click.left>this.containment[2])?f:(!(f-this.offset.click.left<this.containment[0])?f-h.grid[0]:f+h.grid[0])):f}}return{top:(c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():(i?0:b.scrollTop())))),left:(d-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():i?0:b.scrollLeft())))}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");if(this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval){this.helper.remove()}this.helper=null;this.cancelHelperRemoval=false},_trigger:function(b,c,d){d=d||this._uiHash();a.ui.plugin.call(this,b,[c,d]);if(b=="drag"){this.positionAbs=this._convertPositionTo("absolute")}return a.widget.prototype._trigger.call(this,b,c,d)},plugins:{},_uiHash:function(b){return{helper:this.helper,position:this.position,absolutePosition:this.positionAbs,offset:this.positionAbs}}}));a.extend(a.ui.draggable,{version:"1.7.2",eventPrefix:"drag",defaults:{addClasses:true,appendTo:"parent",axis:false,cancel:":input,option",connectToSortable:false,containment:false,cursor:"auto",cursorAt:false,delay:0,distance:1,grid:false,handle:false,helper:"original",iframeFix:false,opacity:false,refreshPositions:false,revert:false,revertDuration:500,scope:"default",scroll:true,scrollSensitivity:20,scrollSpeed:20,snap:false,snapMode:"both",snapTolerance:20,stack:false,zIndex:false}});a.ui.plugin.add("draggable","connectToSortable",{start:function(c,e){var d=a(this).data("draggable"),f=d.options,b=a.extend({},e,{item:d.element});d.sortables=[];a(f.connectToSortable).each(function(){var g=a.data(this,"sortable");if(g&&!g.options.disabled){d.sortables.push({instance:g,shouldRevert:g.options.revert});g._refreshItems();g._trigger("activate",c,b)}})},stop:function(c,e){var d=a(this).data("draggable"),b=a.extend({},e,{item:d.element});a.each(d.sortables,function(){if(this.instance.isOver){this.instance.isOver=0;d.cancelHelperRemoval=true;this.instance.cancelHelperRemoval=false;if(this.shouldRevert){this.instance.options.revert=true}this.instance._mouseStop(c);this.instance.options.helper=this.instance.options._helper;if(d.options.helper=="original"){this.instance.currentItem.css({top:"auto",left:"auto"})}}else{this.instance.cancelHelperRemoval=false;this.instance._trigger("deactivate",c,b)}})},drag:function(c,f){var e=a(this).data("draggable"),b=this;var d=function(i){var n=this.offset.click.top,m=this.offset.click.left;var g=this.positionAbs.top,k=this.positionAbs.left;var j=i.height,l=i.width;var p=i.top,h=i.left;return a.ui.isOver(g+n,k+m,p,h,j,l)};a.each(e.sortables,function(g){this.instance.positionAbs=e.positionAbs;this.instance.helperProportions=e.helperProportions;this.instance.offset.click=e.offset.click;if(this.instance._intersectsWith(this.instance.containerCache)){if(!this.instance.isOver){this.instance.isOver=1;this.instance.currentItem=a(b).clone().appendTo(this.instance.element).data("sortable-item",true);this.instance.options._helper=this.instance.options.helper;this.instance.options.helper=function(){return f.helper[0]};c.target=this.instance.currentItem[0];this.instance._mouseCapture(c,true);this.instance._mouseStart(c,true,true);this.instance.offset.click.top=e.offset.click.top;this.instance.offset.click.left=e.offset.click.left;this.instance.offset.parent.left-=e.offset.parent.left-this.instance.offset.parent.left;this.instance.offset.parent.top-=e.offset.parent.top-this.instance.offset.parent.top;e._trigger("toSortable",c);e.dropped=this.instance.element;e.currentItem=e.element;this.instance.fromOutside=e}if(this.instance.currentItem){this.instance._mouseDrag(c)}}else{if(this.instance.isOver){this.instance.isOver=0;this.instance.cancelHelperRemoval=true;this.instance.options.revert=false;this.instance._trigger("out",c,this.instance._uiHash(this.instance));this.instance._mouseStop(c,true);this.instance.options.helper=this.instance.options._helper;this.instance.currentItem.remove();if(this.instance.placeholder){this.instance.placeholder.remove()}e._trigger("fromSortable",c);e.dropped=false}}})}});a.ui.plugin.add("draggable","cursor",{start:function(c,d){var b=a("body"),e=a(this).data("draggable").options;if(b.css("cursor")){e._cursor=b.css("cursor")}b.css("cursor",e.cursor)},stop:function(b,c){var d=a(this).data("draggable").options;if(d._cursor){a("body").css("cursor",d._cursor)}}});a.ui.plugin.add("draggable","iframeFix",{start:function(b,c){var d=a(this).data("draggable").options;a(d.iframeFix===true?"iframe":d.iframeFix).each(function(){a('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1000}).css(a(this).offset()).appendTo("body")})},stop:function(b,c){a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)})}});a.ui.plugin.add("draggable","opacity",{start:function(c,d){var b=a(d.helper),e=a(this).data("draggable").options;if(b.css("opacity")){e._opacity=b.css("opacity")}b.css("opacity",e.opacity)},stop:function(b,c){var d=a(this).data("draggable").options;if(d._opacity){a(c.helper).css("opacity",d._opacity)}}});a.ui.plugin.add("draggable","scroll",{start:function(c,d){var b=a(this).data("draggable");if(b.scrollParent[0]!=document&&b.scrollParent[0].tagName!="HTML"){b.overflowOffset=b.scrollParent.offset()}},drag:function(d,e){var c=a(this).data("draggable"),f=c.options,b=false;if(c.scrollParent[0]!=document&&c.scrollParent[0].tagName!="HTML"){if(!f.axis||f.axis!="x"){if((c.overflowOffset.top+c.scrollParent[0].offsetHeight)-d.pageY<f.scrollSensitivity){c.scrollParent[0].scrollTop=b=c.scrollParent[0].scrollTop+f.scrollSpeed}else{if(d.pageY-c.overflowOffset.top<f.scrollSensitivity){c.scrollParent[0].scrollTop=b=c.scrollParent[0].scrollTop-f.scrollSpeed}}}if(!f.axis||f.axis!="y"){if((c.overflowOffset.left+c.scrollParent[0].offsetWidth)-d.pageX<f.scrollSensitivity){c.scrollParent[0].scrollLeft=b=c.scrollParent[0].scrollLeft+f.scrollSpeed}else{if(d.pageX-c.overflowOffset.left<f.scrollSensitivity){c.scrollParent[0].scrollLeft=b=c.scrollParent[0].scrollLeft-f.scrollSpeed}}}}else{if(!f.axis||f.axis!="x"){if(d.pageY-a(document).scrollTop()<f.scrollSensitivity){b=a(document).scrollTop(a(document).scrollTop()-f.scrollSpeed)}else{if(a(window).height()-(d.pageY-a(document).scrollTop())<f.scrollSensitivity){b=a(document).scrollTop(a(document).scrollTop()+f.scrollSpeed)}}}if(!f.axis||f.axis!="y"){if(d.pageX-a(document).scrollLeft()<f.scrollSensitivity){b=a(document).scrollLeft(a(document).scrollLeft()-f.scrollSpeed)}else{if(a(window).width()-(d.pageX-a(document).scrollLeft())<f.scrollSensitivity){b=a(document).scrollLeft(a(document).scrollLeft()+f.scrollSpeed)}}}}if(b!==false&&a.ui.ddmanager&&!f.dropBehaviour){a.ui.ddmanager.prepareOffsets(c,d)}}});a.ui.plugin.add("draggable","snap",{start:function(c,d){var b=a(this).data("draggable"),e=b.options;b.snapElements=[];a(e.snap.constructor!=String?(e.snap.items||":data(draggable)"):e.snap).each(function(){var g=a(this);var f=g.offset();if(this!=b.element[0]){b.snapElements.push({item:this,width:g.outerWidth(),height:g.outerHeight(),top:f.top,left:f.left})}})},drag:function(u,p){var g=a(this).data("draggable"),q=g.options;var y=q.snapTolerance;var x=p.offset.left,w=x+g.helperProportions.width,f=p.offset.top,e=f+g.helperProportions.height;for(var v=g.snapElements.length-1;v>=0;v--){var s=g.snapElements[v].left,n=s+g.snapElements[v].width,m=g.snapElements[v].top,A=m+g.snapElements[v].height;if(!((s-y<x&&x<n+y&&m-y<f&&f<A+y)||(s-y<x&&x<n+y&&m-y<e&&e<A+y)||(s-y<w&&w<n+y&&m-y<f&&f<A+y)||(s-y<w&&w<n+y&&m-y<e&&e<A+y))){if(g.snapElements[v].snapping){(g.options.snap.release&&g.options.snap.release.call(g.element,u,a.extend(g._uiHash(),{snapItem:g.snapElements[v].item})))}g.snapElements[v].snapping=false;continue}if(q.snapMode!="inner"){var c=Math.abs(m-e)<=y;var z=Math.abs(A-f)<=y;var j=Math.abs(s-w)<=y;var k=Math.abs(n-x)<=y;if(c){p.position.top=g._convertPositionTo("relative",{top:m-g.helperProportions.height,left:0}).top-g.margins.top}if(z){p.position.top=g._convertPositionTo("relative",{top:A,left:0}).top-g.margins.top}if(j){p.position.left=g._convertPositionTo("relative",{top:0,left:s-g.helperProportions.width}).left-g.margins.left}if(k){p.position.left=g._convertPositionTo("relative",{top:0,left:n}).left-g.margins.left}}var h=(c||z||j||k);if(q.snapMode!="outer"){var c=Math.abs(m-f)<=y;var z=Math.abs(A-e)<=y;var j=Math.abs(s-x)<=y;var k=Math.abs(n-w)<=y;if(c){p.position.top=g._convertPositionTo("relative",{top:m,left:0}).top-g.margins.top}if(z){p.position.top=g._convertPositionTo("relative",{top:A-g.helperProportions.height,left:0}).top-g.margins.top}if(j){p.position.left=g._convertPositionTo("relative",{top:0,left:s}).left-g.margins.left}if(k){p.position.left=g._convertPositionTo("relative",{top:0,left:n-g.helperProportions.width}).left-g.margins.left}}if(!g.snapElements[v].snapping&&(c||z||j||k||h)){(g.options.snap.snap&&g.options.snap.snap.call(g.element,u,a.extend(g._uiHash(),{snapItem:g.snapElements[v].item})))}g.snapElements[v].snapping=(c||z||j||k||h)}}});a.ui.plugin.add("draggable","stack",{start:function(b,c){var e=a(this).data("draggable").options;var d=a.makeArray(a(e.stack.group)).sort(function(g,f){return(parseInt(a(g).css("zIndex"),10)||e.stack.min)-(parseInt(a(f).css("zIndex"),10)||e.stack.min)});a(d).each(function(f){this.style.zIndex=e.stack.min+f});this[0].style.zIndex=e.stack.min+d.length}});a.ui.plugin.add("draggable","zIndex",{start:function(c,d){var b=a(d.helper),e=a(this).data("draggable").options;if(b.css("zIndex")){e._zIndex=b.css("zIndex")}b.css("zIndex",e.zIndex)},stop:function(b,c){var d=a(this).data("draggable").options;if(d._zIndex){a(c.helper).css("zIndex",d._zIndex)}}})})(jQuery);;(function(a){a.widget("ui.droppable",{_init:function(){var c=this.options,b=c.accept;this.isover=0;this.isout=1;this.options.accept=this.options.accept&&a.isFunction(this.options.accept)?this.options.accept:function(e){return e.is(b)};this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};a.ui.ddmanager.droppables[this.options.scope]=a.ui.ddmanager.droppables[this.options.scope]||[];a.ui.ddmanager.droppables[this.options.scope].push(this);(this.options.addClasses&&this.element.addClass("ui-droppable"))},destroy:function(){var b=a.ui.ddmanager.droppables[this.options.scope];for(var c=0;c<b.length;c++){if(b[c]==this){b.splice(c,1)}}this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable")},_setData:function(b,c){if(b=="accept"){this.options.accept=c&&a.isFunction(c)?c:function(e){return e.is(c)}}else{a.widget.prototype._setData.apply(this,arguments)}},_activate:function(c){var b=a.ui.ddmanager.current;if(this.options.activeClass){this.element.addClass(this.options.activeClass)}(b&&this._trigger("activate",c,this.ui(b)))},_deactivate:function(c){var b=a.ui.ddmanager.current;if(this.options.activeClass){this.element.removeClass(this.options.activeClass)}(b&&this._trigger("deactivate",c,this.ui(b)))},_over:function(c){var b=a.ui.ddmanager.current;if(!b||(b.currentItem||b.element)[0]==this.element[0]){return}if(this.options.accept.call(this.element[0],(b.currentItem||b.element))){if(this.options.hoverClass){this.element.addClass(this.options.hoverClass)}this._trigger("over",c,this.ui(b))}},_out:function(c){var b=a.ui.ddmanager.current;if(!b||(b.currentItem||b.element)[0]==this.element[0]){return}if(this.options.accept.call(this.element[0],(b.currentItem||b.element))){if(this.options.hoverClass){this.element.removeClass(this.options.hoverClass)}this._trigger("out",c,this.ui(b))}},_drop:function(c,d){var b=d||a.ui.ddmanager.current;if(!b||(b.currentItem||b.element)[0]==this.element[0]){return false}var e=false;this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var f=a.data(this,"droppable");if(f.options.greedy&&a.ui.intersect(b,a.extend(f,{offset:f.element.offset()}),f.options.tolerance)){e=true;return false}});if(e){return false}if(this.options.accept.call(this.element[0],(b.currentItem||b.element))){if(this.options.activeClass){this.element.removeClass(this.options.activeClass)}if(this.options.hoverClass){this.element.removeClass(this.options.hoverClass)}this._trigger("drop",c,this.ui(b));return this.element}return false},ui:function(b){return{draggable:(b.currentItem||b.element),helper:b.helper,position:b.position,absolutePosition:b.positionAbs,offset:b.positionAbs}}});a.extend(a.ui.droppable,{version:"1.7.2",eventPrefix:"drop",defaults:{accept:"*",activeClass:false,addClasses:true,greedy:false,hoverClass:false,scope:"default",tolerance:"intersect"}});a.ui.intersect=function(q,j,o){if(!j.offset){return false}var e=(q.positionAbs||q.position.absolute).left,d=e+q.helperProportions.width,n=(q.positionAbs||q.position.absolute).top,m=n+q.helperProportions.height;var g=j.offset.left,c=g+j.proportions.width,p=j.offset.top,k=p+j.proportions.height;switch(o){case"fit":return(g<e&&d<c&&p<n&&m<k);break;case"intersect":return(g<e+(q.helperProportions.width/2)&&d-(q.helperProportions.width/2)<c&&p<n+(q.helperProportions.height/2)&&m-(q.helperProportions.height/2)<k);break;case"pointer":var h=((q.positionAbs||q.position.absolute).left+(q.clickOffset||q.offset.click).left),i=((q.positionAbs||q.position.absolute).top+(q.clickOffset||q.offset.click).top),f=a.ui.isOver(i,h,p,g,j.proportions.height,j.proportions.width);return f;break;case"touch":return((n>=p&&n<=k)||(m>=p&&m<=k)||(n<p&&m>k))&&((e>=g&&e<=c)||(d>=g&&d<=c)||(e<g&&d>c));break;default:return false;break}};a.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(e,g){var b=a.ui.ddmanager.droppables[e.options.scope];var f=g?g.type:null;var h=(e.currentItem||e.element).find(":data(droppable)").andSelf();droppablesLoop:for(var d=0;d<b.length;d++){if(b[d].options.disabled||(e&&!b[d].options.accept.call(b[d].element[0],(e.currentItem||e.element)))){continue}for(var c=0;c<h.length;c++){if(h[c]==b[d].element[0]){b[d].proportions.height=0;continue droppablesLoop}}b[d].visible=b[d].element.css("display")!="none";if(!b[d].visible){continue}b[d].offset=b[d].element.offset();b[d].proportions={width:b[d].element[0].offsetWidth,height:b[d].element[0].offsetHeight};if(f=="mousedown"){b[d]._activate.call(b[d],g)}}},drop:function(b,c){var d=false;a.each(a.ui.ddmanager.droppables[b.options.scope],function(){if(!this.options){return}if(!this.options.disabled&&this.visible&&a.ui.intersect(b,this,this.options.tolerance)){d=this._drop.call(this,c)}if(!this.options.disabled&&this.visible&&this.options.accept.call(this.element[0],(b.currentItem||b.element))){this.isout=1;this.isover=0;this._deactivate.call(this,c)}});return d},drag:function(b,c){if(b.options.refreshPositions){a.ui.ddmanager.prepareOffsets(b,c)}a.each(a.ui.ddmanager.droppables[b.options.scope],function(){if(this.options.disabled||this.greedyChild||!this.visible){return}var e=a.ui.intersect(b,this,this.options.tolerance);var g=!e&&this.isover==1?"isout":(e&&this.isover==0?"isover":null);if(!g){return}var f;if(this.options.greedy){var d=this.element.parents(":data(droppable):eq(0)");if(d.length){f=a.data(d[0],"droppable");f.greedyChild=(g=="isover"?1:0)}}if(f&&g=="isover"){f.isover=0;f.isout=1;f._out.call(f,c)}this[g]=1;this[g=="isout"?"isover":"isout"]=0;this[g=="isover"?"_over":"_out"].call(this,c);if(f&&g=="isout"){f.isout=0;f.isover=1;f._over.call(f,c)}})}}})(jQuery);;(function(c){c.widget("ui.resizable",c.extend({},c.ui.mouse,{_init:function(){var e=this,j=this.options;this.element.addClass("ui-resizable");c.extend(this,{_aspectRatio:!!(j.aspectRatio),aspectRatio:j.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:j.helper||j.ghost||j.animate?j.helper||"ui-resizable-helper":null});if(this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)){if(/relative/.test(this.element.css("position"))&&c.browser.opera){this.element.css({position:"relative",top:"auto",left:"auto"})}this.element.wrap(c('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")}));this.element=this.element.parent().data("resizable",this.element.data("resizable"));this.elementIsWrapper=true;this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")});this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0});this.originalResizeStyle=this.originalElement.css("resize");this.originalElement.css("resize","none");this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"}));this.originalElement.css({margin:this.originalElement.css("margin")});this._proportionallyResize()}this.handles=j.handles||(!c(".ui-resizable-handle",this.element).length?"e,s,se":{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"});if(this.handles.constructor==String){if(this.handles=="all"){this.handles="n,e,s,w,se,sw,ne,nw"}var k=this.handles.split(",");this.handles={};for(var f=0;f<k.length;f++){var h=c.trim(k[f]),d="ui-resizable-"+h;var g=c('<div class="ui-resizable-handle '+d+'"></div>');if(/sw|se|ne|nw/.test(h)){g.css({zIndex:++j.zIndex})}if("se"==h){g.addClass("ui-icon ui-icon-gripsmall-diagonal-se")}this.handles[h]=".ui-resizable-"+h;this.element.append(g)}}this._renderAxis=function(p){p=p||this.element;for(var m in this.handles){if(this.handles[m].constructor==String){this.handles[m]=c(this.handles[m],this.element).show()}if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var n=c(this.handles[m],this.element),o=0;o=/sw|ne|nw|se|n|s/.test(m)?n.outerHeight():n.outerWidth();var l=["padding",/ne|nw|n/.test(m)?"Top":/se|sw|s/.test(m)?"Bottom":/^e$/.test(m)?"Right":"Left"].join("");p.css(l,o);this._proportionallyResize()}if(!c(this.handles[m]).length){continue}}};this._renderAxis(this.element);this._handles=c(".ui-resizable-handle",this.element).disableSelection();this._handles.mouseover(function(){if(!e.resizing){if(this.className){var i=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)}e.axis=i&&i[1]?i[1]:"se"}});if(j.autoHide){this._handles.hide();c(this.element).addClass("ui-resizable-autohide").hover(function(){c(this).removeClass("ui-resizable-autohide");e._handles.show()},function(){if(!e.resizing){c(this).addClass("ui-resizable-autohide");e._handles.hide()}})}this._mouseInit()},destroy:function(){this._mouseDestroy();var d=function(f){c(f).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){d(this.element);var e=this.element;e.parent().append(this.originalElement.css({position:e.css("position"),width:e.outerWidth(),height:e.outerHeight(),top:e.css("top"),left:e.css("left")})).end().remove()}this.originalElement.css("resize",this.originalResizeStyle);d(this.originalElement)},_mouseCapture:function(e){var f=false;for(var d in this.handles){if(c(this.handles[d])[0]==e.target){f=true}}return this.options.disabled||!!f},_mouseStart:function(f){var i=this.options,e=this.element.position(),d=this.element;this.resizing=true;this.documentScroll={top:c(document).scrollTop(),left:c(document).scrollLeft()};if(d.is(".ui-draggable")||(/absolute/).test(d.css("position"))){d.css({position:"absolute",top:e.top,left:e.left})}if(c.browser.opera&&(/relative/).test(d.css("position"))){d.css({position:"relative",top:"auto",left:"auto"})}this._renderProxy();var j=b(this.helper.css("left")),g=b(this.helper.css("top"));if(i.containment){j+=c(i.containment).scrollLeft()||0;g+=c(i.containment).scrollTop()||0}this.offset=this.helper.offset();this.position={left:j,top:g};this.size=this._helper?{width:d.outerWidth(),height:d.outerHeight()}:{width:d.width(),height:d.height()};this.originalSize=this._helper?{width:d.outerWidth(),height:d.outerHeight()}:{width:d.width(),height:d.height()};this.originalPosition={left:j,top:g};this.sizeDiff={width:d.outerWidth()-d.width(),height:d.outerHeight()-d.height()};this.originalMousePosition={left:f.pageX,top:f.pageY};this.aspectRatio=(typeof i.aspectRatio=="number")?i.aspectRatio:((this.originalSize.width/this.originalSize.height)||1);var h=c(".ui-resizable-"+this.axis).css("cursor");c("body").css("cursor",h=="auto"?this.axis+"-resize":h);d.addClass("ui-resizable-resizing");this._propagate("start",f);return true},_mouseDrag:function(d){var g=this.helper,f=this.options,l={},p=this,i=this.originalMousePosition,m=this.axis;var q=(d.pageX-i.left)||0,n=(d.pageY-i.top)||0;var h=this._change[m];if(!h){return false}var k=h.apply(this,[d,q,n]),j=c.browser.msie&&c.browser.version<7,e=this.sizeDiff;if(this._aspectRatio||d.shiftKey){k=this._updateRatio(k,d)}k=this._respectSize(k,d);this._propagate("resize",d);g.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"});if(!this._helper&&this._proportionallyResizeElements.length){this._proportionallyResize()}this._updateCache(k);this._trigger("resize",d,this.ui());return false},_mouseStop:function(g){this.resizing=false;var h=this.options,l=this;if(this._helper){var f=this._proportionallyResizeElements,d=f.length&&(/textarea/i).test(f[0].nodeName),e=d&&c.ui.hasScroll(f[0],"left")?0:l.sizeDiff.height,j=d?0:l.sizeDiff.width;var m={width:(l.size.width-j),height:(l.size.height-e)},i=(parseInt(l.element.css("left"),10)+(l.position.left-l.originalPosition.left))||null,k=(parseInt(l.element.css("top"),10)+(l.position.top-l.originalPosition.top))||null;if(!h.animate){this.element.css(c.extend(m,{top:k,left:i}))}l.helper.height(l.size.height);l.helper.width(l.size.width);if(this._helper&&!h.animate){this._proportionallyResize()}}c("body").css("cursor","auto");this.element.removeClass("ui-resizable-resizing");this._propagate("stop",g);if(this._helper){this.helper.remove()}return false},_updateCache:function(d){var e=this.options;this.offset=this.helper.offset();if(a(d.left)){this.position.left=d.left}if(a(d.top)){this.position.top=d.top}if(a(d.height)){this.size.height=d.height}if(a(d.width)){this.size.width=d.width}},_updateRatio:function(g,f){var h=this.options,i=this.position,e=this.size,d=this.axis;if(g.height){g.width=(e.height*this.aspectRatio)}else{if(g.width){g.height=(e.width/this.aspectRatio)}}if(d=="sw"){g.left=i.left+(e.width-g.width);g.top=null}if(d=="nw"){g.top=i.top+(e.height-g.height);g.left=i.left+(e.width-g.width)}return g},_respectSize:function(k,f){var i=this.helper,h=this.options,q=this._aspectRatio||f.shiftKey,p=this.axis,s=a(k.width)&&h.maxWidth&&(h.maxWidth<k.width),l=a(k.height)&&h.maxHeight&&(h.maxHeight<k.height),g=a(k.width)&&h.minWidth&&(h.minWidth>k.width),r=a(k.height)&&h.minHeight&&(h.minHeight>k.height);if(g){k.width=h.minWidth}if(r){k.height=h.minHeight}if(s){k.width=h.maxWidth}if(l){k.height=h.maxHeight}var e=this.originalPosition.left+this.originalSize.width,n=this.position.top+this.size.height;var j=/sw|nw|w/.test(p),d=/nw|ne|n/.test(p);if(g&&j){k.left=e-h.minWidth}if(s&&j){k.left=e-h.maxWidth}if(r&&d){k.top=n-h.minHeight}if(l&&d){k.top=n-h.maxHeight}var m=!k.width&&!k.height;if(m&&!k.left&&k.top){k.top=null}else{if(m&&!k.top&&k.left){k.left=null}}return k},_proportionallyResize:function(){var j=this.options;if(!this._proportionallyResizeElements.length){return}var f=this.helper||this.element;for(var e=0;e<this._proportionallyResizeElements.length;e++){var g=this._proportionallyResizeElements[e];if(!this.borderDif){var d=[g.css("borderTopWidth"),g.css("borderRightWidth"),g.css("borderBottomWidth"),g.css("borderLeftWidth")],h=[g.css("paddingTop"),g.css("paddingRight"),g.css("paddingBottom"),g.css("paddingLeft")];this.borderDif=c.map(d,function(k,m){var l=parseInt(k,10)||0,n=parseInt(h[m],10)||0;return l+n})}if(c.browser.msie&&!(!(c(f).is(":hidden")||c(f).parents(":hidden").length))){continue}g.css({height:(f.height()-this.borderDif[0]-this.borderDif[2])||0,width:(f.width()-this.borderDif[1]-this.borderDif[3])||0})}},_renderProxy:function(){var e=this.element,h=this.options;this.elementOffset=e.offset();if(this._helper){this.helper=this.helper||c('<div style="overflow:hidden;"></div>');var d=c.browser.msie&&c.browser.version<7,f=(d?1:0),g=(d?2:-1);this.helper.addClass(this._helper).css({width:this.element.outerWidth()+g,height:this.element.outerHeight()+g,position:"absolute",left:this.elementOffset.left-f+"px",top:this.elementOffset.top-f+"px",zIndex:++h.zIndex});this.helper.appendTo("body").disableSelection()}else{this.helper=this.element}},_change:{e:function(f,e,d){return{width:this.originalSize.width+e}},w:function(g,e,d){var i=this.options,f=this.originalSize,h=this.originalPosition;return{left:h.left+e,width:f.width-e}},n:function(g,e,d){var i=this.options,f=this.originalSize,h=this.originalPosition;return{top:h.top+d,height:f.height-d}},s:function(f,e,d){return{height:this.originalSize.height+d}},se:function(f,e,d){return c.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[f,e,d]))},sw:function(f,e,d){return c.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[f,e,d]))},ne:function(f,e,d){return c.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[f,e,d]))},nw:function(f,e,d){return c.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[f,e,d]))}},_propagate:function(e,d){c.ui.plugin.call(this,e,[d,this.ui()]);(e!="resize"&&this._trigger(e,d,this.ui()))},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}));c.extend(c.ui.resizable,{version:"1.7.2",eventPrefix:"resize",defaults:{alsoResize:false,animate:false,animateDuration:"slow",animateEasing:"swing",aspectRatio:false,autoHide:false,cancel:":input,option",containment:false,delay:0,distance:1,ghost:false,grid:false,handles:"e,s,se",helper:false,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1000}});c.ui.plugin.add("resizable","alsoResize",{start:function(e,f){var d=c(this).data("resizable"),g=d.options;_store=function(h){c(h).each(function(){c(this).data("resizable-alsoresize",{width:parseInt(c(this).width(),10),height:parseInt(c(this).height(),10),left:parseInt(c(this).css("left"),10),top:parseInt(c(this).css("top"),10)})})};if(typeof(g.alsoResize)=="object"&&!g.alsoResize.parentNode){if(g.alsoResize.length){g.alsoResize=g.alsoResize[0];_store(g.alsoResize)}else{c.each(g.alsoResize,function(h,i){_store(h)})}}else{_store(g.alsoResize)}},resize:function(f,h){var e=c(this).data("resizable"),i=e.options,g=e.originalSize,k=e.originalPosition;var j={height:(e.size.height-g.height)||0,width:(e.size.width-g.width)||0,top:(e.position.top-k.top)||0,left:(e.position.left-k.left)||0},d=function(l,m){c(l).each(function(){var p=c(this),q=c(this).data("resizable-alsoresize"),o={},n=m&&m.length?m:["width","height","top","left"];c.each(n||["width","height","top","left"],function(r,t){var s=(q[t]||0)+(j[t]||0);if(s&&s>=0){o[t]=s||null}});if(/relative/.test(p.css("position"))&&c.browser.opera){e._revertToRelativePosition=true;p.css({position:"absolute",top:"auto",left:"auto"})}p.css(o)})};if(typeof(i.alsoResize)=="object"&&!i.alsoResize.nodeType){c.each(i.alsoResize,function(l,m){d(l,m)})}else{d(i.alsoResize)}},stop:function(e,f){var d=c(this).data("resizable");if(d._revertToRelativePosition&&c.browser.opera){d._revertToRelativePosition=false;el.css({position:"relative"})}c(this).removeData("resizable-alsoresize-start")}});c.ui.plugin.add("resizable","animate",{stop:function(h,m){var n=c(this).data("resizable"),i=n.options;var g=n._proportionallyResizeElements,d=g.length&&(/textarea/i).test(g[0].nodeName),e=d&&c.ui.hasScroll(g[0],"left")?0:n.sizeDiff.height,k=d?0:n.sizeDiff.width;var f={width:(n.size.width-k),height:(n.size.height-e)},j=(parseInt(n.element.css("left"),10)+(n.position.left-n.originalPosition.left))||null,l=(parseInt(n.element.css("top"),10)+(n.position.top-n.originalPosition.top))||null;n.element.animate(c.extend(f,l&&j?{top:l,left:j}:{}),{duration:i.animateDuration,easing:i.animateEasing,step:function(){var o={width:parseInt(n.element.css("width"),10),height:parseInt(n.element.css("height"),10),top:parseInt(n.element.css("top"),10),left:parseInt(n.element.css("left"),10)};if(g&&g.length){c(g[0]).css({width:o.width,height:o.height})}n._updateCache(o);n._propagate("resize",h)}})}});c.ui.plugin.add("resizable","containment",{start:function(e,q){var s=c(this).data("resizable"),i=s.options,k=s.element;var f=i.containment,j=(f instanceof c)?f.get(0):(/parent/.test(f))?k.parent().get(0):f;if(!j){return}s.containerElement=c(j);if(/document/.test(f)||f==document){s.containerOffset={left:0,top:0};s.containerPosition={left:0,top:0};s.parentData={element:c(document),left:0,top:0,width:c(document).width(),height:c(document).height()||document.body.parentNode.scrollHeight}}else{var m=c(j),h=[];c(["Top","Right","Left","Bottom"]).each(function(p,o){h[p]=b(m.css("padding"+o))});s.containerOffset=m.offset();s.containerPosition=m.position();s.containerSize={height:(m.innerHeight()-h[3]),width:(m.innerWidth()-h[1])};var n=s.containerOffset,d=s.containerSize.height,l=s.containerSize.width,g=(c.ui.hasScroll(j,"left")?j.scrollWidth:l),r=(c.ui.hasScroll(j)?j.scrollHeight:d);s.parentData={element:j,left:n.left,top:n.top,width:g,height:r}}},resize:function(f,p){var s=c(this).data("resizable"),h=s.options,e=s.containerSize,n=s.containerOffset,l=s.size,m=s.position,q=s._aspectRatio||f.shiftKey,d={top:0,left:0},g=s.containerElement;if(g[0]!=document&&(/static/).test(g.css("position"))){d=n}if(m.left<(s._helper?n.left:0)){s.size.width=s.size.width+(s._helper?(s.position.left-n.left):(s.position.left-d.left));if(q){s.size.height=s.size.width/h.aspectRatio}s.position.left=h.helper?n.left:0}if(m.top<(s._helper?n.top:0)){s.size.height=s.size.height+(s._helper?(s.position.top-n.top):s.position.top);if(q){s.size.width=s.size.height*h.aspectRatio}s.position.top=s._helper?n.top:0}s.offset.left=s.parentData.left+s.position.left;s.offset.top=s.parentData.top+s.position.top;var k=Math.abs((s._helper?s.offset.left-d.left:(s.offset.left-d.left))+s.sizeDiff.width),r=Math.abs((s._helper?s.offset.top-d.top:(s.offset.top-n.top))+s.sizeDiff.height);var j=s.containerElement.get(0)==s.element.parent().get(0),i=/relative|absolute/.test(s.containerElement.css("position"));if(j&&i){k-=s.parentData.left}if(k+s.size.width>=s.parentData.width){s.size.width=s.parentData.width-k;if(q){s.size.height=s.size.width/s.aspectRatio}}if(r+s.size.height>=s.parentData.height){s.size.height=s.parentData.height-r;if(q){s.size.width=s.size.height*s.aspectRatio}}},stop:function(e,m){var p=c(this).data("resizable"),f=p.options,k=p.position,l=p.containerOffset,d=p.containerPosition,g=p.containerElement;var i=c(p.helper),q=i.offset(),n=i.outerWidth()-p.sizeDiff.width,j=i.outerHeight()-p.sizeDiff.height;if(p._helper&&!f.animate&&(/relative/).test(g.css("position"))){c(this).css({left:q.left-d.left-l.left,width:n,height:j})}if(p._helper&&!f.animate&&(/static/).test(g.css("position"))){c(this).css({left:q.left-d.left-l.left,width:n,height:j})}}});c.ui.plugin.add("resizable","ghost",{start:function(f,g){var d=c(this).data("resizable"),h=d.options,e=d.size;d.ghost=d.originalElement.clone();d.ghost.css({opacity:0.25,display:"block",position:"relative",height:e.height,width:e.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof h.ghost=="string"?h.ghost:"");d.ghost.appendTo(d.helper)},resize:function(e,f){var d=c(this).data("resizable"),g=d.options;if(d.ghost){d.ghost.css({position:"relative",height:d.size.height,width:d.size.width})}},stop:function(e,f){var d=c(this).data("resizable"),g=d.options;if(d.ghost&&d.helper){d.helper.get(0).removeChild(d.ghost.get(0))}}});c.ui.plugin.add("resizable","grid",{resize:function(d,l){var n=c(this).data("resizable"),g=n.options,j=n.size,h=n.originalSize,i=n.originalPosition,m=n.axis,k=g._aspectRatio||d.shiftKey;g.grid=typeof g.grid=="number"?[g.grid,g.grid]:g.grid;var f=Math.round((j.width-h.width)/(g.grid[0]||1))*(g.grid[0]||1),e=Math.round((j.height-h.height)/(g.grid[1]||1))*(g.grid[1]||1);if(/^(se|s|e)$/.test(m)){n.size.width=h.width+f;n.size.height=h.height+e}else{if(/^(ne)$/.test(m)){n.size.width=h.width+f;n.size.height=h.height+e;n.position.top=i.top-e}else{if(/^(sw)$/.test(m)){n.size.width=h.width+f;n.size.height=h.height+e;n.position.left=i.left-f}else{n.size.width=h.width+f;n.size.height=h.height+e;n.position.top=i.top-e;n.position.left=i.left-f}}}}});var b=function(d){return parseInt(d,10)||0};var a=function(d){return!isNaN(parseInt(d,10))}})(jQuery);;(function(a){a.widget("ui.selectable",a.extend({},a.ui.mouse,{_init:function(){var b=this;this.element.addClass("ui-selectable");this.dragged=false;var c;this.refresh=function(){c=a(b.options.filter,b.element[0]);c.each(function(){var d=a(this);var e=d.offset();a.data(this,"selectable-item",{element:this,$element:d,left:e.left,top:e.top,right:e.left+d.outerWidth(),bottom:e.top+d.outerHeight(),startselected:false,selected:d.hasClass("ui-selected"),selecting:d.hasClass("ui-selecting"),unselecting:d.hasClass("ui-unselecting")})})};this.refresh();this.selectees=c.addClass("ui-selectee");this._mouseInit();this.helper=a(document.createElement("div")).css({border:"1px dotted black"}).addClass("ui-selectable-helper")},destroy:function(){this.element.removeClass("ui-selectable ui-selectable-disabled").removeData("selectable").unbind(".selectable");this._mouseDestroy()},_mouseStart:function(d){var b=this;this.opos=[d.pageX,d.pageY];if(this.options.disabled){return}var c=this.options;this.selectees=a(c.filter,this.element[0]);this._trigger("start",d);a(c.appendTo).append(this.helper);this.helper.css({"z-index":100,position:"absolute",left:d.clientX,top:d.clientY,width:0,height:0});if(c.autoRefresh){this.refresh()}this.selectees.filter(".ui-selected").each(function(){var e=a.data(this,"selectable-item");e.startselected=true;if(!d.metaKey){e.$element.removeClass("ui-selected");e.selected=false;e.$element.addClass("ui-unselecting");e.unselecting=true;b._trigger("unselecting",d,{unselecting:e.element})}});a(d.target).parents().andSelf().each(function(){var e=a.data(this,"selectable-item");if(e){e.$element.removeClass("ui-unselecting").addClass("ui-selecting");e.unselecting=false;e.selecting=true;e.selected=true;b._trigger("selecting",d,{selecting:e.element});return false}})},_mouseDrag:function(i){var c=this;this.dragged=true;if(this.options.disabled){return}var e=this.options;var d=this.opos[0],h=this.opos[1],b=i.pageX,g=i.pageY;if(d>b){var f=b;b=d;d=f}if(h>g){var f=g;g=h;h=f}this.helper.css({left:d,top:h,width:b-d,height:g-h});this.selectees.each(function(){var j=a.data(this,"selectable-item");if(!j||j.element==c.element[0]){return}var k=false;if(e.tolerance=="touch"){k=(!(j.left>b||j.right<d||j.top>g||j.bottom<h))}else{if(e.tolerance=="fit"){k=(j.left>d&&j.right<b&&j.top>h&&j.bottom<g)}}if(k){if(j.selected){j.$element.removeClass("ui-selected");j.selected=false}if(j.unselecting){j.$element.removeClass("ui-unselecting");j.unselecting=false}if(!j.selecting){j.$element.addClass("ui-selecting");j.selecting=true;c._trigger("selecting",i,{selecting:j.element})}}else{if(j.selecting){if(i.metaKey&&j.startselected){j.$element.removeClass("ui-selecting");j.selecting=false;j.$element.addClass("ui-selected");j.selected=true}else{j.$element.removeClass("ui-selecting");j.selecting=false;if(j.startselected){j.$element.addClass("ui-unselecting");j.unselecting=true}c._trigger("unselecting",i,{unselecting:j.element})}}if(j.selected){if(!i.metaKey&&!j.startselected){j.$element.removeClass("ui-selected");j.selected=false;j.$element.addClass("ui-unselecting");j.unselecting=true;c._trigger("unselecting",i,{unselecting:j.element})}}}});return false},_mouseStop:function(d){var b=this;this.dragged=false;var c=this.options;a(".ui-unselecting",this.element[0]).each(function(){var e=a.data(this,"selectable-item");e.$element.removeClass("ui-unselecting");e.unselecting=false;e.startselected=false;b._trigger("unselected",d,{unselected:e.element})});a(".ui-selecting",this.element[0]).each(function(){var e=a.data(this,"selectable-item");e.$element.removeClass("ui-selecting").addClass("ui-selected");e.selecting=false;e.selected=true;e.startselected=true;b._trigger("selected",d,{selected:e.element})});this._trigger("stop",d);this.helper.remove();return false}}));a.extend(a.ui.selectable,{version:"1.7.2",defaults:{appendTo:"body",autoRefresh:true,cancel:":input,option",delay:0,distance:0,filter:"*",tolerance:"touch"}})})(jQuery);;(function(a){a.widget("ui.sortable",a.extend({},a.ui.mouse,{_init:function(){var b=this.options;this.containerCache={};this.element.addClass("ui-sortable");this.refresh();this.floating=this.items.length?(/left|right/).test(this.items[0].item.css("float")):false;this.offset=this.element.offset();this._mouseInit()},destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").removeData("sortable").unbind(".sortable");this._mouseDestroy();for(var b=this.items.length-1;b>=0;b--){this.items[b].item.removeData("sortable-item")}},_mouseCapture:function(e,f){if(this.reverting){return false}if(this.options.disabled||this.options.type=="static"){return false}this._refreshItems(e);var d=null,c=this,b=a(e.target).parents().each(function(){if(a.data(this,"sortable-item")==c){d=a(this);return false}});if(a.data(e.target,"sortable-item")==c){d=a(e.target)}if(!d){return false}if(this.options.handle&&!f){var g=false;a(this.options.handle,d).find("*").andSelf().each(function(){if(this==e.target){g=true}});if(!g){return false}}this.currentItem=d;this._removeCurrentsFromItems();return true},_mouseStart:function(e,f,b){var g=this.options,c=this;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(e);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");a.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this._generatePosition(e);this.originalPageX=e.pageX;this.originalPageY=e.pageY;if(g.cursorAt){this._adjustOffsetFromHelper(g.cursorAt)}this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};if(this.helper[0]!=this.currentItem[0]){this.currentItem.hide()}this._createPlaceholder();if(g.containment){this._setContainment()}if(g.cursor){if(a("body").css("cursor")){this._storedCursor=a("body").css("cursor")}a("body").css("cursor",g.cursor)}if(g.opacity){if(this.helper.css("opacity")){this._storedOpacity=this.helper.css("opacity")}this.helper.css("opacity",g.opacity)}if(g.zIndex){if(this.helper.css("zIndex")){this._storedZIndex=this.helper.css("zIndex")}this.helper.css("zIndex",g.zIndex)}if(this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"){this.overflowOffset=this.scrollParent.offset()}this._trigger("start",e,this._uiHash());if(!this._preserveHelperProportions){this._cacheHelperProportions()}if(!b){for(var d=this.containers.length-1;d>=0;d--){this.containers[d]._trigger("activate",e,c._uiHash(this))}}if(a.ui.ddmanager){a.ui.ddmanager.current=this}if(a.ui.ddmanager&&!g.dropBehaviour){a.ui.ddmanager.prepareOffsets(this,e)}this.dragging=true;this.helper.addClass("ui-sortable-helper");this._mouseDrag(e);return true},_mouseDrag:function(f){this.position=this._generatePosition(f);this.positionAbs=this._convertPositionTo("absolute");if(!this.lastPositionAbs){this.lastPositionAbs=this.positionAbs}if(this.options.scroll){var g=this.options,b=false;if(this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"){if((this.overflowOffset.top+this.scrollParent[0].offsetHeight)-f.pageY<g.scrollSensitivity){this.scrollParent[0].scrollTop=b=this.scrollParent[0].scrollTop+g.scrollSpeed}else{if(f.pageY-this.overflowOffset.top<g.scrollSensitivity){this.scrollParent[0].scrollTop=b=this.scrollParent[0].scrollTop-g.scrollSpeed}}if((this.overflowOffset.left+this.scrollParent[0].offsetWidth)-f.pageX<g.scrollSensitivity){this.scrollParent[0].scrollLeft=b=this.scrollParent[0].scrollLeft+g.scrollSpeed}else{if(f.pageX-this.overflowOffset.left<g.scrollSensitivity){this.scrollParent[0].scrollLeft=b=this.scrollParent[0].scrollLeft-g.scrollSpeed}}}else{if(f.pageY-a(document).scrollTop()<g.scrollSensitivity){b=a(document).scrollTop(a(document).scrollTop()-g.scrollSpeed)}else{if(a(window).height()-(f.pageY-a(document).scrollTop())<g.scrollSensitivity){b=a(document).scrollTop(a(document).scrollTop()+g.scrollSpeed)}}if(f.pageX-a(document).scrollLeft()<g.scrollSensitivity){b=a(document).scrollLeft(a(document).scrollLeft()-g.scrollSpeed)}else{if(a(window).width()-(f.pageX-a(document).scrollLeft())<g.scrollSensitivity){b=a(document).scrollLeft(a(document).scrollLeft()+g.scrollSpeed)}}}if(b!==false&&a.ui.ddmanager&&!g.dropBehaviour){a.ui.ddmanager.prepareOffsets(this,f)}}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!="y"){this.helper[0].style.left=this.position.left+"px"}if(!this.options.axis||this.options.axis!="x"){this.helper[0].style.top=this.position.top+"px"}for(var d=this.items.length-1;d>=0;d--){var e=this.items[d],c=e.item[0],h=this._intersectsWithPointer(e);if(!h){continue}if(c!=this.currentItem[0]&&this.placeholder[h==1?"next":"prev"]()[0]!=c&&!a.ui.contains(this.placeholder[0],c)&&(this.options.type=="semi-dynamic"?!a.ui.contains(this.element[0],c):true)){this.direction=h==1?"down":"up";if(this.options.tolerance=="pointer"||this._intersectsWithSides(e)){this._rearrange(f,e)}else{break}this._trigger("change",f,this._uiHash());break}}this._contactContainers(f);if(a.ui.ddmanager){a.ui.ddmanager.drag(this,f)}this._trigger("sort",f,this._uiHash());this.lastPositionAbs=this.positionAbs;return false},_mouseStop:function(c,d){if(!c){return}if(a.ui.ddmanager&&!this.options.dropBehaviour){a.ui.ddmanager.drop(this,c)}if(this.options.revert){var b=this;var e=b.placeholder.offset();b.reverting=true;a(this.helper).animate({left:e.left-this.offset.parent.left-b.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:e.top-this.offset.parent.top-b.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){b._clear(c)})}else{this._clear(c,d)}return false},cancel:function(){var b=this;if(this.dragging){this._mouseUp();if(this.options.helper=="original"){this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else{this.currentItem.show()}for(var c=this.containers.length-1;c>=0;c--){this.containers[c]._trigger("deactivate",null,b._uiHash(this));if(this.containers[c].containerCache.over){this.containers[c]._trigger("out",null,b._uiHash(this));this.containers[c].containerCache.over=0}}}if(this.placeholder[0].parentNode){this.placeholder[0].parentNode.removeChild(this.placeholder[0])}if(this.options.helper!="original"&&this.helper&&this.helper[0].parentNode){this.helper.remove()}a.extend(this,{helper:null,dragging:false,reverting:false,_noFinalSort:null});if(this.domPosition.prev){a(this.domPosition.prev).after(this.currentItem)}else{a(this.domPosition.parent).prepend(this.currentItem)}return true},serialize:function(d){var b=this._getItemsAsjQuery(d&&d.connected);var c=[];d=d||{};a(b).each(function(){var e=(a(d.item||this).attr(d.attribute||"id")||"").match(d.expression||(/(.+)[-=_](.+)/));if(e){c.push((d.key||e[1]+"[]")+"="+(d.key&&d.expression?e[1]:e[2]))}});return c.join("&")},toArray:function(d){var b=this._getItemsAsjQuery(d&&d.connected);var c=[];d=d||{};b.each(function(){c.push(a(d.item||this).attr(d.attribute||"id")||"")});return c},_intersectsWith:function(m){var e=this.positionAbs.left,d=e+this.helperProportions.width,k=this.positionAbs.top,j=k+this.helperProportions.height;var f=m.left,c=f+m.width,n=m.top,i=n+m.height;var o=this.offset.click.top,h=this.offset.click.left;var g=(k+o)>n&&(k+o)<i&&(e+h)>f&&(e+h)<c;if(this.options.tolerance=="pointer"||this.options.forcePointerForContainers||(this.options.tolerance!="pointer"&&this.helperProportions[this.floating?"width":"height"]>m[this.floating?"width":"height"])){return g}else{return(f<e+(this.helperProportions.width/2)&&d-(this.helperProportions.width/2)<c&&n<k+(this.helperProportions.height/2)&&j-(this.helperProportions.height/2)<i)}},_intersectsWithPointer:function(d){var e=a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,d.top,d.height),c=a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,d.left,d.width),g=e&&c,b=this._getDragVerticalDirection(),f=this._getDragHorizontalDirection();if(!g){return false}return this.floating?(((f&&f=="right")||b=="down")?2:1):(b&&(b=="down"?2:1))},_intersectsWithSides:function(e){var c=a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+(e.height/2),e.height),d=a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+(e.width/2),e.width),b=this._getDragVerticalDirection(),f=this._getDragHorizontalDirection();if(this.floating&&f){return((f=="right"&&d)||(f=="left"&&!d))}else{return b&&((b=="down"&&c)||(b=="up"&&!c))}},_getDragVerticalDirection:function(){var b=this.positionAbs.top-this.lastPositionAbs.top;return b!=0&&(b>0?"down":"up")},_getDragHorizontalDirection:function(){var b=this.positionAbs.left-this.lastPositionAbs.left;return b!=0&&(b>0?"right":"left")},refresh:function(b){this._refreshItems(b);this.refreshPositions()},_connectWith:function(){var b=this.options;return b.connectWith.constructor==String?[b.connectWith]:b.connectWith},_getItemsAsjQuery:function(b){var l=this;var g=[];var e=[];var h=this._connectWith();if(h&&b){for(var d=h.length-1;d>=0;d--){var k=a(h[d]);for(var c=k.length-1;c>=0;c--){var f=a.data(k[c],"sortable");if(f&&f!=this&&!f.options.disabled){e.push([a.isFunction(f.options.items)?f.options.items.call(f.element):a(f.options.items,f.element).not(".ui-sortable-helper"),f])}}}}e.push([a.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):a(this.options.items,this.element).not(".ui-sortable-helper"),this]);for(var d=e.length-1;d>=0;d--){e[d][0].each(function(){g.push(this)})}return a(g)},_removeCurrentsFromItems:function(){var d=this.currentItem.find(":data(sortable-item)");for(var c=0;c<this.items.length;c++){for(var b=0;b<d.length;b++){if(d[b]==this.items[c].item[0]){this.items.splice(c,1)}}}},_refreshItems:function(b){this.items=[];this.containers=[this];var h=this.items;var p=this;var f=[[a.isFunction(this.options.items)?this.options.items.call(this.element[0],b,{item:this.currentItem}):a(this.options.items,this.element),this]];var l=this._connectWith();if(l){for(var e=l.length-1;e>=0;e--){var m=a(l[e]);for(var d=m.length-1;d>=0;d--){var g=a.data(m[d],"sortable");if(g&&g!=this&&!g.options.disabled){f.push([a.isFunction(g.options.items)?g.options.items.call(g.element[0],b,{item:this.currentItem}):a(g.options.items,g.element),g]);this.containers.push(g)}}}}for(var e=f.length-1;e>=0;e--){var k=f[e][1];var c=f[e][0];for(var d=0,n=c.length;d<n;d++){var o=a(c[d]);o.data("sortable-item",k);h.push({item:o,instance:k,width:0,height:0,left:0,top:0})}}},refreshPositions:function(b){if(this.offsetParent&&this.helper){this.offset.parent=this._getParentOffset()}for(var d=this.items.length-1;d>=0;d--){var e=this.items[d];if(e.instance!=this.currentContainer&&this.currentContainer&&e.item[0]!=this.currentItem[0]){continue}var c=this.options.toleranceElement?a(this.options.toleranceElement,e.item):e.item;if(!b){e.width=c.outerWidth();e.height=c.outerHeight()}var f=c.offset();e.left=f.left;e.top=f.top}if(this.options.custom&&this.options.custom.refreshContainers){this.options.custom.refreshContainers.call(this)}else{for(var d=this.containers.length-1;d>=0;d--){var f=this.containers[d].element.offset();this.containers[d].containerCache.left=f.left;this.containers[d].containerCache.top=f.top;this.containers[d].containerCache.width=this.containers[d].element.outerWidth();this.containers[d].containerCache.height=this.containers[d].element.outerHeight()}}},_createPlaceholder:function(d){var b=d||this,e=b.options;if(!e.placeholder||e.placeholder.constructor==String){var c=e.placeholder;e.placeholder={element:function(){var f=a(document.createElement(b.currentItem[0].nodeName)).addClass(c||b.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];if(!c){f.style.visibility="hidden"}return f},update:function(f,g){if(c&&!e.forcePlaceholderSize){return}if(!g.height()){g.height(b.currentItem.innerHeight()-parseInt(b.currentItem.css("paddingTop")||0,10)-parseInt(b.currentItem.css("paddingBottom")||0,10))}if(!g.width()){g.width(b.currentItem.innerWidth()-parseInt(b.currentItem.css("paddingLeft")||0,10)-parseInt(b.currentItem.css("paddingRight")||0,10))}}}}b.placeholder=a(e.placeholder.element.call(b.element,b.currentItem));b.currentItem.after(b.placeholder);e.placeholder.update(b,b.placeholder)},_contactContainers:function(d){for(var c=this.containers.length-1;c>=0;c--){if(this._intersectsWith(this.containers[c].containerCache)){if(!this.containers[c].containerCache.over){if(this.currentContainer!=this.containers[c]){var h=10000;var g=null;var e=this.positionAbs[this.containers[c].floating?"left":"top"];for(var b=this.items.length-1;b>=0;b--){if(!a.ui.contains(this.containers[c].element[0],this.items[b].item[0])){continue}var f=this.items[b][this.containers[c].floating?"left":"top"];if(Math.abs(f-e)<h){h=Math.abs(f-e);g=this.items[b]}}if(!g&&!this.options.dropOnEmpty){continue}this.currentContainer=this.containers[c];g?this._rearrange(d,g,null,true):this._rearrange(d,null,this.containers[c].element,true);this._trigger("change",d,this._uiHash());this.containers[c]._trigger("change",d,this._uiHash(this));this.options.placeholder.update(this.currentContainer,this.placeholder)}this.containers[c]._trigger("over",d,this._uiHash(this));this.containers[c].containerCache.over=1}}else{if(this.containers[c].containerCache.over){this.containers[c]._trigger("out",d,this._uiHash(this));this.containers[c].containerCache.over=0}}}},_createHelper:function(c){var d=this.options;var b=a.isFunction(d.helper)?a(d.helper.apply(this.element[0],[c,this.currentItem])):(d.helper=="clone"?this.currentItem.clone():this.currentItem);if(!b.parents("body").length){a(d.appendTo!="parent"?d.appendTo:this.currentItem[0].parentNode)[0].appendChild(b[0])}if(b[0]==this.currentItem[0]){this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}}if(b[0].style.width==""||d.forceHelperSize){b.width(this.currentItem.width())}if(b[0].style.height==""||d.forceHelperSize){b.height(this.currentItem.height())}return b},_adjustOffsetFromHelper:function(b){if(b.left!=undefined){this.offset.click.left=b.left+this.margins.left}if(b.right!=undefined){this.offset.click.left=this.helperProportions.width-b.right+this.margins.left}if(b.top!=undefined){this.offset.click.top=b.top+this.margins.top}if(b.bottom!=undefined){this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top}},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();if(this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])){b.left+=this.scrollParent.scrollLeft();b.top+=this.scrollParent.scrollTop()}if((this.offsetParent[0]==document.body)||(this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&a.browser.msie)){b={top:0,left:0}}return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var b=this.currentItem.position();return{top:b.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:b.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else{return{top:0,left:0}}},_cacheMargins:function(){this.margins={left:(parseInt(this.currentItem.css("marginLeft"),10)||0),top:(parseInt(this.currentItem.css("marginTop"),10)||0)}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e=this.options;if(e.containment=="parent"){e.containment=this.helper[0].parentNode}if(e.containment=="document"||e.containment=="window"){this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,a(e.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(a(e.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]}if(!(/^(document|window|parent)$/).test(e.containment)){var c=a(e.containment)[0];var d=a(e.containment).offset();var b=(a(c).css("overflow")!="hidden");this.containment=[d.left+(parseInt(a(c).css("borderLeftWidth"),10)||0)+(parseInt(a(c).css("paddingLeft"),10)||0)-this.margins.left,d.top+(parseInt(a(c).css("borderTopWidth"),10)||0)+(parseInt(a(c).css("paddingTop"),10)||0)-this.margins.top,d.left+(b?Math.max(c.scrollWidth,c.offsetWidth):c.offsetWidth)-(parseInt(a(c).css("borderLeftWidth"),10)||0)-(parseInt(a(c).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,d.top+(b?Math.max(c.scrollHeight,c.offsetHeight):c.offsetHeight)-(parseInt(a(c).css("borderTopWidth"),10)||0)-(parseInt(a(c).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(f,h){if(!h){h=this.position}var c=f=="absolute"?1:-1;var e=this.options,b=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,g=(/(html|body)/i).test(b[0].tagName);return{top:(h.top+this.offset.relative.top*c+this.offset.parent.top*c-(a.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():(g?0:b.scrollTop()))*c)),left:(h.left+this.offset.relative.left*c+this.offset.parent.left*c-(a.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():g?0:b.scrollLeft())*c))}},_generatePosition:function(e){var h=this.options,b=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,i=(/(html|body)/i).test(b[0].tagName);if(this.cssPosition=="relative"&&!(this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0])){this.offset.relative=this._getRelativeOffset()}var d=e.pageX;var c=e.pageY;if(this.originalPosition){if(this.containment){if(e.pageX-this.offset.click.left<this.containment[0]){d=this.containment[0]+this.offset.click.left}if(e.pageY-this.offset.click.top<this.containment[1]){c=this.containment[1]+this.offset.click.top}if(e.pageX-this.offset.click.left>this.containment[2]){d=this.containment[2]+this.offset.click.left}if(e.pageY-this.offset.click.top>this.containment[3]){c=this.containment[3]+this.offset.click.top}}if(h.grid){var g=this.originalPageY+Math.round((c-this.originalPageY)/h.grid[1])*h.grid[1];c=this.containment?(!(g-this.offset.click.top<this.containment[1]||g-this.offset.click.top>this.containment[3])?g:(!(g-this.offset.click.top<this.containment[1])?g-h.grid[1]:g+h.grid[1])):g;var f=this.originalPageX+Math.round((d-this.originalPageX)/h.grid[0])*h.grid[0];d=this.containment?(!(f-this.offset.click.left<this.containment[0]||f-this.offset.click.left>this.containment[2])?f:(!(f-this.offset.click.left<this.containment[0])?f-h.grid[0]:f+h.grid[0])):f}}return{top:(c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():(i?0:b.scrollTop())))),left:(d-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():i?0:b.scrollLeft())))}},_rearrange:function(g,f,c,e){c?c[0].appendChild(this.placeholder[0]):f.item[0].parentNode.insertBefore(this.placeholder[0],(this.direction=="down"?f.item[0]:f.item[0].nextSibling));this.counter=this.counter?++this.counter:1;var d=this,b=this.counter;window.setTimeout(function(){if(b==d.counter){d.refreshPositions(!e)}},0)},_clear:function(d,e){this.reverting=false;var f=[],b=this;if(!this._noFinalSort&&this.currentItem[0].parentNode){this.placeholder.before(this.currentItem)}this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var c in this._storedCSS){if(this._storedCSS[c]=="auto"||this._storedCSS[c]=="static"){this._storedCSS[c]=""}}this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else{this.currentItem.show()}if(this.fromOutside&&!e){f.push(function(g){this._trigger("receive",g,this._uiHash(this.fromOutside))})}if((this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!e){f.push(function(g){this._trigger("update",g,this._uiHash())})}if(!a.ui.contains(this.element[0],this.currentItem[0])){if(!e){f.push(function(g){this._trigger("remove",g,this._uiHash())})}for(var c=this.containers.length-1;c>=0;c--){if(a.ui.contains(this.containers[c].element[0],this.currentItem[0])&&!e){f.push((function(g){return function(h){g._trigger("receive",h,this._uiHash(this))}}).call(this,this.containers[c]));f.push((function(g){return function(h){g._trigger("update",h,this._uiHash(this))}}).call(this,this.containers[c]))}}}for(var c=this.containers.length-1;c>=0;c--){if(!e){f.push((function(g){return function(h){g._trigger("deactivate",h,this._uiHash(this))}}).call(this,this.containers[c]))}if(this.containers[c].containerCache.over){f.push((function(g){return function(h){g._trigger("out",h,this._uiHash(this))}}).call(this,this.containers[c]));this.containers[c].containerCache.over=0}}if(this._storedCursor){a("body").css("cursor",this._storedCursor)}if(this._storedOpacity){this.helper.css("opacity",this._storedOpacity)}if(this._storedZIndex){this.helper.css("zIndex",this._storedZIndex=="auto"?"":this._storedZIndex)}this.dragging=false;if(this.cancelHelperRemoval){if(!e){this._trigger("beforeStop",d,this._uiHash());for(var c=0;c<f.length;c++){f[c].call(this,d)}this._trigger("stop",d,this._uiHash())}return false}if(!e){this._trigger("beforeStop",d,this._uiHash())}this.placeholder[0].parentNode.removeChild(this.placeholder[0]);if(this.helper[0]!=this.currentItem[0]){this.helper.remove()}this.helper=null;if(!e){for(var c=0;c<f.length;c++){f[c].call(this,d)}this._trigger("stop",d,this._uiHash())}this.fromOutside=false;return true},_trigger:function(){if(a.widget.prototype._trigger.apply(this,arguments)===false){this.cancel()}},_uiHash:function(c){var b=c||this;return{helper:b.helper,placeholder:b.placeholder||a([]),position:b.position,absolutePosition:b.positionAbs,offset:b.positionAbs,item:b.currentItem,sender:c?c.element:null}}}));a.extend(a.ui.sortable,{getter:"serialize toArray",version:"1.7.2",eventPrefix:"sort",defaults:{appendTo:"parent",axis:false,cancel:":input,option",connectWith:false,containment:false,cursor:"auto",cursorAt:false,delay:0,distance:1,dropOnEmpty:true,forcePlaceholderSize:false,forceHelperSize:false,grid:false,handle:false,helper:"original",items:"> *",opacity:false,placeholder:false,revert:false,scroll:true,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1000}})})(jQuery);;(function(a){a.widget("ui.accordion",{_init:function(){var d=this.options,b=this;this.running=0;if(d.collapsible==a.ui.accordion.defaults.collapsible&&d.alwaysOpen!=a.ui.accordion.defaults.alwaysOpen){d.collapsible=!d.alwaysOpen}if(d.navigation){var c=this.element.find("a").filter(d.navigationFilter);if(c.length){if(c.filter(d.header).length){this.active=c}else{this.active=c.parent().parent().prev();c.addClass("ui-accordion-content-active")}}}this.element.addClass("ui-accordion ui-widget ui-helper-reset");if(this.element[0].nodeName=="UL"){this.element.children("li").addClass("ui-accordion-li-fix")}this.headers=this.element.find(d.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all").bind("mouseenter.accordion",function(){a(this).addClass("ui-state-hover")}).bind("mouseleave.accordion",function(){a(this).removeClass("ui-state-hover")}).bind("focus.accordion",function(){a(this).addClass("ui-state-focus")}).bind("blur.accordion",function(){a(this).removeClass("ui-state-focus")});this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom");this.active=this._findActive(this.active||d.active).toggleClass("ui-state-default").toggleClass("ui-state-active").toggleClass("ui-corner-all").toggleClass("ui-corner-top");this.active.next().addClass("ui-accordion-content-active");a("<span/>").addClass("ui-icon "+d.icons.header).prependTo(this.headers);this.active.find(".ui-icon").toggleClass(d.icons.header).toggleClass(d.icons.headerSelected);if(a.browser.msie){this.element.find("a").css("zoom","1")}this.resize();this.element.attr("role","tablist");this.headers.attr("role","tab").bind("keydown",function(e){return b._keydown(e)}).next().attr("role","tabpanel");this.headers.not(this.active||"").attr("aria-expanded","false").attr("tabIndex","-1").next().hide();if(!this.active.length){this.headers.eq(0).attr("tabIndex","0")}else{this.active.attr("aria-expanded","true").attr("tabIndex","0")}if(!a.browser.safari){this.headers.find("a").attr("tabIndex","-1")}if(d.event){this.headers.bind((d.event)+".accordion",function(e){return b._clickHandler.call(b,e,this)})}},destroy:function(){var c=this.options;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role").unbind(".accordion").removeData("accordion");this.headers.unbind(".accordion").removeClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("tabindex");this.headers.find("a").removeAttr("tabindex");this.headers.children(".ui-icon").remove();var b=this.headers.next().css("display","").removeAttr("role").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active");if(c.autoHeight||c.fillHeight){b.css("height","")}},_setData:function(b,c){if(b=="alwaysOpen"){b="collapsible";c=!c}a.widget.prototype._setData.apply(this,arguments)},_keydown:function(e){var g=this.options,f=a.ui.keyCode;if(g.disabled||e.altKey||e.ctrlKey){return}var d=this.headers.length;var b=this.headers.index(e.target);var c=false;switch(e.keyCode){case f.RIGHT:case f.DOWN:c=this.headers[(b+1)%d];break;case f.LEFT:case f.UP:c=this.headers[(b-1+d)%d];break;case f.SPACE:case f.ENTER:return this._clickHandler({target:e.target},e.target)}if(c){a(e.target).attr("tabIndex","-1");a(c).attr("tabIndex","0");c.focus();return false}return true},resize:function(){var e=this.options,d;if(e.fillSpace){if(a.browser.msie){var b=this.element.parent().css("overflow");this.element.parent().css("overflow","hidden")}d=this.element.parent().height();if(a.browser.msie){this.element.parent().css("overflow",b)}this.headers.each(function(){d-=a(this).outerHeight()});var c=0;this.headers.next().each(function(){c=Math.max(c,a(this).innerHeight()-a(this).height())}).height(Math.max(0,d-c)).css("overflow","auto")}else{if(e.autoHeight){d=0;this.headers.next().each(function(){d=Math.max(d,a(this).outerHeight())}).height(d)}}},activate:function(b){var c=this._findActive(b)[0];this._clickHandler({target:c},c)},_findActive:function(b){return b?typeof b=="number"?this.headers.filter(":eq("+b+")"):this.headers.not(this.headers.not(b)):b===false?a([]):this.headers.filter(":eq(0)")},_clickHandler:function(b,f){var d=this.options;if(d.disabled){return false}if(!b.target&&d.collapsible){this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").find(".ui-icon").removeClass(d.icons.headerSelected).addClass(d.icons.header);this.active.next().addClass("ui-accordion-content-active");var h=this.active.next(),e={options:d,newHeader:a([]),oldHeader:d.active,newContent:a([]),oldContent:h},c=(this.active=a([]));this._toggle(c,h,e);return false}var g=a(b.currentTarget||f);var i=g[0]==this.active[0];if(this.running||(!d.collapsible&&i)){return false}this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").find(".ui-icon").removeClass(d.icons.headerSelected).addClass(d.icons.header);this.active.next().addClass("ui-accordion-content-active");if(!i){g.removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top").find(".ui-icon").removeClass(d.icons.header).addClass(d.icons.headerSelected);g.next().addClass("ui-accordion-content-active")}var c=g.next(),h=this.active.next(),e={options:d,newHeader:i&&d.collapsible?a([]):g,oldHeader:this.active,newContent:i&&d.collapsible?a([]):c.find("> *"),oldContent:h.find("> *")},j=this.headers.index(this.active[0])>this.headers.index(g[0]);this.active=i?a([]):g;this._toggle(c,h,e,i,j);return false},_toggle:function(b,i,g,j,k){var d=this.options,m=this;this.toShow=b;this.toHide=i;this.data=g;var c=function(){if(!m){return}return m._completed.apply(m,arguments)};this._trigger("changestart",null,this.data);this.running=i.size()===0?b.size():i.size();if(d.animated){var f={};if(d.collapsible&&j){f={toShow:a([]),toHide:i,complete:c,down:k,autoHeight:d.autoHeight||d.fillSpace}}else{f={toShow:b,toHide:i,complete:c,down:k,autoHeight:d.autoHeight||d.fillSpace}}if(!d.proxied){d.proxied=d.animated}if(!d.proxiedDuration){d.proxiedDuration=d.duration}d.animated=a.isFunction(d.proxied)?d.proxied(f):d.proxied;d.duration=a.isFunction(d.proxiedDuration)?d.proxiedDuration(f):d.proxiedDuration;var l=a.ui.accordion.animations,e=d.duration,h=d.animated;if(!l[h]){l[h]=function(n){this.slide(n,{easing:h,duration:e||700})}}l[h](f)}else{if(d.collapsible&&j){b.toggle()}else{i.hide();b.show()}c(true)}i.prev().attr("aria-expanded","false").attr("tabIndex","-1").blur();b.prev().attr("aria-expanded","true").attr("tabIndex","0").focus()},_completed:function(b){var c=this.options;this.running=b?0:--this.running;if(this.running){return}if(c.clearStyle){this.toShow.add(this.toHide).css({height:"",overflow:""})}this._trigger("change",null,this.data)}});a.extend(a.ui.accordion,{version:"1.7.2",defaults:{active:null,alwaysOpen:true,animated:"slide",autoHeight:true,clearStyle:false,collapsible:false,event:"click",fillSpace:false,header:"> li > :first-child,> :not(li):even",icons:{header:"ui-icon-triangle-1-e",headerSelected:"ui-icon-triangle-1-s"},navigation:false,navigationFilter:function(){return this.href.toLowerCase()==location.href.toLowerCase()}},animations:{slide:function(j,h){j=a.extend({easing:"swing",duration:300},j,h);if(!j.toHide.size()){j.toShow.animate({height:"show"},j);return}if(!j.toShow.size()){j.toHide.animate({height:"hide"},j);return}var c=j.toShow.css("overflow"),g,d={},f={},e=["height","paddingTop","paddingBottom"],b;var i=j.toShow;b=i[0].style.width;i.width(parseInt(i.parent().width(),10)-parseInt(i.css("paddingLeft"),10)-parseInt(i.css("paddingRight"),10)-(parseInt(i.css("borderLeftWidth"),10)||0)-(parseInt(i.css("borderRightWidth"),10)||0));a.each(e,function(k,m){f[m]="hide";var l=(""+a.css(j.toShow[0],m)).match(/^([\d+-.]+)(.*)$/);d[m]={value:l[1],unit:l[2]||"px"}});j.toShow.css({height:0,overflow:"hidden"}).show();j.toHide.filter(":hidden").each(j.complete).end().filter(":visible").animate(f,{step:function(k,l){if(l.prop=="height"){g=(l.now-l.start)/(l.end-l.start)}j.toShow[0].style[l.prop]=(g*d[l.prop].value)+d[l.prop].unit},duration:j.duration,easing:j.easing,complete:function(){if(!j.autoHeight){j.toShow.css("height","")}j.toShow.css("width",b);j.toShow.css({overflow:c});j.complete()}})},bounceslide:function(b){this.slide(b,{easing:b.down?"easeOutBounce":"swing",duration:b.down?1000:200})},easeslide:function(b){this.slide(b,{easing:"easeinout",duration:700})}}})})(jQuery);;(function(c){var b={dragStart:"start.draggable",drag:"drag.draggable",dragStop:"stop.draggable",maxHeight:"maxHeight.resizable",minHeight:"minHeight.resizable",maxWidth:"maxWidth.resizable",minWidth:"minWidth.resizable",resizeStart:"start.resizable",resize:"drag.resizable",resizeStop:"stop.resizable"},a="ui-dialog ui-widget ui-widget-content ui-corner-all ";c.widget("ui.dialog",{_init:function(){this.originalTitle=this.element.attr("title");var l=this,m=this.options,j=m.title||this.originalTitle||"&nbsp;",e=c.ui.dialog.getTitleId(this.element),k=(this.uiDialog=c("<div/>")).appendTo(document.body).hide().addClass(a+m.dialogClass).css({position:"absolute",overflow:"hidden",zIndex:m.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(n){(m.closeOnEscape&&n.keyCode&&n.keyCode==c.ui.keyCode.ESCAPE&&l.close(n))}).attr({role:"dialog","aria-labelledby":e}).mousedown(function(n){l.moveToTop(false,n)}),g=this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(k),f=(this.uiDialogTitlebar=c("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(k),i=c('<a href="#"/>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role","button").hover(function(){i.addClass("ui-state-hover")},function(){i.removeClass("ui-state-hover")}).focus(function(){i.addClass("ui-state-focus")}).blur(function(){i.removeClass("ui-state-focus")}).mousedown(function(n){n.stopPropagation()}).click(function(n){l.close(n);return false}).appendTo(f),h=(this.uiDialogTitlebarCloseText=c("<span/>")).addClass("ui-icon ui-icon-closethick").text(m.closeText).appendTo(i),d=c("<span/>").addClass("ui-dialog-title").attr("id",e).html(j).prependTo(f);f.find("*").add(f).disableSelection();(m.draggable&&c.fn.draggable&&this._makeDraggable());(m.resizable&&c.fn.resizable&&this._makeResizable());this._createButtons(m.buttons);this._isOpen=false;(m.bgiframe&&c.fn.bgiframe&&k.bgiframe());(m.autoOpen&&this.open())},destroy:function(){(this.overlay&&this.overlay.destroy());this.uiDialog.hide();this.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body");this.uiDialog.remove();(this.originalTitle&&this.element.attr("title",this.originalTitle))},close:function(f){var d=this;if(false===d._trigger("beforeclose",f)){return}(d.overlay&&d.overlay.destroy());d.uiDialog.unbind("keypress.ui-dialog");(d.options.hide?d.uiDialog.hide(d.options.hide,function(){d._trigger("close",f)}):d.uiDialog.hide()&&d._trigger("close",f));c.ui.dialog.overlay.resize();d._isOpen=false;if(d.options.modal){var e=0;c(".ui-dialog").each(function(){if(this!=d.uiDialog[0]){e=Math.max(e,c(this).css("z-index"))}});c.ui.dialog.maxZ=e}},isOpen:function(){return this._isOpen},moveToTop:function(f,e){if((this.options.modal&&!f)||(!this.options.stack&&!this.options.modal)){return this._trigger("focus",e)}if(this.options.zIndex>c.ui.dialog.maxZ){c.ui.dialog.maxZ=this.options.zIndex}(this.overlay&&this.overlay.$el.css("z-index",c.ui.dialog.overlay.maxZ=++c.ui.dialog.maxZ));var d={scrollTop:this.element.attr("scrollTop"),scrollLeft:this.element.attr("scrollLeft")};this.uiDialog.css("z-index",++c.ui.dialog.maxZ);this.element.attr(d);this._trigger("focus",e)},open:function(){if(this._isOpen){return}var e=this.options,d=this.uiDialog;this.overlay=e.modal?new c.ui.dialog.overlay(this):null;(d.next().length&&d.appendTo("body"));this._size();this._position(e.position);d.show(e.show);this.moveToTop(true);(e.modal&&d.bind("keypress.ui-dialog",function(h){if(h.keyCode!=c.ui.keyCode.TAB){return}var g=c(":tabbable",this),i=g.filter(":first")[0],f=g.filter(":last")[0];if(h.target==f&&!h.shiftKey){setTimeout(function(){i.focus()},1)}else{if(h.target==i&&h.shiftKey){setTimeout(function(){f.focus()},1)}}}));c([]).add(d.find(".ui-dialog-content :tabbable:first")).add(d.find(".ui-dialog-buttonpane :tabbable:first")).add(d).filter(":first").focus();this._trigger("open");this._isOpen=true},_createButtons:function(g){var f=this,d=false,e=c("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix");this.uiDialog.find(".ui-dialog-buttonpane").remove();(typeof g=="object"&&g!==null&&c.each(g,function(){return!(d=true)}));if(d){c.each(g,function(h,i){c('<button type="button"></button>').addClass("ui-state-default ui-corner-all").text(h).click(function(){i.apply(f.element[0],arguments)}).hover(function(){c(this).addClass("ui-state-hover")},function(){c(this).removeClass("ui-state-hover")}).focus(function(){c(this).addClass("ui-state-focus")}).blur(function(){c(this).removeClass("ui-state-focus")}).appendTo(e)});e.appendTo(this.uiDialog)}},_makeDraggable:function(){var d=this,f=this.options,e;this.uiDialog.draggable({cancel:".ui-dialog-content",handle:".ui-dialog-titlebar",containment:"document",start:function(){e=f.height;c(this).height(c(this).height()).addClass("ui-dialog-dragging");(f.dragStart&&f.dragStart.apply(d.element[0],arguments))},drag:function(){(f.drag&&f.drag.apply(d.element[0],arguments))},stop:function(){c(this).removeClass("ui-dialog-dragging").height(e);(f.dragStop&&f.dragStop.apply(d.element[0],arguments));c.ui.dialog.overlay.resize()}})},_makeResizable:function(g){g=(g===undefined?this.options.resizable:g);var d=this,f=this.options,e=typeof g=="string"?g:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",alsoResize:this.element,maxWidth:f.maxWidth,maxHeight:f.maxHeight,minWidth:f.minWidth,minHeight:f.minHeight,start:function(){c(this).addClass("ui-dialog-resizing");(f.resizeStart&&f.resizeStart.apply(d.element[0],arguments))},resize:function(){(f.resize&&f.resize.apply(d.element[0],arguments))},handles:e,stop:function(){c(this).removeClass("ui-dialog-resizing");f.height=c(this).height();f.width=c(this).width();(f.resizeStop&&f.resizeStop.apply(d.element[0],arguments));c.ui.dialog.overlay.resize()}}).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_position:function(i){var e=c(window),f=c(document),g=f.scrollTop(),d=f.scrollLeft(),h=g;if(c.inArray(i,["center","top","right","bottom","left"])>=0){i=[i=="right"||i=="left"?i:"center",i=="top"||i=="bottom"?i:"middle"]}if(i.constructor!=Array){i=["center","middle"]}if(i[0].constructor==Number){d+=i[0]}else{switch(i[0]){case"left":d+=0;break;case"right":d+=e.width()-this.uiDialog.outerWidth();break;default:case"center":d+=(e.width()-this.uiDialog.outerWidth())/2}}if(i[1].constructor==Number){g+=i[1]}else{switch(i[1]){case"top":g+=0;break;case"bottom":g+=e.height()-this.uiDialog.outerHeight();break;default:case"middle":g+=(e.height()-this.uiDialog.outerHeight())/2}}g=Math.max(g,h);this.uiDialog.css({top:g,left:d})},_setData:function(e,f){(b[e]&&this.uiDialog.data(b[e],f));switch(e){case"buttons":this._createButtons(f);break;case"closeText":this.uiDialogTitlebarCloseText.text(f);break;case"dialogClass":this.uiDialog.removeClass(this.options.dialogClass).addClass(a+f);break;case"draggable":(f?this._makeDraggable():this.uiDialog.draggable("destroy"));break;case"height":this.uiDialog.height(f);break;case"position":this._position(f);break;case"resizable":var d=this.uiDialog,g=this.uiDialog.is(":data(resizable)");(g&&!f&&d.resizable("destroy"));(g&&typeof f=="string"&&d.resizable("option","handles",f));(g||this._makeResizable(f));break;case"title":c(".ui-dialog-title",this.uiDialogTitlebar).html(f||"&nbsp;");break;case"width":this.uiDialog.width(f);break}c.widget.prototype._setData.apply(this,arguments)},_size:function(){var e=this.options;this.element.css({height:0,minHeight:0,width:"auto"});var d=this.uiDialog.css({height:"auto",width:e.width}).height();this.element.css({minHeight:Math.max(e.minHeight-d,0),height:e.height=="auto"?"auto":Math.max(e.height-d,0)})}});c.extend(c.ui.dialog,{version:"1.7.2",defaults:{autoOpen:true,bgiframe:false,buttons:{},closeOnEscape:true,closeText:"close",dialogClass:"",draggable:true,hide:null,height:"auto",maxHeight:false,maxWidth:false,minHeight:150,minWidth:150,modal:false,position:"center",resizable:true,show:null,stack:true,title:"",width:300,zIndex:1000},getter:"isOpen",uuid:0,maxZ:0,getTitleId:function(d){return"ui-dialog-title-"+(d.attr("id")||++this.uuid)},overlay:function(d){this.$el=c.ui.dialog.overlay.create(d)}});c.extend(c.ui.dialog.overlay,{instances:[],maxZ:0,events:c.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(d){return d+".dialog-overlay"}).join(" "),create:function(e){if(this.instances.length===0){setTimeout(function(){if(c.ui.dialog.overlay.instances.length){c(document).bind(c.ui.dialog.overlay.events,function(f){var g=c(f.target).parents(".ui-dialog").css("zIndex")||0;return(g>c.ui.dialog.overlay.maxZ)})}},1);c(document).bind("keydown.dialog-overlay",function(f){(e.options.closeOnEscape&&f.keyCode&&f.keyCode==c.ui.keyCode.ESCAPE&&e.close(f))});c(window).bind("resize.dialog-overlay",c.ui.dialog.overlay.resize)}var d=c("<div></div>").appendTo(document.body).addClass("ui-widget-overlay").css({width:this.width(),height:this.height()});(e.options.bgiframe&&c.fn.bgiframe&&d.bgiframe());this.instances.push(d);return d},destroy:function(d){this.instances.splice(c.inArray(this.instances,d),1);if(this.instances.length===0){c([document,window]).unbind(".dialog-overlay")}d.remove();var e=0;c.each(this.instances,function(){e=Math.max(e,this.css("z-index"))});this.maxZ=e},height:function(){if(c.browser.msie&&c.browser.version<7){var e=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight);var d=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight);if(e<d){return c(window).height()+"px"}else{return e+"px"}}else{return c(document).height()+"px"}},width:function(){if(c.browser.msie&&c.browser.version<7){var d=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth);var e=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth);if(d<e){return c(window).width()+"px"}else{return d+"px"}}else{return c(document).width()+"px"}},resize:function(){var d=c([]);c.each(c.ui.dialog.overlay.instances,function(){d=d.add(this)});d.css({width:0,height:0}).css({width:c.ui.dialog.overlay.width(),height:c.ui.dialog.overlay.height()})}});c.extend(c.ui.dialog.overlay.prototype,{destroy:function(){c.ui.dialog.overlay.destroy(this.$el)}})})(jQuery);;(function(a){a.widget("ui.slider",a.extend({},a.ui.mouse,{_init:function(){var b=this,c=this.options;this._keySliding=false;this._handleIndex=null;this._detectOrientation();this._mouseInit();this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all");this.range=a([]);if(c.range){if(c.range===true){this.range=a("<div></div>");if(!c.values){c.values=[this._valueMin(),this._valueMin()]}if(c.values.length&&c.values.length!=2){c.values=[c.values[0],c.values[0]]}}else{this.range=a("<div></div>")}this.range.appendTo(this.element).addClass("ui-slider-range");if(c.range=="min"||c.range=="max"){this.range.addClass("ui-slider-range-"+c.range)}this.range.addClass("ui-widget-header")}if(a(".ui-slider-handle",this.element).length==0){a('<a href="#"></a>').appendTo(this.element).addClass("ui-slider-handle")}if(c.values&&c.values.length){while(a(".ui-slider-handle",this.element).length<c.values.length){a('<a href="#"></a>').appendTo(this.element).addClass("ui-slider-handle")}}this.handles=a(".ui-slider-handle",this.element).addClass("ui-state-default ui-corner-all");this.handle=this.handles.eq(0);this.handles.add(this.range).filter("a").click(function(d){d.preventDefault()}).hover(function(){if(!c.disabled){a(this).addClass("ui-state-hover")}},function(){a(this).removeClass("ui-state-hover")}).focus(function(){if(!c.disabled){a(".ui-slider .ui-state-focus").removeClass("ui-state-focus");a(this).addClass("ui-state-focus")}else{a(this).blur()}}).blur(function(){a(this).removeClass("ui-state-focus")});this.handles.each(function(d){a(this).data("index.ui-slider-handle",d)});this.handles.keydown(function(i){var f=true;var e=a(this).data("index.ui-slider-handle");if(b.options.disabled){return}switch(i.keyCode){case a.ui.keyCode.HOME:case a.ui.keyCode.END:case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:f=false;if(!b._keySliding){b._keySliding=true;a(this).addClass("ui-state-active");b._start(i,e)}break}var g,d,h=b._step();if(b.options.values&&b.options.values.length){g=d=b.values(e)}else{g=d=b.value()}switch(i.keyCode){case a.ui.keyCode.HOME:d=b._valueMin();break;case a.ui.keyCode.END:d=b._valueMax();break;case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:if(g==b._valueMax()){return}d=g+h;break;case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(g==b._valueMin()){return}d=g-h;break}b._slide(i,e,d);return f}).keyup(function(e){var d=a(this).data("index.ui-slider-handle");if(b._keySliding){b._stop(e,d);b._change(e,d);b._keySliding=false;a(this).removeClass("ui-state-active")}});this._refreshValue()},destroy:function(){this.handles.remove();this.range.remove();this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider");this._mouseDestroy()},_mouseCapture:function(d){var e=this.options;if(e.disabled){return false}this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();var h={x:d.pageX,y:d.pageY};var j=this._normValueFromMouse(h);var c=this._valueMax()-this._valueMin()+1,f;var k=this,i;this.handles.each(function(l){var m=Math.abs(j-k.values(l));if(c>m){c=m;f=a(this);i=l}});if(e.range==true&&this.values(1)==e.min){f=a(this.handles[++i])}this._start(d,i);k._handleIndex=i;f.addClass("ui-state-active").focus();var g=f.offset();var b=!a(d.target).parents().andSelf().is(".ui-slider-handle");this._clickOffset=b?{left:0,top:0}:{left:d.pageX-g.left-(f.width()/2),top:d.pageY-g.top-(f.height()/2)-(parseInt(f.css("borderTopWidth"),10)||0)-(parseInt(f.css("borderBottomWidth"),10)||0)+(parseInt(f.css("marginTop"),10)||0)};j=this._normValueFromMouse(h);this._slide(d,i,j);return true},_mouseStart:function(b){return true},_mouseDrag:function(d){var b={x:d.pageX,y:d.pageY};var c=this._normValueFromMouse(b);this._slide(d,this._handleIndex,c);return false},_mouseStop:function(b){this.handles.removeClass("ui-state-active");this._stop(b,this._handleIndex);this._change(b,this._handleIndex);this._handleIndex=null;this._clickOffset=null;return false},_detectOrientation:function(){this.orientation=this.options.orientation=="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(d){var c,h;if("horizontal"==this.orientation){c=this.elementSize.width;h=d.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)}else{c=this.elementSize.height;h=d.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)}var f=(h/c);if(f>1){f=1}if(f<0){f=0}if("vertical"==this.orientation){f=1-f}var e=this._valueMax()-this._valueMin(),i=f*e,b=i%this.options.step,g=this._valueMin()+i-b;if(b>(this.options.step/2)){g+=this.options.step}return parseFloat(g.toFixed(5))},_start:function(d,c){var b={handle:this.handles[c],value:this.value()};if(this.options.values&&this.options.values.length){b.value=this.values(c);b.values=this.values()}this._trigger("start",d,b)},_slide:function(f,e,d){var g=this.handles[e];if(this.options.values&&this.options.values.length){var b=this.values(e?0:1);if((this.options.values.length==2&&this.options.range===true)&&((e==0&&d>b)||(e==1&&d<b))){d=b}if(d!=this.values(e)){var c=this.values();c[e]=d;var h=this._trigger("slide",f,{handle:this.handles[e],value:d,values:c});var b=this.values(e?0:1);if(h!==false){this.values(e,d,(f.type=="mousedown"&&this.options.animate),true)}}}else{if(d!=this.value()){var h=this._trigger("slide",f,{handle:this.handles[e],value:d});if(h!==false){this._setData("value",d,(f.type=="mousedown"&&this.options.animate))}}}},_stop:function(d,c){var b={handle:this.handles[c],value:this.value()};if(this.options.values&&this.options.values.length){b.value=this.values(c);b.values=this.values()}this._trigger("stop",d,b)},_change:function(d,c){var b={handle:this.handles[c],value:this.value()};if(this.options.values&&this.options.values.length){b.value=this.values(c);b.values=this.values()}this._trigger("change",d,b)},value:function(b){if(arguments.length){this._setData("value",b);this._change(null,0)}return this._value()},values:function(b,e,c,d){if(arguments.length>1){this.options.values[b]=e;this._refreshValue(c);if(!d){this._change(null,b)}}if(arguments.length){if(this.options.values&&this.options.values.length){return this._values(b)}else{return this.value()}}else{return this._values()}},_setData:function(b,d,c){a.widget.prototype._setData.apply(this,arguments);switch(b){case"disabled":if(d){this.handles.filter(".ui-state-focus").blur();this.handles.removeClass("ui-state-hover");this.handles.attr("disabled","disabled")}else{this.handles.removeAttr("disabled")}case"orientation":this._detectOrientation();this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation);this._refreshValue(c);break;case"value":this._refreshValue(c);break}},_step:function(){var b=this.options.step;return b},_value:function(){var b=this.options.value;if(b<this._valueMin()){b=this._valueMin()}if(b>this._valueMax()){b=this._valueMax()}return b},_values:function(b){if(arguments.length){var c=this.options.values[b];if(c<this._valueMin()){c=this._valueMin()}if(c>this._valueMax()){c=this._valueMax()}return c}else{return this.options.values}},_valueMin:function(){var b=this.options.min;return b},_valueMax:function(){var b=this.options.max;return b},_refreshValue:function(c){var f=this.options.range,d=this.options,l=this;if(this.options.values&&this.options.values.length){var i,h;this.handles.each(function(p,n){var o=(l.values(p)-l._valueMin())/(l._valueMax()-l._valueMin())*100;var m={};m[l.orientation=="horizontal"?"left":"bottom"]=o+"%";a(this).stop(1,1)[c?"animate":"css"](m,d.animate);if(l.options.range===true){if(l.orientation=="horizontal"){(p==0)&&l.range.stop(1,1)[c?"animate":"css"]({left:o+"%"},d.animate);(p==1)&&l.range[c?"animate":"css"]({width:(o-lastValPercent)+"%"},{queue:false,duration:d.animate})}else{(p==0)&&l.range.stop(1,1)[c?"animate":"css"]({bottom:(o)+"%"},d.animate);(p==1)&&l.range[c?"animate":"css"]({height:(o-lastValPercent)+"%"},{queue:false,duration:d.animate})}}lastValPercent=o})}else{var j=this.value(),g=this._valueMin(),k=this._valueMax(),e=k!=g?(j-g)/(k-g)*100:0;var b={};b[l.orientation=="horizontal"?"left":"bottom"]=e+"%";this.handle.stop(1,1)[c?"animate":"css"](b,d.animate);(f=="min")&&(this.orientation=="horizontal")&&this.range.stop(1,1)[c?"animate":"css"]({width:e+"%"},d.animate);(f=="max")&&(this.orientation=="horizontal")&&this.range[c?"animate":"css"]({width:(100-e)+"%"},{queue:false,duration:d.animate});(f=="min")&&(this.orientation=="vertical")&&this.range.stop(1,1)[c?"animate":"css"]({height:e+"%"},d.animate);(f=="max")&&(this.orientation=="vertical")&&this.range[c?"animate":"css"]({height:(100-e)+"%"},{queue:false,duration:d.animate})}}}));a.extend(a.ui.slider,{getter:"value values",version:"1.7.2",eventPrefix:"slide",defaults:{animate:false,delay:0,distance:0,max:100,min:0,orientation:"horizontal",range:false,step:1,value:0,values:null}})})(jQuery);;(function(a){a.widget("ui.tabs",{_init:function(){if(this.options.deselectable!==undefined){this.options.collapsible=this.options.deselectable}this._tabify(true)},_setData:function(b,c){if(b=="selected"){if(this.options.collapsible&&c==this.options.selected){return}this.select(c)}else{this.options[b]=c;if(b=="deselectable"){this.options.collapsible=c}this._tabify()}},_tabId:function(b){return b.title&&b.title.replace(/\s/g,"_").replace(/[^A-Za-z0-9\-_:\.]/g,"")||this.options.idPrefix+a.data(b)},_sanitizeSelector:function(b){return b.replace(/:/g,"\\:")},_cookie:function(){var b=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+a.data(this.list[0]));return a.cookie.apply(null,[b].concat(a.makeArray(arguments)))},_ui:function(c,b){return{tab:c,panel:b,index:this.anchors.index(c)}},_cleanup:function(){this.lis.filter(".ui-state-processing").removeClass("ui-state-processing").find("span:data(label.tabs)").each(function(){var b=a(this);b.html(b.data("label.tabs")).removeData("label.tabs")})},_tabify:function(n){this.list=this.element.children("ul:first");this.lis=a("li:has(a[href])",this.list);this.anchors=this.lis.map(function(){return a("a",this)[0]});this.panels=a([]);var p=this,d=this.options;var c=/^#.+/;this.anchors.each(function(r,o){var q=a(o).attr("href");var s=q.split("#")[0],u;if(s&&(s===location.toString().split("#")[0]||(u=a("base")[0])&&s===u.href)){q=o.hash;o.href=q}if(c.test(q)){p.panels=p.panels.add(p._sanitizeSelector(q))}else{if(q!="#"){a.data(o,"href.tabs",q);a.data(o,"load.tabs",q.replace(/#.*$/,""));var w=p._tabId(o);o.href="#"+w;var v=a("#"+w);if(!v.length){v=a(d.panelTemplate).attr("id",w).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").insertAfter(p.panels[r-1]||p.list);v.data("destroy.tabs",true)}p.panels=p.panels.add(v)}else{d.disabled.push(r)}}});if(n){this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all");this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all");this.lis.addClass("ui-state-default ui-corner-top");this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom");if(d.selected===undefined){if(location.hash){this.anchors.each(function(q,o){if(o.hash==location.hash){d.selected=q;return false}})}if(typeof d.selected!="number"&&d.cookie){d.selected=parseInt(p._cookie(),10)}if(typeof d.selected!="number"&&this.lis.filter(".ui-tabs-selected").length){d.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"))}d.selected=d.selected||0}else{if(d.selected===null){d.selected=-1}}d.selected=((d.selected>=0&&this.anchors[d.selected])||d.selected<0)?d.selected:0;d.disabled=a.unique(d.disabled.concat(a.map(this.lis.filter(".ui-state-disabled"),function(q,o){return p.lis.index(q)}))).sort();if(a.inArray(d.selected,d.disabled)!=-1){d.disabled.splice(a.inArray(d.selected,d.disabled),1)}this.panels.addClass("ui-tabs-hide");this.lis.removeClass("ui-tabs-selected ui-state-active");if(d.selected>=0&&this.anchors.length){this.panels.eq(d.selected).removeClass("ui-tabs-hide");this.lis.eq(d.selected).addClass("ui-tabs-selected ui-state-active");p.element.queue("tabs",function(){p._trigger("show",null,p._ui(p.anchors[d.selected],p.panels[d.selected]))});this.load(d.selected)}a(window).bind("unload",function(){p.lis.add(p.anchors).unbind(".tabs");p.lis=p.anchors=p.panels=null})}else{d.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"))}this.element[d.collapsible?"addClass":"removeClass"]("ui-tabs-collapsible");if(d.cookie){this._cookie(d.selected,d.cookie)}for(var g=0,m;(m=this.lis[g]);g++){a(m)[a.inArray(g,d.disabled)!=-1&&!a(m).hasClass("ui-tabs-selected")?"addClass":"removeClass"]("ui-state-disabled")}if(d.cache===false){this.anchors.removeData("cache.tabs")}this.lis.add(this.anchors).unbind(".tabs");if(d.event!="mouseover"){var f=function(o,i){if(i.is(":not(.ui-state-disabled)")){i.addClass("ui-state-"+o)}};var j=function(o,i){i.removeClass("ui-state-"+o)};this.lis.bind("mouseover.tabs",function(){f("hover",a(this))});this.lis.bind("mouseout.tabs",function(){j("hover",a(this))});this.anchors.bind("focus.tabs",function(){f("focus",a(this).closest("li"))});this.anchors.bind("blur.tabs",function(){j("focus",a(this).closest("li"))})}var b,h;if(d.fx){if(a.isArray(d.fx)){b=d.fx[0];h=d.fx[1]}else{b=h=d.fx}}function e(i,o){i.css({display:""});if(a.browser.msie&&o.opacity){i[0].style.removeAttribute("filter")}}var k=h?function(i,o){a(i).closest("li").removeClass("ui-state-default").addClass("ui-tabs-selected ui-state-active");o.hide().removeClass("ui-tabs-hide").animate(h,h.duration||"normal",function(){e(o,h);p._trigger("show",null,p._ui(i,o[0]))})}:function(i,o){a(i).closest("li").removeClass("ui-state-default").addClass("ui-tabs-selected ui-state-active");o.removeClass("ui-tabs-hide");p._trigger("show",null,p._ui(i,o[0]))};var l=b?function(o,i){i.animate(b,b.duration||"normal",function(){p.lis.removeClass("ui-tabs-selected ui-state-active").addClass("ui-state-default");i.addClass("ui-tabs-hide");e(i,b);p.element.dequeue("tabs")})}:function(o,i,q){p.lis.removeClass("ui-tabs-selected ui-state-active").addClass("ui-state-default");i.addClass("ui-tabs-hide");p.element.dequeue("tabs")};this.anchors.bind(d.event+".tabs",function(){var o=this,r=a(this).closest("li"),i=p.panels.filter(":not(.ui-tabs-hide)"),q=a(p._sanitizeSelector(this.hash));if((r.hasClass("ui-tabs-selected")&&!d.collapsible)||r.hasClass("ui-state-disabled")||r.hasClass("ui-state-processing")||p._trigger("select",null,p._ui(this,q[0]))===false){this.blur();return false}d.selected=p.anchors.index(this);p.abort();if(d.collapsible){if(r.hasClass("ui-tabs-selected")){d.selected=-1;if(d.cookie){p._cookie(d.selected,d.cookie)}p.element.queue("tabs",function(){l(o,i)}).dequeue("tabs");this.blur();return false}else{if(!i.length){if(d.cookie){p._cookie(d.selected,d.cookie)}p.element.queue("tabs",function(){k(o,q)});p.load(p.anchors.index(this));this.blur();return false}}}if(d.cookie){p._cookie(d.selected,d.cookie)}if(q.length){if(i.length){p.element.queue("tabs",function(){l(o,i)})}p.element.queue("tabs",function(){k(o,q)});p.load(p.anchors.index(this))}else{throw"jQuery UI Tabs: Mismatching fragment identifier."}if(a.browser.msie){this.blur()}});this.anchors.bind("click.tabs",function(){return false})},destroy:function(){var b=this.options;this.abort();this.element.unbind(".tabs").removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible").removeData("tabs");this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all");this.anchors.each(function(){var c=a.data(this,"href.tabs");if(c){this.href=c}var d=a(this).unbind(".tabs");a.each(["href","load","cache"],function(e,f){d.removeData(f+".tabs")})});this.lis.unbind(".tabs").add(this.panels).each(function(){if(a.data(this,"destroy.tabs")){a(this).remove()}else{a(this).removeClass(["ui-state-default","ui-corner-top","ui-tabs-selected","ui-state-active","ui-state-hover","ui-state-focus","ui-state-disabled","ui-tabs-panel","ui-widget-content","ui-corner-bottom","ui-tabs-hide"].join(" "))}});if(b.cookie){this._cookie(null,b.cookie)}},add:function(e,d,c){if(c===undefined){c=this.anchors.length}var b=this,g=this.options,i=a(g.tabTemplate.replace(/#\{href\}/g,e).replace(/#\{label\}/g,d)),h=!e.indexOf("#")?e.replace("#",""):this._tabId(a("a",i)[0]);i.addClass("ui-state-default ui-corner-top").data("destroy.tabs",true);var f=a("#"+h);if(!f.length){f=a(g.panelTemplate).attr("id",h).data("destroy.tabs",true)}f.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide");if(c>=this.lis.length){i.appendTo(this.list);f.appendTo(this.list[0].parentNode)}else{i.insertBefore(this.lis[c]);f.insertBefore(this.panels[c])}g.disabled=a.map(g.disabled,function(k,j){return k>=c?++k:k});this._tabify();if(this.anchors.length==1){i.addClass("ui-tabs-selected ui-state-active");f.removeClass("ui-tabs-hide");this.element.queue("tabs",function(){b._trigger("show",null,b._ui(b.anchors[0],b.panels[0]))});this.load(0)}this._trigger("add",null,this._ui(this.anchors[c],this.panels[c]))},remove:function(b){var d=this.options,e=this.lis.eq(b).remove(),c=this.panels.eq(b).remove();if(e.hasClass("ui-tabs-selected")&&this.anchors.length>1){this.select(b+(b+1<this.anchors.length?1:-1))}d.disabled=a.map(a.grep(d.disabled,function(g,f){return g!=b}),function(g,f){return g>=b?--g:g});this._tabify();this._trigger("remove",null,this._ui(e.find("a")[0],c[0]))},enable:function(b){var c=this.options;if(a.inArray(b,c.disabled)==-1){return}this.lis.eq(b).removeClass("ui-state-disabled");c.disabled=a.grep(c.disabled,function(e,d){return e!=b});this._trigger("enable",null,this._ui(this.anchors[b],this.panels[b]))},disable:function(c){var b=this,d=this.options;if(c!=d.selected){this.lis.eq(c).addClass("ui-state-disabled");d.disabled.push(c);d.disabled.sort();this._trigger("disable",null,this._ui(this.anchors[c],this.panels[c]))}},select:function(b){if(typeof b=="string"){b=this.anchors.index(this.anchors.filter("[href$="+b+"]"))}else{if(b===null){b=-1}}if(b==-1&&this.options.collapsible){b=this.options.selected}this.anchors.eq(b).trigger(this.options.event+".tabs")},load:function(e){var c=this,g=this.options,b=this.anchors.eq(e)[0],d=a.data(b,"load.tabs");this.abort();if(!d||this.element.queue("tabs").length!==0&&a.data(b,"cache.tabs")){this.element.dequeue("tabs");return}this.lis.eq(e).addClass("ui-state-processing");if(g.spinner){var f=a("span",b);f.data("label.tabs",f.html()).html(g.spinner)}this.xhr=a.ajax(a.extend({},g.ajaxOptions,{url:d,success:function(i,h){a(c._sanitizeSelector(b.hash)).html(i);c._cleanup();if(g.cache){a.data(b,"cache.tabs",true)}c._trigger("load",null,c._ui(c.anchors[e],c.panels[e]));try{g.ajaxOptions.success(i,h)}catch(j){}c.element.dequeue("tabs")}}))},abort:function(){this.element.queue([]);this.panels.stop(false,true);if(this.xhr){this.xhr.abort();delete this.xhr}this._cleanup()},url:function(c,b){this.anchors.eq(c).removeData("cache.tabs").data("load.tabs",b)},length:function(){return this.anchors.length}});a.extend(a.ui.tabs,{version:"1.7.2",getter:"length",defaults:{ajaxOptions:null,cache:false,cookie:null,collapsible:false,disabled:[],event:"click",fx:null,idPrefix:"ui-tabs-",panelTemplate:"<div></div>",spinner:"<em>Loading&#8230;</em>",tabTemplate:'<li><a href="#{href}"><span>#{label}</span></a></li>'}});a.extend(a.ui.tabs.prototype,{rotation:null,rotate:function(d,f){var b=this,g=this.options;var c=b._rotate||(b._rotate=function(h){clearTimeout(b.rotation);b.rotation=setTimeout(function(){var i=g.selected;b.select(++i<b.anchors.length?i:0)},d);if(h){h.stopPropagation()}});var e=b._unrotate||(b._unrotate=!f?function(h){if(h.clientX){b.rotate(null)}}:function(h){t=g.selected;c()});if(d){this.element.bind("tabsshow",c);this.anchors.bind(g.event+".tabs",e);c()}else{clearTimeout(b.rotation);this.element.unbind("tabsshow",c);this.anchors.unbind(g.event+".tabs",e);delete this._rotate;delete this._unrotate}}})})(jQuery);;(function($){$.extend($.ui,{datepicker:{version:"1.7.2"}});var PROP_NAME="datepicker";function Datepicker(){this.debug=false;this._curInst=null;this._keyEvent=false;this._disabledInputs=[];this._datepickerShowing=false;this._inDialog=false;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass="ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],dateFormat:"mm/dd/yy",firstDay:0,isRTL:false};this._defaults={showOn:"focus",showAnim:"show",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:false,hideIfNoPrevNext:false,navigationAsDateFormat:false,gotoCurrent:false,changeMonth:false,changeYear:false,showMonthAfterYear:false,yearRange:"-10:+10",showOtherMonths:false,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"normal",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:true,showButtonPanel:false};$.extend(this._defaults,this.regional[""]);this.dpDiv=$('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all ui-helper-hidden-accessible"></div>')}$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",log:function(){if(this.debug){console.log.apply("",arguments)}},setDefaults:function(settings){extendRemove(this._defaults,settings||{});return this},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase();var inline=(nodeName=="div"||nodeName=="span");if(!target.id){target.id="dp"+(++this.uuid)}var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{});if(nodeName=="input"){this._connectDatepicker(target,inst)}else{if(inline){this._inlineDatepicker(target,inst)}}},_newInst:function(target,inline){var id=target[0].id.replace(/([:\[\]\.])/g,"\\\\$1");return{id:id,input:target,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:inline,dpDiv:(!inline?this.dpDiv:$('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}},_connectDatepicker:function(target,inst){var input=$(target);inst.append=$([]);inst.trigger=$([]);if(input.hasClass(this.markerClassName)){return}var appendText=this._get(inst,"appendText");var isRTL=this._get(inst,"isRTL");if(appendText){inst.append=$('<span class="'+this._appendClass+'">'+appendText+"</span>");input[isRTL?"before":"after"](inst.append)}var showOn=this._get(inst,"showOn");if(showOn=="focus"||showOn=="both"){input.focus(this._showDatepicker)}if(showOn=="button"||showOn=="both"){var buttonText=this._get(inst,"buttonText");var buttonImage=this._get(inst,"buttonImage");inst.trigger=$(this._get(inst,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:buttonImage,alt:buttonText,title:buttonText}):$('<button type="button"></button>').addClass(this._triggerClass).html(buttonImage==""?buttonText:$("<img/>").attr({src:buttonImage,alt:buttonText,title:buttonText})));input[isRTL?"before":"after"](inst.trigger);inst.trigger.click(function(){if($.datepicker._datepickerShowing&&$.datepicker._lastInput==target){$.datepicker._hideDatepicker()}else{$.datepicker._showDatepicker(target)}return false})}input.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).bind("setData.datepicker",function(event,key,value){inst.settings[key]=value}).bind("getData.datepicker",function(event,key){return this._get(inst,key)});$.data(target,PROP_NAME,inst)},_inlineDatepicker:function(target,inst){var divSpan=$(target);if(divSpan.hasClass(this.markerClassName)){return}divSpan.addClass(this.markerClassName).append(inst.dpDiv).bind("setData.datepicker",function(event,key,value){inst.settings[key]=value}).bind("getData.datepicker",function(event,key){return this._get(inst,key)});$.data(target,PROP_NAME,inst);this._setDate(inst,this._getDefaultDate(inst));this._updateDatepicker(inst);this._updateAlternate(inst)},_dialogDatepicker:function(input,dateText,onSelect,settings,pos){var inst=this._dialogInst;if(!inst){var id="dp"+(++this.uuid);this._dialogInput=$('<input type="text" id="'+id+'" size="1" style="position: absolute; top: -100px;"/>');this._dialogInput.keydown(this._doKeyDown);$("body").append(this._dialogInput);inst=this._dialogInst=this._newInst(this._dialogInput,false);inst.settings={};$.data(this._dialogInput[0],PROP_NAME,inst)}extendRemove(inst.settings,settings||{});this._dialogInput.val(dateText);this._pos=(pos?(pos.length?pos:[pos.pageX,pos.pageY]):null);if(!this._pos){var browserWidth=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;var browserHeight=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;var scrollX=document.documentElement.scrollLeft||document.body.scrollLeft;var scrollY=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[(browserWidth/2)-100+scrollX,(browserHeight/2)-150+scrollY]}this._dialogInput.css("left",this._pos[0]+"px").css("top",this._pos[1]+"px");inst.settings.onSelect=onSelect;this._inDialog=true;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);if($.blockUI){$.blockUI(this.dpDiv)}$.data(this._dialogInput[0],PROP_NAME,inst);return this},_destroyDatepicker:function(target){var $target=$(target);var inst=$.data(target,PROP_NAME);if(!$target.hasClass(this.markerClassName)){return}var nodeName=target.nodeName.toLowerCase();$.removeData(target,PROP_NAME);if(nodeName=="input"){inst.append.remove();inst.trigger.remove();$target.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress)}else{if(nodeName=="div"||nodeName=="span"){$target.removeClass(this.markerClassName).empty()}}},_enableDatepicker:function(target){var $target=$(target);var inst=$.data(target,PROP_NAME);if(!$target.hasClass(this.markerClassName)){return}var nodeName=target.nodeName.toLowerCase();if(nodeName=="input"){target.disabled=false;inst.trigger.filter("button").each(function(){this.disabled=false}).end().filter("img").css({opacity:"1.0",cursor:""})}else{if(nodeName=="div"||nodeName=="span"){var inline=$target.children("."+this._inlineClass);inline.children().removeClass("ui-state-disabled")}}this._disabledInputs=$.map(this._disabledInputs,function(value){return(value==target?null:value)})},_disableDatepicker:function(target){var $target=$(target);var inst=$.data(target,PROP_NAME);if(!$target.hasClass(this.markerClassName)){return}var nodeName=target.nodeName.toLowerCase();if(nodeName=="input"){target.disabled=true;inst.trigger.filter("button").each(function(){this.disabled=true}).end().filter("img").css({opacity:"0.5",cursor:"default"})}else{if(nodeName=="div"||nodeName=="span"){var inline=$target.children("."+this._inlineClass);inline.children().addClass("ui-state-disabled")}}this._disabledInputs=$.map(this._disabledInputs,function(value){return(value==target?null:value)});this._disabledInputs[this._disabledInputs.length]=target},_isDisabledDatepicker:function(target){if(!target){return false}for(var i=0;i<this._disabledInputs.length;i++){if(this._disabledInputs[i]==target){return true}}return false},_getInst:function(target){try{return $.data(target,PROP_NAME)}catch(err){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(target,name,value){var inst=this._getInst(target);if(arguments.length==2&&typeof name=="string"){return(name=="defaults"?$.extend({},$.datepicker._defaults):(inst?(name=="all"?$.extend({},inst.settings):this._get(inst,name)):null))}var settings=name||{};if(typeof name=="string"){settings={};settings[name]=value}if(inst){if(this._curInst==inst){this._hideDatepicker(null)}var date=this._getDateDatepicker(target);extendRemove(inst.settings,settings);this._setDateDatepicker(target,date);this._updateDatepicker(inst)}},_changeDatepicker:function(target,name,value){this._optionDatepicker(target,name,value)},_refreshDatepicker:function(target){var inst=this._getInst(target);if(inst){this._updateDatepicker(inst)}},_setDateDatepicker:function(target,date,endDate){var inst=this._getInst(target);if(inst){this._setDate(inst,date,endDate);this._updateDatepicker(inst);this._updateAlternate(inst)}},_getDateDatepicker:function(target){var inst=this._getInst(target);if(inst&&!inst.inline){this._setDateFromField(inst)}return(inst?this._getDate(inst):null)},_doKeyDown:function(event){var inst=$.datepicker._getInst(event.target);var handled=true;var isRTL=inst.dpDiv.is(".ui-datepicker-rtl");inst._keyEvent=true;if($.datepicker._datepickerShowing){switch(event.keyCode){case 9:$.datepicker._hideDatepicker(null,"");break;case 13:var sel=$("td."+$.datepicker._dayOverClass+", td."+$.datepicker._currentClass,inst.dpDiv);if(sel[0]){$.datepicker._selectDay(event.target,inst.selectedMonth,inst.selectedYear,sel[0])}else{$.datepicker._hideDatepicker(null,$.datepicker._get(inst,"duration"))}return false;break;case 27:$.datepicker._hideDatepicker(null,$.datepicker._get(inst,"duration"));break;case 33:$.datepicker._adjustDate(event.target,(event.ctrlKey?-$.datepicker._get(inst,"stepBigMonths"):-$.datepicker._get(inst,"stepMonths")),"M");break;case 34:$.datepicker._adjustDate(event.target,(event.ctrlKey?+$.datepicker._get(inst,"stepBigMonths"):+$.datepicker._get(inst,"stepMonths")),"M");break;case 35:if(event.ctrlKey||event.metaKey){$.datepicker._clearDate(event.target)}handled=event.ctrlKey||event.metaKey;break;case 36:if(event.ctrlKey||event.metaKey){$.datepicker._gotoToday(event.target)}handled=event.ctrlKey||event.metaKey;break;case 37:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,(isRTL?+1:-1),"D")}handled=event.ctrlKey||event.metaKey;if(event.originalEvent.altKey){$.datepicker._adjustDate(event.target,(event.ctrlKey?-$.datepicker._get(inst,"stepBigMonths"):-$.datepicker._get(inst,"stepMonths")),"M")}break;case 38:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,-7,"D")}handled=event.ctrlKey||event.metaKey;break;case 39:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,(isRTL?-1:+1),"D")}handled=event.ctrlKey||event.metaKey;if(event.originalEvent.altKey){$.datepicker._adjustDate(event.target,(event.ctrlKey?+$.datepicker._get(inst,"stepBigMonths"):+$.datepicker._get(inst,"stepMonths")),"M")}break;case 40:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,+7,"D")}handled=event.ctrlKey||event.metaKey;break;default:handled=false}}else{if(event.keyCode==36&&event.ctrlKey){$.datepicker._showDatepicker(this)}else{handled=false}}if(handled){event.preventDefault();event.stopPropagation()}},_doKeyPress:function(event){var inst=$.datepicker._getInst(event.target);if($.datepicker._get(inst,"constrainInput")){var chars=$.datepicker._possibleChars($.datepicker._get(inst,"dateFormat"));var chr=String.fromCharCode(event.charCode==undefined?event.keyCode:event.charCode);return event.ctrlKey||(chr<" "||!chars||chars.indexOf(chr)>-1)}},_showDatepicker:function(input){input=input.target||input;if(input.nodeName.toLowerCase()!="input"){input=$("input",input.parentNode)[0]}if($.datepicker._isDisabledDatepicker(input)||$.datepicker._lastInput==input){return}var inst=$.datepicker._getInst(input);var beforeShow=$.datepicker._get(inst,"beforeShow");extendRemove(inst.settings,(beforeShow?beforeShow.apply(input,[input,inst]):{}));$.datepicker._hideDatepicker(null,"");$.datepicker._lastInput=input;$.datepicker._setDateFromField(inst);if($.datepicker._inDialog){input.value=""}if(!$.datepicker._pos){$.datepicker._pos=$.datepicker._findPos(input);$.datepicker._pos[1]+=input.offsetHeight}var isFixed=false;$(input).parents().each(function(){isFixed|=$(this).css("position")=="fixed";return!isFixed});if(isFixed&&$.browser.opera){$.datepicker._pos[0]-=document.documentElement.scrollLeft;$.datepicker._pos[1]-=document.documentElement.scrollTop}var offset={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};$.datepicker._pos=null;inst.rangeStart=null;inst.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});$.datepicker._updateDatepicker(inst);offset=$.datepicker._checkOffset(inst,offset,isFixed);inst.dpDiv.css({position:($.datepicker._inDialog&&$.blockUI?"static":(isFixed?"fixed":"absolute")),display:"none",left:offset.left+"px",top:offset.top+"px"});if(!inst.inline){var showAnim=$.datepicker._get(inst,"showAnim")||"show";var duration=$.datepicker._get(inst,"duration");var postProcess=function(){$.datepicker._datepickerShowing=true;if($.browser.msie&&parseInt($.browser.version,10)<7){$("iframe.ui-datepicker-cover").css({width:inst.dpDiv.width()+4,height:inst.dpDiv.height()+4})}};if($.effects&&$.effects[showAnim]){inst.dpDiv.show(showAnim,$.datepicker._get(inst,"showOptions"),duration,postProcess)}else{inst.dpDiv[showAnim](duration,postProcess)}if(duration==""){postProcess()}if(inst.input[0].type!="hidden"){inst.input[0].focus()}$.datepicker._curInst=inst}},_updateDatepicker:function(inst){var dims={width:inst.dpDiv.width()+4,height:inst.dpDiv.height()+4};var self=this;inst.dpDiv.empty().append(this._generateHTML(inst)).find("iframe.ui-datepicker-cover").css({width:dims.width,height:dims.height}).end().find("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a").bind("mouseout",function(){$(this).removeClass("ui-state-hover");if(this.className.indexOf("ui-datepicker-prev")!=-1){$(this).removeClass("ui-datepicker-prev-hover")}if(this.className.indexOf("ui-datepicker-next")!=-1){$(this).removeClass("ui-datepicker-next-hover")}}).bind("mouseover",function(){if(!self._isDisabledDatepicker(inst.inline?inst.dpDiv.parent()[0]:inst.input[0])){$(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover");$(this).addClass("ui-state-hover");if(this.className.indexOf("ui-datepicker-prev")!=-1){$(this).addClass("ui-datepicker-prev-hover")}if(this.className.indexOf("ui-datepicker-next")!=-1){$(this).addClass("ui-datepicker-next-hover")}}}).end().find("."+this._dayOverClass+" a").trigger("mouseover").end();var numMonths=this._getNumberOfMonths(inst);var cols=numMonths[1];var width=17;if(cols>1){inst.dpDiv.addClass("ui-datepicker-multi-"+cols).css("width",(width*cols)+"em")}else{inst.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("")}inst.dpDiv[(numMonths[0]!=1||numMonths[1]!=1?"add":"remove")+"Class"]("ui-datepicker-multi");inst.dpDiv[(this._get(inst,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");if(inst.input&&inst.input[0].type!="hidden"&&inst==$.datepicker._curInst){$(inst.input[0]).focus()}},_checkOffset:function(inst,offset,isFixed){var dpWidth=inst.dpDiv.outerWidth();var dpHeight=inst.dpDiv.outerHeight();var inputWidth=inst.input?inst.input.outerWidth():0;var inputHeight=inst.input?inst.input.outerHeight():0;var viewWidth=(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)+$(document).scrollLeft();var viewHeight=(window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight)+$(document).scrollTop();offset.left-=(this._get(inst,"isRTL")?(dpWidth-inputWidth):0);offset.left-=(isFixed&&offset.left==inst.input.offset().left)?$(document).scrollLeft():0;offset.top-=(isFixed&&offset.top==(inst.input.offset().top+inputHeight))?$(document).scrollTop():0;offset.left-=(offset.left+dpWidth>viewWidth&&viewWidth>dpWidth)?Math.abs(offset.left+dpWidth-viewWidth):0;offset.top-=(offset.top+dpHeight>viewHeight&&viewHeight>dpHeight)?Math.abs(offset.top+dpHeight+inputHeight*2-viewHeight):0;return offset},_findPos:function(obj){while(obj&&(obj.type=="hidden"||obj.nodeType!=1)){obj=obj.nextSibling}var position=$(obj).offset();return[position.left,position.top]},_hideDatepicker:function(input,duration){var inst=this._curInst;if(!inst||(input&&inst!=$.data(input,PROP_NAME))){return}if(inst.stayOpen){this._selectDate("#"+inst.id,this._formatDate(inst,inst.currentDay,inst.currentMonth,inst.currentYear))}inst.stayOpen=false;if(this._datepickerShowing){duration=(duration!=null?duration:this._get(inst,"duration"));var showAnim=this._get(inst,"showAnim");var postProcess=function(){$.datepicker._tidyDialog(inst)};if(duration!=""&&$.effects&&$.effects[showAnim]){inst.dpDiv.hide(showAnim,$.datepicker._get(inst,"showOptions"),duration,postProcess)}else{inst.dpDiv[(duration==""?"hide":(showAnim=="slideDown"?"slideUp":(showAnim=="fadeIn"?"fadeOut":"hide")))](duration,postProcess)}if(duration==""){this._tidyDialog(inst)}var onClose=this._get(inst,"onClose");if(onClose){onClose.apply((inst.input?inst.input[0]:null),[(inst.input?inst.input.val():""),inst])}this._datepickerShowing=false;this._lastInput=null;if(this._inDialog){this._dialogInput.css({position:"absolute",left:"0",top:"-100px"});if($.blockUI){$.unblockUI();$("body").append(this.dpDiv)}}this._inDialog=false}this._curInst=null},_tidyDialog:function(inst){inst.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(event){if(!$.datepicker._curInst){return}var $target=$(event.target);if(($target.parents("#"+$.datepicker._mainDivId).length==0)&&!$target.hasClass($.datepicker.markerClassName)&&!$target.hasClass($.datepicker._triggerClass)&&$.datepicker._datepickerShowing&&!($.datepicker._inDialog&&$.blockUI)){$.datepicker._hideDatepicker(null,"")}},_adjustDate:function(id,offset,period){var target=$(id);var inst=this._getInst(target[0]);if(this._isDisabledDatepicker(target[0])){return}this._adjustInstDate(inst,offset+(period=="M"?this._get(inst,"showCurrentAtPos"):0),period);this._updateDatepicker(inst)},_gotoToday:function(id){var target=$(id);var inst=this._getInst(target[0]);if(this._get(inst,"gotoCurrent")&&inst.currentDay){inst.selectedDay=inst.currentDay;inst.drawMonth=inst.selectedMonth=inst.currentMonth;inst.drawYear=inst.selectedYear=inst.currentYear}else{var date=new Date();inst.selectedDay=date.getDate();inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear()}this._notifyChange(inst);this._adjustDate(target)},_selectMonthYear:function(id,select,period){var target=$(id);var inst=this._getInst(target[0]);inst._selectingMonthYear=false;inst["selected"+(period=="M"?"Month":"Year")]=inst["draw"+(period=="M"?"Month":"Year")]=parseInt(select.options[select.selectedIndex].value,10);this._notifyChange(inst);this._adjustDate(target)},_clickMonthYear:function(id){var target=$(id);var inst=this._getInst(target[0]);if(inst.input&&inst._selectingMonthYear&&!$.browser.msie){inst.input[0].focus()}inst._selectingMonthYear=!inst._selectingMonthYear},_selectDay:function(id,month,year,td){var target=$(id);if($(td).hasClass(this._unselectableClass)||this._isDisabledDatepicker(target[0])){return}var inst=this._getInst(target[0]);inst.selectedDay=inst.currentDay=$("a",td).html();inst.selectedMonth=inst.currentMonth=month;inst.selectedYear=inst.currentYear=year;if(inst.stayOpen){inst.endDay=inst.endMonth=inst.endYear=null}this._selectDate(id,this._formatDate(inst,inst.currentDay,inst.currentMonth,inst.currentYear));if(inst.stayOpen){inst.rangeStart=this._daylightSavingAdjust(new Date(inst.currentYear,inst.currentMonth,inst.currentDay));this._updateDatepicker(inst)}},_clearDate:function(id){var target=$(id);var inst=this._getInst(target[0]);inst.stayOpen=false;inst.endDay=inst.endMonth=inst.endYear=inst.rangeStart=null;this._selectDate(target,"")},_selectDate:function(id,dateStr){var target=$(id);var inst=this._getInst(target[0]);dateStr=(dateStr!=null?dateStr:this._formatDate(inst));if(inst.input){inst.input.val(dateStr)}this._updateAlternate(inst);var onSelect=this._get(inst,"onSelect");if(onSelect){onSelect.apply((inst.input?inst.input[0]:null),[dateStr,inst])}else{if(inst.input){inst.input.trigger("change")}}if(inst.inline){this._updateDatepicker(inst)}else{if(!inst.stayOpen){this._hideDatepicker(null,this._get(inst,"duration"));this._lastInput=inst.input[0];if(typeof(inst.input[0])!="object"){inst.input[0].focus()}this._lastInput=null}}},_updateAlternate:function(inst){var altField=this._get(inst,"altField");if(altField){var altFormat=this._get(inst,"altFormat")||this._get(inst,"dateFormat");var date=this._getDate(inst);dateStr=this.formatDate(altFormat,date,this._getFormatConfig(inst));$(altField).each(function(){$(this).val(dateStr)})}},noWeekends:function(date){var day=date.getDay();return[(day>0&&day<6),""]},iso8601Week:function(date){var checkDate=new Date(date.getFullYear(),date.getMonth(),date.getDate());var firstMon=new Date(checkDate.getFullYear(),1-1,4);var firstDay=firstMon.getDay()||7;firstMon.setDate(firstMon.getDate()+1-firstDay);if(firstDay<4&&checkDate<firstMon){checkDate.setDate(checkDate.getDate()-3);return $.datepicker.iso8601Week(checkDate)}else{if(checkDate>new Date(checkDate.getFullYear(),12-1,28)){firstDay=new Date(checkDate.getFullYear()+1,1-1,4).getDay()||7;if(firstDay>4&&(checkDate.getDay()||7)<firstDay-3){return 1}}}return Math.floor(((checkDate-firstMon)/86400000)/7)+1},parseDate:function(format,value,settings){if(format==null||value==null){throw"Invalid arguments"}value=(typeof value=="object"?value.toString():value+"");if(value==""){return null}var shortYearCutoff=(settings?settings.shortYearCutoff:null)||this._defaults.shortYearCutoff;var dayNamesShort=(settings?settings.dayNamesShort:null)||this._defaults.dayNamesShort;var dayNames=(settings?settings.dayNames:null)||this._defaults.dayNames;var monthNamesShort=(settings?settings.monthNamesShort:null)||this._defaults.monthNamesShort;var monthNames=(settings?settings.monthNames:null)||this._defaults.monthNames;var year=-1;var month=-1;var day=-1;var doy=-1;var literal=false;var lookAhead=function(match){var matches=(iFormat+1<format.length&&format.charAt(iFormat+1)==match);if(matches){iFormat++}return matches};var getNumber=function(match){lookAhead(match);var origSize=(match=="@"?14:(match=="y"?4:(match=="o"?3:2)));var size=origSize;var num=0;while(size>0&&iValue<value.length&&value.charAt(iValue)>="0"&&value.charAt(iValue)<="9"){num=num*10+parseInt(value.charAt(iValue++),10);size--}if(size==origSize){throw"Missing number at position "+iValue}return num};var getName=function(match,shortNames,longNames){var names=(lookAhead(match)?longNames:shortNames);var size=0;for(var j=0;j<names.length;j++){size=Math.max(size,names[j].length)}var name="";var iInit=iValue;while(size>0&&iValue<value.length){name+=value.charAt(iValue++);for(var i=0;i<names.length;i++){if(name==names[i]){return i+1}}size--}throw"Unknown name at position "+iInit};var checkLiteral=function(){if(value.charAt(iValue)!=format.charAt(iFormat)){throw"Unexpected literal at position "+iValue}iValue++};var iValue=0;for(var iFormat=0;iFormat<format.length;iFormat++){if(literal){if(format.charAt(iFormat)=="'"&&!lookAhead("'")){literal=false}else{checkLiteral()}}else{switch(format.charAt(iFormat)){case"d":day=getNumber("d");break;case"D":getName("D",dayNamesShort,dayNames);break;case"o":doy=getNumber("o");break;case"m":month=getNumber("m");break;case"M":month=getName("M",monthNamesShort,monthNames);break;case"y":year=getNumber("y");break;case"@":var date=new Date(getNumber("@"));year=date.getFullYear();month=date.getMonth()+1;day=date.getDate();break;case"'":if(lookAhead("'")){checkLiteral()}else{literal=true}break;default:checkLiteral()}}}if(year==-1){year=new Date().getFullYear()}else{if(year<100){year+=new Date().getFullYear()-new Date().getFullYear()%100+(year<=shortYearCutoff?0:-100)}}if(doy>-1){month=1;day=doy;do{var dim=this._getDaysInMonth(year,month-1);if(day<=dim){break}month++;day-=dim}while(true)}var date=this._daylightSavingAdjust(new Date(year,month-1,day));if(date.getFullYear()!=year||date.getMonth()+1!=month||date.getDate()!=day){throw"Invalid date"}return date},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TIMESTAMP:"@",W3C:"yy-mm-dd",formatDate:function(format,date,settings){if(!date){return""}var dayNamesShort=(settings?settings.dayNamesShort:null)||this._defaults.dayNamesShort;var dayNames=(settings?settings.dayNames:null)||this._defaults.dayNames;var monthNamesShort=(settings?settings.monthNamesShort:null)||this._defaults.monthNamesShort;var monthNames=(settings?settings.monthNames:null)||this._defaults.monthNames;var lookAhead=function(match){var matches=(iFormat+1<format.length&&format.charAt(iFormat+1)==match);if(matches){iFormat++}return matches};var formatNumber=function(match,value,len){var num=""+value;if(lookAhead(match)){while(num.length<len){num="0"+num}}return num};var formatName=function(match,value,shortNames,longNames){return(lookAhead(match)?longNames[value]:shortNames[value])};var output="";var literal=false;if(date){for(var iFormat=0;iFormat<format.length;iFormat++){if(literal){if(format.charAt(iFormat)=="'"&&!lookAhead("'")){literal=false}else{output+=format.charAt(iFormat)}}else{switch(format.charAt(iFormat)){case"d":output+=formatNumber("d",date.getDate(),2);break;case"D":output+=formatName("D",date.getDay(),dayNamesShort,dayNames);break;case"o":var doy=date.getDate();for(var m=date.getMonth()-1;m>=0;m--){doy+=this._getDaysInMonth(date.getFullYear(),m)}output+=formatNumber("o",doy,3);break;case"m":output+=formatNumber("m",date.getMonth()+1,2);break;case"M":output+=formatName("M",date.getMonth(),monthNamesShort,monthNames);break;case"y":output+=(lookAhead("y")?date.getFullYear():(date.getYear()%100<10?"0":"")+date.getYear()%100);break;case"@":output+=date.getTime();break;case"'":if(lookAhead("'")){output+="'"}else{literal=true}break;default:output+=format.charAt(iFormat)}}}}return output},_possibleChars:function(format){var chars="";var literal=false;for(var iFormat=0;iFormat<format.length;iFormat++){if(literal){if(format.charAt(iFormat)=="'"&&!lookAhead("'")){literal=false}else{chars+=format.charAt(iFormat)}}else{switch(format.charAt(iFormat)){case"d":case"m":case"y":case"@":chars+="0123456789";break;case"D":case"M":return null;case"'":if(lookAhead("'")){chars+="'"}else{literal=true}break;default:chars+=format.charAt(iFormat)}}}return chars},_get:function(inst,name){return inst.settings[name]!==undefined?inst.settings[name]:this._defaults[name]},_setDateFromField:function(inst){var dateFormat=this._get(inst,"dateFormat");var dates=inst.input?inst.input.val():null;inst.endDay=inst.endMonth=inst.endYear=null;var date=defaultDate=this._getDefaultDate(inst);var settings=this._getFormatConfig(inst);try{date=this.parseDate(dateFormat,dates,settings)||defaultDate}catch(event){this.log(event);date=defaultDate}inst.selectedDay=date.getDate();inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear();inst.currentDay=(dates?date.getDate():0);inst.currentMonth=(dates?date.getMonth():0);inst.currentYear=(dates?date.getFullYear():0);this._adjustInstDate(inst)},_getDefaultDate:function(inst){var date=this._determineDate(this._get(inst,"defaultDate"),new Date());var minDate=this._getMinMaxDate(inst,"min",true);var maxDate=this._getMinMaxDate(inst,"max");date=(minDate&&date<minDate?minDate:date);date=(maxDate&&date>maxDate?maxDate:date);return date},_determineDate:function(date,defaultDate){var offsetNumeric=function(offset){var date=new Date();date.setDate(date.getDate()+offset);return date};var offsetString=function(offset,getDaysInMonth){var date=new Date();var year=date.getFullYear();var month=date.getMonth();var day=date.getDate();var pattern=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g;var matches=pattern.exec(offset);while(matches){switch(matches[2]||"d"){case"d":case"D":day+=parseInt(matches[1],10);break;case"w":case"W":day+=parseInt(matches[1],10)*7;break;case"m":case"M":month+=parseInt(matches[1],10);day=Math.min(day,getDaysInMonth(year,month));break;case"y":case"Y":year+=parseInt(matches[1],10);day=Math.min(day,getDaysInMonth(year,month));break}matches=pattern.exec(offset)}return new Date(year,month,day)};date=(date==null?defaultDate:(typeof date=="string"?offsetString(date,this._getDaysInMonth):(typeof date=="number"?(isNaN(date)?defaultDate:offsetNumeric(date)):date)));date=(date&&date.toString()=="Invalid Date"?defaultDate:date);if(date){date.setHours(0);date.setMinutes(0);date.setSeconds(0);date.setMilliseconds(0)}return this._daylightSavingAdjust(date)},_daylightSavingAdjust:function(date){if(!date){return null}date.setHours(date.getHours()>12?date.getHours()+2:0);return date},_setDate:function(inst,date,endDate){var clear=!(date);var origMonth=inst.selectedMonth;var origYear=inst.selectedYear;date=this._determineDate(date,new Date());inst.selectedDay=inst.currentDay=date.getDate();inst.drawMonth=inst.selectedMonth=inst.currentMonth=date.getMonth();inst.drawYear=inst.selectedYear=inst.currentYear=date.getFullYear();if(origMonth!=inst.selectedMonth||origYear!=inst.selectedYear){this._notifyChange(inst)}this._adjustInstDate(inst);if(inst.input){inst.input.val(clear?"":this._formatDate(inst))}},_getDate:function(inst){var startDate=(!inst.currentYear||(inst.input&&inst.input.val()=="")?null:this._daylightSavingAdjust(new Date(inst.currentYear,inst.currentMonth,inst.currentDay)));return startDate},_generateHTML:function(inst){var today=new Date();today=this._daylightSavingAdjust(new Date(today.getFullYear(),today.getMonth(),today.getDate()));var isRTL=this._get(inst,"isRTL");var showButtonPanel=this._get(inst,"showButtonPanel");var hideIfNoPrevNext=this._get(inst,"hideIfNoPrevNext");var navigationAsDateFormat=this._get(inst,"navigationAsDateFormat");var numMonths=this._getNumberOfMonths(inst);var showCurrentAtPos=this._get(inst,"showCurrentAtPos");var stepMonths=this._get(inst,"stepMonths");var stepBigMonths=this._get(inst,"stepBigMonths");var isMultiMonth=(numMonths[0]!=1||numMonths[1]!=1);var currentDate=this._daylightSavingAdjust((!inst.currentDay?new Date(9999,9,9):new Date(inst.currentYear,inst.currentMonth,inst.currentDay)));var minDate=this._getMinMaxDate(inst,"min",true);var maxDate=this._getMinMaxDate(inst,"max");var drawMonth=inst.drawMonth-showCurrentAtPos;var drawYear=inst.drawYear;if(drawMonth<0){drawMonth+=12;drawYear--}if(maxDate){var maxDraw=this._daylightSavingAdjust(new Date(maxDate.getFullYear(),maxDate.getMonth()-numMonths[1]+1,maxDate.getDate()));maxDraw=(minDate&&maxDraw<minDate?minDate:maxDraw);while(this._daylightSavingAdjust(new Date(drawYear,drawMonth,1))>maxDraw){drawMonth--;if(drawMonth<0){drawMonth=11;drawYear--}}}inst.drawMonth=drawMonth;inst.drawYear=drawYear;var prevText=this._get(inst,"prevText");prevText=(!navigationAsDateFormat?prevText:this.formatDate(prevText,this._daylightSavingAdjust(new Date(drawYear,drawMonth-stepMonths,1)),this._getFormatConfig(inst)));var prev=(this._canAdjustMonth(inst,-1,drawYear,drawMonth)?'<a class="ui-datepicker-prev ui-corner-all" onclick="DP_jQuery.datepicker._adjustDate(\'#'+inst.id+"', -"+stepMonths+", 'M');\" title=\""+prevText+'"><span class="ui-icon ui-icon-circle-triangle-'+(isRTL?"e":"w")+'">'+prevText+"</span></a>":(hideIfNoPrevNext?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+prevText+'"><span class="ui-icon ui-icon-circle-triangle-'+(isRTL?"e":"w")+'">'+prevText+"</span></a>"));var nextText=this._get(inst,"nextText");nextText=(!navigationAsDateFormat?nextText:this.formatDate(nextText,this._daylightSavingAdjust(new Date(drawYear,drawMonth+stepMonths,1)),this._getFormatConfig(inst)));var next=(this._canAdjustMonth(inst,+1,drawYear,drawMonth)?'<a class="ui-datepicker-next ui-corner-all" onclick="DP_jQuery.datepicker._adjustDate(\'#'+inst.id+"', +"+stepMonths+", 'M');\" title=\""+nextText+'"><span class="ui-icon ui-icon-circle-triangle-'+(isRTL?"w":"e")+'">'+nextText+"</span></a>":(hideIfNoPrevNext?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+nextText+'"><span class="ui-icon ui-icon-circle-triangle-'+(isRTL?"w":"e")+'">'+nextText+"</span></a>"));var currentText=this._get(inst,"currentText");var gotoDate=(this._get(inst,"gotoCurrent")&&inst.currentDay?currentDate:today);currentText=(!navigationAsDateFormat?currentText:this.formatDate(currentText,gotoDate,this._getFormatConfig(inst)));var controls=(!inst.inline?'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" onclick="DP_jQuery.datepicker._hideDatepicker();">'+this._get(inst,"closeText")+"</button>":"");var buttonPanel=(showButtonPanel)?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(isRTL?controls:"")+(this._isInRange(inst,gotoDate)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" onclick="DP_jQuery.datepicker._gotoToday(\'#'+inst.id+"');\">"+currentText+"</button>":"")+(isRTL?"":controls)+"</div>":"";var firstDay=parseInt(this._get(inst,"firstDay"),10);firstDay=(isNaN(firstDay)?0:firstDay);var dayNames=this._get(inst,"dayNames");var dayNamesShort=this._get(inst,"dayNamesShort");var dayNamesMin=this._get(inst,"dayNamesMin");var monthNames=this._get(inst,"monthNames");var monthNamesShort=this._get(inst,"monthNamesShort");var beforeShowDay=this._get(inst,"beforeShowDay");var showOtherMonths=this._get(inst,"showOtherMonths");var calculateWeek=this._get(inst,"calculateWeek")||this.iso8601Week;var endDate=inst.endDay?this._daylightSavingAdjust(new Date(inst.endYear,inst.endMonth,inst.endDay)):currentDate;var defaultDate=this._getDefaultDate(inst);var html="";for(var row=0;row<numMonths[0];row++){var group="";for(var col=0;col<numMonths[1];col++){var selectedDate=this._daylightSavingAdjust(new Date(drawYear,drawMonth,inst.selectedDay));var cornerClass=" ui-corner-all";var calender="";if(isMultiMonth){calender+='<div class="ui-datepicker-group ui-datepicker-group-';switch(col){case 0:calender+="first";cornerClass=" ui-corner-"+(isRTL?"right":"left");break;case numMonths[1]-1:calender+="last";cornerClass=" ui-corner-"+(isRTL?"left":"right");break;default:calender+="middle";cornerClass="";break}calender+='">'}calender+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+cornerClass+'">'+(/all|left/.test(cornerClass)&&row==0?(isRTL?next:prev):"")+(/all|right/.test(cornerClass)&&row==0?(isRTL?prev:next):"")+this._generateMonthYearHeader(inst,drawMonth,drawYear,minDate,maxDate,selectedDate,row>0||col>0,monthNames,monthNamesShort)+'</div><table class="ui-datepicker-calendar"><thead><tr>';var thead="";for(var dow=0;dow<7;dow++){var day=(dow+firstDay)%7;thead+="<th"+((dow+firstDay+6)%7>=5?' class="ui-datepicker-week-end"':"")+'><span title="'+dayNames[day]+'">'+dayNamesMin[day]+"</span></th>"}calender+=thead+"</tr></thead><tbody>";var daysInMonth=this._getDaysInMonth(drawYear,drawMonth);if(drawYear==inst.selectedYear&&drawMonth==inst.selectedMonth){inst.selectedDay=Math.min(inst.selectedDay,daysInMonth)}var leadDays=(this._getFirstDayOfMonth(drawYear,drawMonth)-firstDay+7)%7;var numRows=(isMultiMonth?6:Math.ceil((leadDays+daysInMonth)/7));var printDate=this._daylightSavingAdjust(new Date(drawYear,drawMonth,1-leadDays));for(var dRow=0;dRow<numRows;dRow++){calender+="<tr>";var tbody="";for(var dow=0;dow<7;dow++){var daySettings=(beforeShowDay?beforeShowDay.apply((inst.input?inst.input[0]:null),[printDate]):[true,""]);var otherMonth=(printDate.getMonth()!=drawMonth);var unselectable=otherMonth||!daySettings[0]||(minDate&&printDate<minDate)||(maxDate&&printDate>maxDate);tbody+='<td class="'+((dow+firstDay+6)%7>=5?" ui-datepicker-week-end":"")+(otherMonth?" ui-datepicker-other-month":"")+((printDate.getTime()==selectedDate.getTime()&&drawMonth==inst.selectedMonth&&inst._keyEvent)||(defaultDate.getTime()==printDate.getTime()&&defaultDate.getTime()==selectedDate.getTime())?" "+this._dayOverClass:"")+(unselectable?" "+this._unselectableClass+" ui-state-disabled":"")+(otherMonth&&!showOtherMonths?"":" "+daySettings[1]+(printDate.getTime()>=currentDate.getTime()&&printDate.getTime()<=endDate.getTime()?" "+this._currentClass:"")+(printDate.getTime()==today.getTime()?" ui-datepicker-today":""))+'"'+((!otherMonth||showOtherMonths)&&daySettings[2]?' title="'+daySettings[2]+'"':"")+(unselectable?"":" onclick=\"DP_jQuery.datepicker._selectDay('#"+inst.id+"',"+drawMonth+","+drawYear+', this);return false;"')+">"+(otherMonth?(showOtherMonths?printDate.getDate():"&#xa0;"):(unselectable?'<span class="ui-state-default">'+printDate.getDate()+"</span>":'<a class="ui-state-default'+(printDate.getTime()==today.getTime()?" ui-state-highlight":"")+(printDate.getTime()>=currentDate.getTime()&&printDate.getTime()<=endDate.getTime()?" ui-state-active":"")+'" href="#">'+printDate.getDate()+"</a>"))+"</td>";printDate.setDate(printDate.getDate()+1);printDate=this._daylightSavingAdjust(printDate)}calender+=tbody+"</tr>"}drawMonth++;if(drawMonth>11){drawMonth=0;drawYear++}calender+="</tbody></table>"+(isMultiMonth?"</div>"+((numMonths[0]>0&&col==numMonths[1]-1)?'<div class="ui-datepicker-row-break"></div>':""):"");group+=calender}html+=group}html+=buttonPanel+($.browser.msie&&parseInt($.browser.version,10)<7&&!inst.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':"");inst._keyEvent=false;return html},_generateMonthYearHeader:function(inst,drawMonth,drawYear,minDate,maxDate,selectedDate,secondary,monthNames,monthNamesShort){minDate=(inst.rangeStart&&minDate&&selectedDate<minDate?selectedDate:minDate);var changeMonth=this._get(inst,"changeMonth");var changeYear=this._get(inst,"changeYear");var showMonthAfterYear=this._get(inst,"showMonthAfterYear");var html='<div class="ui-datepicker-title">';var monthHtml="";if(secondary||!changeMonth){monthHtml+='<span class="ui-datepicker-month">'+monthNames[drawMonth]+"</span> "}else{var inMinYear=(minDate&&minDate.getFullYear()==drawYear);var inMaxYear=(maxDate&&maxDate.getFullYear()==drawYear);monthHtml+='<select class="ui-datepicker-month" onchange="DP_jQuery.datepicker._selectMonthYear(\'#'+inst.id+"', this, 'M');\" onclick=\"DP_jQuery.datepicker._clickMonthYear('#"+inst.id+"');\">";for(var month=0;month<12;month++){if((!inMinYear||month>=minDate.getMonth())&&(!inMaxYear||month<=maxDate.getMonth())){monthHtml+='<option value="'+month+'"'+(month==drawMonth?' selected="selected"':"")+">"+monthNamesShort[month]+"</option>"}}monthHtml+="</select>"}if(!showMonthAfterYear){html+=monthHtml+((secondary||changeMonth||changeYear)&&(!(changeMonth&&changeYear))?"&#xa0;":"")}if(secondary||!changeYear){html+='<span class="ui-datepicker-year">'+drawYear+"</span>"}else{var years=this._get(inst,"yearRange").split(":");var year=0;var endYear=0;if(years.length!=2){year=drawYear-10;endYear=drawYear+10}else{if(years[0].charAt(0)=="+"||years[0].charAt(0)=="-"){year=drawYear+parseInt(years[0],10);endYear=drawYear+parseInt(years[1],10)}else{year=parseInt(years[0],10);endYear=parseInt(years[1],10)}}year=(minDate?Math.max(year,minDate.getFullYear()):year);endYear=(maxDate?Math.min(endYear,maxDate.getFullYear()):endYear);html+='<select class="ui-datepicker-year" onchange="DP_jQuery.datepicker._selectMonthYear(\'#'+inst.id+"', this, 'Y');\" onclick=\"DP_jQuery.datepicker._clickMonthYear('#"+inst.id+"');\">";for(;year<=endYear;year++){html+='<option value="'+year+'"'+(year==drawYear?' selected="selected"':"")+">"+year+"</option>"}html+="</select>"}if(showMonthAfterYear){html+=(secondary||changeMonth||changeYear?"&#xa0;":"")+monthHtml}html+="</div>";return html},_adjustInstDate:function(inst,offset,period){var year=inst.drawYear+(period=="Y"?offset:0);var month=inst.drawMonth+(period=="M"?offset:0);var day=Math.min(inst.selectedDay,this._getDaysInMonth(year,month))+(period=="D"?offset:0);var date=this._daylightSavingAdjust(new Date(year,month,day));var minDate=this._getMinMaxDate(inst,"min",true);var maxDate=this._getMinMaxDate(inst,"max");date=(minDate&&date<minDate?minDate:date);date=(maxDate&&date>maxDate?maxDate:date);inst.selectedDay=date.getDate();inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear();if(period=="M"||period=="Y"){this._notifyChange(inst)}},_notifyChange:function(inst){var onChange=this._get(inst,"onChangeMonthYear");if(onChange){onChange.apply((inst.input?inst.input[0]:null),[inst.selectedYear,inst.selectedMonth+1,inst])}},_getNumberOfMonths:function(inst){var numMonths=this._get(inst,"numberOfMonths");return(numMonths==null?[1,1]:(typeof numMonths=="number"?[1,numMonths]:numMonths))},_getMinMaxDate:function(inst,minMax,checkRange){var date=this._determineDate(this._get(inst,minMax+"Date"),null);return(!checkRange||!inst.rangeStart?date:(!date||inst.rangeStart>date?inst.rangeStart:date))},_getDaysInMonth:function(year,month){return 32-new Date(year,month,32).getDate()},_getFirstDayOfMonth:function(year,month){return new Date(year,month,1).getDay()},_canAdjustMonth:function(inst,offset,curYear,curMonth){var numMonths=this._getNumberOfMonths(inst);var date=this._daylightSavingAdjust(new Date(curYear,curMonth+(offset<0?offset:numMonths[1]),1));if(offset<0){date.setDate(this._getDaysInMonth(date.getFullYear(),date.getMonth()))}return this._isInRange(inst,date)},_isInRange:function(inst,date){var newMinDate=(!inst.rangeStart?null:this._daylightSavingAdjust(new Date(inst.selectedYear,inst.selectedMonth,inst.selectedDay)));newMinDate=(newMinDate&&inst.rangeStart<newMinDate?inst.rangeStart:newMinDate);var minDate=newMinDate||this._getMinMaxDate(inst,"min");var maxDate=this._getMinMaxDate(inst,"max");return((!minDate||date>=minDate)&&(!maxDate||date<=maxDate))},_getFormatConfig:function(inst){var shortYearCutoff=this._get(inst,"shortYearCutoff");shortYearCutoff=(typeof shortYearCutoff!="string"?shortYearCutoff:new Date().getFullYear()%100+parseInt(shortYearCutoff,10));return{shortYearCutoff:shortYearCutoff,dayNamesShort:this._get(inst,"dayNamesShort"),dayNames:this._get(inst,"dayNames"),monthNamesShort:this._get(inst,"monthNamesShort"),monthNames:this._get(inst,"monthNames")}},_formatDate:function(inst,day,month,year){if(!day){inst.currentDay=inst.selectedDay;inst.currentMonth=inst.selectedMonth;inst.currentYear=inst.selectedYear}var date=(day?(typeof day=="object"?day:this._daylightSavingAdjust(new Date(year,month,day))):this._daylightSavingAdjust(new Date(inst.currentYear,inst.currentMonth,inst.currentDay)));return this.formatDate(this._get(inst,"dateFormat"),date,this._getFormatConfig(inst))}});function extendRemove(target,props){$.extend(target,props);for(var name in props){if(props[name]==null||props[name]==undefined){target[name]=props[name]}}return target}function isArray(a){return(a&&(($.browser.safari&&typeof a=="object"&&a.length)||(a.constructor&&a.constructor.toString().match(/\Array\(\)/))))}$.fn.datepicker=function(options){if(!$.datepicker.initialized){$(document).mousedown($.datepicker._checkExternalClick).find("body").append($.datepicker.dpDiv);$.datepicker.initialized=true}var otherArgs=Array.prototype.slice.call(arguments,1);if(typeof options=="string"&&(options=="isDisabled"||options=="getDate")){return $.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this[0]].concat(otherArgs))}if(options=="option"&&arguments.length==2&&typeof arguments[1]=="string"){return $.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this[0]].concat(otherArgs))}return this.each(function(){typeof options=="string"?$.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this].concat(otherArgs)):$.datepicker._attachDatepicker(this,options)})};$.datepicker=new Datepicker();$.datepicker.initialized=false;$.datepicker.uuid=new Date().getTime();$.datepicker.version="1.7.2";window.DP_jQuery=$})(jQuery);;(function(a){a.widget("ui.progressbar",{_init:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this._valueMin(),"aria-valuemax":this._valueMax(),"aria-valuenow":this._value()});this.valueDiv=a('<div class="ui-progressbar-value ui-widget-header ui-corner-left"></div>').appendTo(this.element);this._refreshValue()},destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow").removeData("progressbar").unbind(".progressbar");this.valueDiv.remove();a.widget.prototype.destroy.apply(this,arguments)},value:function(b){if(b===undefined){return this._value()}this._setData("value",b);return this},_setData:function(b,c){switch(b){case"value":this.options.value=c;this._refreshValue();this._trigger("change",null,{});break}a.widget.prototype._setData.apply(this,arguments)},_value:function(){var b=this.options.value;if(b<this._valueMin()){b=this._valueMin()}if(b>this._valueMax()){b=this._valueMax()}return b},_valueMin:function(){var b=0;return b},_valueMax:function(){var b=100;return b},_refreshValue:function(){var b=this.value();this.valueDiv[b==this._valueMax()?"addClass":"removeClass"]("ui-corner-right");this.valueDiv.width(b+"%");this.element.attr("aria-valuenow",b)}});a.extend(a.ui.progressbar,{version:"1.7.2",defaults:{value:0}})})(jQuery);;jQuery.effects||(function(d){d.effects={version:"1.7.2",save:function(g,h){for(var f=0;f<h.length;f++){if(h[f]!==null){g.data("ec.storage."+h[f],g[0].style[h[f]])}}},restore:function(g,h){for(var f=0;f<h.length;f++){if(h[f]!==null){g.css(h[f],g.data("ec.storage."+h[f]))}}},setMode:function(f,g){if(g=="toggle"){g=f.is(":hidden")?"show":"hide"}return g},getBaseline:function(g,h){var i,f;switch(g[0]){case"top":i=0;break;case"middle":i=0.5;break;case"bottom":i=1;break;default:i=g[0]/h.height}switch(g[1]){case"left":f=0;break;case"center":f=0.5;break;case"right":f=1;break;default:f=g[1]/h.width}return{x:f,y:i}},createWrapper:function(f){if(f.parent().is(".ui-effects-wrapper")){return f.parent()}var g={width:f.outerWidth(true),height:f.outerHeight(true),"float":f.css("float")};f.wrap('<div class="ui-effects-wrapper" style="font-size:100%;background:transparent;border:none;margin:0;padding:0"></div>');var j=f.parent();if(f.css("position")=="static"){j.css({position:"relative"});f.css({position:"relative"})}else{var i=f.css("top");if(isNaN(parseInt(i,10))){i="auto"}var h=f.css("left");if(isNaN(parseInt(h,10))){h="auto"}j.css({position:f.css("position"),top:i,left:h,zIndex:f.css("z-index")}).show();f.css({position:"relative",top:0,left:0})}j.css(g);return j},removeWrapper:function(f){if(f.parent().is(".ui-effects-wrapper")){return f.parent().replaceWith(f)}return f},setTransition:function(g,i,f,h){h=h||{};d.each(i,function(k,j){unit=g.cssUnit(j);if(unit[0]>0){h[j]=unit[0]*f+unit[1]}});return h},animateClass:function(h,i,k,j){var f=(typeof k=="function"?k:(j?j:null));var g=(typeof k=="string"?k:null);return this.each(function(){var q={};var o=d(this);var p=o.attr("style")||"";if(typeof p=="object"){p=p.cssText}if(h.toggle){o.hasClass(h.toggle)?h.remove=h.toggle:h.add=h.toggle}var l=d.extend({},(document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle));if(h.add){o.addClass(h.add)}if(h.remove){o.removeClass(h.remove)}var m=d.extend({},(document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle));if(h.add){o.removeClass(h.add)}if(h.remove){o.addClass(h.remove)}for(var r in m){if(typeof m[r]!="function"&&m[r]&&r.indexOf("Moz")==-1&&r.indexOf("length")==-1&&m[r]!=l[r]&&(r.match(/color/i)||(!r.match(/color/i)&&!isNaN(parseInt(m[r],10))))&&(l.position!="static"||(l.position=="static"&&!r.match(/left|top|bottom|right/)))){q[r]=m[r]}}o.animate(q,i,g,function(){if(typeof d(this).attr("style")=="object"){d(this).attr("style")["cssText"]="";d(this).attr("style")["cssText"]=p}else{d(this).attr("style",p)}if(h.add){d(this).addClass(h.add)}if(h.remove){d(this).removeClass(h.remove)}if(f){f.apply(this,arguments)}})})}};function c(g,f){var i=g[1]&&g[1].constructor==Object?g[1]:{};if(f){i.mode=f}var h=g[1]&&g[1].constructor!=Object?g[1]:(i.duration?i.duration:g[2]);h=d.fx.off?0:typeof h==="number"?h:d.fx.speeds[h]||d.fx.speeds._default;var j=i.callback||(d.isFunction(g[1])&&g[1])||(d.isFunction(g[2])&&g[2])||(d.isFunction(g[3])&&g[3]);return[g[0],i,h,j]}d.fn.extend({_show:d.fn.show,_hide:d.fn.hide,__toggle:d.fn.toggle,_addClass:d.fn.addClass,_removeClass:d.fn.removeClass,_toggleClass:d.fn.toggleClass,effect:function(g,f,h,i){return d.effects[g]?d.effects[g].call(this,{method:g,options:f||{},duration:h,callback:i}):null},show:function(){if(!arguments[0]||(arguments[0].constructor==Number||(/(slow|normal|fast)/).test(arguments[0]))){return this._show.apply(this,arguments)}else{return this.effect.apply(this,c(arguments,"show"))}},hide:function(){if(!arguments[0]||(arguments[0].constructor==Number||(/(slow|normal|fast)/).test(arguments[0]))){return this._hide.apply(this,arguments)}else{return this.effect.apply(this,c(arguments,"hide"))}},toggle:function(){if(!arguments[0]||(arguments[0].constructor==Number||(/(slow|normal|fast)/).test(arguments[0]))||(d.isFunction(arguments[0])||typeof arguments[0]=="boolean")){return this.__toggle.apply(this,arguments)}else{return this.effect.apply(this,c(arguments,"toggle"))}},addClass:function(g,f,i,h){return f?d.effects.animateClass.apply(this,[{add:g},f,i,h]):this._addClass(g)},removeClass:function(g,f,i,h){return f?d.effects.animateClass.apply(this,[{remove:g},f,i,h]):this._removeClass(g)},toggleClass:function(g,f,i,h){return((typeof f!=="boolean")&&f)?d.effects.animateClass.apply(this,[{toggle:g},f,i,h]):this._toggleClass(g,f)},morph:function(f,h,g,j,i){return d.effects.animateClass.apply(this,[{add:h,remove:f},g,j,i])},switchClass:function(){return this.morph.apply(this,arguments)},cssUnit:function(f){var g=this.css(f),h=[];d.each(["em","px","%","pt"],function(j,k){if(g.indexOf(k)>0){h=[parseFloat(g),k]}});return h}});d.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","color","outlineColor"],function(g,f){d.fx.step[f]=function(h){if(h.state==0){h.start=e(h.elem,f);h.end=b(h.end)}h.elem.style[f]="rgb("+[Math.max(Math.min(parseInt((h.pos*(h.end[0]-h.start[0]))+h.start[0],10),255),0),Math.max(Math.min(parseInt((h.pos*(h.end[1]-h.start[1]))+h.start[1],10),255),0),Math.max(Math.min(parseInt((h.pos*(h.end[2]-h.start[2]))+h.start[2],10),255),0)].join(",")+")"}});function b(g){var f;if(g&&g.constructor==Array&&g.length==3){return g}if(f=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(g)){return[parseInt(f[1],10),parseInt(f[2],10),parseInt(f[3],10)]}if(f=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(g)){return[parseFloat(f[1])*2.55,parseFloat(f[2])*2.55,parseFloat(f[3])*2.55]}if(f=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(g)){return[parseInt(f[1],16),parseInt(f[2],16),parseInt(f[3],16)]}if(f=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(g)){return[parseInt(f[1]+f[1],16),parseInt(f[2]+f[2],16),parseInt(f[3]+f[3],16)]}if(f=/rgba\(0, 0, 0, 0\)/.exec(g)){return a.transparent}return a[d.trim(g).toLowerCase()]}function e(h,f){var g;do{g=d.curCSS(h,f);if(g!=""&&g!="transparent"||d.nodeName(h,"body")){break}f="backgroundColor"}while(h=h.parentNode);return b(g)}var a={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]};d.easing.jswing=d.easing.swing;d.extend(d.easing,{def:"easeOutQuad",swing:function(g,h,f,j,i){return d.easing[d.easing.def](g,h,f,j,i)},easeInQuad:function(g,h,f,j,i){return j*(h/=i)*h+f},easeOutQuad:function(g,h,f,j,i){return-j*(h/=i)*(h-2)+f},easeInOutQuad:function(g,h,f,j,i){if((h/=i/2)<1){return j/2*h*h+f}return-j/2*((--h)*(h-2)-1)+f},easeInCubic:function(g,h,f,j,i){return j*(h/=i)*h*h+f},easeOutCubic:function(g,h,f,j,i){return j*((h=h/i-1)*h*h+1)+f},easeInOutCubic:function(g,h,f,j,i){if((h/=i/2)<1){return j/2*h*h*h+f}return j/2*((h-=2)*h*h+2)+f},easeInQuart:function(g,h,f,j,i){return j*(h/=i)*h*h*h+f},easeOutQuart:function(g,h,f,j,i){return-j*((h=h/i-1)*h*h*h-1)+f},easeInOutQuart:function(g,h,f,j,i){if((h/=i/2)<1){return j/2*h*h*h*h+f}return-j/2*((h-=2)*h*h*h-2)+f},easeInQuint:function(g,h,f,j,i){return j*(h/=i)*h*h*h*h+f},easeOutQuint:function(g,h,f,j,i){return j*((h=h/i-1)*h*h*h*h+1)+f},easeInOutQuint:function(g,h,f,j,i){if((h/=i/2)<1){return j/2*h*h*h*h*h+f}return j/2*((h-=2)*h*h*h*h+2)+f},easeInSine:function(g,h,f,j,i){return-j*Math.cos(h/i*(Math.PI/2))+j+f},easeOutSine:function(g,h,f,j,i){return j*Math.sin(h/i*(Math.PI/2))+f},easeInOutSine:function(g,h,f,j,i){return-j/2*(Math.cos(Math.PI*h/i)-1)+f},easeInExpo:function(g,h,f,j,i){return(h==0)?f:j*Math.pow(2,10*(h/i-1))+f},easeOutExpo:function(g,h,f,j,i){return(h==i)?f+j:j*(-Math.pow(2,-10*h/i)+1)+f},easeInOutExpo:function(g,h,f,j,i){if(h==0){return f}if(h==i){return f+j}if((h/=i/2)<1){return j/2*Math.pow(2,10*(h-1))+f}return j/2*(-Math.pow(2,-10*--h)+2)+f},easeInCirc:function(g,h,f,j,i){return-j*(Math.sqrt(1-(h/=i)*h)-1)+f},easeOutCirc:function(g,h,f,j,i){return j*Math.sqrt(1-(h=h/i-1)*h)+f},easeInOutCirc:function(g,h,f,j,i){if((h/=i/2)<1){return-j/2*(Math.sqrt(1-h*h)-1)+f}return j/2*(Math.sqrt(1-(h-=2)*h)+1)+f},easeInElastic:function(g,i,f,m,l){var j=1.70158;var k=0;var h=m;if(i==0){return f}if((i/=l)==1){return f+m}if(!k){k=l*0.3}if(h<Math.abs(m)){h=m;var j=k/4}else{var j=k/(2*Math.PI)*Math.asin(m/h)}return-(h*Math.pow(2,10*(i-=1))*Math.sin((i*l-j)*(2*Math.PI)/k))+f},easeOutElastic:function(g,i,f,m,l){var j=1.70158;var k=0;var h=m;if(i==0){return f}if((i/=l)==1){return f+m}if(!k){k=l*0.3}if(h<Math.abs(m)){h=m;var j=k/4}else{var j=k/(2*Math.PI)*Math.asin(m/h)}return h*Math.pow(2,-10*i)*Math.sin((i*l-j)*(2*Math.PI)/k)+m+f},easeInOutElastic:function(g,i,f,m,l){var j=1.70158;var k=0;var h=m;if(i==0){return f}if((i/=l/2)==2){return f+m}if(!k){k=l*(0.3*1.5)}if(h<Math.abs(m)){h=m;var j=k/4}else{var j=k/(2*Math.PI)*Math.asin(m/h)}if(i<1){return-0.5*(h*Math.pow(2,10*(i-=1))*Math.sin((i*l-j)*(2*Math.PI)/k))+f}return h*Math.pow(2,-10*(i-=1))*Math.sin((i*l-j)*(2*Math.PI)/k)*0.5+m+f},easeInBack:function(g,h,f,k,j,i){if(i==undefined){i=1.70158}return k*(h/=j)*h*((i+1)*h-i)+f},easeOutBack:function(g,h,f,k,j,i){if(i==undefined){i=1.70158}return k*((h=h/j-1)*h*((i+1)*h+i)+1)+f},easeInOutBack:function(g,h,f,k,j,i){if(i==undefined){i=1.70158}if((h/=j/2)<1){return k/2*(h*h*(((i*=(1.525))+1)*h-i))+f}return k/2*((h-=2)*h*(((i*=(1.525))+1)*h+i)+2)+f},easeInBounce:function(g,h,f,j,i){return j-d.easing.easeOutBounce(g,i-h,0,j,i)+f},easeOutBounce:function(g,h,f,j,i){if((h/=i)<(1/2.75)){return j*(7.5625*h*h)+f}else{if(h<(2/2.75)){return j*(7.5625*(h-=(1.5/2.75))*h+0.75)+f}else{if(h<(2.5/2.75)){return j*(7.5625*(h-=(2.25/2.75))*h+0.9375)+f}else{return j*(7.5625*(h-=(2.625/2.75))*h+0.984375)+f}}}},easeInOutBounce:function(g,h,f,j,i){if(h<i/2){return d.easing.easeInBounce(g,h*2,0,j,i)*0.5+f}return d.easing.easeOutBounce(g,h*2-i,0,j,i)*0.5+j*0.5+f}})})(jQuery);;(function(a){a.effects.blind=function(b){return this.queue(function(){var d=a(this),c=["position","top","left"];var h=a.effects.setMode(d,b.options.mode||"hide");var g=b.options.direction||"vertical";a.effects.save(d,c);d.show();var j=a.effects.createWrapper(d).css({overflow:"hidden"});var e=(g=="vertical")?"height":"width";var i=(g=="vertical")?j.height():j.width();if(h=="show"){j.css(e,0)}var f={};f[e]=h=="show"?i:0;j.animate(f,b.duration,b.options.easing,function(){if(h=="hide"){d.hide()}a.effects.restore(d,c);a.effects.removeWrapper(d);if(b.callback){b.callback.apply(d[0],arguments)}d.dequeue()})})}})(jQuery);;(function(a){a.effects.bounce=function(b){return this.queue(function(){var e=a(this),l=["position","top","left"];var k=a.effects.setMode(e,b.options.mode||"effect");var n=b.options.direction||"up";var c=b.options.distance||20;var d=b.options.times||5;var g=b.duration||250;if(/show|hide/.test(k)){l.push("opacity")}a.effects.save(e,l);e.show();a.effects.createWrapper(e);var f=(n=="up"||n=="down")?"top":"left";var p=(n=="up"||n=="left")?"pos":"neg";var c=b.options.distance||(f=="top"?e.outerHeight({margin:true})/3:e.outerWidth({margin:true})/3);if(k=="show"){e.css("opacity",0).css(f,p=="pos"?-c:c)}if(k=="hide"){c=c/(d*2)}if(k!="hide"){d--}if(k=="show"){var h={opacity:1};h[f]=(p=="pos"?"+=":"-=")+c;e.animate(h,g/2,b.options.easing);c=c/2;d--}for(var j=0;j<d;j++){var o={},m={};o[f]=(p=="pos"?"-=":"+=")+c;m[f]=(p=="pos"?"+=":"-=")+c;e.animate(o,g/2,b.options.easing).animate(m,g/2,b.options.easing);c=(k=="hide")?c*2:c/2}if(k=="hide"){var h={opacity:0};h[f]=(p=="pos"?"-=":"+=")+c;e.animate(h,g/2,b.options.easing,function(){e.hide();a.effects.restore(e,l);a.effects.removeWrapper(e);if(b.callback){b.callback.apply(this,arguments)}})}else{var o={},m={};o[f]=(p=="pos"?"-=":"+=")+c;m[f]=(p=="pos"?"+=":"-=")+c;e.animate(o,g/2,b.options.easing).animate(m,g/2,b.options.easing,function(){a.effects.restore(e,l);a.effects.removeWrapper(e);if(b.callback){b.callback.apply(this,arguments)}})}e.queue("fx",function(){e.dequeue()});e.dequeue()})}})(jQuery);;(function(a){a.effects.clip=function(b){return this.queue(function(){var f=a(this),j=["position","top","left","height","width"];var i=a.effects.setMode(f,b.options.mode||"hide");var k=b.options.direction||"vertical";a.effects.save(f,j);f.show();var c=a.effects.createWrapper(f).css({overflow:"hidden"});var e=f[0].tagName=="IMG"?c:f;var g={size:(k=="vertical")?"height":"width",position:(k=="vertical")?"top":"left"};var d=(k=="vertical")?e.height():e.width();if(i=="show"){e.css(g.size,0);e.css(g.position,d/2)}var h={};h[g.size]=i=="show"?d:0;h[g.position]=i=="show"?0:d/2;e.animate(h,{queue:false,duration:b.duration,easing:b.options.easing,complete:function(){if(i=="hide"){f.hide()}a.effects.restore(f,j);a.effects.removeWrapper(f);if(b.callback){b.callback.apply(f[0],arguments)}f.dequeue()}})})}})(jQuery);;(function(a){a.effects.drop=function(b){return this.queue(function(){var e=a(this),d=["position","top","left","opacity"];var i=a.effects.setMode(e,b.options.mode||"hide");var h=b.options.direction||"left";a.effects.save(e,d);e.show();a.effects.createWrapper(e);var f=(h=="up"||h=="down")?"top":"left";var c=(h=="up"||h=="left")?"pos":"neg";var j=b.options.distance||(f=="top"?e.outerHeight({margin:true})/2:e.outerWidth({margin:true})/2);if(i=="show"){e.css("opacity",0).css(f,c=="pos"?-j:j)}var g={opacity:i=="show"?1:0};g[f]=(i=="show"?(c=="pos"?"+=":"-="):(c=="pos"?"-=":"+="))+j;e.animate(g,{queue:false,duration:b.duration,easing:b.options.easing,complete:function(){if(i=="hide"){e.hide()}a.effects.restore(e,d);a.effects.removeWrapper(e);if(b.callback){b.callback.apply(this,arguments)}e.dequeue()}})})}})(jQuery);;(function(a){a.effects.explode=function(b){return this.queue(function(){var k=b.options.pieces?Math.round(Math.sqrt(b.options.pieces)):3;var e=b.options.pieces?Math.round(Math.sqrt(b.options.pieces)):3;b.options.mode=b.options.mode=="toggle"?(a(this).is(":visible")?"hide":"show"):b.options.mode;var h=a(this).show().css("visibility","hidden");var l=h.offset();l.top-=parseInt(h.css("marginTop"),10)||0;l.left-=parseInt(h.css("marginLeft"),10)||0;var g=h.outerWidth(true);var c=h.outerHeight(true);for(var f=0;f<k;f++){for(var d=0;d<e;d++){h.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-d*(g/e),top:-f*(c/k)}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:g/e,height:c/k,left:l.left+d*(g/e)+(b.options.mode=="show"?(d-Math.floor(e/2))*(g/e):0),top:l.top+f*(c/k)+(b.options.mode=="show"?(f-Math.floor(k/2))*(c/k):0),opacity:b.options.mode=="show"?0:1}).animate({left:l.left+d*(g/e)+(b.options.mode=="show"?0:(d-Math.floor(e/2))*(g/e)),top:l.top+f*(c/k)+(b.options.mode=="show"?0:(f-Math.floor(k/2))*(c/k)),opacity:b.options.mode=="show"?1:0},b.duration||500)}}setTimeout(function(){b.options.mode=="show"?h.css({visibility:"visible"}):h.css({visibility:"visible"}).hide();if(b.callback){b.callback.apply(h[0])}h.dequeue();a("div.ui-effects-explode").remove()},b.duration||500)})}})(jQuery);;(function(a){a.effects.fold=function(b){return this.queue(function(){var e=a(this),k=["position","top","left"];var h=a.effects.setMode(e,b.options.mode||"hide");var o=b.options.size||15;var n=!(!b.options.horizFirst);var g=b.duration?b.duration/2:a.fx.speeds._default/2;a.effects.save(e,k);e.show();var d=a.effects.createWrapper(e).css({overflow:"hidden"});var i=((h=="show")!=n);var f=i?["width","height"]:["height","width"];var c=i?[d.width(),d.height()]:[d.height(),d.width()];var j=/([0-9]+)%/.exec(o);if(j){o=parseInt(j[1],10)/100*c[h=="hide"?0:1]}if(h=="show"){d.css(n?{height:0,width:o}:{height:o,width:0})}var m={},l={};m[f[0]]=h=="show"?c[0]:o;l[f[1]]=h=="show"?c[1]:0;d.animate(m,g,b.options.easing).animate(l,g,b.options.easing,function(){if(h=="hide"){e.hide()}a.effects.restore(e,k);a.effects.removeWrapper(e);if(b.callback){b.callback.apply(e[0],arguments)}e.dequeue()})})}})(jQuery);;(function(a){a.effects.highlight=function(b){return this.queue(function(){var e=a(this),d=["backgroundImage","backgroundColor","opacity"];var h=a.effects.setMode(e,b.options.mode||"show");var c=b.options.color||"#ffff99";var g=e.css("backgroundColor");a.effects.save(e,d);e.show();e.css({backgroundImage:"none",backgroundColor:c});var f={backgroundColor:g};if(h=="hide"){f.opacity=0}e.animate(f,{queue:false,duration:b.duration,easing:b.options.easing,complete:function(){if(h=="hide"){e.hide()}a.effects.restore(e,d);if(h=="show"&&a.browser.msie){this.style.removeAttribute("filter")}if(b.callback){b.callback.apply(this,arguments)}e.dequeue()}})})}})(jQuery);;(function(a){a.effects.pulsate=function(b){return this.queue(function(){var d=a(this);var g=a.effects.setMode(d,b.options.mode||"show");var f=b.options.times||5;var e=b.duration?b.duration/2:a.fx.speeds._default/2;if(g=="hide"){f--}if(d.is(":hidden")){d.css("opacity",0);d.show();d.animate({opacity:1},e,b.options.easing);f=f-2}for(var c=0;c<f;c++){d.animate({opacity:0},e,b.options.easing).animate({opacity:1},e,b.options.easing)}if(g=="hide"){d.animate({opacity:0},e,b.options.easing,function(){d.hide();if(b.callback){b.callback.apply(this,arguments)}})}else{d.animate({opacity:0},e,b.options.easing).animate({opacity:1},e,b.options.easing,function(){if(b.callback){b.callback.apply(this,arguments)}})}d.queue("fx",function(){d.dequeue()});d.dequeue()})}})(jQuery);;(function(a){a.effects.puff=function(b){return this.queue(function(){var f=a(this);var c=a.extend(true,{},b.options);var h=a.effects.setMode(f,b.options.mode||"hide");var g=parseInt(b.options.percent,10)||150;c.fade=true;var e={height:f.height(),width:f.width()};var d=g/100;f.from=(h=="hide")?e:{height:e.height*d,width:e.width*d};c.from=f.from;c.percent=(h=="hide")?g:100;c.mode=h;f.effect("scale",c,b.duration,b.callback);f.dequeue()})};a.effects.scale=function(b){return this.queue(function(){var g=a(this);var d=a.extend(true,{},b.options);var j=a.effects.setMode(g,b.options.mode||"effect");var h=parseInt(b.options.percent,10)||(parseInt(b.options.percent,10)==0?0:(j=="hide"?0:100));var i=b.options.direction||"both";var c=b.options.origin;if(j!="effect"){d.origin=c||["middle","center"];d.restore=true}var f={height:g.height(),width:g.width()};g.from=b.options.from||(j=="show"?{height:0,width:0}:f);var e={y:i!="horizontal"?(h/100):1,x:i!="vertical"?(h/100):1};g.to={height:f.height*e.y,width:f.width*e.x};if(b.options.fade){if(j=="show"){g.from.opacity=0;g.to.opacity=1}if(j=="hide"){g.from.opacity=1;g.to.opacity=0}}d.from=g.from;d.to=g.to;d.mode=j;g.effect("size",d,b.duration,b.callback);g.dequeue()})};a.effects.size=function(b){return this.queue(function(){var c=a(this),n=["position","top","left","width","height","overflow","opacity"];var m=["position","top","left","overflow","opacity"];var j=["width","height","overflow"];var p=["fontSize"];var k=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"];var f=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"];var g=a.effects.setMode(c,b.options.mode||"effect");var i=b.options.restore||false;var e=b.options.scale||"both";var o=b.options.origin;var d={height:c.height(),width:c.width()};c.from=b.options.from||d;c.to=b.options.to||d;if(o){var h=a.effects.getBaseline(o,d);c.from.top=(d.height-c.from.height)*h.y;c.from.left=(d.width-c.from.width)*h.x;c.to.top=(d.height-c.to.height)*h.y;c.to.left=(d.width-c.to.width)*h.x}var l={from:{y:c.from.height/d.height,x:c.from.width/d.width},to:{y:c.to.height/d.height,x:c.to.width/d.width}};if(e=="box"||e=="both"){if(l.from.y!=l.to.y){n=n.concat(k);c.from=a.effects.setTransition(c,k,l.from.y,c.from);c.to=a.effects.setTransition(c,k,l.to.y,c.to)}if(l.from.x!=l.to.x){n=n.concat(f);c.from=a.effects.setTransition(c,f,l.from.x,c.from);c.to=a.effects.setTransition(c,f,l.to.x,c.to)}}if(e=="content"||e=="both"){if(l.from.y!=l.to.y){n=n.concat(p);c.from=a.effects.setTransition(c,p,l.from.y,c.from);c.to=a.effects.setTransition(c,p,l.to.y,c.to)}}a.effects.save(c,i?n:m);c.show();a.effects.createWrapper(c);c.css("overflow","hidden").css(c.from);if(e=="content"||e=="both"){k=k.concat(["marginTop","marginBottom"]).concat(p);f=f.concat(["marginLeft","marginRight"]);j=n.concat(k).concat(f);c.find("*[width]").each(function(){child=a(this);if(i){a.effects.save(child,j)}var q={height:child.height(),width:child.width()};child.from={height:q.height*l.from.y,width:q.width*l.from.x};child.to={height:q.height*l.to.y,width:q.width*l.to.x};if(l.from.y!=l.to.y){child.from=a.effects.setTransition(child,k,l.from.y,child.from);child.to=a.effects.setTransition(child,k,l.to.y,child.to)}if(l.from.x!=l.to.x){child.from=a.effects.setTransition(child,f,l.from.x,child.from);child.to=a.effects.setTransition(child,f,l.to.x,child.to)}child.css(child.from);child.animate(child.to,b.duration,b.options.easing,function(){if(i){a.effects.restore(child,j)}})})}c.animate(c.to,{queue:false,duration:b.duration,easing:b.options.easing,complete:function(){if(g=="hide"){c.hide()}a.effects.restore(c,i?n:m);a.effects.removeWrapper(c);if(b.callback){b.callback.apply(this,arguments)}c.dequeue()}})})}})(jQuery);;(function(a){a.effects.shake=function(b){return this.queue(function(){var e=a(this),l=["position","top","left"];var k=a.effects.setMode(e,b.options.mode||"effect");var n=b.options.direction||"left";var c=b.options.distance||20;var d=b.options.times||3;var g=b.duration||b.options.duration||140;a.effects.save(e,l);e.show();a.effects.createWrapper(e);var f=(n=="up"||n=="down")?"top":"left";var p=(n=="up"||n=="left")?"pos":"neg";var h={},o={},m={};h[f]=(p=="pos"?"-=":"+=")+c;o[f]=(p=="pos"?"+=":"-=")+c*2;m[f]=(p=="pos"?"-=":"+=")+c*2;e.animate(h,g,b.options.easing);for(var j=1;j<d;j++){e.animate(o,g,b.options.easing).animate(m,g,b.options.easing)}e.animate(o,g,b.options.easing).animate(h,g/2,b.options.easing,function(){a.effects.restore(e,l);a.effects.removeWrapper(e);if(b.callback){b.callback.apply(this,arguments)}});e.queue("fx",function(){e.dequeue()});e.dequeue()})}})(jQuery);;(function(a){a.effects.slide=function(b){return this.queue(function(){var e=a(this),d=["position","top","left"];var i=a.effects.setMode(e,b.options.mode||"show");var h=b.options.direction||"left";a.effects.save(e,d);e.show();a.effects.createWrapper(e).css({overflow:"hidden"});var f=(h=="up"||h=="down")?"top":"left";var c=(h=="up"||h=="left")?"pos":"neg";var j=b.options.distance||(f=="top"?e.outerHeight({margin:true}):e.outerWidth({margin:true}));if(i=="show"){e.css(f,c=="pos"?-j:j)}var g={};g[f]=(i=="show"?(c=="pos"?"+=":"-="):(c=="pos"?"-=":"+="))+j;e.animate(g,{queue:false,duration:b.duration,easing:b.options.easing,complete:function(){if(i=="hide"){e.hide()}a.effects.restore(e,d);a.effects.removeWrapper(e);if(b.callback){b.callback.apply(this,arguments)}e.dequeue()}})})}})(jQuery);;(function(a){a.effects.transfer=function(b){return this.queue(function(){var f=a(this),h=a(b.options.to),e=h.offset(),g={top:e.top,left:e.left,height:h.innerHeight(),width:h.innerWidth()},d=f.offset(),c=a('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(b.options.className).css({top:d.top,left:d.left,height:f.innerHeight(),width:f.innerWidth(),position:"absolute"}).animate(g,b.duration,b.options.easing,function(){c.remove();(b.callback&&b.callback.apply(f[0],arguments));f.dequeue()})})}})(jQuery);;;